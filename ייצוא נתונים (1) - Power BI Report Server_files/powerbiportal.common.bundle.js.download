'use strict'; 
"use strict";
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] || (this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] = {});
marker.startEval = window.jsCommon && window.jsCommon.performance && window.jsCommon.performance.now ? window.jsCommon.performance.now() : Date.now(); marker.isExternal = false;
if (window.perfTracking && window.perfTracking.startBundleEval) window.perfTracking.startBundleEval('powerbiportal.common.bundle.min.js');var powerbi,__extends=this&&this.__extends||(function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}})(),__spreadArray=this&&this.__spreadArray||function(e,t){for(var r=0,i=t.length,a=e.length;r<i;r++,a++)e[a]=t[r];return e},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__decorate=this&&this.__decorate||function(e,t,r,i){var a,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(o=(n<3?a(o):3<n?a(t,r,o):a(t,r))||o);return 3<n&&o&&Object.defineProperty(t,r,o),o},__awaiter=this&&this.__awaiter||function(e,o,s,u){return new(s=s||Promise)(function(r,t){function i(e){try{n(u.next(e))}catch(e){t(e)}}function a(e){try{n(u.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,a)}n((u=u.apply(e,o||[])).next())})},__generator=this&&this.__generator||function(r,i){var a,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(o=2&t[0]?n.return:t[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,t[1])).done)return o;switch(n=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],n=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}};!(function(a){!(function(t){var e=jsCommon.Utility,r=a.telemetryEventFactory,i=a.telemetry.EventFactories;e?e.generateGuid:Function.prototype;t.DataQueryDataEventName="PBI.Data.QueryData",t.DataQueryData=i[t.DataQueryDataEventName]=function(e){return r({name:t.DataQueryDataEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["requestId","synchronous","fromCache","resultCount"],loggers:t.DataQueryDataLoggers})},t.DataQueryCancellationEventName="PBI.Data.QueryCancellation",t.DataQueryCancellation=i[t.DataQueryCancellationEventName]=function(e){return r({name:t.DataQueryCancellationEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.DataQueryCancellationLoggers,logRatio:1e-4})},t.DataClientCacheHitEventName="PBI.Data.ClientCacheHit",t.DataClientCacheHit=i[t.DataClientCacheHitEventName]=function(e){return r({name:t.DataClientCacheHitEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.DataClientCacheHitLoggers,logRatio:1e-4})},t.DataGetConceptualSchemaEventName="PBI.Data.GetConceptualSchema",t.DataGetConceptualSchema=i[t.DataGetConceptualSchemaEventName]=function(e){return r({name:t.DataGetConceptualSchemaEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["requestId"],loggers:t.DataGetConceptualSchemaLoggers})},t.DataClearConceptualSchemaCacheEventName="PBI.Data.ClearConceptualSchemaCache",t.DataClearConceptualSchemaCache=i[t.DataClearConceptualSchemaCacheEventName]=function(e){return r({name:t.DataClearConceptualSchemaCacheEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.DataClearConceptualSchemaCacheLoggers})},t.DataExecuteQueryEventName="PBI.Data.ExecuteQuery",t.DataExecuteQuery=i[t.DataExecuteQueryEventName]=function(e){return r({name:t.DataExecuteQueryEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["requestId"],loggers:t.DataExecuteQueryLoggers})},t.DataDsrToDataViewEventName="PBI.Data.DsrToDataView",t.DataDsrToDataView=i[t.DataDsrToDataViewEventName]=function(e){return r({name:t.DataDsrToDataViewEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["jsonparse","categorical","table","tree","matrix","single","script"],loggers:t.DataDsrToDataViewLoggers,logRatio:1e-4})},t.DataSampledDataViewKindAccessEventName="PBI.Data.SampledDataViewKindAccess",t.DataSampledDataViewKindAccess=i[t.DataSampledDataViewKindAccessEventName]=function(e){return r({name:t.DataSampledDataViewKindAccessEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.DataSampledDataViewKindAccessLoggers,logRatio:1e-4})},t.DataDataViewKindAccessEventName="PBI.Data.DataViewKindAccess",t.DataDataViewKindAccess=i[t.DataDataViewKindAccessEventName]=function(e){return r({name:t.DataDataViewKindAccessEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.DataDataViewKindAccessLoggers})}})(a.telemetry||(a.telemetry={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var u;function t(e,t,r,i,a,n,o,s){this.proxy=new u.ExecuteSemanticQueryProxy(e,t,a,r,n,o,i,s),this.featureSwitches=i,this.telemetryService=r}u=e.dsr||(e.dsr={}),t.prototype.execute=function(e){return this.proxy.execute(e)},t.prototype.transform=function(e,t,r,i){return void 0===e?{dataView:{metadata:{columns:[]},error:{code:"UndefinedData"}}}:u.read(t,e,this.featureSwitches,this.telemetryService,r,i)},t.prototype.stopCommunication=function(){this.proxy.stopCommunication()},t.prototype.resumeCommunication=function(){this.proxy.resumeCommunication()},Object.defineProperty(t.prototype,"cache",{get:function(){return this.proxy.cache()},enumerable:!1,configurable:!0}),t.prototype.setLocalCacheResult=function(e,t){this.proxy.setLocalCacheResult(e,t)},t.prototype.setPreferredMaxConnections=function(e){this.proxy.setPreferredMaxConnections(e)},u.DsrDataReader=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(a){!(function(e){var i;function t(e,t,r){r=r||{},this.promiseFactory=e.promiseFactory(),this.client=r.client||new i.BingSocialClient(t),this.tileRequestDataFactory=r.tileRequestDataFactory||new i.TileRequestDataFactory}i=e.bingSocial||(e.bingSocial={}),t.prototype.execute=function(e){var t=e.command,r=t.searchKey,e=t.queryType;if(!r||!e)return null;t=this.promiseFactory.defer(),e=this.tileRequestDataFactory.getTileRequestData(e);return e?this.client.requestData(t,r,e):t.reject(),a.createRejectablePromise2(t)},t.prototype.transform=function(e){return{dataView:e}},i.BingSocialDataReader=t})(a.data||(a.data={}))})(powerbi=powerbi||{}),(function(c){var o,e;function l(t,e,r,i,a){var n={};n[r]=!0;n={displayName:t,queryName:t,index:e,isMeasure:!i,type:i||c.ValueType.fromDescriptor({numeric:!0}),roles:n};return n=a?c.Prototype.inherit(n,(function(e){return e.objects={dataPoint:{fill:{solid:{color:a[t]}}}}})):n}function p(e,t){for(var r=0,i=t.split(".");r<i.length;r++){var a=i[r];if(!(null!=e&&a in e))return null;e=e[a]}return e}o=c.data||(c.data={}),(e=(e=o.bingSocial||(o.bingSocial={})).ChartDataViewConstructorUtils||(e.ChartDataViewConstructorUtils={})).createMetadataColumn=l,e.getFieldFromString=p,e.createDataView=function(e,t,r,i,a){void 0===(a=a||{}).percentize&&(a.percentize=!0);var n=o.SQExprBuilder.columnRef(o.SQExprBuilder.entity(null,"table"),"Column");return(a=o.createCategoricalDataViewBuilder().withCategory(function(e,t,r,i,a){for(var n=[],o=0,s=e;o<s.length;o++){var u=p(s[o],r);a&&!(u="function"==typeof a?a(u):a[u])||n.push(u)}return{source:l(_.last(r.split(".")),0,i,c.ValueType.fromDescriptor({text:!0})),identityFrom:{fields:[t]},values:n}}(e,n,t,r,a.mapping)).withValues(function(e,t,r){var i=_.map(e,(function(e){return e.Count})),e=l("Count",1,t);r.percentize&&(i=(function(e,t){return t.objects=t.objects||{},t.objects.general={formatString:"0%"},(function(e){var t=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/t}))})(e)})(i,e));t=_.min(i),r=_.max(i);return e.aggregates={min:t,max:r},{columns:[{source:e,values:i}]}}(e,i,a)).build()).metadata.objects={labels:{show:!0},categoryLabels:{show:!0}},a}})(powerbi=powerbi||{}),(function(d){!(function(c){var l;function p(){}l=c.bingSocial||(c.bingSocial={}),p.prototype.formatResponse=function(e){for(var e=e[0].value,t=0,r=e;t<r.length;t++){var i=r[t];i.source="Bing",i.CreatedAt=l.ChartDataViewConstructorUtils.getFieldFromString(i,"Request.RequestTime")}e=this.getCountsPerTime(e,"source");return this.createLineChartDataView(["Bing"],e,{Bing:"#FFB900"})},p.prototype.getCountsPerTime=function(e,t,r){for(var i={},a=0,n=e;a<n.length;a++){var o=n[a],s=o.CreatedAt,u=l.ChartDataViewConstructorUtils.getFieldFromString(o,t);r&&!(u=r[u])||(i[s]=i[s]||{},i[s][u]=o.Count)}return i},p.prototype.createLineChartDataView=function(e,t,r){var i=Object.keys(t),a=p.sortDateStrings(i),n=a.map((function(e){return new Date(e)})),o={},s={},u={},i={};p.getTableData(a,e,t,o,s,u,i);n={source:{queryName:"CreatedAt",displayName:"CreatedAt",type:d.ValueType.fromDescriptor({dateTime:!0}),index:0},values:n},r=this.createMetadataColumns(e,r);return{metadata:{columns:r},categorical:{values:c.DataViewTransform.createValueColumns(this.createValueColumns(e,r,o,s,u,i)),categories:[n]}}},p.getTableData=function(e,t,r,i,a,n,o){for(var s=0,u=t;s<u.length;s++)i[m=u[s]]=[],o[m]=0;for(var c=0,l=e;c<l.length;c++)for(var p=l[c],d=0,h=t;d<h.length;d++){var m=h[d],f=r[p][m]||0;i[m].push(f),a[m]=a[m]?Math.max(a[m],f):f,n[m]=n[m]?Math.min(n[m],f):f,o[m]+=f}},p.prototype.createMetadataColumns=function(e,t){for(var r=[l.ChartDataViewConstructorUtils.createMetadataColumn("CreatedAt",0,"Category",d.ValueType.fromDescriptor({text:!0}))],i=0;i<e.length;i++){var a=e[i],a=l.ChartDataViewConstructorUtils.createMetadataColumn(a,i+1,"Y",null,t);r.push(a)}return r},p.prototype.createValueColumns=function(e,t,r,i,a,n){for(var o=[],s=0;s<e.length;s++){var u=e[s];o.push(p.createValueColumn(r[u],a[u],i[u],n[u],t[s+1]))}return o},p.createValueColumn=function(e,t,r,i,a){return{source:a,values:e,min:t,max:r,subtotal:i}},p.sortDateStrings=function(e){return e.sort((function(e,t){return new Date(e).getTime()-new Date(t).getTime()}))},l.ActivityChartResponseFormatter=p})(d.data||(d.data={}))})(powerbi=powerbi||{}),(function(r){!(function(e){function t(){}e=e.bingSocial||(e.bingSocial={}),t.prototype.formatResponse=function(e){var t=parseInt(e[0],10),r=parseInt(e[1],10);if(0===r){e=this.getMetadata("N/A");return{single:{value:0,column:e.columns[0]},metadata:e}}t=(t-r)/r,r=this.getMetadata("+0.0%;-0.0%");return{single:{value:t,column:r.columns[0]},metadata:r}},t.prototype.getMetadata=function(e){return{columns:[{displayName:"Count Change",isMeasure:!0,type:r.ValueType.fromDescriptor({numeric:!0}),objects:{general:{formatString:e}}}]}},e.CountChangeResponseFormatter=t})(r.data||(r.data={}))})(powerbi=powerbi||{}),(function(r){!(function(e){function t(){}e=e.bingSocial||(e.bingSocial={}),t.prototype.formatResponse=function(e){var t={displayName:"Count",isMeasure:!0,type:r.ValueType.fromDescriptor({integer:!0})};return{single:{value:e[0],column:t},metadata:{columns:[t]}}},e.CountResponseFormatter=t})(r.data||(r.data={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){}e=e.bingSocial||(e.bingSocial={}),t.prototype.formatResponse=function(e){return{metadata:{columns:[]},bingSocial:e[0].value}},e.RawDataResponseFormatter=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){}e=e.bingSocial||(e.bingSocial={}),t.prototype.formatResponse=function(e){return{metadata:{columns:[]},bingSocial:e[0].value}},e.BingNewsResponseFormatter=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(s){!(function(n){var o;function e(e,t){this.fieldName=e,this.options=t||{}}o=n.bingSocial||(n.bingSocial={}),e.prototype.formatResponse=function(e){var t=e[0].value;if(this.options.logarithmic)for(var r=0,i=t;r<i.length;r++){var a=i[r];a.Count=Math.log(a.Count)}e=o.ChartDataViewConstructorUtils.createDataView(t,this.fieldName,"Category","Y",{mapping:this.options.mapping,percentize:!1});e.metadata.columns[0].type=s.ValueType.fromDescriptor({geography:{country:!0}});t={selects:[{type:s.ValueType.fromDescriptor({text:!0}),roles:{Category:!0}},{type:s.ValueType.fromDescriptor({numeric:!0}),roles:{Y:!0,Gradient:!0}}],objects:{dataPoint:[{properties:{fillRule:{linearGradient2:{min:{color:n.SQExprBuilder.text("#FFF0CC")},max:{color:n.SQExprBuilder.text("#FFB600")}}}}}]}};return n.DataViewTransform.apply({prototype:e,objectDescriptors:{dataPoint:{properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}}},transforms:t,colorAllocatorFactory:window.powerbi.visuals.createColorAllocatorFactory(),dataViewMappings:window.powerbi.visuals.getTreemapCapabilities().dataViewMappings,dataRoles:null,visualStyle:s.visuals.visualStyles.create(),featureSwitches:{}}).dataViews[0]},o.MapResponseFormatter=e})(s.data||(s.data={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var t;function r(e,t){this.fieldName=e,this.options=t||{}}t=e.bingSocial||(e.bingSocial={}),r.prototype.formatResponse=function(e){e=e[0].value;return t.ChartDataViewConstructorUtils.createDataView(e,this.fieldName,"Group","Values",this.options)},t.TreeMapResponseFormatter=r})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.urlTemplates=e,this.responseFormatter=t}e=e.bingSocial||(e.bingSocial={}),t.prototype.getUrlTemplates=function(){return this.urlTemplates},t.prototype.getResponseFormatter=function(){return this.responseFormatter},e.TileRequestData=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function a(){}e=e.bingSocial||(e.bingSocial={}),a.prototype.getTileRequestData=function(e){return a.tileRequestData[e]},a.createUrl=function(e,t){return"powerbi/providers/bingsocial/?source={{source}}&type={{type}}&searchKey={{searchKey}}&newsApiVersion={{newsApiVersion}}".replace(/{{source}}/g,e).replace(/{{type}}/g,t).replace(/{{newsApiVersion}}/g,"v6")},a.languageMapping={aa:"Afar",af:"Afrikaans",agq:"Aghem",ak:"Akan",sq:"Albanian",gsw:"Alsatian",am:"Amharic",ar:"Arabic",hy:"Armenian",as:"Assamese",ast:"Asturian",asa:"Asu","az-Cyrl":"Azerbaijani (Cyrillic)","az-Latn":"Azerbaijani (Latin)",ksf:"Bafia","bm-Latn":"Bamanankan (Latin)",bn:"Bangla",bas:"Basaa",ba:"Bashkir",eu:"Basque",be:"Belarusian",bem:"Bemba",bez:"Bena",byn:"Blin",brx:"Bodo","bs-Cyrl":"Bosnian (Cyrillic)","bs-Latn":"Bosnian (Latin)",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan","tzm-Arab":"Central Atlas Tamazight (Arabic)","tzm-Latn":"Central Atlas Tamazight (Latin)","tzm-Tfng":"Central Atlas Tamazight (Tifinagh)","ku-Arab":"Central Kurdish","chr-Cher":"Cherokee (Cherokee)",cgg:"Chiga","zh-Hans":"Chinese (Simplified)","zh-Hant":"Chinese (Traditional)",swc:"Congo Swahili",kw:"Cornish",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",prs:"Dari",dv:"Divehi",dua:"Duala",nl:"Dutch",dz:"Dzongkha",bin:"Edo",ebu:"Embu",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",ewo:"Ewondo",fo:"Faroese",fil:"Filipino",fi:"Finnish",fr:"French",fur:"Friulian","ff-Latn":"Fulah",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",el:"Greek",kl:"Greenlandic",gn:"Guarani",gu:"Gujarati",guz:"Gusii",ht:"Haitian","ha-Latn":"Hausa (Latin)",haw:"Hawaiian",he:"Hebrew",hi:"Hindi",mww:"Hmong Daw",hu:"Hungarian",is:"Icelandic",ig:"Igbo",smn:"Inari Sami",id:"Indonesian",ia:"Interlingua","iu-Cans":"Inuktitut (Canadian Aboriginal Syllabics)","iu-Latn":"Inuktitut (Latin)",iv:"Invariant Language",ga:"Irish",xh:"isiXhosa",zu:"isiZulu",it:"Italian",ja:"Japanese","jv-Latn":"Javanese (Latin)",dyo:"Jola-Fonyi",quc:"K'iche'",kea:"Kabuverdianu",kab:"Kabyle",kkj:"Kako",kln:"Kalenjin",kam:"Kamba",kn:"Kannada",kr:"Kanuri","ks-Deva":"Kashmiri (Devanagari)","ks-Arab":"Kashmiri (Perso-Arabic)",kk:"Kazakh",km:"Khmer",ki:"Kikuyu",rw:"Kinyarwanda",sw:"Kiswahili",kok:"Konkani",ko:"Korean",khq:"Koyra Chiini",ses:"Koyraboro Senni",nmg:"Kwasio",ky:"Kyrgyz",lkt:"Lakota",lag:"Langi",lo:"Lao",lv:"Latvian",ln:"Lingala",lt:"Lithuanian",dsb:"Lower Sorbian",lu:"Luba-Katanga",smj:"Lule Sami",luo:"Luo",lb:"Luxembourgish",luy:"Luyia",mk:"Macedonian",jmc:"Machame",mgh:"Makhuwa-Meetto",kde:"Makonde",mg:"Malagasy",ms:"Malay (Latin)",ml:"Malayalam",mt:"Maltese",mni:"Manipuri",gv:"Manx",mi:"Maori",arn:"Mapudungun",mr:"Marathi",mas:"Masai",mer:"Meru",mgo:"Meta'",moh:"Mohawk","mn-Cyrl":"Mongolian (Cyrillic)","mn-Mong":"Mongolian (Traditional Mongolian)",mfe:"Morisyen",mua:"Mundang",nqo:"N'Ko",naq:"Nama",ne:"Nepali",nnh:"Ngiemboon",jgo:"Ngomba",nd:"North Ndebele",kmr:"Northern Kurdish",se:"Northern Sami",nb:"Norwegian Bokmål",nn:"Norwegian Nynorsk",nus:"Nuer",nyn:"Nyankole",oc:"Occitan",or:"Odia",om:"Oromo","os-Cyrl":"Ossetian (Cyrillic)",pap:"Papiamento",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese","pa-Arab":"Punjabi (Arabic)","pa-Guru":"Punjabi (Gurmukhi)",quz:"Quechua",otq:"Querétaro Otomi",ksh:"Ripuarian",ro:"Romanian",rm:"Romansh",rof:"Rombo",rn:"Rundi",ru:"Russian",rwk:"Rwa",ssy:"Saho",sah:"Sakha",saq:"Samburu",sg:"Sango",sbp:"Sangu",sa:"Sanskrit",gd:"Scottish Gaelic",seh:"Sena","sr-Cyrl":"Serbian (Cyrillic)","sr-Latn":"Serbian (Latin)",st:"Sesotho",nso:"Sesotho sa Leboa",tn:"Setswana",ksb:"Shambala",sn:"Shona","sd-Arab":"Sindhi (Arabic)","sd-Deva":"Sindhi (Devanagari)",si:"Sinhala",ss:"siSwati",sms:"Skolt Sami",sk:"Slovak",sl:"Slovenian",xog:"Soga",so:"Somali",nr:"South Ndebele",sma:"Southern Sami",es:"Spanish","zgh-Tfng":"Standard Moroccan Tamazight (Tifinagh)",sv:"Swedish",syr:"Syriac","shi-Latn":"Tachelhit (Latin)","shi-Tfng":"Tachelhit (Tifinagh)",dav:"Taita","tg-Cyrl":"Tajik (Cyrillic)",ta:"Tamil",twq:"Tasawaq","tt-Cyrl":"Tatar (Cyrillic)",te:"Telugu",teo:"Teso",th:"Thai",bo:"Tibetan",tig:"Tigre",ti:"Tigrinya",to:"Tongan",tr:"Turkish","tk-Latn":"Turkmen (Latin)",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu","ug-Arab":"Uyghur (Arabic)","uz-Cyrl":"Uzbek (Cyrillic)","uz-Latn":"Uzbek (Latin)","uz-Arab":"Uzbek (Perso-Arabic)","vai-Latn":"Vai (Latin)","vai-Vaii":"Vai (Vai)","ca-ES-valencia":"Valencian",ve:"Venda",vi:"Vietnamese",vo:"Volapük",vun:"Vunjo",wae:"Walser",cy:"Welsh",fy:"Western Frisian",wal:"Wolaytta",wo:"Wolof",ts:"Xitsonga",yav:"Yangben",ii:"Yi",yi:"Yiddish",yo:"Yoruba",yua:"Yucatec Maya",dje:"Zarma",az:"Azerbaijani",bm:"Bamanankan",bs:"Bosnian",tzm:"Central Atlas Tamazight",chr:"Cherokee",zh:"Chinese",ha:"Hausa",iu:"Inuktitut",jv:"Javanese",ks:"Kashmiri",mn:"Mongolian",os:"Ossetian",pa:"Punjabi",sr:"Serbian",sd:"Sindhi",zgh:"Standard Moroccan Tamazight",shi:"Tachelhit",tg:"Tajik",tt:"Tatar",tk:"Turkmen",ug:"Uyghur",uz:"Uzbek",vai:"Vai"},a.languageOptions={mapping:function(e){if("string"==typeof e&&e){for(var t,r=e;r;){if(r in a.languageMapping){t=a.languageMapping[r];break}var i=Math.max(r.lastIndexOf("-"),0),r=r.substring(0,i)}return t||e}}},a.tileRequestData={bingVolume:new e.TileRequestData([a.createUrl("Bing","Volume")],new e.CountResponseFormatter),bingVolumeChange:new e.TileRequestData([a.createUrl("Bing","Volume"),a.createUrl("Bing","VolumeChange")],new e.CountChangeResponseFormatter),activity:new e.TileRequestData([a.createUrl("Bing","Activity")],new e.ActivityChartResponseFormatter),languages:new e.TileRequestData([a.createUrl("Bing","Language")],new e.TreeMapResponseFormatter("Query._Microsoft.Language",a.languageOptions)),news:new e.TileRequestData([a.createUrl("Bing","News")],new e.BingNewsResponseFormatter),location:new e.TileRequestData([a.createUrl("Bing","Location")],new e.MapResponseFormatter("User.Country",{logarithmic:!0}))},e.TileRequestDataFactory=a})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(u){u.createDataReaderFactory=function(e,t){return new r(e,t)};var r=(e.prototype.getPlugin=function(e){return this.plugins[a(e)]},e.prototype.getExtension=function(e){return this.extensions[e]},e);function e(e,r){if(r)for(var t in r)!(function(t){_.find(e,(function(e){return e.name===r[t].extends})),r[t].extends,_.some(e,(function(e){return e.name===r[t].name}))})(t);this.plugins=e,this.extensions=r||{}}function a(e){return e||"dsr"}!(function(e){function o(e){return a(e.type)}function r(e){if(e){var t=[];return new i(t).run(e),t}}function s(e,t){for(var r=[],i=0,a=e;i<a.length;i++){var n=a[i];(_.isEmpty(t)||_.includes(t,n.name))&&(n=o(n),_.includes(r,n)||r.push(n))}return r}e.findTypes=function(e,t){return s(e,r(t))},e.findTypesFromExprs=function(e,t){if(_.isEmpty(e))return[];if(!_.isEmpty(t)){for(var r=[],i=0,a=t;i<a.length;i++){var n=a[i];n instanceof u.SQColumnRefExpr&&(n=n.getTargetEntity(),r.push(n.schema))}r=_.uniq(r)}return s(e,r)},e.readerType=o,e.findSchemas=r,e.uniqueReaderTypes=function(e){return _.chain(e).map(o).uniq().value()};var i=(t.prototype.run=function(e){for(var t=e.from(),r=0,i=t.keys();r<i.length;r++){var a=i[r];t.source(a).accept(this,void 0)}},t.prototype.visitEntity=function(e){this.visitEntityOrPod(e)},t.prototype.visitPod=function(e){this.visitEntityOrPod(e)},t.prototype.visitSubquery=function(e){this.run(e.subquery)},t.prototype.visitExpr=function(e){},t.prototype.visitEntityOrPod=function(e){var t=e.schema,e=this.schemas;_.includes(e,t)||e.push(t)},t);function t(e){this.schemas=e}})(u.DataReaderUtils||(u.DataReaderUtils={}))})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(u){var i=jsCommon.ArrayExtensions;u.createDataReaderProvider=function(e,t){return new r(e,t)};var r=(e.prototype.reader=function(e){var t=this;return this.findSinglePropertyDefinition(i.ensureArray(e),(function(e){return e.reader(t.hostServices)}),_.noop,this.readers)},e.prototype.readerType=function(e){var t=this,e=this.resolvePluginProperty(i.ensureArray(e),(function(e){return e.reader(t.hostServices)}),_.noop,this.readers);return e&&e.type},e.prototype.queryGenerator=function(e){return this.findSinglePropertyDefinition(i.ensureArray(e),(function(e){return e.queryGenerator&&e.queryGenerator()}),_.noop,this.queryGen)},e.prototype.queryExtensionLookup=function(e){var t=i.ensureArray(e),r=_.chain(t).map((function(e){return u.DataReaderUtils.readerType(e)})).uniq().value(),e=this.findSingleBasePropertyDefinition(r,(function(e){return e.queryExtensionProvider&&a(e.name,t,e.queryExtensionProvider)}));return (function(r,i){if(r||i)return r?function(e,t){return r(e,t,i)}:i})(this.findSingleExtensionPropertyDefinition(r,(function(e){return e.queryExtensionProvider&&a(e.name,t,e.queryExtensionProvider)})),e)},e.prototype.schemaReader=function(e){var t=this;return this.findSinglePropertyDefinition([e],(function(e){return e.schemaReader&&e.schemaReader(t.hostServices)}),(function(e){return e.schemaReader&&e.schemaReader(t.hostServices)}),this.schemaReaders)},e.prototype.getCacheKey=function(e){e=i.ensureArray(e);return e.length<2?e[0]:"["+e.join(",")+"]"},e.prototype.findSinglePropertyDefinition=function(e,t,r,i){var a=this.getCacheKey(e),n=i[a];if(n)return n;r=this.resolvePluginProperty(e,t,r,i);return r?i[a]=r.property:void 0},e.prototype.findSingleExtensionPropertyDefinition=function(e,t){for(var r,i=0,a=e;i<a.length;i++){var n=a[i],o=this.factory.getPlugin(n);if(o){if(s&&s!==o.name)return;s=o.name}else{n=this.factory.getExtension(n);if(!n)return;if(s&&s!==n.extends)return;var s=n.extends,n=t(n);if(n){if(r&&n!==r)return;r=n}}}return r},e.prototype.findSingleBasePropertyDefinition=function(e,t){for(var r,i=0,a=e;i<a.length;i++){var n=a[i],n=this.factory.getPlugin(n);if(n){if(o&&o!==n.name)return;var o=n.name,n=t(n);if(n){if(r&&n!==r)return;r=n}}}return r},e.prototype.resolvePluginProperty=function(e,t,r,i){for(var a,n=0,o=e;n<o.length;n++){var s=o[n],s=this.resolveProperty(s,t,r,i);if(!s||a&&s.property!==a.property)return;a=s}return a},e.prototype.resolveProperty=function(e,t,r,i){var a,n;if(i&&(n=i[a=this.getCacheKey(e)]))return{type:e,property:n};var o=this.factory.getPlugin(e);if(o)return(n=t(o))?(i&&(i[a]=n),{type:e,property:n}):void 0;o=this.factory.getExtension(e);return o?(n=r(o))?(i&&(i[a]=n),{type:e,property:n}):this.resolveProperty(o.extends,t,r,i):void 0},e);function e(e,t){this.factory=e,this.hostServices=t,this.readers={},this.queryGen={},this.schemaReaders={}}function a(e,t,r){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a],s=u.DataReaderUtils.readerType(o);s===e&&i.push(o[s])}return r(i)}})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){function r(e){e.dataReductionAlgorithm||(function(e){e=e.select;return!!e&&_.some(e,(function(e){return!!e.dataReductionAlgorithm}))})(e)||(e.dataReductionAlgorithm=i())}function i(){return{top:{}}}((e=e.data||(e.data={})).Impl||(e.Impl={})).applyDataReductionDefaults=function(e){var t;e.categorical&&((t=e.categorical).dataReductionAlgorithm||(t.categories&&r(t.categories),(t=t.values)&&t.group&&(function(e){e.group,e.group.dataReductionAlgorithm||(e.group.dataReductionAlgorithm=i())})(t))),!e.table||(t=e.table).rows&&r(t.rows),e.matrix&&(function(e){e.rows&&r(e.rows);e.columns&&r(e.columns)})(e.matrix)}})(powerbi=powerbi||{}),(function(e){var a;(a=e.data||(e.data={})).applyDataReductionDefaults=function(e){for(var t=e.length,r=0;r<t;r++){var i=e[r];a.Impl.applyDataReductionDefaults(i)}}})(powerbi=powerbi||{}),(function(f){!(function(m){var c=jsCommon.ArrayExtensions;m.compileDataView=function(e){var t=e.mappings;if(!t)return[];var r=e.roles||[],e=new a(e.queryDefn,e.queryProjections,e.schema,e.objectDescriptors,e.objectDefinitions,e.roles||[],e.featureSwitches,e.transformPluginService),i=new m.DataViewMappingCompiler(e,r);return _.map(t,(function(e){return i.compileMapping(e)}))};var a=(e.prototype.compileRole=function(e,t){var r,i,a=this,n=this.queryDefn.select(),o=this.queryProjections[e],s=c.findItemWithName(this.roles,e);o&&0<o.all().length&&(r=!1,s&&(r=m.ScalarKeyUtils.isScalarKeySupportedForRole(this.schema,this.queryDefn,this.queryProjections,s.name)),i=this.getScalarKeyRoleItemQueryRef(o),(u=_.map(o.all(),(function(e){var t=e.queryRef===i;return a.createDataViewRoleItem(n.withName(e.queryRef),s,r,t)}))).filter((function(e){return e.scalarKeyInfo&&e.scalarKeyInfo.hasScalarKey})).length);var u={role:e,items:u},e=this.queryProjections[e];return e&&(e.showAll&&(u.showAll=!0),e.activeProjectionRefs&&(u.activeItems=e.activeProjectionRefs)),t&&(u.aggregates=_.cloneDeep(t)),u},e.prototype.getScalarKeyRoleItemQueryRef=function(e){_.isEmpty(e.all());var t=e.activeProjectionRefs;return _.isEmpty(t)?e.all()[0].queryRef:_.last(t)},e.prototype.createDataViewRoleItem=function(e,t,r,i){var a={queryName:e.name},n=this.tryGetExprType(e.expr);if(n&&(a.type=n),t&&null!=t.joinPredicate)a.joinPredicate=t.joinPredicate;else if(m.SQExpr.isTransformOutputRoleRef(e.expr)){t=this.queryDefn.transforms();if(!_.isEmpty(t))for(var o=!1,s=0,u=t;s<u.length;s++){var c=u[s],c=null===(c=this.transformPluginService.getTransformPlugin(c.algorithm))||void 0===c?void 0:c.outputRoles;if(!_.isEmpty(c))for(var l=0,p=c;l<p.length;l++){var d=p[l];if(d.algorithmRole===e.expr.role&&null!=d.joinPredicateBehavior){a.joinPredicate=d.joinPredicateBehavior,o=!0;break}}if(o)break}}return a.scalarKeyInfo={hasScalarKey:r&&i},a},e.prototype.tryGetExprType=function(e){e=e.getMetadata(this.schema,this.exprEvaluationContext);if(e)return e.type},e.prototype.compileMetadata=function(){for(var i={columns:[]},a=this.queryDefn.orderBy(),n=this,e=0,t=this.queryDefn.select();e<t.length;e++)!(function(t){var e=_.find(a,(function(e){return m.SQExpr.equals(e.expr,t.expr)})),r=m.SQExprUtils.getParameterMetadata(t.expr,n.schema);i.columns.push({displayName:void 0,queryName:t.name,type:n.tryGetExprType(t.expr),sort:e&&e.direction,parameter:r})})(t[e]);var r=this.objectDescriptors,o=this.objectDefinitions;if(!o||!r)return i;var s=m.DataViewObjectEvaluationUtils.groupObjectsBySelector(o),u=m.createEmptyEvalContext(),c=f.visuals.visualStyles.create();if(_.isEmpty(s.metadataOnce)||(d=this.evaluateMetadataOnceObjects(s.metadataOnce,u,c))&&(i.objects=d),!_.isEmpty(s.metadata))for(var l=0,p=i.columns;l<p.length;l++){var d,h=p[l];(d=this.evaluateMetadataObjects(h,s.metadata,u,c))&&(h.objects=d)}return i},e.prototype.evaluateMetadataOnceObjects=function(e,t,r){for(var i,a=new m.DataViewObjectEvaluator(this.featureSwitches,r),n=0,o=e;n<o.length;n++){var s=o[n],u=s.selector&&s.selector.id,s=m.DataViewObjectEvaluationUtils.evaluateDataViewObjects(a,t,this.objectDescriptors,s.objects);s&&f.DataViewObjects.mergeObjects(i=i||{},s,u)}return i},e.prototype.evaluateMetadataObjects=function(e,t,r,i){for(var a,n=new m.DataViewObjectEvaluator(this.featureSwitches,i),o=0,s=t;o<s.length;o++){var u=s[o],c=u.selector;!c.metadata||c.metadata!==e.queryName||(u=m.DataViewObjectEvaluationUtils.evaluateDataViewObjects(n,r,this.objectDescriptors,u.objects))&&f.DataViewObjects.mergeObjects(a=a||{},u,c.id)}return a},e.prototype.compileScriptDefinition=function(e,t){t=f.ScriptResultUtil.getScriptInputFromScriptDefinition(this.queryProjections,this.queryDefn.select(),this.schema,e,t.objects);return{source:e.source,provider:e.provider,scriptInput:t,scriptSourceDefault:e.scriptSourceDefault,scriptProviderDefault:e.scriptProviderDefault,scriptOutputType:e.scriptOutputType}},e);function e(e,t,r,i,a,n,o,s){this.featureSwitches=o,this.transformPluginService=s,this.queryDefn=e,this.queryProjections=t,this.schema=r,this.objectDescriptors=i,this.objectDefinitions=a,this.roles=n,this.exprEvaluationContext=m.SQExprUtils.buildExprEvaluationContext(this.queryDefn.from())}})(f.data||(f.data={}))})(powerbi=powerbi||{}),(function(e){var u,c;function n(e,t,r,i){var a=e&&e[t]&&e[t][r];if(a){for(var n=a.currentId;a&&c.lt(i,a.version);)n=a.previousId,a=a.previous;return n}}function o(e,t,r,i,a,n,o,s){return c.max(l(e[u.ObjectPropertyVersionWildcard],a,n,t,r,o,s),l(e[i],a,n,t,r,o,s))}function l(e,t,r,i,a,n,o){t=e&&e[t];return t?c.max(s(t[u.ObjectPropertyVersionWildcard],i,a,n,o),s(t[r],i,a,n,o)):c.ZeroStr}function s(e,t,r,i,a){if(!e)return c.ZeroStr;for(var n=e.length-1;0<=n;n--){var o=e[n];if(n&&c.lt(o.version,e[n-1].version),!c.lt(i,o.version))break;var s=o.property.matchByContents;if((!s||s(t,r))&&(!o.property.isExprBound||a()))return o.version}return c.ZeroStr}u=e.data||(e.data={}),c=jsCommon.Version,u.ObjectPropertyVersionWildcard="*",(e=u.DataViewObjectVersioning||(u.DataViewObjectVersioning={})).getThemePropertyId=function(e,t,r,i,a){return n(a[e],t,r,i)||n(a[u.ObjectPropertyVersionWildcard],t,r,i)||{objectName:t,propertyName:r}},e.shouldApplyDefnToTheme=function(e,t,r,i,a,n){return o(e,t,null,r,i,a,n,(function(){return!1}))===c.ZeroStr},e.getVersionForDefinition=o,e.getFirstVersionForIdentifier=function(e,t,r){if(r=e[r]){r=r[t.objectName];if(r){t=r[t.propertyName];return _.reduce(t,(function(e,t){return t.property.matchByContents||t.property.isExprBound?e:c.max(e,t.version)}),c.ZeroStr)}}return c.ZeroStr}})(powerbi=powerbi||{}),(function(e){var c,h;function v(e,t){t=e.indexOf(t);0<=t&&e.splice(t,1)}function m(e,t){var r=t.categories;if(r)for(var i=0,a=r;i<a.length;i++){var n=a[i];n.values.splice(0),n.identity.splice(0)}var o=t.values;if(o){var s=o.grouped();if(!_.isEmpty(s)){for(var t=s[0],u=e.columns,c=0,l=t.values;c<l.length;c++)!(function(e){var t,r=e.source;r.groupName&&((t=_.find(u,(function(e){return!e.groupName&&e.index===r.index&&e.isMeasure===r.isMeasure})))?(e.source=t,v(u,r)):delete r.groupName)})(l[c]);var p=[{values:t.values,objects:t.objects}];if(o.grouped=function(){return p},2<=s.length){t=t.values.length;if(0<t){for(var s=t*(s.length-1),d=t,h=t+s;d<h;d++){var m=o[d].source;v(u,m)}o.splice(t,s)}}}for(var f=0,y=o;f<y.length;f++){var g=y[f];g.values.splice(0),delete g.identity}}r&&_.every(r,(function(e){return _.isEmpty(e.values)&&_.isEmpty(e.identity)})),o&&_.every(o.grouped(),(function(e){return!e.name&&!e.identity})),o&&_.every(o,(function(e){return _.isEmpty(e.values)}))}function f(e,t){if(h.isSortedNumeric(t,!0),_.uniq(t).length,t.length,!_.isEmpty(t))if(0<=_.last(t)&&(_.head(t),e.length),e.length!==t.length){for(var r,i=0,a=0,n=t;a<n.length;a++){var o=n[a];void 0===r||r===o+1?(r=o,i++):(e.splice(r,i),r=o,i=1)}e.splice(r,i)}else e.splice(0)}c=e.data||(e.data={}),h=jsCommon.ArrayExtensions,(c.QueryDataViewCategorical||(c.QueryDataViewCategorical={})).removeGroupInstances=function(e,t,r,i){var a,n,o;i&&(a=e,o=i,i=(n=t).values&&n.values.grouped(),_.isEmpty(i)||(o=(function(e,t,r){for(var i=[],a=t.length-1;0<=a;a--)r(t[a],e)&&i.push(a);return i})(n.values&&n.values.source,i,o),(function(e,t,r){if(debug.assertValue(t&&t.values&&!_.isEmpty(t.values.grouped()),"dataViewCategorical must be defined and the grouped() function must return non-empty result"),h.isSortedNumeric(r,true),_.uniq(r).length,r.length,!_.isEmpty(r)){var i=t.values,a=i.grouped();if(a.length!==r.length){var n=a[0].values.length;if(_.every(a,(function(e){return e.values.length===n})),0<n)for(var o=e.columns,s=0,u=r;s<u.length;s++){var c=u[s]*n;i.length;for(var l=c,p=c+n;l<p;l++){var d=i[l].source;v(o,d)}i.splice(c,n)}f(a,r),i.grouped=function(){return a}}else m(e,t)}})(a,n,o))),r&&(o=e,e=r,t=(r=t).categories,_.isEmpty(t)||(e=(function(e,t){var r=e[0].values.length;_.every(e,(function(e){return e.values.length===r}));for(var i=[],a=r-1;0<=a;a--)t(a,e)&&i.push(a);return i})(t,e),(function(e,t,r){if(debug.assertValue(t,"dataViewCategorical"),h.isSortedNumeric(r,true),_.uniq(r).length,r.length,!_.isEmpty(r))if(c.DataViewCategoricalUtils.getRowCount(t)!==r.length){c.DataViewCategoricalUtils.getRowCount(t);var i=t.categories;if(!_.isEmpty(i))for(var a=0,n=i;a<n.length;a++){var o=n[a];f(o.values,r),f(o.identity,r)}i=t.values;if(!_.isEmpty(i))for(var s=0,u=i;s<u.length;s++)f(u[s].values,r)}else m(e,t)})(o,r,e)))}})(powerbi=powerbi||{}),(function(m){!(function(i){var a,e,n=m.data.QueryDataViewCategorical,o=jsCommon.StringExtensions;function s(e){e=e.Condition;if(e.Contains)return e.Contains.SelectIndex;JSON.stringify(e)}function u(e,t){if(_.isEmpty(e)||_.isEmpty(t))return[];for(var r={},i=0,a=t;i<a.length;i++){var n=a[i];r[n.index]=!0}return _.filter(e,(function(e){e=s(e);return!!r[e]}))}function c(e,t){var r=!1,e=e.Condition;return e.Contains?(e.Contains.LiteralValue,l(e.Contains.LiteralValue),r=!_.isString(t)||(t=l(t),!o.contains(t,e.Contains.LiteralValue))):JSON.stringify(e),r}function l(e){return e&&o.normalizeCase(e)}(e=a=i.ClientSideFilter||(i.ClientSideFilter={})).isMoreRestrictiveFilter=function(e,t){if(!i.SQFilter.targetsEqual(e,t))return!1;if(e=e.condition,t=t.condition,e instanceof i.SQContainsExpr&&t instanceof i.SQContainsExpr){e=p.getInfoIfFilteringByStringConstant(e),t=p.getInfoIfFilteringByStringConstant(t);if(e&&t&&i.SQExpr.equals(e.otherSide,t.otherSide))return o.contains(l(e.constantValue),l(t.constantValue))}return!1},e.tryConvertToClientSideFilters=function(e,t){if(!_.some(t,(function(e){return!!e.target}))){for(var r=new h(e),i=0,a=t;i<a.length;i++)a[i].condition.accept(r);return r.getClientSideFiltersIfAllSupported()}},e.applyClientSideFilters=function(e,t){if(!_.isEmpty(t)&&!_.isEmpty(e.metadata.columns)){_.every(t,(function(t){return _.some(e.metadata.columns,(function(e){return!e.isMeasure&&e.index===s(t)}))}));var r,i=e.categorical;return i&&(r=(function(e,t){if(debug.assertAnyValue(e,"seriesMetadataColumn"),e){var a=u(t,[e]);if(!_.isEmpty(a))return function(e){if(!!e.identity)for(var t=e.name,r=0,i=a;r<i.length;r++)if(c(i[r],t))return!0;return!1}}})(i.values&&i.values.source,t),t=(function(e,t){var n=u(t,_.map(e,(function(e){return e.source})));if(!_.isEmpty(n))return function(r,e){for(var t=0,i=n;t<i.length;t++){var a=(function(t){if(_.every(e,(function(e){return c(t,e.values[r])})))return{value:!0}})(i[t]);if("object"==typeof a)return a.value}return!1}})(i.categories,t),n.removeGroupInstances(e.metadata,i,t,r)),e}},e.normalizeString=l;var r,p,d,h=(r=i.DefaultSQExprVisitor,__extends(t,r),t.prototype.visitContains=function(e){var t,r;this.hasUnsupportedFilter()||(t=!1,(r=p.getInfoIfFilteringByStringConstant(e))&&(e=r.constantValue,0<=(r=i.SQExprUtils.indexOfNamedExpr(this.selects,r.otherSide))&&e&&(e={Condition:{Contains:{SelectIndex:r,LiteralValue:a.normalizeString(e)}}},this.clientSideFilters.push(e),t=!0)),t||this.setUnsupportedFilter())},t.prototype.visitAnd=function(e){this.hasUnsupportedFilter()||(e.left.accept(this),e.right.accept(this))},t.prototype.visitDefault=function(e){this.setUnsupportedFilter()},t.prototype.getClientSideFiltersIfAllSupported=function(){if(!this.hasUnsupportedFilter())return this.clientSideFilters},t.prototype.hasUnsupportedFilter=function(){return void 0===this.clientSideFilters},t.prototype.setUnsupportedFilter=function(){this.clientSideFilters=void 0},t);function t(e){var t=r.call(this)||this;return t.clientSideFilters=[],t.selects=e,t}(d=p=p||{}).getInfoIfFilteringByStringConstant=function(e){if(e){var t=d.getValueIfStringConstant(e.left);return t?{constantValue:t,otherSide:e.right}:{constantValue:t=d.getValueIfStringConstant(e.right),otherSide:e.left}}},d.getValueIfStringConstant=function(e){if(i.SQExpr.isConstant(e)&&e.type.text)return e.value}})(m.data||(m.data={}))})(powerbi=powerbi||{}),(function(N){var F,u,z,o,Q;function e(e,t,r,i,a,n,o){this.warningType=e,this.propertyId=t,this.valueExpr=r,this.selector=i,this.objectDiplayName=a,this.propertyDisplayName=n,this.expectedValueType=o}F=N.data||(N.data={}),u=N.DataViewAnalysis,z=N.data.SQExprUtils,o=jsCommon.StringExtensions,e.prototype.columnNameFromIndex=function(e){},Object.defineProperty(e.prototype,"code",{get:function(){switch(this.warningType){case 1:return"DataBoundObjectQueryExtensionWarningInvalidType";case 2:return"DataBoundObjectQueryExtensionWarningMissingReference";case 0:return;default:this.warningType}},enumerable:!1,configurable:!0}),e.prototype.getDetails=function(e,t){if(t){var r=[],i=e.get("NamePattern_Colon"),a=1===this.warningType,n=a?"DataBoundExprWarning_InvalidType_Message":"DataBoundExprWarning_MissingReference_Message";r.push(o.format(e.get(a?"DataBoundExprWarning_InvalidType_Title":"DataBoundExprWarning_MissingReference_Title"),F.getDisplayName(this.propertyDisplayName,e))),r.push(o.format(i,e.get("VisualWarning_PropertyEvaluation_Tooltip_Section"),F.getDisplayName(this.objectDiplayName,e)));t=t(this.valueExpr);return r.push(o.format(i,e.get("Field_Source"),t)),a&&this.expectedValueType&&r.push(o.format(i,e.get("DataBoundExprWarning_ExpectedDataType"),F.DataBoundExprWarning.getPrimitiveValueType(this.expectedValueType,e))),r.push(e.get(n)),{message:r.join("\n"),displayableErrorInfo:[]}}},Q=e,F.DataBoundObjectQueryExtensionWarning=Q,(function(e){function r(m,f,e,y,g,v,t,r){if(!_.isEmpty(e)){for(var S=m.select(),C=[],x=[],D=[],E=[],i=0,a=e;i<a.length;i++){var n=a[i];n.objects&&n.descriptors&&F.DataViewObjectDefinitions.visitPropertyDefinitions(n.objects,n.descriptors,R)}for(var o=0,s=D;o<s.length;o++)for(var u=s[o],c=0,l=E;c<l.length;c++){var p=l[c];if(F.Selector.equals(u.selector,p)){F.DataBoundExprExtractor.addUnique(x,u);break}}for(var d=[],h=[],I=0,w=x;I<w.length;I++){var b=w[I],M=b.selector,V=(function(e,t,r,i){var a,n=e.aggregates,o=e.selector,s=e.context,u=e.expr,r=T(e.expr,s,r);{if(n||o&&!_.isEmpty(o.data))return(c=t.selectNameOf(r))?{queryName:c,queryDefn:t,objectDefinitionRewrite:void 0}:{queryName:(t=t.addSelect(r)).selectNameOf(r),queryDefn:t,objectDefinitionRewrite:void 0};t=t.addSelect(r);var c=_.last(t.select());return F.SQExpr.equals(c.expr,r),i&&(i=new F.InlineSubqueryRewriter(t),t=i.rewrite(),i.didRewrite&&(a={from:u,to:F.SQExprBuilder.selectRef(c.name),selector:e.selector})),{queryName:c.name,queryDefn:t,objectDefinitionRewrite:a}}})(b,m,t,r);m=V.queryDefn,V.objectDefinitionRewrite&&h.push(V.objectDefinitionRewrite);V={queryName:V.queryName,selector:M};b.aggregates&&(V.aggregates=b.aggregates),M&&!_.isEmpty(M.data)&&(V.joinPredicate=0),d.push(V)}return _.isEmpty(d)&&_.isEmpty(C)?void 0:{queryDefn:m,warnings:C,additionalProjections:d,objectDefinitionRewrites:h}}function R(e,t,r,i,a){var n=a&&a.properties[t],o=e[t],s=n.type;if(n.rule){if(n.type.fillRule&&N.StructuralObjectDefinition.isFillRuleDefinition(o),!P(n.rule.conditions,g,v))return;var u=(function(e,t,r){e=e.inputRole;if(e){var i=r[e];if(!_.isEmpty(i))return _.chain(t.select()).filter((function(e){return _.includes(i,e.name)})).map((function(e){return e.expr})).value()}})(n.rule,m,y);if(_.isEmpty(u))return;_.size(u),r={data:_.map(u,(function(e){return F.createDataViewScopeIdentity(e)}))},u=F.DataViewObjectDefinitions.getDataBoundExprs(o,n.type,r,S,u[0])}else s&&s.dataBars?r&&r.metadata&&S.withName(r.metadata)&&(_.isEmpty(r.data)&&((r=_.cloneDeep(r)).data=[F.DataViewWildcard.create()]),u=F.DataViewObjectDefinitions.getDataBoundExprs(o,n.type,r,S,S.withName(r.metadata).expr)):(e=F.DataViewObjectDefinitions.getDataBoundExprsAndValueRef(e[t],s,r,S),n.ignoreUnreferenced?(_.isEmpty(e.references),D.push.apply(D,e.expressions)):(u=e.expressions,E.push.apply(E,e.references.map((function(e){return e.selector})))));if(!_.isEmpty(u)&&((!r||(function(e,t){var r=e.metadata;if(!r)return!0;for(var i=0,a=t;i<a.length;i++)if(a[i].name===r)return!0})(r,S))&&void 0!==A(null==r?void 0:r.data,S,y)))for(var c=0,l=u;c<l.length;c++){var p=l[c];if(p.expr){if(f){var d=z.buildExprEvaluationContext(m.from()),h=p.expr.getMetadata(f,d);if(null==h||!N.ValueType.isCompatibleFromAny(s,h.type)){d=h?1:2,h=h?N.ValueType.fromDescriptor(s):null,h=new Q(d,{objectName:i,propertyName:t},p.expr,r,a.displayName,n.displayName,h);C.push(h);continue}}F.DataBoundExprExtractor.addUnique(x,p)}}}}function T(e,t,r){if(!F.SQExpr.isAggregation(e)||!F.SQExpr.isColumn(e.arg)||!F.SQExpr.isSubqueryRef(e.arg.source))return e;var i=e.arg.source.query;if(!i)return e;var a=t&&t.filterContext;if(_.isEmpty(a)&&!r)return e;r&&(t=r.conditions(),_.some(t,(function(e){return 1===F.FilterKindDetector.runDetector(e)})));r=(function e(t,r){var i=function(e){var t,r=!1,i=e.from().sources();for(t in i){var a=i[t];if(N.data.isSQFromEntitySource(a)){r=!0;break}}return r};if(i(t))return s(t,r);var a=t.from().sources();for(var n in a){var o=a[n];if(N.data.isSQFromSubquerySource(o)){o=e(o.subquery,r);return a[n]=new N.data.SQFromSubquerySource(o),t.from(new N.data.SQFrom(a))}}})(i,_.isEmpty(a)?[r]:n(_.map(a,(function(e){return e.filter})),r,!0,!1));return e.accept(new o(r))}function s(e,t){if(!F.SemanticQuery.willFiltersAffectQuery(e))return e;var r=F.SemanticFilter.unmerge(F.SemanticFilter.fromSQFromAndSQFilters(e.from(),e.where())),t=_.isEmpty(r)?t:n(r,F.SemanticFilter.merge(t),!1,!0),t=F.SemanticFilter.merge(t);return e.where(t.where(),t.from())}function n(e,t,r,i){for(var a=[],n=0,o=(function(e,t){var r=[];t&&r.push({filters:[t],kind:void 0});e=(function(e){return _.groupBy(e,(function(e){e=e.conditions();return _.size(e),F.FilterKindDetector.runDetector(e[0])}))})(e);e[0]&&r.push({filters:e[0],kind:0});e[3]&&r.push({filters:e[3],kind:3});e[2]&&r.push({filters:e[2],kind:2});e[1]&&r.push({filters:e[1],kind:1});return r})(e,t);n<o.length;n++){var s=o[n],u=s.filters;3===s.kind||1===s.kind?(1===s.kind&&r&&(u=[(function(e){for(var t,r=F.SemanticQuery.create(),i=0,a=e;i<a.length;i++){var n=a[i];r=r.addSemanticFilter(n);n=n.where()[0].target;_.isEmpty(t)||jsCommon.ArrayExtensions.hasSameValues(n,t,(function(e,t){return F.SQExpr.equals(e,t)})),t=t||n}for(var o=0,s=t;o<s.length;o++){var u=s[o];r=r.addSelect(u)}return F.SemanticFilter.fromMeasuresQuery(r,t)})(s.filters)]),i?u=_.map(u,(function(e){return F.SubqueryRewriter.makeSubqueriesLowerPrecedenceThanSpecificFilters(e,[t])})):_.isEmpty(a)||(u=_.map(u,(function(e){return F.SubqueryRewriter.makeSubqueriesLowerPrecedenceThanSpecificFilters(e,a)}))),a.push.apply(a,u)):a.push.apply(a,u)}return a}e.extend=r,e.needsToExtend=function(e,t){return!!r(e,null,t,{},{},{},void 0,void 0)},e.getExpressionToAdd=T;var i,o=(i=F.SQExprRewriter,__extends(t,i),t.prototype.visitSubqueryRef=function(e){return F.SQExprBuilder.subqueryRef(this.query,e.getAnnotations())},t);function t(e){var t=i.call(this)||this;return t.query=e,t}function P(e,t,r){if(!e)return!0;for(var i=0,a=e;i<a.length;i++){var n=a[i],n=u.checkForConditionErrors(t,n,r);if(_.isEmpty(n))return!0}return!1}function A(e,t,r){if(_.isEmpty(e))return null;for(var i=[],a=0,n=e;a<n.length;a++){var o,s=n[a];F.Selector.isRoleWildcard(s)?(o=h(r,s.roles,t),i.push.apply(i,o||[])):F.Selector.isWildcard(s)?(o=h(r,Object.keys(r),t),i.push.apply(i,o||[])):F.Selector.isScopeWildcard(s)||F.Selector.isScopeTotal(s)?i.push.apply(i,s.exprs||[]):F.Selector.isScopeIdentity(s)&&i.push(s.expr)}if(0!==i.length){for(var u=[],c=0,l=t;c<l.length;c++){var p=l[c],d=z.indexOfExpr(i,p.expr);if(!(d<0)&&(i.splice(d,1),u.push(p.name),0===i.length))break}if(!(0<i.length||0===u.length))return u}}function h(e,t,r){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a];i.push.apply(i,e[o]||[])}r=_.filter(r,(function(e){return _.includes(i,e.name)}));return _.map(r,(function(e){return e.expr}))}e.matchesAnyCondition=P,e.getScopeRefs=A})(F.DataBoundObjectQueryExtender||(F.DataBoundObjectQueryExtender={}))})(powerbi=powerbi||{}),(function(b){var M;(function(e){var i=b.data.FilterKindDetector,x=b.data.SQFromEntitySource,n=b.data.SQFromPodSource,o=b.data.SQFromSubquerySource,a=jsCommon.StringExtensions,s=(t.serializeQuery=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=[],a=e.from();this.serializeFrom(a,i);var n=this.serializeQueryFilters(e.where(),v.create,!1),a=e.transforms();if(!_.isEmpty(a))for(var o=[],s=0,u=a;s<u.length;s++){var c,l=u[s],p=_.map(l.input.parameters,(function(e){return v.createNamed(e,t)})),p={Name:l.name,Algorithm:l.algorithm,Input:{Parameters:p},Output:void 0};l.input.table&&(c=this.serializeTransformTableColumns(l.input.table.columns),p.Input.Table={Name:l.input.table.name,Columns:c}),l.output&&l.output.table&&(c=this.serializeTransformTableColumns(l.output.table.columns),p.Output={Table:{Name:l.output.table.name,Columns:c}}),o.push(p)}for(var a=this.serializeSortDefinitions(e.orderBy(),t),d=[],h=e.select(),m=0,f=h.length;m<f;m++)d.push(v.createNamed(h[m],t,r));var y=e.groupBy();if(y&&y.length)for(var g=[],m=0,f=y.length;m<f;m++)g.push(v.createNamed(y[m],t));i={Version:M.SemanticQueryVersions.Version2,From:i,Select:d};return n&&(i.Where=n),o&&(i.Transform=o),a&&(i.OrderBy=a),g&&(i.GroupBy=g),e.top()&&(i.Top=e.top()),i},t.serializeSortDefinitions=function(e,t){if(e&&e.length)for(var r=[],i=0,a=e.length;i<a;i++){var n=e[i];r.push({Direction:n.direction,Expression:v.create(n.expr,t)})}return r},t.tryDeserializeQuery=function(e){var t;try{t=this.deserializeQuery(e)}catch(e){}if(t&&!this.isMalformed(t))return t},t.isMalformed=function(e){for(var t=0,r=e.select();t<r.length;t++)if(!r[t].expr)return!0;return!1},t.serializeQueryFilters=function(e,t,r){if(!_.isEmpty(e))for(var i=[],a=0,n=e;a<n.length;a++){var o=n[a],s={Condition:t(o.condition,r)};if(!_.isEmpty(o.target)){s.Target=[];for(var u=0,c=o.target;u<c.length;u++){var l=c[u];s.Target.push(t(l,r))}}o.annotations&&(s.Annotations=o.annotations),i.push(s)}return i},t.deserializeQuery=function(e){var t=e.Version||M.SemanticQueryVersions.Version0,r=t<M.SemanticQueryVersions.Version1,i=D.from(e.From),a=new M.SemanticQueryBuilder(i),n=e.Where;if(n)for(var o=0,s=n.length;o<s;o++){var u=D.filter(n[o],i);u&&(r&&(u=E.Upgrade(t,u)),a.addWhere(u))}var c=e.Transform,l=i;if(!_.isEmpty(c)){for(var p={},d=0,h=i.keys();d<h.length;d++){var m=h[d];p[m]=i.source(m)}for(var f,o=0,s=c.length;o<s;o++)c[o].Input&&c[o].Input.Table&&(p[f=c[o].Input.Table.Name]=new x(void 0,f)),c[o].Output&&c[o].Output.Table&&(p[f=c[o].Output.Table.Name]=new x(void 0,f));for(l=new M.SQFrom(p),o=0,s=c.length;o<s;o++)a.addTransform(D.transform(c[o],l))}var y=e.OrderBy;if(y)for(o=0,s=y.length;o<s;o++)a.addOrderBy(D.sort(y[o],i));for(var g=e.Select,v={},o=0,s=g.length;o<s;o++)a.addSelect(D.select(g[o],v,l));var S=e.GroupBy;if(S)for(var C={},o=0,s=S.length;o<s;o++)a.addGroupBy(D.groupBy(S[o],C,i));return e.Top&&a.setTop(e.Top),a.toQuery()},t.deserializeSortDefinitions=function(e,t){return _.isEmpty(e)?[]:_.map(e,(function(e){return D.sort(e,t)}))},t.serializeFilter=function(e){var t=[],r=e.from();this.serializeFrom(r,t);e=this.serializeQueryFilters(e.where(),v.create,!1);return{Version:M.SemanticQueryVersions.Version2,From:t,Where:e}},t.serializeFrom=function(e,t){for(var r=e.keys(),i=new c(e),a=0,n=r.length;a<n;a++)t.push(e.source(r[a]).accept(i,a))},t.deserializeFrom=function(e){return D.from(e)},t.deserializeFilter=function(e,t){var r=e.Version||M.SemanticQueryVersions.Version0,i=r<M.SemanticQueryVersions.Version1,a=D.from(e.From),n=new M.SemanticQueryBuilder(a),o=e.Where;if(o)for(var s=0,u=o.length;s<u;s++){var c=D.filter(o[s],a);c?(i&&(c=E.Upgrade(r,c)),n.addWhere(c)):t&&(_.isEmpty(t.RemovedIndexes)&&(t.RemovedIndexes=[]),t.RemovedIndexes.push(s))}return n.toFilter()},t.serializeExpr=function(e,t){return v.create(e,!0,t=void 0===t?!1:t)},t.serializeExprWithRef=function(e,t){return v.create(e,!1,t=void 0===t?!1:t)},t.deserializeExpr=function(e){return p.createStandalone(e)},t.deserializeExprWithRef=function(e,t){return p.create(e,t)},t.serializeTransformTableColumns=function(e){return _.map(e,(function(e){var t={Expression:v.createNamed(e.expression)};return e.role&&(t.Role=e.role),t}))},t);function t(){}e.SemanticQuerySerializer=s;var D=(u.from=function(e){var t={};if(e)for(var r=0,i=e.length;r<i;r++){var a=e[r];switch(a.Type){case 2:a.Expression.Subquery?t[a.Name]=new o(s.deserializeQuery(a.Expression.Subquery.Query)):t[a.Name]=new M.SQFromExprSource(p.createFromSourceExpression(a.Expression));break;case 1:t[a.Name]=new n(a.Schema,a.Entity);break;default:t[a.Name]=new x(a.Schema,a.Entity)}}return new M.SQFrom(t)},u.filter=function(e,t){var r=t?p.create(e.Condition,t):p.createStandalone(e.Condition);if(r){var i={condition:r};if(e.Target){i.target=[];for(var a=0,n=e.Target;a<n.length;a++){var o=n[a],o=t?p.create(o,t):p.createStandalone(o);if(!o)return;i.target.push(o)}}return e.Annotations&&(i.annotations=e.Annotations),i}},u.sort=function(e,t){return{direction:e.Direction,expr:p.create(e.Expression,t)}},u.select=function(e,t,r){return u.toNamedQueryExpression(e,t,r)},u.groupBy=function(e,t,r){return u.toNamedQueryExpression(e,t,r)},u.transform=function(e,t){var r,i=_.map(e.Input.Parameters,(function(e){return u.toNamedQueryExpression(e,{},t)})),i={name:e.Name,algorithm:e.Algorithm,input:{parameters:i},output:{}};return e.Input.Table&&(r=this.deserializeTransformTableColumns(e.Input.Table.Columns,t),i.input.table={name:e.Input.Table.Name,columns:r}),e.Output&&e.Output.Table&&(r=this.deserializeTransformTableColumns(e.Output.Table.Columns,t),i.output.table={name:e.Output.Table.Name,columns:r}),i},u.toNamedQueryExpression=function(e,t,r){r=p.create(e,r),e=e.Name||a.findUniqueName(t,M.SQExprUtils.defaultName(r));return t[e]=!0,{name:e,expr:r}},u.deserializeTransformTableColumns=function(e,t){var r={};return _.map(e,(function(e){return{role:e.Role,expression:u.toNamedQueryExpression(e.Expression,r,t)}}))},u);function u(){}var c=(r.prototype.visitEntity=function(e,t){return{Name:this.from.keys()[t],Entity:e.entity,Schema:e.schema,Type:0}},r.prototype.visitPod=function(e,t){return{Name:this.from.keys()[t],Entity:e.pod,Schema:e.schema,Type:1}},r.prototype.visitSubquery=function(e,t){return{Name:this.from.keys()[t],Expression:{Subquery:{Query:s.serializeQuery(e.subquery)}},Type:2}},r.prototype.visitExpr=function(e,t){return{Name:this.from.keys()[t],Expression:s.serializeExpr(e.expr),Type:2}},r);function r(e){this.from=e}var v=(l.getInstance=function(e,t){var r=[+(e=e||!1),+(t=t||!1)].reduce((function(e,t){return e<<1|t}));return l.instances[r]||new l(e,t)},l.create=function(e,t,r){return e.accept(l.getInstance(t=void 0===t?!1:t,r=void 0===r?!1:r))},l.createNamed=function(e,t,r){r=l.getInstance(t=void 0===t?!1:t,r=void 0===r?!1:r),r=e.expr.accept(r);return e.name&&(r.Name=e.name),r},l.prototype.visitColumnRef=function(e){return this.addAnnotations(e,{Column:{Expression:e.source.accept(this),Property:e.ref}})},l.prototype.visitMeasureRef=function(e){return this.addAnnotations(e,{Measure:{Expression:e.source.accept(this),Property:e.ref}})},l.prototype.visitNativeMeasure=function(e){var t={Language:e.language,Expression:e.expression,DataType:e.dataType};e.proposedName&&(t.ProposedName=e.proposedName),e.format&&(t.Format=e.format);var r=e.expressionContentCache;return!r||!r.dependencies&&null==r.unrecognizedIdentifiers?{NativeMeasure:t}:(t.ExpressionContentCache={},r.dependencies&&(t.ExpressionContentCache.Dependencies=this.serializeAll(r.dependencies)),null!=r.unrecognizedIdentifiers&&(t.ExpressionContentCache.UnrecognizedIdentifiers=r.unrecognizedIdentifiers),this.addAnnotations(e,{NativeMeasure:t}))},l.prototype.visitNativeColumn=function(e){var t={Language:e.language,Expression:e.expression,DataType:e.dataType,Source:e.source.accept(this)};e.proposedName&&(t.ProposedName=e.proposedName),e.format&&(t.Format=e.format);var r=e.expressionContentCache;return!r||!r.dependencies&&null==r.unrecognizedIdentifiers||(t.ExpressionContentCache={},r.dependencies&&(t.ExpressionContentCache.Dependencies=this.serializeAll(r.dependencies)),null!=r.unrecognizedIdentifiers&&(t.ExpressionContentCache.UnrecognizedIdentifiers=r.unrecognizedIdentifiers)),this.addAnnotations(e,{NativeColumn:t})},l.prototype.visitAggr=function(e){return this.addAnnotations(e,{Aggregation:{Expression:e.arg.accept(this),Function:e.func}})},l.prototype.visitPercentile=function(e){var t=this.addAnnotations(e,{Percentile:{Expression:e.arg.accept(this),K:e.k}});return e.exclusive&&(t.Percentile.Exclusive=e.exclusive),t},l.prototype.visitRangePercent=function(e){return this.addAnnotations(e,{RangePercent:{Min:e.min.accept(this),Max:e.max.accept(this),Percent:e.percent}})},l.prototype.visitHierarchy=function(e){return this.addAnnotations(e,{Hierarchy:{Expression:e.arg.accept(this),Hierarchy:e.hierarchy}})},l.prototype.visitPropertyVariationSource=function(e){var t=e.arg.accept(this),r=e.property,i=e.name;return this.addAnnotations(e,{PropertyVariationSource:{Expression:{SourceRef:t.SourceRef},Name:i,Property:r}})},l.prototype.visitHierarchyLevel=function(e){return this.addAnnotations(e,{HierarchyLevel:{Expression:e.arg.accept(this),Level:e.level}})},l.prototype.visitSelectRef=function(e){return void 0===e.attributeKind||e.attributeKind,this.addAnnotations(e,{SelectRef:{ExpressionName:e.expressionName}})},l.prototype.visitBetween=function(e){return this.addAnnotations(e,{Between:{Expression:e.arg.accept(this),LowerBound:e.lower.accept(this),UpperBound:e.upper.accept(this)}})},l.prototype.visitIn=function(e){var t=this.serializeAll(e.args),r=e.values;if(r){for(var i=[],a=0,n=r.length;a<n;a++)i.push(this.serializeAll(r[a]));return this.addAnnotations(e,{In:{Expressions:t,Values:i}})}return this.addAnnotations(e,{In:{Expressions:this.serializeAll(e.args),Table:e.table.accept(this)}})},l.prototype.visitEntity=function(e){var t;return t=this.standalone?{Schema:e.schema,Entity:e.entity}:(e.variable,{Source:e.variable}),this.addAnnotations(e,{SourceRef:t})},l.prototype.visitSubqueryRef=function(e){return e.variable&&!e.query?this.addAnnotations(e,{SourceRef:{Source:e.variable}}):this.standalone?this.addAnnotations(e,{Subquery:{Query:s.serializeQuery(e.query,!1,this.serializeAnnotations)}}):void 0},l.prototype.visitNamedQueryRef=function(e){return this.standalone?this.addAnnotations(e,{NamedQueryReference:{Name:e.queryName}}):(e.variable,this.addAnnotations(e,{SourceRef:{Source:e.variable}}))},l.prototype.visitAnd=function(e){return this.addAnnotations(e,{And:{Left:e.left.accept(this),Right:e.right.accept(this)}})},l.prototype.visitOr=function(e){return this.addAnnotations(e,{Or:{Left:e.left.accept(this),Right:e.right.accept(this)}})},l.prototype.visitCompare=function(e){return this.addAnnotations(e,{Comparison:{ComparisonKind:e.comparison,Left:e.left.accept(this),Right:e.right.accept(this)}})},l.prototype.visitConditional=function(e){var t=this,r=this.addAnnotations(e,{Conditional:{Cases:_.map(e.cases,(function(e){return t.visitCase(e)}))}}),e=e.defaultValue;return e&&(r.Conditional.DefaultValue=e.accept(this)),r},l.prototype.visitCase=function(e){return{Condition:e.condition.accept(this),Value:e.value.accept(this)}},l.prototype.visitContains=function(e){return this.addAnnotations(e,{Contains:{Left:e.left.accept(this),Right:e.right.accept(this)}})},l.prototype.visitDateAdd=function(e){return this.addAnnotations(e,{DateAdd:{Expression:e.arg.accept(this),Amount:e.amount,TimeUnit:e.unit}})},l.prototype.visitDateSpan=function(e){return this.addAnnotations(e,{DateSpan:{Expression:e.arg.accept(this),TimeUnit:e.unit}})},l.prototype.visitExists=function(e){return this.addAnnotations(e,{Exists:{Expression:e.arg.accept(this)}})},l.prototype.visitNot=function(e){return this.addAnnotations(e,{Not:{Expression:e.arg.accept(this)}})},l.prototype.visitNow=function(e){return this.addAnnotations(e,{Now:{}})},l.prototype.visitDefaultValue=function(e){return this.addAnnotations(e,{DefaultValue:{}})},l.prototype.visitAnyValue=function(e){var t={};return null!=e.defaultValueOverridesAncestors&&(t.DefaultValueOverridesAncestors=e.defaultValueOverridesAncestors),this.addAnnotations(e,{AnyValue:t})},l.prototype.visitFillRule=function(e){var t={},r=e.rule;return r.linearGradient2&&(t.linearGradient2=this.visitLinearGradient2(r.linearGradient2)),r.linearGradient3&&(t.linearGradient3=this.visitLinearGradient3(r.linearGradient3)),this.addAnnotations(e,{FillRule:{Input:e.input.accept(this),FillRule:t}})},l.prototype.visitLinearGradient2=function(e){var t={min:this.visitRuleStop(e.min),max:this.visitRuleStop(e.max)},e=this.visitNullColoringStrategy(e.nullColoringStrategy);return e&&(t.nullColoringStrategy=e),t},l.prototype.visitLinearGradient3=function(e){var t={min:this.visitRuleStop(e.min),mid:this.visitRuleStop(e.mid),max:this.visitRuleStop(e.max)},e=this.visitNullColoringStrategy(e.nullColoringStrategy);return e&&(t.nullColoringStrategy=e),t},l.prototype.visitRuleStop=function(e){var t={color:e.color.accept(this)};return e.value&&(t.value=e.value.accept(this)),t},l.prototype.visitNullColoringStrategy=function(e){if(e){e.strategy;var t={strategy:e.strategy.accept(this)};return e.color&&(t.color=e.color.accept(this)),t}},l.prototype.visitThemeDataColor=function(e){return this.addAnnotations(e,{ThemeDataColor:{ColorId:e.colorId,Percent:e.percent}})},l.prototype.visitStartsWith=function(e){return this.addAnnotations(e,{StartsWith:{Left:e.left.accept(this),Right:e.right.accept(this)}})},l.prototype.visitGroupRef=function(e){var t=this;return this.addAnnotations(e,{GroupRef:{Expression:e.source.accept(this),Property:e.ref,GroupedColumns:_.map(e.groupedExprs,(function(e){return e.accept(t)}))}})},l.prototype.visitConstant=function(e){switch(e.type.primitiveType){case 5:case 7:case 2:case 4:case 3:case 0:case 1:return this.addAnnotations(e,{Literal:{Value:e.valueEncoded}});default:e.type.primitiveType}},l.prototype.visitArithmetic=function(e){return this.addAnnotations(e,{Arithmetic:{Left:e.left.accept(this),Right:e.right.accept(this),Operator:e.operator}})},l.prototype.visitFloor=function(e){var t=this.addAnnotations(e,{Floor:{Expression:e.arg.accept(this),Size:e.size}});return null!=e.timeUnit&&(t.Floor.TimeUnit=e.timeUnit),t},l.prototype.visitResourcePackageItem=function(e){return this.addAnnotations(e,{ResourcePackageItem:{PackageName:e.packageName,PackageType:e.packageType,ItemName:e.itemName}})},l.prototype.visitScopedEval=function(e){return this.addAnnotations(e,{ScopedEval:{Expression:e.expression.accept(this),Scope:this.serializeAll(e.scope)}})},l.prototype.visitFilteredEval=function(e){return this.addAnnotations(e,{FilteredEval:{Expression:e.expression.accept(this),Filters:s.serializeQueryFilters(e.filters,l.create,this.standalone)}})},l.prototype.visitWithRef=function(e){return this.addAnnotations(e,{WithRef:{ExpressionName:e.expressionName}})},l.prototype.visitTransformTableRef=function(e){return this.addAnnotations(e,{TransformTableRef:{Source:e.source}})},l.prototype.visitTransformOutputRoleRef=function(e){return this.addAnnotations(e,{TransformOutputRoleRef:{Role:e.role,Transform:e.transform}})},l.prototype.visitRoleRef=function(e){return this.addAnnotations(e,{RoleRef:{Role:e.role}})},l.prototype.visitSummaryValueRef=function(e){return this.addAnnotations(e,{SummaryValueRef:{Name:e.name}})},l.prototype.visitAllRolesRef=function(e){return this.addAnnotations(e,{AllRolesRef:{}})},l.prototype.visitDiscretize=function(e){return this.addAnnotations(e,{Discretize:{Expression:e.source.accept(this),Count:e.count}})},l.prototype.visitMember=function(e){return this.addAnnotations(e,{Member:{Expression:e.source.accept(this),Member:e.member}})},l.prototype.visitSparklineData=function(e){var t={SparklineData:{Measure:e.measure.accept(this),Groupings:this.serializeAll(e.grouping),PointsPerSparkline:e.pointsPerSparkline}};return e.scalarKey&&(t.SparklineData.ScalarKey=e.scalarKey.accept(this)),e.includeMinGroupingInterval&&(t.SparklineData.IncludeMinGroupingInterval=e.includeMinGroupingInterval),t},l.prototype.serializeAll=function(e){for(var t=[],r=0,i=e.length;r<i;r++)t.push(e[r].accept(this));return t},l.prototype.addAnnotations=function(e,t){return!this.serializeAnnotations||(e=e.getAnnotations())&&(t.Annotations=e),t},l.instances=[],l);function l(e,t){this.standalone=e,this.serializeAnnotations=t}var p,d,E=(h.Upgrade=function(e,t){if(!t)return null;if(!t.condition)return null;var r=i.runDetector(t.condition);return e===M.SemanticQueryVersions.Version0&&2!==r?{condition:t.condition}:t},h);function h(){}function m(e,t){return (function(e,t){if(e.Column){t=m(e.Column.Expression,t);if(t)return M.SQExprBuilder.columnRef(t,e.Column.Property,e.Annotations)}})(e,t)||(function(e,t){if(e.Measure){t=m(e.Measure.Expression,t);if(t)return M.SQExprBuilder.measureRef(t,e.Measure.Property,e.Annotations)}})(e,t)||(function(e){if(e.NativeMeasure){var t=void 0;return e.NativeMeasure.ExpressionContentCache&&(t={unrecognizedIdentifiers:e.NativeMeasure.ExpressionContentCache.UnrecognizedIdentifiers,dependencies:y(e.NativeMeasure.ExpressionContentCache.Dependencies)}),"dax"!==e.NativeMeasure.Language&&e.NativeMeasure.Language,M.SQExprBuilder.nativeMeasure(e.NativeMeasure.Language,e.NativeMeasure.Expression,e.NativeMeasure.DataType,e.NativeMeasure.ProposedName,t,e.NativeMeasure.Format,e.Annotations)}})(e)||(function(e,t){if(e.NativeColumn){var r=void 0;if(e.NativeColumn.ExpressionContentCache&&(r={unrecognizedIdentifiers:e.NativeColumn.ExpressionContentCache.UnrecognizedIdentifiers,dependencies:y(e.NativeColumn.ExpressionContentCache.Dependencies)}),"dax"===e.NativeColumn.Language){if(e.NativeColumn.Source){t=m(e.NativeColumn.Source,t);return M.SQExprBuilder.nativeColumn(e.NativeColumn.Language,e.NativeColumn.Expression,e.NativeColumn.DataType,t,e.NativeColumn.ProposedName,r,e.NativeColumn.Format,e.Annotations)}}else e.NativeColumn.Language}})(e,t)||(function(e,t){if(e.SourceRef){if(!t){var r=e.SourceRef;return M.SQExprBuilder.entity(r.Schema,r.Entity,void 0,e.Annotations)}r=e.SourceRef.Source,t=t.source(r);if(t)return M.isSQFromEntitySource(t)?M.SQExprBuilder.entity(t.schema,t.entity,r,e.Annotations):M.isSQFromPodSource(t)?M.SQExprBuilder.entity(t.schema,t.pod,r):M.isSQFromSubquerySource(t)?M.SQExprBuilder.subqueryRef(r,e.Annotations):(M.isSQFromExprSource(t),t.expr.as(r))}})(e,t)||(function(e,t){if(e.Aggregation){t=m(e.Aggregation.Expression,t);if(t)return M.SQExprBuilder.aggregate(t,e.Aggregation.Function,e.Annotations)}})(e,t)||(function(e){if(e.SelectRef)return M.SQExprBuilder.selectRef(e.SelectRef.ExpressionName,void 0,e.Annotations)})(e)||(function(e,t){if(e.Percentile){t=m(e.Percentile.Expression,t);if(t)return M.SQExprBuilder.percentile(t,e.Percentile.K,e.Percentile.Exclusive||!1,e.Annotations)}})(e,t)||(function(e,t){if(e.RangePercent){var r=m(e.RangePercent.Min,t),t=m(e.RangePercent.Max,t);if(r&&t)return M.SQExprBuilder.rangePercent(r,t,e.RangePercent.Percent,e.Annotations)}})(e,t)||(function(e,t){if(e.Arithmetic){var r=m(e.Arithmetic.Left,t),t=m(e.Arithmetic.Right,t);if(r&&t)return M.SQExprBuilder.arithmetic(r,t,e.Arithmetic.Operator,e.Annotations)}})(e,t)||(function(e,t){if(e.Floor){t=m(e.Floor.Expression,t);if(t)return M.SQExprBuilder.floor(t,e.Floor.Size,e.Floor.TimeUnit,e.Annotations)}})(e,t)||(function(e,t){if(e.Discretize){t=m(e.Discretize.Expression,t);if(t)return M.SQExprBuilder.discretize(t,e.Discretize.Count,e.Annotations)}})(e,t)||(function(e,t){if(e.Member){t=m(e.Member.Expression,t);if(t)return M.SQExprBuilder.member(t,e.Member.Member,e.Annotations)}})(e,t)||(function(e,t){if(e.Hierarchy){t=m(e.Hierarchy.Expression,t);if(t)return M.SQExprBuilder.hierarchy(t,e.Hierarchy.Hierarchy,e.Annotations)}})(e,t)||(function(e,t){if(e.HierarchyLevel){t=m(e.HierarchyLevel.Expression,t);if(t)return M.SQExprBuilder.hierarchyLevel(t,e.HierarchyLevel.Level,e.Annotations)}})(e,t)||(function(e,t){if(e.PropertyVariationSource){t=m(e.PropertyVariationSource.Expression,t);if(t)return M.SQExprBuilder.propertyVariationSource(t,e.PropertyVariationSource.Name,e.PropertyVariationSource.Property,e.Annotations)}})(e,t)||(function(e,t){if(e.And){var r=m(e.And.Left,t),t=m(e.And.Right,t);if(r&&t)return M.SQExprBuilder.and(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Between){var r=m(e.Between.Expression,t),i=m(e.Between.LowerBound,t),t=m(e.Between.UpperBound,t);if(r&&i&&t)return M.SQExprBuilder.between(r,i,t,e.Annotations)}})(e,t)||(function(e,t){if(e.In){if(e.In.Values)return M.SQExprBuilder.inValues(y(e.In.Expressions,t),_.map(e.In.Values,(function(e){return y(e,t)})));var r=m(e.In.Table,t);return r?M.SQExprBuilder.inTable(y(e.In.Expressions,t),r,e.Annotations):void 0}})(e,t)||(function(e,t){if(e.Or){var r=m(e.Or.Left,t),t=m(e.Or.Right,t);if(r&&t)return M.SQExprBuilder.or(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Contains){var r=m(e.Contains.Left,t),t=m(e.Contains.Right,t);if(r&&t)return M.SQExprBuilder.contains(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Comparison){var r=m(e.Comparison.Left,t),t=m(e.Comparison.Right,t);if(r&&t)return M.SQExprBuilder.compare(e.Comparison.ComparisonKind,r,t,e.Annotations)}})(e,t)||(function(e){if(e.Conditional){for(var t=e.Conditional.Cases,r=t.length,i=new Array(r),a=0;a<r;a++){var n=(function(e){if(e){var t=m(e.Condition),e=m(e.Value);if(t&&e)return{condition:t,value:e}}})(t[a]);if(!n){i=void 0;break}i[a]=n}if(e.Conditional.DefaultValue){var o=m(e.Conditional.DefaultValue);if(i&&o)return M.SQExprBuilder.conditional(i,o,e.Annotations)}else if(i)return M.SQExprBuilder.conditional(i,void 0,e.Annotations)}})(e)||(function(e,t){if(e.DateAdd){t=m(e.DateAdd.Expression,t);if(t)return M.SQExprBuilder.dateAdd(e.DateAdd.TimeUnit,e.DateAdd.Amount,t,e.Annotations)}})(e,t)||(function(e,t){if(e.DateSpan){t=m(e.DateSpan.Expression,t);if(t)return M.SQExprBuilder.dateSpan(e.DateSpan.TimeUnit,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Exists){t=m(e.Exists.Expression,t);if(t)return M.SQExprBuilder.exists(t,e.Annotations)}})(e,t)||(function(e,t){if(e.Not){t=m(e.Not.Expression,t);if(t)return M.SQExprBuilder.not(t,e.Annotations)}})(e,t)||(function(e){if(e.Now)return M.SQExprBuilder.now(e.Annotations)})(e)||(function(e){if(e.DefaultValue)return M.SQExprBuilder.defaultValue(e.Annotations)})(e)||(function(e){if(e.AnyValue)return M.SQExprBuilder.anyValue(e.AnyValue.DefaultValueOverridesAncestors,e.Annotations)})(e)||(function(e,t){if(e.StartsWith){var r=m(e.StartsWith.Left,t),t=m(e.StartsWith.Right,t);if(r&&t)return M.SQExprBuilder.startsWith(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.FillRule){var r,i=m(e.FillRule.Input,t),a=e.FillRule,n={},o=a.FillRule.linearGradient2,a=a.FillRule.linearGradient3;return o?(n.linearGradient2={min:S(o.min,t),max:S(o.max,t)},(r=C(o.nullColoringStrategy,t))&&(n.linearGradient2.nullColoringStrategy=r)):a&&(n.linearGradient3={min:S(a.min,t),mid:S(a.mid,t),max:S(a.max,t)},(r=C(a.nullColoringStrategy,t))&&(n.linearGradient3.nullColoringStrategy=r)),M.SQExprBuilder.fillRule(i,n,e.Annotations)}})(e,t)||(function(e){if(e.ThemeDataColor)return M.SQExprBuilder.themeDataColor(e.ThemeDataColor.ColorId,e.ThemeDataColor.Percent,e.Annotations)})(e)||(function(e){if(e.ResourcePackageItem)return M.SQExprBuilder.resourcePackageItem(e.ResourcePackageItem.PackageName,e.ResourcePackageItem.PackageType,e.ResourcePackageItem.ItemName,e.Annotations)})(e)||(function(e,t){if(e.ScopedEval){var r=m(e.ScopedEval.Expression,t);if(r)return M.SQExprBuilder.scopedEval(r,y(e.ScopedEval.Scope,t),e.Annotations)}})(e,t)||(function(e,t){if(e.FilteredEval){var r=m(e.FilteredEval.Expression,t);return M.SQExprBuilder.filteredEval(r,_.map(e.FilteredEval.Filters,(function(e){return D.filter(e,t)})),e.Annotations)}})(e,t)||(function(e){if(e.WithRef)return M.SQExprBuilder.withRef(e.WithRef.ExpressionName,e.Annotations)})(e)||(function(e){if(e.TransformTableRef)return M.SQExprBuilder.transformTableRef(e.TransformTableRef.Source,e.Annotations)})(e)||(function(e){if(e.TransformOutputRoleRef)return M.SQExprBuilder.transformOutputRoleRef(e.TransformOutputRoleRef.Role,e.TransformOutputRoleRef.Transform,e.Annotations)})(e)||(function(e){if(e.Literal)return M.PrimitiveValueEncoding.parseValueToSQExpr(e.Literal.Value)})(e)||(function(e,t){if(e.GroupRef){var r=m(e.GroupRef.Expression,t),i=_.map(e.GroupRef.GroupedColumns,(function(e){return d.create(e,t)}));if(r&&!_.isEmpty(i))return M.SQExprBuilder.groupRef(e.GroupRef.Property,r,i,e.Annotations)}})(e,t)||(function(e){if(e.RoleRef)return M.SQExprBuilder.roleRef(e.RoleRef.Role,e.Annotations)})(e)||(function(e){if(e.AllRolesRef)return M.SQExprBuilder.allRolesRef(e.Annotations)})(e)||(function(e){if(e.NamedQueryReference)return M.SQExprBuilder.namedQueryRef(e.NamedQueryReference.Name,void 0,e.Annotations)})(e)||(function(e){if(e.Subquery)return M.SQExprBuilder.subqueryRef(s.deserializeQuery(e.Subquery.Query),e.Annotations)})(e)||g(e)||(function(e){if(e.SummaryValueRef)return M.SQExprBuilder.summaryValueRef(e.SummaryValueRef.Name,e.Annotations)})(e)||(function(e,t){var r=e.SparklineData;if(r)return M.SQExprBuilder.sparklineData(m(r.Measure,t),y(r.Groupings,t),r.ScalarKey?m(e.SparklineData.ScalarKey,t):void 0,r.PointsPerSparkline,r.IncludeMinGroupingInterval)})(e,t)}function f(e){return m(e,null)}function y(e,t){for(var r=[],i=0,a=e.length;i<a;i++)r.push(m(e[i],t));return r}function g(e){return (function(e){if(e.Boolean)return M.SQExprBuilder.boolean(e.Boolean.Value,e.Annotations)})(e)||I(e)||(function(e){if(e.DateTimeSecond){var t=w(e.DateTimeSecond);return M.SQExprBuilder.dateSpan(5,M.SQExprBuilder.dateTime(t),e.Annotations)}})(e)||I(e)||(function(e){if(e.Decimal){var t=e.Decimal.Value;return M.SQExprBuilder.decimal(t,void 0,e.Annotations)}})(e)||(function(e){if(e.Integer){var t=e.Integer.Value;return M.SQExprBuilder.integer(t,void 0,e.Annotations)}})(e)||(function(e){if(e.Null)return M.SQExprBuilder.nullConstant()})(e)||(function(e){if(e.Number)return M.PrimitiveValueEncoding.parseValueToSQExpr(e.Number.Value)})(e)||(function(e){if(e.String){var t=e.String.Value;return M.SQExprBuilder.text(t,void 0,e.Annotations)}})(e)}function S(e,t){if(e){var r={color:m(e.color,t)};return e.value&&(r.value=m(e.value,t)),r}}function C(e,t){if(e){var r={strategy:m(e.strategy,t)};return e.color&&(r.color=m(e.color,t)),r}}function I(e){var t=e.DateTime||e.Date;if(t){t=w(t);if(t)return M.SQExprBuilder.dateTime(t,void 0,e.Annotations)}}function w(e){return jsCommon.DateExtensions.tryDeserializeDate(e.Value)}(d=p=e.ExprBuilder||(e.ExprBuilder={})).create=m,d.createStandalone=f,d.createConst=g,d.createFromSourceExpression=f})((M=b.data||(b.data={})).services||(M.services={}))})(powerbi=powerbi||{}),(function(a){var e;(function(e){e.AnomalyDetectionTransformPluginName="SampleAndDetectAnomaly";var t="TimeSeriesColumnRole",r="ValueColumnRole";e.AnomalyDetectionColumns={ExpectedValue:"ExpectedValue",ExpectedLow:"ExpectedLow",ExpectedHigh:"ExpectedHigh",RawScore:"RawScore",Anomaly:"Anomaly",BatchStart:"BatchStart",BatchEnd:"BatchEnd"},e.AnomalyDetectionOutputRoles=_.mapValues(e.AnomalyDetectionColumns,(function(e){return"anomalyDetection."+e}));var i=_.mapValues(e.AnomalyDetectionColumns,(function(e){return e+"Role"})),t={name:e.AnomalyDetectionTransformPluginName,inputRoles:[{name:t,visualDataRoleMatching:{cartesianKind:0}},{name:r,visualDataRoleMatching:{cartesianKind:1}}],outputRoles:[{name:e.AnomalyDetectionOutputRoles.ExpectedValue,algorithmRole:i.ExpectedValue,columnName:e.AnomalyDetectionColumns.ExpectedValue,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:e.AnomalyDetectionOutputRoles.ExpectedLow,algorithmRole:i.ExpectedLow,columnName:e.AnomalyDetectionColumns.ExpectedLow,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:e.AnomalyDetectionOutputRoles.ExpectedHigh,algorithmRole:i.ExpectedHigh,columnName:e.AnomalyDetectionColumns.ExpectedHigh,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:e.AnomalyDetectionOutputRoles.RawScore,algorithmRole:i.RawScore,columnName:e.AnomalyDetectionColumns.RawScore,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:e.AnomalyDetectionOutputRoles.Anomaly,algorithmRole:i.Anomaly,columnName:e.AnomalyDetectionColumns.Anomaly,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:e.AnomalyDetectionOutputRoles.BatchStart,algorithmRole:i.BatchStart,columnName:e.AnomalyDetectionColumns.BatchStart,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:e.AnomalyDetectionOutputRoles.BatchEnd,algorithmRole:i.BatchEnd,columnName:e.AnomalyDetectionColumns.BatchEnd,kind:a.VisualDataRoleKind.Measure,joinPredicateBehavior:0}]},r={name:"Forecast",inputRoles:[{name:"X",visualDataRoleMatching:{cartesianKind:0}},{name:"Y",visualDataRoleMatching:{cartesianKind:1}}],outputRoles:[{name:"forecast.ForecastValue",algorithmRole:"Forecast",columnName:"forecastValue",kind:a.VisualDataRoleKind.Measure},{name:"forecast.ConfidenceHighBound",algorithmRole:"UpperBound",columnName:"confidenceHighBound",kind:a.VisualDataRoleKind.Measure},{name:"forecast.ConfidenceLowBound",algorithmRole:"LowerBound",columnName:"confidenceLowBound",kind:a.VisualDataRoleKind.Measure}]},i={name:"KMeansClustering",inputRoles:[{name:"Attribute",visualDataRoleMatching:{matchMeasure:!0,skipJoinPredicateNone:!0}},{name:"Item",visualDataRoleMatching:{matchGrouping:!0}}],outputRoles:[{name:"Series",algorithmRole:"ClusterId",columnName:"clusterId",kind:a.VisualDataRoleKind.Grouping}]};e.plugins=((i={Forecast:r,KMeansClustering:i})[e.AnomalyDetectionTransformPluginName]=t,i)})((e=a.data||(a.data={})).transforms||(e.transforms={}))})(powerbi=powerbi||{}),(function(r){var i;i=r.data||(r.data={}),(function(){(i.transforms||(i.transforms={})).createTransformPluginService=function(){return new e};var e=(t.prototype.getTransformPlugin=function(e){if(e)return this.plugins[e]},t);function t(){this.plugins=r.data.transforms.plugins}})()})(powerbi=powerbi||{}),(function(e){var t,r,i,s,u,c;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.data||(e.data={}),r=t.dsr||(t.dsr={}),t=e.data.DefaultSQExprVisitorWithArg,s=e.data.SQExprBuilder,u=e.data.SQHierarchyExpr,c=e.data.SQPropertyVariationSourceExpr,e.data.SQEntityExpr,__extends(a,i=t),a.prototype.visitColumnRef=function(e,t){if(e.hasGroupOnKeys(t)){var t=e.getConceptualProperty(t),r=e.getTargetEntity();return _.map(t.column.keys,(function(e){return s.columnRef(r,e.name)}))}return[e]},a.prototype.visitHierarchyLevel=function(e,t){var r=e.arg.getTargetEntity();if(!r)return[e];if(e.arg instanceof u){var i=void 0,a=r.schema,n=e.arg;if(n.arg instanceof c){var o=n.arg,o=t.schema(a).findTargetEntityOfVariation(r.entity,o.property,o.name);if(!o)return[e];i=s.entity(a,o.name)}else i=r,n.arg;n=t.schema(a).findHierarchyLevel(i.entity,n.hierarchy,e.level).column.name;return this.visitColumnRef(s.columnRef(i,n),t)}return[e]},a.prototype.visitGroupRef=function(e,t){return this.visitColumnRef(e,t)},a.prototype.visitDefault=function(e){return[e]},t=a,r.SelectToIdentityExpressionsVisitor=t})(powerbi=powerbi||{}),(function(e){var a,l;function o(e,t){return!e||!t||_.isEqual(e,t)}function s(e,t){t&&(e.select||(e.select=[]),(e=e.select).push.apply(e,t||[]))}((a=e.data||(e.data={})).dsr||(a.dsr={})).mergeMappings=function(e,t){var r=e.length;if(1===r)return{mapping:e[0]};for(var i,a,n,o=[],s=e[0].updateType,u=0;u<r;u++){var c=e[u];if(a=c.updateType,n=s,s=null===a||0===a||null===n||0===n?0:a===n?a:1===a||1===n?1:2,!c.categorical)return;0===u&&(i={metadata:c.metadata,categorical:{}}),l.mergeCategorical(i.categorical,c.categorical),o.push(l.createSplit(t,c.categorical))}return i.updateType=s,{mapping:i,splits:o}},(e=l=l||{}).mergeCategorical=function(e,t){var r,i,a,n;t.categories&&(e.categories?(function(e,t){if(!e&&!t)return;if(e&&t){if(!e.categories&&!t.categories)return;if(e.categories&&t.categories){var r=e.categories,i=t.categories;if(!o(r.dataReductionAlgorithm,i.dataReductionAlgorithm))return;e=r,t=i;if(e.bind||t.bind)return _.isEqual(e.bind,t.bind);e=r,t=i;if(e.for||t.for)return _.isEqual(e.for,t.for);r=r,i=i;return(r.select||i.select)&&_.isEqual(r.select,i.select)}}})(e,t):e.categories=t.categories),null==t.dataVolume&&null==e.dataVolume||(n=Math.max(t.dataVolume||0,e.dataVolume||0),t.dataVolume=e.dataVolume=n),t.dataReductionAlgorithm&&(e.dataReductionAlgorithm?o(t.dataReductionAlgorithm,e.dataReductionAlgorithm):e.dataReductionAlgorithm=t.dataReductionAlgorithm),t.values&&(r=(r=e.values)||(e.values={}),i=(a=t.values).group,n=r,((t=a).bind||t.for)&&(n.select||(n.select=[]),n.select.push(t)),s(r,a.select),i&&((a=e.values.group)?s(a,i.select):e.values.group={select:i.select.concat([]),by:i.by,dataReductionAlgorithm:i.dataReductionAlgorithm}))},e.createSplit=function(t,e){var r={selects:{}},i={visitRole:function(e){return (function(e,t,r){var i=r.items;if(!_.isEmpty(r.items))for(var a=[],n=0,o=i;n<o.length;n++){var s=o[n].queryName,s=t[s];a[s]||(e.selects[s]=!0,a[s]=!0)}})(r,t,e)}};return a.CompiledDataViewMapping.visitCategoricalCategories(e.categories,i),a.CompiledDataViewMapping.visitGrouped(e.values,i),a.CompiledDataViewMapping.visitCategoricalValues(e.values,i),r}})(powerbi=powerbi||{}),(function(e){(e=(e=e.data||(e.data={})).QueryCacheOptions||(e.QueryCacheOptions={}))[e.None=0]="None",e[e.AllowCache=1]="AllowCache",e[e.AllowQuery=2]="AllowQuery",e[e.CacheResult=4]="CacheResult",e[e.PreventRefresh=8]="PreventRefresh"})(powerbi=powerbi||{}),(function(a){var n;(function(e){var t=(u.findAndParseCalculation=function(e,t){t=this.findCalculation(e,t);if(t)return n.PrimitiveValueEncoding.parseValue(t.Value)},u.findAndParseCalculationToSQExpr=function(e,t){t=this.findCalculation(e,t);if(t)return n.PrimitiveValueEncoding.parseValueToSQExpr(t.Value)},u.findCalculation=function(e,t){for(var r=0,i=e.length;r<i;r++){var a=e[r];if(a.Id===t)return a}},u.describeDataType=function(e,t){var r=0;switch(e=e||0){case 2048:r=1;break;case 1:r=3;break;case 3:r=4;break;case 4096:r=5;break;case 20:r=6;break;case 4:r=7;break;case 8:r=9;break;case 67:r=4,t="Years";break;case 35:r=4,t="Months"}return a.ValueType.fromPrimitiveTypeAndCategory(r,t)},u.getTopLevelSecondaryDynamicMember=function(e,t){e=e.SecondaryHierarchy;return e?t&&t.Secondary?u.getDynamicMember(e,t.Secondary.Groupings,0):u.getDynamicMemberFallback(e):null},u.getTopLevelPrimaryDynamicMember=function(e,t,r){var i,a=e.PrimaryHierarchy;return a?(r&&(i=void 0!==e.Calculations),t&&t.Primary?u.getDynamicMember(a,t.Primary.Groupings,0,i):u.getDynamicMemberFallback(a,i)):null},u.getDynamicMember=function(e,t,r,i){if(0===e.length)return null;if(!t||0===t.length)return u.getDynamicMemberFallback(e,i);var a=t[r].Member;if(!a)return u.getDynamicMemberFallback(e,i);for(var n=0,o=e;n<o.length;n++){var s=o[n];if(s.Id===a)return s}return null},u.getDynamicMemberFallback=function(e,t){return 2===e.length?e[1]:void 0===t||!0===t?e[0]:null},u.fillMetadataColumnAggregate=function(e,t,r){void 0===r&&(r=!0);var i=t.source.aggregates;switch(i||(t.source.aggregates=i={}),t.aggregateKind){case 1:return void(i.subtotal=e);case 2:return void(i.max=e);case 3:return void(i.min=e);case 4:return void(r||(i.single=e));case 5:return void(i.count=e);case 6:return void(i.average=e);case 8:return void(i.median=e);case 7:var a=t.aggregate.Percentile,n=(n=i.percentiles)||(i.percentiles=[]),o={k:a.K,value:e};return null!=a.Exclusive&&(o.exclusive=a.Exclusive),void n.push(o)}},u.copyAggregates=function(e,t){void 0!==e.subtotal&&(t.subtotal=e.subtotal),void 0!==e.min&&(t.min=e.min),void 0!==e.max&&(t.max=e.max),void 0!==e.minLocal&&(t.minLocal=e.minLocal),void 0!==e.maxLocal&&(t.maxLocal=e.maxLocal),void 0!==e.count&&(t.count=e.count)},u.computeAggIdx=function(e,t,r,i){return e+(i-t)*(r+1)},u);function u(){}e.DataShapeUtility=t;Object.defineProperty(r.prototype,"name",{get:function(){return"maxLocal"},enumerable:!1,configurable:!0}),r.prototype.update=function(e){var t;"number"!=typeof e||isNaN(e)||(t=this.current,this.current=void 0===t?e:Math.max(t,e))},r.prototype.value=function(){return this.current},t=r;function r(){}e.MaxValueAggregator=t;Object.defineProperty(i.prototype,"name",{get:function(){return"minLocal"},enumerable:!1,configurable:!0}),i.prototype.update=function(e){var t;"number"!=typeof e||isNaN(e)||(t=this.current,this.current=void 0===t?e:Math.min(t||0,e))},i.prototype.value=function(){return this.current},t=i;function i(){}e.MinValueAggregator=t})((n=a.data||(a.data={})).dsr||(n.dsr={}))})(powerbi=powerbi||{}),(function(l){var p=l.ClientErrorStrings,o=jsCommon.StringExtensions;l.DMTS_MultipleGatewaysWithAllDatasourcesToBindError="DMTS_MultipleGatewaysWithAllDatasourcesToBindError",l.DMTS_DatasourceHasNoCredentialError="DMTS_DatasourceHasNoCredentialError",l.DMTS_OAuthTokenRefreshFailedError="DMTS_OAuthTokenRefreshFailedError",l.DM_GWPipeline_Client_GatewayUnreachable="DM_GWPipeline_Client_GatewayUnreachable",l.DM_GWPipeline_Client_OAuthTokenRefreshFailedError="DM_GWPipeline_Client_OAuthTokenRefreshFailedError",l.DMTS_UserLostPermissionToDatasourceError="DMTS_UserLostPermissionToDatasourceError",l.DMTS_UserNotFoundInADGraphError="DMTS_UserNotFoundInADGraphError",l.DM_GWPipeline_Gateway_DataSourceAccessError="DM_GWPipeline_Gateway_DataSourceAccessError",l.DM_GWPipeline_Gateway_ImpersonationError="DM_GWPipeline_Gateway_ImpersonationError",l.DM_GWPipeline_Gateway_InvalidMashupConnectionString="DM_GWPipeline_Gateway_InvalidMashupConnectionString",l.DM_GWPipeline_Gateway_DatabaseLoginError="DM_GWPipeline_Gateway_DatabaseLoginError",l.DM_GWPipeline_Gateway_SqlTimeoutException="DM_GWPipeline_Gateway_SqlTimeoutException",l.DM_GWPipeline_Gateway_AdomdTimeoutException="DM_GWPipeline_Gateway_AdomdTimeoutException",l.DM_GWPipeline_Gateway_InvalidObjectNameException="DM_GWPipeline_Gateway_InvalidObjectNameException",l.DM_GWPipeline_Gateway_InvalidConnectionCredentials="DM_GWPipeline_Gateway_InvalidConnectionCredentials",l.DM_GWPipeline_Gateway_ConnectionBrokenException="DM_GWPipeline_Gateway_ConnectionBrokenException",l.DM_GWPipeline_Gateway_MemoryError="DM_GWPipeline_Gateway_MemoryError",l.DM_GWPipeline_Gateway_MissingStructureError="DM_GWPipeline_Gateway_MissingStructureError",l.DM_GWPipeline_Gateway_UnprocessedStructureError="DM_GWPipeline_Gateway_UnprocessedStructureError",l.DM_GWPipeline_Gateway_ModelLoadError="DM_GWPipeline_Gateway_ModelLoadError",l.DM_GWPipeline_Gateway_CancellationError="DM_GWPipeline_Gateway_CancellationError",l.DM_GWPipeline_Gateway_CancellationOrTimeoutError="DM_GWPipeline_Gateway_CancellationOrTimeoutError",l.DM_GWPipeline_Gateway_QueryExecutionError="DM_GWPipeline_Gateway_QueryExecutionError",l.DM_GWPipeline_Gateway_RecalculationRequiredError="DM_GWPipeline_Gateway_RecalculationRequiredError",l.DM_GWPipeline_Gateway_TimeoutError="DM_GWPipeline_Gateway_TimeoutError",l.DM_GWPipeline_Gateway_AdomdConnectError="DM_GWPipeline_Gateway_AdomdConnectError",l.DM_GWPipeline_Gateway_MashupDataAccessError="DM_GWPipeline_Gateway_MashupDataAccessError",l.DM_GWPipeline_Gateway_DatabaseConnectError="DM_GWPipeline_Gateway_DatabaseConnectError",l.DM_GWPipeline_Gateway_ServerUnreachable="DM_GWPipeline_Gateway_ServerUnreachable",l.RS_AccessDenied="rsAccessDenied",l.azureValues="azure:values",l.KnownDsrClientErrors={ComplexSlicerNotAllowedWithMeasures:{localizedContent:"DsrError_ComplexSlicerNotAllowedWithMeasuresValue"},ComplexHighlightsNotAllowed:{localizedContent:"DsrError_ComplexHighlightsNotAllowed_Details",localizedMessage:"DsrError_ComplexHighlightsNotAllowed_ShortMessage"},CouldNotResolveModelReferencesInSemanticQuery:{localizedMessage:"DsrError_CouldNotResolveModelRefErrorMessage",localizedTitle:"DsrError_CouldNotResolveModelRefErrorKey",localizedContent:"DsrError_CouldNotResolveModelRefErrorValNoItems",localizedContentWithAffectedItems:"DsrError_CouldNotResolveModelRefErrorValFormat",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690865"},ExclusivePercentileOutOfRange:{localizedMessage:"DsrError_ExclusivePercentileOutOfRangeMessage",localizedTitle:"DsrError_ExclusivePercentileOutOfRangeKey",localizedContent:"DsrError_ExclusivePercentileOutOfRangeValue"},InvalidDataShapeNoOutputData:{localizedContent:"DsrError_InvalidDataShapeValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690860"},InvalidUnconstrainedJoin:{localizedTitle:"DsrError_InvalidUnconstrainedJoinKey",localizedContent:"DsrError_InvalidUnconstrainedJoinValue",helpLink:"https://go.microsoft.com/fwlink/?linkid=2186131"},IsRelatedToManyNotSupportedForDetailTable:{localizedMessage:"DsrError_IsRelatedToManyNotSupportedForDetailTableMessage",localizedTitle:"DsrError_IsRelatedToManyNotSupportedForDetailTableKey",localizedContent:"DsrError_IsRelatedToManyNotSupportedForDetailTableValueNoItems",localizedContentWithAffectedItems:"DsrError_IsRelatedToManyNotSupportedForDetailTableValueFormat"},AA_PowerBIScriptPayloadTooLargeError:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=746290"},AA_PowerBIScriptResultTooLargeError:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=746291"},AA_PowerBIScriptReturnedNoImageError:{localizedMessage:"DsrError_ScriptReturnedNoImageMessage",localizedTitle:"DsrError_ScriptReturnedNoImageKey",localizedContent:"DsrError_ScriptReturnedNoImageContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=733479"},AA_PowerBIScriptRuntimeErrorError:{localizedTitle:"DsrError_ScriptRuntimeErrorKey",localizedMessage:"DsrError_ScriptRuntimeErrorMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=733477"},AA_PowerBIScriptTimeoutError:{localizedMessage:"DsrError_ScriptTimeoutMessage",localizedTitle:"DsrError_ScriptTimeoutKey",localizedContent:"DsrError_ScriptTimeoutContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=733478"},AA_PowerBIRequestsQueueOverflowError:{localizedTitle:"DsrError_RequestsQueueOverflowKey",localizedMessage:"DsrError_RequestsQueueOverflowMessage",localizedContent:"DsrError_RequestsQueueOverflowContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799576"},AA_PowerBIScriptRuntimeMaxMemoryError:{localizedTitle:"DsrError_ScriptRuntimeMaxMemoryKey",localizedMessage:"DsrError_ScriptRuntimeMaxMemoryMessage",localizedContent:"DsrError_ScriptRuntimeMaxMemoryContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799578"},AA_PowerBIScriptRuntimeMaxDiskIOError:{localizedTitle:"DsrError_ScriptRuntimeMaxDiskIOKey",localizedMessage:"DsrError_ScriptRuntimeMaxDiskIOMessage",localizedContent:"DsrError_ScriptRuntimeMaxDiskIOContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799579"},AA_PowerBIScriptMissingDependencyError:{localizedTitle:"DsrError_ScriptRuntimeMissingDependencyKey",localizedMessage:"DsrError_ScriptRuntimeMissingDependencyMessage",localizedContent:"DsrError_ScriptRuntimeMissingDependencyContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799857"},AA_PowerBIScriptSpecificPackageWithMissingDependencyError:{localizedTitle:"DsrError_ScriptRuntimeSpecificPackageWithMissingDependencyKey",localizedMessage:"DsrError_ScriptRuntimeSpecificPackageWithMissingDependencyMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=799858"},AA_PowerBIScriptSpecificPackageMissingSpecificDependencyError:{localizedTitle:"DsrError_ScriptRuntimeSpecificPackageMissingSpecificDependencyKey",localizedMessage:"DsrError_ScriptRuntimeSpecificPackageMissingSpecificDependencyMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=799859"},AA_PowerBIScriptMissingSpecificPackageError:{localizedTitle:"DsrError_ScriptRuntimeMissingSpecificPackageKey",localizedMessage:"DsrError_ScriptRuntimeMissingSpecificPackageMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=800225"},ModelMeasuresNotSupportedForDetailTable:{localizedMessage:"DsrError_ModelMeasuresNotSupportedForDetailTableMessage",localizedTitle:"DsrError_ModelMeasuresNotSupportedForDetailTableKey",localizedContent:"DsrError_ModelMeasuresNotSupportedForDetailTableValueNoItems",localizedContentWithAffectedItems:"DsrError_ModelMeasuresNotSupportedForDetailTableValueFormat"},ModelUnavailable:{localizedContent:"DsrError_ModelUnavailableValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690862"},NoUniqueKeyForDetailTable:{localizedContent:"DsrError_NoUniqueKeyForDetailTableValue"},OverlappingKeysOnOppositeHierarchies:{localizedTitle:"DsrError_OverlappingKeysKey",localizedContent:"DsrError_OverlappingKeysValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690863"},rsQueryMemoryLimitExceeded:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690864"},rsQueryTimeoutExceeded:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690864"},rsAccessDenied:{localizedMessage:"DsrError_NoPermissionMessage",localizedTitle:"DsrError_NoPermissionKey",localizedContent:"DsrError_NoAccessForVisual",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690862"},UnsupportedDateTimeLiteral:{localizedMessage:"DsrError_UnsupportedDateTimeMessage",localizedTitle:"DsrError_UnsupportedDateTimeKey",localizedContent:"DsrError_UnsupportedDateTimeValueNoItems",localizedContentWithAffectedItems:"DsrError_UnsupportedDateTimeValueFormat"},InvalidExtensionDax_UnclosedBracketIdentifier:{localizedContentWithAffectedItemsAndPosition:"DsrError_InvalidExtensionDax_UnclosedBracketIdentifier"},InvalidExtensionDax_UnexpectedCloseParenthesis:{localizedContentWithAffectedItemsAndPosition:"DsrError_InvalidExtensionDax_UnexpectedCloseParenthesis"},InvalidFilterComparisonIncompatibleExpressions:{localizedContent:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpression",localizedContentWithAffectedItems:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpressionWithAffectedItems"},InvalidFilterConditionIncompatibleDataType:{localizedContent:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpression",localizedContentWithAffectedItems:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpressionWithAffectedItems"},ExtensionMeasureEmptyExpression:{localizedContentWithAffectedItems:"DsrError_ExtensionMeasureEmptyExpression"},ExtensionMeasureNameNotUniqueModel:{localizedContentWithAffectedItems:"DsrError_ExtensionMeasureNameNotUniqueModel"},ExtensionMeasureNameNotUnique:{localizedContentWithAffectedItems:"DsrError_ExtensionMeasureNameNotUnique"},CouldNotResolveModelReferencesInQueryExtensionSchema:{localizedMessage:"DsrError_CouldNotResolveModelRefErrorMessage",localizedTitle:"DsrError_CouldNotResolveModelRefErrorKey",localizedContentWithAffectedItems:"DsrError_CouldNotResolveModelReferencesInQueryExtensionSchema"},QueryExtensionMeasureError:{localizedContentWithAffectedItemsAndPosition:"DsrError_QueryExtensionMeasureError",localizedContentWithAffectedItemsAndPositionAndDetails:"DsrError_QueryExtensionMeasureErrorWithDetails"},QueryExtensionMeasureUnexpectedEndOfUserInput:{localizedContentWithAffectedItems:"DsrError_QueryExtensionMeasureUnexpectedEndOfUserInput"},UnsupportedDataSourceVariables:{localizedMessage:"DsrError_UnsupportedDataSourceVariablesMessage",localizedTitle:"DsrError_UnsupportedDataSourceVariablesKey",localizedContent:"DsrError_UnsupportedDataSourceVariablesContent"},DataExtensionMissingResultSet:{localizedMessage:"DsrError_DataExtensionMissingResultSetMessage",localizedTitle:"DsrError_DataExtensionMissingResultSetKey",localizedContent:"DsrError_DataExtensionMissingResultSetContent"},CannotUseMultiColumnFilteringWithMappedColumns:{localizedContent:"DsrError_DQP_CannotUseMultiColumnFilteringWithMappedColumns",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},DifferentMappingsWithinSubqueries:{localizedContent:"DsrError_DQP_DifferentMappingsWithinSubqueries",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},FilterIncompatibleWithParameter:{localizedContent:"DsrError_DQP_FilterIncompatibleWithParameter",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},FoundMultipleTargetsWithAtLeastOneMapping:{localizedContent:"DsrError_DQP_FoundMultipleTargetsWithAtLeastOneMapping",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},FoundParameterMappingOnUnsupportedFilter:{localizedContent:"DsrError_DQP_FoundParameterMappingOnUnsupportedFilter",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},InTableConditionNotSupportedWithMappedParameters:{localizedContent:"DsrError_DQP_InTableConditionNotSupportedWithMappedParameters",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},InvalidMappedParameterValueExpression:{localizedContent:"DsrError_DQP_InvalidMappedParameterValueExpression",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MappedTargetMustMatchMappedCondition:{localizedContent:"DsrError_DQP_MappedTargetMustMatchMappedCondition",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MixOfAssignedAndUnassignedColumnsWithinORExpression:{localizedContent:"DsrError_DQP_MixOfAssignedAndUnassignedColumnsWithinORExpression",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MultipleParameterAssignmentsWithinORUnsupported:{localizedContent:"DsrError_DQP_MultipleParameterAssignmentsWithinORUnsupported",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MultipleParameterMappingsUnsupported:{localizedContent:"DsrError_DQP_MultipleParameterMappingsUnsupported",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},ParameterMappingFilterConflict:{localizedContent:"DsrError_DQP_ParameterMappingFilterConflict",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},ParameterMappingsFoundWithinFilteredEvalExpressionFilter:{localizedContent:"DsrError_DQP_ParameterMappingsFoundWithinFilteredEvalExpressionFilter",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},ParameterMappingsNotSupportedOnHighlights:{localizedContent:"DsrError_DQP_ParameterMappingsNotSupportedOnHighlights",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},SingleValueParameterWithMultipleValues:{localizedContent:"DsrError_DQP_SingleValueParameterWithMultipleValues",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"}};var e=(Object.defineProperty(d,"maxNumberOfCommaValues",{get:function(){return 9},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"code",{get:function(){return this.oDataCode},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"oDataErrorMessage",{get:function(){if(this.oDataError&&this.oDataError.message&&this.oDataError.message.value)return this.oDataError.message.value},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"source",{get:function(){switch(this.oDataError.source){case"PowerBI":return"PowerBI";case"External":return"External";case"Unknown":return;case"User":return d.isCodeKnown(this.code)?"User":void 0}this.oDataError.source},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"AdditionalErrorMessages",{get:function(){if(this.oDataError){var e=this.oDataError[l.azureValues];if(!_.isEmpty(e))for(var t=0,r=e;t<r.length;t++){var i=r[t];if(!_.isEmpty(i.additionalMessages))return i.additionalMessages}}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"powerBiErrorDetails",{get:function(){if(this.oDataError){var e=this.oDataError[l.azureValues];if(!_.isEmpty(e))for(var t=0,r=e;t<r.length;t++){var i=r[t];if(!_.isEmpty(i.powerBiErrorDetails))return i.powerBiErrorDetails}}},enumerable:!1,configurable:!0}),d.prototype.getDetails=function(e){var t=this.oDataError[l.azureValues],r=null;if(t)for(var i=0,a=t;i<a.length;i++){var n=a[i];if(n.details){r=n.details;break}}var o=d.getErrorDetailsFromStatusCode(this.code,this.oDataErrorMessage,r,this.AdditionalErrorMessages,e),t=o.displayableErrorInfo[0].errorInfoKey;return!d.isCodeKnown(this.code)&&r&&(o.displayableErrorInfo=[]),r&&(e=0===o.displayableErrorInfo.length?t:e.get("DsrError_MoreInfo"),o.displayableErrorInfo.push({errorInfoKey:e,errorInfoValue:r})),d.isDynamicQueryParameterErrorCode(this.code)&&(o.hideDebugInfo=!0),o},d.getErrorDetailsFromStatusCode=function(e,t,r,i,a){var n=a.get("DsrError_Key"),o=a.get("DsrError_UnknownErrorValue"),s=a.get("DsrError_Message"),u=jsCommon.PowerBIDefaultHelpPage,c=l.KnownDsrClientErrors[e];c&&(n=c.localizedTitle?a.get(c.localizedTitle):n,o=d.getContent(e,r,i,c,a)||o,s=c.localizedMessage?a.get(c.localizedMessage):s,u=c.helpLink||u,c.useODataErrorMessageAsContent&&(o=t||s));u={message:s,displayableErrorInfo:[{errorInfoKey:n,errorInfoValue:o}],helpLink:u,debugErrorInfo:[]};return!c&&e&&u.debugErrorInfo.push({errorInfoKey:p.ErrorCode,errorInfoValue:e}),c&&c.useODataErrorMessageAsContent||!t||u.debugErrorInfo.push({errorInfoKey:p.ODataErrorMessage,errorInfoValue:t}),u},d.getContent=function(e,t,r,i,a){if(i.localizedContentWithAffectedItemsAndPosition||i.localizedContentWithAffectedItemsAndPositionAndDetails){var n=d.findAdditionalMessageWithAffectedItemsAndPosition(e,r);if(i.localizedContentWithAffectedItemsAndPositionAndDetails&&t&&n)return o.format(a.get(i.localizedContentWithAffectedItemsAndPositionAndDetails),o.constructCommaSeparatedList(n.AffectedItems,a,d.maxNumberOfCommaValues),l.formattingService.formatValue(n.Line),l.formattingService.formatValue(n.Position),t);if(i.localizedContentWithAffectedItemsAndPosition&&n)return o.format(a.get(i.localizedContentWithAffectedItemsAndPosition),o.constructCommaSeparatedList(n.AffectedItems,a,d.maxNumberOfCommaValues),l.formattingService.formatValue(n.Line),l.formattingService.formatValue(n.Position))}if(i.localizedContentWithAffectedItems){r=d.getAffectedItemsFromStatusCode(e,r);if(0<r.length)return o.format(a.get(i.localizedContentWithAffectedItems),o.constructCommaSeparatedList(r,a,d.maxNumberOfCommaValues))}if(i.localizedContent)return a.get(i.localizedContent)},d.findAdditionalMessageWithAffectedItemsAndPosition=function(t,e){return _.find(e,(function(e){return e.Code===t&&!_.isEmpty(e.AffectedItems)&&null!=e.Position&&null!=e.Line}))},d.getAffectedItemsFromStatusCode=function(e,t){for(var r=0,i=t;r<i.length;r++){var a=i[r];if(a.Code===e)return a.AffectedItems||[]}return[]},d.prototype.parseCode=function(){var e=this.oDataError.code,t=this.oDataError[l.azureValues],r=[];if(t)for(var i=0,a=t;i<a.length;i++){var n=a[i];n.additionalMessages&&(r=n.additionalMessages)}if(0<r.length)for(var o=0,s=r;o<s.length;o++){var u=s[o];if(d.isCodeKnown(u.Code)){e=u.Code;break}}return e},d.isCodeKnown=function(e){return d.isGeneralKnownErrorCode(e)||d.isDynamicQueryParameterErrorCode(e)},d.isGeneralKnownErrorCode=function(e){switch(e){case"ComplexSlicerNotAllowedWithMeasures":case"ComplexHighlightsNotAllowed":case"ExclusivePercentileOutOfRange":case"InvalidDataShapeNoOutputData":case"InvalidFilterComparisonIncompatibleExpressions":case"InvalidFilterConditionIncompatibleDataType":case"InvalidUnconstrainedJoin":case"ModelUnavailable":case"OverlappingKeysOnOppositeHierarchies":case"rsQueryMemoryLimitExceeded":case"rsQueryTimeoutExceeded":case"CouldNotResolveModelReferencesInSemanticQuery":case"QueryExtensionMeasureUnexpectedEndOfUserInput":case"rsAccessDenied":case"NoUniqueKeyForDetailTable":case"IsRelatedToManyNotSupportedForDetailTable":case"ModelMeasuresNotSupportedForDetailTable":case"UnsupportedDateTimeLiteral":case"InvalidExtensionDax_UnclosedBracketIdentifier":case"InvalidExtensionDax_UnexpectedCloseParenthesis":case"ExtensionMeasureEmptyExpression":case"ExtensionMeasureNameNotUniqueModel":case"ExtensionMeasureNameNotUnique":case"CouldNotResolveModelReferencesInQueryExtensionSchema":case"QueryExtensionMeasureError":case"UnsupportedDataSourceVariables":case"DataExtensionMissingResultSet":return!0;default:return!1}},d.isDynamicQueryParameterErrorCode=function(e){switch(e){case"CannotUseMultiColumnFilteringWithMappedColumns":case"DifferentMappingsWithinSubqueries":case"FilterIncompatibleWithParameter":case"FoundMultipleTargetsWithAtLeastOneMapping":case"FoundParameterMappingOnUnsupportedFilter":case"InTableConditionNotSupportedWithMappedParameters":case"InvalidMappedParameterValueExpression":case"MappedTargetMustMatchMappedCondition":case"MixOfAssignedAndUnassignedColumnsWithinORExpression":case"MultipleParameterAssignmentsWithinORUnsupported":case"MultipleParameterMappingsUnsupported":case"ParameterMappingFilterConflict":case"ParameterMappingsFoundWithinFilteredEvalExpressionFilter":case"ParameterMappingsNotSupportedOnHighlights":case"SingleValueParameterWithMultipleValues":return!0;default:return!1}},d);function d(e){this.oDataError=e,this.oDataCode=this.parseCode()}l.DsrClientError=e})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e){this.httpService=e}e=e.bingSocial||(e.bingSocial={}),t.prototype.requestData=function(i,e,t){var r=[],a=t.getUrlTemplates(),n=t.getResponseFormatter();e=this.formatSearchKey(e);for(var o=0,s=a;o<s.length;o++){var u=s[o],c=$.Deferred();r.push(c),u=u.replace(/{{searchKey}}/g,encodeURIComponent(e)),this.makeRequest(u,c)}(1===r.length?r[0]:$.when.apply($,r)).pipe((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.formatResponse(Array.prototype.slice.call(e));i.resolve(r)}),i.reject)},t.prototype.formatSearchKey=function(e){return e=e.trim().toUpperCase(),e=this.removeEdgeBinaryOperator(e,"AND"),e=this.removeEdgeBinaryOperator(e,"OR")},t.prototype.removeEdgeBinaryOperator=function(e,t){return _.startsWith(e,t+" ")&&(e=t.toLowerCase()+e.slice(t.length)),e=_.endsWith(e," "+t)?e.slice(0,e.length-t.length)+t.toLowerCase():e},t.prototype.makeRequest=function(e,t){var r=this.httpService.powerbiRequestOptions();r.responseType="json",this.httpService.get(e,r).then((function(e){e=e.data;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return t.reject()}t.resolve(e)}),t.reject)},e.BingSocialClient=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){var i;(function(r){var u=jsCommon.StringExtensions;r.LimitMetadata=function(){};var e=(Object.defineProperty(s.prototype,"code",{get:function(){return"DsrLimitsWarning"},enumerable:!1,configurable:!0}),s.prototype.computeMetadata=function(e,t,r){var i,a,n,o;this.limits={},e.Limits&&(o=s.getExceededLimitsDetails(e,r),i=e.Limits,a=!!o.Primary,n=!!o.Secondary,r=!!o.Intersection,e.ScriptVisualBinding?this.hasScriptVisualBinding=!0:(o=e.Expressions&&e.Expressions.Primary&&e.Expressions.Primary.Groupings?e.Expressions.Primary.Groupings:[],e=e.Expressions&&e.Expressions.Secondary&&e.Expressions.Secondary.Groupings?e.Expressions.Secondary.Groupings:[],a&&n?(this.groupings=o.concat(e),this.limits.Primary=s.getLimitMetadata(i.Primary,t),this.limits.Secondary=s.getLimitMetadata(i.Secondary,t)):a?(this.groupings=o,this.limits.Primary=s.getLimitMetadata(i.Primary,t)):n&&(this.groupings=e,this.limits.Secondary=s.getLimitMetadata(i.Secondary,t)),r&&(this.limits.Intersection=s.getLimitMetadata(i.Intersection,t))))},s.prototype.getDetails=function(e){var t=!!this.limits.Primary,r=!!this.limits.Secondary,i=null,a=-1;this.hasScriptVisualBinding?i=e.get("DsrLimitWarning_TooMuchDataValMultipleColumns"):t||r?i=t&&r?(a=this.limits.Primary.Type,this.getErrorInfoValue(this.groupings,e.get("DsrLimitsWarning_MultipleColumnsWithIssuesFormat"),e)):(a=(t?this.limits.Primary:this.limits.Secondary).Type,this.getErrorInfoValue(this.groupings,s.getDetailedMessageFormatForOneColumn(a,e),e)):this.limits.Intersection&&(a=this.limits.Intersection.Type,i=s.getDetailedMessageFormatForOneColumn(a,e));i=i||e.get("DsrLimitWarning_TooMuchDataValMultipleColumns");return{message:s.getMessage(a,e),displayableErrorInfo:[{errorInfoKey:s.getKey(a,e),errorInfoValue:i}],helpLink:s.getHelpLink(a)}},s.getExceededLimitsDetails=function(e,t){for(var r=e.Limits,i={},a=0,n=t;a<n.length;a++){var o=n[a];r.Primary&&o.Id===r.Primary.Id?i.Primary=r.Primary:r.Secondary&&o.Id===r.Secondary.Id?i.Secondary=r.Secondary:r.Intersection&&o.Id===r.Intersection.Id&&(i.Intersection=r.Intersection)}return i},s.prototype.getErrorInfoValue=function(e,t,r){if(!e||0===e.length)return null;for(var i=[],a=0,n=e.length;a<n;a++){var o=e[a],o=this.getGroupingNameFromGroupingKeys(o);o&&i.push(o)}var s=i.length;return 0===s?null:(r=1===s?i[0]:i.join(r.get("ListJoin_Separator")),u.format(t,r))},s.prototype.getGroupingNameFromGroupingKeys=function(e){for(var t=e.Keys,r=0,i=t.length;r<i;r++){var a=t[r];if(null!==a.Select&&void 0!==a.Select)return this.columnNameFromIndex?this.columnNameFromIndex(a.Select):void 0}},s.getMessage=function(e,t){switch(e){case 2:return t.get("DsrLimitWarning_RepresentativeSampleMessage");case 3:case 4:return t.get("DsrLimitWarning_HighDensitySampleMessage");default:return t.get("DsrLimitWarning_TooMuchDataMessage")}},s.getKey=function(e,t){switch(e){case 2:return t.get("DsrLimitWarning_RepresentativeSampleKey");case 3:case 4:return t.get("DsrLimitWarning_HighDensitySampleKey");default:return t.get("DsrLimitWarning_TooMuchDataKey")}},s.getDetailedMessageFormatForOneColumn=function(e,t){switch(e){case 2:return t.get("DsrLimitWarning_RepresentativeSampleVal");case 3:return t.get("DsrLimitWarning_HighDensitySampleVal");case 4:return t.get("DsrLimitWarning_OverlappingPointsDetails");default:return t.get("DsrLimitWarning_TooMuchDataVal")}},s.getHelpLink=function(e){switch(e){case 3:return"https://go.microsoft.com/fwlink/?linkid=848757";case 4:return"https://go.microsoft.com/fwlink/?linkid=853820"}},s.getLimitMetadata=function(e,t){return e.Top?{Type:0,Count:s.getLimitCount(e.Top,t)}:e.Bottom?{Type:1,Count:s.getLimitCount(e.Bottom,t)}:e.Sample?{Type:2,Count:s.getLimitCount(e.Sample,t)}:e.BinnedLineSample?{Type:3,Count:s.getBinnedLineSampleCount(e.BinnedLineSample)}:e.OverlappingPointsSample?{Type:4,Count:s.getLimitCount(e.OverlappingPointsSample,t)}:{Type:-1,Count:null}},s.getLimitCount=function(e,t){if(e.Calc&&t){t=r.DataShapeUtility.findCalculation(t,e.Calc);if(t){t=i.PrimitiveValueEncoding.parseValue(t.Value);if(_.isNumber(t))return t}}return e.Count},s.getBinnedLineSampleCount=function(e){return e.MaxTargetPointCount},s);function s(e,t,r){t&&t.length,this.computeMetadata(e,r,t)}r.DsrLimitsWarning=e})((i=e.data||(e.data={})).dsr||(i.dsr={}))})(powerbi=powerbi||{}),(function(e){(function(r){r.getDsrMessageSeverityValue=function(e){if(0===e)return"Warning"},r.KnownDsrMessages={"ForecastErrorType.DataIsTooSmall":{localizedMessage:"DsrMessage_NotEnoughDataMessage",localizedTitle:"DsrMessage_NotEnoughDataTitle",localizedContent:"DsrMessage_NotEnoughDataContent",isTransformMessage:!0},"ForecastErrorType.TooManyMissingValues":{localizedMessage:"DsrMessage_DataIsTooRandomOrMissingValuesMessage",localizedTitle:"DsrMessage_DataIsTooRandomOrMissingValuesTitle",localizedContent:"DsrMessage_DataIsTooRandomOrMissingValuesContent",isTransformMessage:!0},"ForecastErrorType.NoDominantStepDetected":{localizedMessage:"DsrMessage_DataIsTooRandomOrMissingValuesMessage",localizedTitle:"DsrMessage_DataIsTooRandomOrMissingValuesTitle",localizedContent:"DsrMessage_DataIsTooRandomOrMissingValuesContent",isTransformMessage:!0},"ForecastErrorType.InputTimeStampsNotSorted":{localizedMessage:"DsrMessage_UnsortedDataMessage",localizedTitle:"DsrMessage_UnsortedDataTitle",localizedContent:"DsrMessage_UnsortedDataContent",isTransformMessage:!0},"ForecastErrorType.XAxisIsNull":{localizedMessage:"DsrMessage_ForecastXValueNullMessage",localizedTitle:"DsrMessage_ForecastXValueNullTitle",localizedContent:"DsrMessage_ForecastXValueNullContent",isTransformMessage:!0},"ForecastErrorType.InvalidSeasonality":{localizedMessage:"DsrMessage_ForecastInvalidSeasonalityMessage",localizedTitle:"DsrMessage_ForecastInvalidSeasonalityTitle",localizedContent:"DsrMessage_ForecastInvalidSeasonalityContent",isTransformMessage:!0},"ForecastErrorType.InvalidDataType":{localizedMessage:"DsrMessage_ForecastVariantDataTypeMessage",localizedTitle:"DsrMessage_ForecastVariantDataTypeTitle",localizedContent:"DsrMessage_ForecastVariantDataTypeContent",isTransformMessage:!0},"ForecastErrorType.Unexpected":{localizedMessage:"DsrMessage_ForecastErrorMessage",localizedTitle:"DsrMessage_ForecastErrorTitle",localizedContent:"DsrMessage_ForecastErrorContent",isTransformMessage:!0},ForecastTransformUnsupported:{localizedMessage:"DsrMessage_ForecastNotSupportedMessage",localizedTitle:"DsrMessage_ForecastNotSupportedTitle",localizedContent:"DsrMessage_ForecastNotSupportedContent",isTransformMessage:!0},"ClusteringErrorType.LessThanKDataPoints":{localizedMessage:"DsrMessage_ClusterTooManyClustersTitle",localizedTitle:"DsrMessage_ClusterTooManyClustersTitle",localizedContent:"DsrMessage_ClusterTooManyClustersContent",isTransformMessage:!0},"ClusteringErrorType.TooManyDataPoints":{localizedMessage:"DsrMessage_ClusterExceedsLimitTitle",localizedTitle:"DsrMessage_ClusterExceedsLimitTitle",localizedContent:"DsrMessage_ClusterExceedsLimitContent",isTransformMessage:!0},"ClusteringErrorType.InvalidDataType":{localizedMessage:"DsrMessage_ClusterVariantDataTypeTitle",localizedTitle:"DsrMessage_ClusterVariantDataTypeTitle",localizedContent:"DsrMessage_ClusterVariantDataTypeContent",isTransformMessage:!0}};var e=(Object.defineProperty(t.prototype,"code",{get:function(){return this.dataShapeMessage.Code},enumerable:!1,configurable:!0}),t.prototype.getDetails=function(e){var t=r.KnownDsrMessages[this.dataShapeMessage.Code];return{message:e.get(t.localizedMessage),displayableErrorInfo:[{errorInfoKey:e.get(t.localizedTitle),errorInfoValue:e.get(t.localizedContent)}]}},t.prototype.isTransformMessage=function(){var e=r.KnownDsrMessages[this.code];return e&&e.isTransformMessage},t);function t(e){this.dataShapeMessage=e}r.DsrMessage=e})((e=e.data||(e.data={})).dsr||(e.dsr={}))})(powerbi=powerbi||{}),(function(v){var S,C,t,x;function D(e){if(2===e.Version)return!0}function l(e,t,r,i,a,n,o,s,u,c,l,p,d,h,m){if(!r)return null;var f;if(s=s||{},4&e&&(e|=8),D(r)){if(f="dsr2-read",performance&&performance.mark&&performance.mark(f+"-start"),s.mode="V2",1!==_.size(r.DS))return null;var y=C.createDsrParserContext(t),g=C.reader.V2.createDsrParser(r,y),y=(function(e,t,r,i,a){var n,o,s,u,c,l={columns:e.createDataViewMetadataColumns()},p={dataView:{metadata:l}};{var d;(function(e,t){e.reset();e=e.dataShapes();e.count(),e.next(),e.complete()||(t.dataView.metadata.segment={},t.restartToken=e.restartTokens())})(t,p),e.includes(2)&&(d=x((function(){(n=C.converters.createMatrix(e,t,l,a,i.synchronizedGroupsEnabled,i.scopedMeasuresEnabled))&&(p.dataView.matrix=n,t.lockCache())})),n&&(r.matrix=d))}e.includes(1)&&(h=x((function(){(o=C.converters.categorical(e,t,l,i))&&(p.dataView.categorical=o,t.lockCache())})),o&&(r.categorical=h));{var h;e.includes(8)&&(h=x((function(){(s=C.converters.createTable(e,t,l))&&(p.dataView.table=s,t.lockCache())})),s&&(r.table=h))}e.includes(16)&&(m=x((function(){(u=C.converters.createTree(e,t))&&(p.dataView.tree=u,t.lockCache())})),u&&(r.tree=m));{var m;e.includes(4)&&(m=x((function(){(c=C.converters.createSingle(e,t))&&(p.dataView.single=c)})),c&&(r.single=m))}return p})(new C.DataViewConverterContext(e,t,y,h,g.dataShapes()),g,s,i,h);g.reset();h=g.dataShapes(),h.next();h.limitsExceeded()&&(y.warnings||(y.warnings=[]),g=new C.DsrLimitsWarning(t,C.toDsrV1Limit(h),C.toDsrV1Calc(h)),y.warnings.push(g),C.reader.V1.applyReductionMetadata(y.dataView,g.limits)),(function(e,t){var r=e.messages();if(r)for(;r.next();)C.KnownDsrMessages[r.code()]&&r.severity()===C.getDsrMessageSeverityValue(0)&&(t.warnings||(t.warnings=[]),t.warnings.push(r.dsrMessage()))})(h,y),y.dataView&&!_.isEmpty(n)&&(S.ClientSideFilter.applyClientSideFilters(y.dataView,n),y.disallowPersisting=!0)}else f="dsr1-read",performance&&performance.mark&&performance.mark(f+"-start"),s.mode="V1Old",y=C.reader.V1.read(e,t,r,s,a,n,o);return y&&(y.timestamp=l,y.fromCache=p,d&&!y.fromCache&&(y.performanceActivities=C.parseExecutionEvents(d.Events,m&&m.getProperty("rootId")))),performance&&(performance.mark&&performance.mark(f+"-end"),performance.measure&&performance.measure(f,f+"-start",f+"-end")),s.total=jsCommon.performance.now()-c,u&&u.logEvent(v.telemetry.DataDsrToDataView,{jsonparse:s.jsonParse,categorical:s.categorical,table:s.table,tree:s.tree,matrix:s.matrix,single:s.single,script:s.script,total:s.total,mode:s.mode,targetDataView:e,dsrLength:s.dsrLength,id:o}),y}S=v.data||(v.data={}),C=S.dsr||(S.dsr={}),t=jsCommon.JsonExtensions,x=jsCommon.PerfTimer.logTime,C.isDsrV2=D,C.getDsrV2MinorVersion=function(e){return e.MinorVersion},C.read=function(e,t,r,i,a,n){if(!t)return null;var o;t.data&&(t=t.data),n&&n.isRunning()&&(o=n.createChildActivity({name:"Parse Query Result"}));var s={},u=t,c=jsCommon.performance.now();return _.isString(t)&&(s.dsrLength=t.length,s.jsonParse=x((function(){u=JSON.parse(t)})),o&&o.setProperty("metrics",{jsonParse:s.jsonParse})),n=l(e,u.descriptor,u.dsr,r,u.requestId,u.clientSideFilters,a,s,i,c,u.timestamp,u.fromCache,u.metrics,r.scopedAggregates,n),null==r||!r.queryContext||(r=u.queryContext)&&(n.queryContext=r),o&&o.resolve(),n},C.readDsr=l,C.containsRestartToken=function(e){return!!e&&(e=e.data,_.isString(e)&&(e=t.tryParseJSON(e)),!_.isEmpty(e)&&(function(e){if(e)if(D(e)){for(var t=C.reader.V2.createDsrParser(e,void 0).dataShapes();t.next();)if(t.hasRestartTokens())return!0}else for(var e=e.DataShapes,r=0,i=e;r<i.length;r++){var a=i[r];if(!_.isEmpty(a.RestartTokens))return!0}return!1})(e.dsr))}})(powerbi=powerbi||{}),(function(e){!(function(e){var M,t;function p(e,t,r,i,a){null!=t.Select||t.ScriptVisualBinding,this.targets=e,this.descriptor=t,this.selects=t.Select,this.selectIndexToColumn={},this.aggregateCalcMetadata={},this._calcInfo={},this.calcIdToColumnIndices={},this.dataMemberIdToIdentityBuilder={};t=t.Expressions;this._primaryAxisGroupings=t&&t.Primary&&t.Primary.Groupings,this._secondaryAxisGroupings=t&&t.Secondary&&t.Secondary.Groupings,this.measureSelectIndices=[],this.dataMemberIdToMetadata=r.dataMemberIdToMetadata,this.maxPrimaryDepth=r.maxPrimaryDepth,this.maxSecondaryDepth=r.maxSecondaryDepth,this.primarySynchronizedGroups=r.primarySynchronizedGroups,this.scopedAggregatesEnabled=i,this.dataShapeParser=a}M=e.dsr||(e.dsr={}),t=jsCommon.EnumExtensions,Object.defineProperty(p.prototype,"primaryAxisGroupings",{get:function(){return this._primaryAxisGroupings},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"secondaryAxisGroupings",{get:function(){return this._secondaryAxisGroupings},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"calcInfo",{get:function(){return this._calcInfo},enumerable:!1,configurable:!0}),p.prototype.createContextForPrimarySynchronizedGroup=function(e,t){var r=this,t=new p(this.targets,this.descriptor,e.context,this.scopedAggregatesEnabled,t);return t._primaryAxisGroupings=_.map(e.groupings,(function(e){return r.primaryAxisGroupings[e].SynchronizedGroup})),t._secondaryAxisGroupings=void 0,t._calcInfo=this._calcInfo,t},p.prototype.includes=function(e){return t.hasFlag(this.targets,e)},p.prototype.createDataViewMetadataColumns=function(){var e=this.selects;if(!_.isEmpty(e)){var t=[],r=e.length;this.selectIndexToColumnIndex=new Array(r);for(var i,a=0,n=r;a<n;a++){var o=e[a];if(o){o.Kind,M.SelectKind.None;var s=this.createColumns(t,a),u=s.column,c=s.columnIdx,l=s.dynamicFormatColumn;this.selectIndexToColumn[a]=u,this.selectIndexToColumnIndex[a]=c,o.Kind===M.SelectKind.Measure&&this.measureSelectIndices.push(a);s=o.Aggregates;if(s)for(var p=0,d=s;p<d.length;p++){var h=d[p],m=this.getAggregateKind(h.Aggregate);this.createAggregateCalcMetadata(h.Ids,m,u,a,h.Aggregate)}s=o.Value;s&&(this.calcIdToColumnIndices[s]||(this.calcIdToColumnIndices[s]=[]),this.calcIdToColumnIndices[s].push(c),null!=o.Depth&&null!=o.SecondaryDepth||(this.aggregateCalcMetadata[s]={source:u,aggregateKind:4,selectIdx:a})),o.Kind===M.SelectKind.Measure&&(o.Subtotal&&this.createAggregateCalcMetadata(o.Subtotal,1,u,a),o.SubtotalDynamicFormat&&this.createAggregateCalcMetadata(_.map(o.SubtotalDynamicFormat,(function(e){return e&&e.Format})),1,l,a),o.Count&&(_.size(o.Count),this.createAggregateCalcMetadata(o.Count,5,u,a)),o.Max&&this.createAggregateCalcMetadata(o.Max,2,u,a),o.Min&&this.createAggregateCalcMetadata(o.Min,3,u,a))}}for(i in this.parseAxisGroupings(this.primaryAxisGroupings),this.parseAxisGroupings(this.secondaryAxisGroupings),this.calcIdToColumnIndices)1<_.size(this.calcIdToColumnIndices[i])&&(this.calcInfo[i].hasDuplicateColumnIndices=!0,this.calcInfo[i].isGroupKeyButNotSelect);return this.scopedAggregatesEnabled&&(this.createScopedAggregateMetadata(),this.fillDataShapeScopeAggregateValues()),t}},p.prototype.parseAxisGroupings=function(e){if(e)for(var t=0,r=e;t<r.length;t++){var i=r[t],a=i.SynchronizedGroup;a&&(this.parseGroupingKeys(a.Keys,!0),(a=i.SynchronizationIndex)&&(this.calcInfo[a]={kind:M.SelectKind.Measure,calcKind:10})),this.parseGroupingKeys(i.Keys,!1)}},p.prototype.parseGroupingKeys=function(e,t){for(var r,i=this.calcInfo,a=this.selects,n=0,o=e;n<o.length;n++){var s=o[n],u=a[s.Select];null!=u?t?(null===(r=u.Synchronized)||void 0===r||r.Value,i[null===(r=u.Synchronized)||void 0===r?void 0:r.Value].forIdentity=!0):i[u.Value].forIdentity=!0:s.Calc&&(i[s.Calc]={kind:M.SelectKind.Group,forIdentity:!0,isGroupKeyButNotSelect:!0})}},p.prototype.createAggregateCalcMetadata=function(e,t,r,i,a){for(var n=0,o=e;n<o.length;n++){var s=o[n],s=this.aggregateCalcMetadata[s]={source:r,aggregateKind:t,selectIdx:i};a&&(s.aggregate=a)}},p.prototype.getAggregateKind=function(e){return e.Average?6:e.Max?2:e.Min?3:e.Median?8:e.Percentile?7:void 0},p.prototype.createColumns=function(e,t){var r=e.length,i=this.createMetadataColumn(t);e.push(i);var a=this.selects[t],n=a.Kind,o=this.calcInfo;o[a.Value]={kind:n,columnIndex:r,selectIdx:t,calcKind:1};var s=a.Synchronized;if(s&&(M.SelectKind.Group,s.Value,s.GroupKeys,o[s.Value]={kind:n,columnIndex:r,selectIdx:t,calcKind:1},o[a.Value].isSynchronized=!0),a.Subtotal){M.SelectKind.Measure;for(var u=0,c=a.Subtotal;u<c.length;u++)o[w=c[u]]={columnIndex:r,kind:n,selectIdx:t,calcKind:2}}if(a.Highlight){M.SelectKind.Measure;s=a.Highlight.Value;s&&(o[s]={columnIndex:r,kind:n,selectIdx:t,calcKind:3});s=a.Highlight.Subtotal;if(s)for(var l=0,p=s;l<p.length;l++)o[w=p[l]]={columnIndex:r,kind:n,selectIdx:t,calcKind:9}}if(this.scopedAggregatesEnabled){if(!_.isEmpty(a.Aggregates))for(var d=0,h=a.Aggregates;d<h.length;d++)if((g=h[d]).Aggregate.Scope)for(var m=0,f=g.Ids;m<f.length;m++)o[f[m]]={columnIndex:r,kind:n,selectIdx:t,calcKind:7};var y=a.Highlight;if(y&&!_.isEmpty(y.Aggregates))for(var g,v=0,S=y.Aggregates;v<S.length;v++)if((g=S[v]).Aggregate.Scope)for(var C=0,x=g.Ids;C<x.length;C++)o[x[C]]={columnIndex:r,kind:n,selectIdx:t,calcKind:8}}y=this.tryCreateDynamicFormatColumnMetadata(t,i);if(y){M.SelectKind.Measure;var D=r+1;if(e.push(y),o[a.DynamicFormat.Format]={columnIndex:D,kind:M.SelectKind.Measure,selectIdx:t,calcKind:4},a.SubtotalDynamicFormat)for(var E=0,I=a.SubtotalDynamicFormat;E<I.length;E++){var w,b=(w=I[E])&&w.Format;b&&(o[b]={columnIndex:D,kind:M.SelectKind.Measure,selectIdx:t,calcKind:5})}a=a.Highlight&&a.Highlight.DynamicFormat&&a.Highlight.DynamicFormat.Format;a&&(o[a]={columnIndex:D,kind:M.SelectKind.Measure,selectIdx:t,calcKind:6})}return{column:i,columnIdx:r,dynamicFormatColumn:y}},p.prototype.createMetadataColumn=function(e){var t=this.selects[e],r={displayName:"",index:e};t.Format&&(r.format=t.Format),r.type=M.DataShapeUtility.describeDataType(t.Type,t.DataCategory),t.Kind===M.SelectKind.Measure&&(r.isMeasure=!0);var i=t.GroupKeys;if(i)for(var a=r.identityExprs=new Array(i.length),n=0;n<i.length;n++)a[n]=M.convertKey(i[n],e,this.selects);return r},p.prototype.tryCreateDynamicFormatColumnMetadata=function(e,t){e=this.selects[e];if(e.DynamicFormat&&e.DynamicFormat.Format){e={displayName:"",isMeasure:!0};return t.formatSource={formatString:e},e}},p.prototype.createScopedAggregateMetadata=function(){for(var e=this.selects,t=e.length,r=this.selectIndexToColumn,i=0,a=t;i<a;i++){var n=e[i];if(n){var o=n.Aggregates,s=r[i];if(!_.isEmpty(o))for(var u=0,c=o;u<c.length;u++){var l=c[u];this.createScopedAggregateCalcMetadata(l,s)}n=n.Highlight;if(n&&!_.isEmpty(n.Aggregates))for(var p=0,d=n.Aggregates;p<d.length;p++){l=d[p];this.createScopedAggregateCalcMetadata(l,s)}}}},p.prototype.createScopedAggregateCalcMetadata=function(e,t){var r=e.Aggregate,i=r.Scope;if(i){var a=this.selectIndexToColumn,n=i.PrimaryDepth;i.SecondaryDepth;for(var o=new Array(n),s=this.primaryAxisGroupings,u=0,c=0;c<n;c++)for(var l=0,p=s[c].Keys;l<p.length;l++){var d=p[l].Select,d=a[d];o[u++]=d}for(var h={column:t,inputScope:o,respectInstanceFilters:r.RespectInstanceFilters},e=e.Ids,m=this.calcInfo,f=0,y=e;f<y.length;f++){var g=m[y[f]];g.scopedAggregateCalcMetadata={metadata:h,aggregateKind:this.getAggregateKind(r)}}}},p.prototype.fillDataShapeScopeAggregateValues=function(){var c=this.dataShapeParser;if(c){var l=this.calcInfo;c.reset();for(c.next();c.nextCalc();)!(function(){var e=l[c.calcId()];if(!e||!e.scopedAggregateCalcMetadata)return;var t=e.scopedAggregateCalcMetadata,r=t.metadata,i=r.column,a=r.inputScope,n=r.respectInstanceFilters,o={inputScope:a,respectInstanceFilters:n,values:{},highlight:{}};i.scopedAggregates?(r=_.find(i.scopedAggregates,(function(e){return p.sameScopedAggregatesInputScope(e.inputScope,a)&&e.respectInstanceFilters===n})))?o=r:i.scopedAggregates.push(o):i.scopedAggregates=[o];var s=void 0;switch(e.calcKind){case 7:s=o.values;break;case 8:s=o.highlight}var u=c.calcValue();switch(t.aggregateKind){case 3:s.min=u;break;case 2:s.max=u;break;case 6:s.avg=u}})()}},p.sameScopedAggregatesInputScope=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},M.DataViewConverterContext=p})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(a){var e,n;function o(t,e,r,i,a,n,o){var s={enumerable:!0,configurable:!0,get:function(){return i.logEvent(a,{targetDataView:n,visualType:o}),delete e[r],t[r]},set:function(e){t[r]=e}};Object.defineProperty(e,r,s)}e=a.data||(a.data={}),n=a.Prototype,(e.DataViewTelemetry||(e.DataViewTelemetry={})).wrapKindProperties=function(e,t,r){var i=n.inherit(e);return o(e,i,"tree",t,a.telemetry.DataDataViewKindAccess,16,r),o(e,i,"single",t,a.telemetry.DataSampledDataViewKindAccess,4,r),i}})(powerbi=powerbi||{}),(function(e){!(function(a){var S,r;function e(e){this.values=e,this.parsedValues=new Array(e.length),this.parsedValueExprs=new Array(e.length)}function t(e){if(e)for(var t in this.resolvedValueDictionaries={},e)this.resolvedValueDictionaries[t]=new r(e[t])}function C(e,t,r,i,a,n){var o=i[r]=[],i=(function(e,t){for(var r=e.length,i=new Array(r),a=0;a<r;a++)i[a]=u(e[a],e[a].Select,t);return i})(t.Keys,a),a=t.Member;a&&(o.push(a),s=e[a]={identityFields:i,axisGrouping:t,kind:1,depth:r+1},n?s.forSynchronization=!0:t.SynchronizedGroup&&(s.isSynchronized=!0),t.RestartIdentities&&(s.restartValuesBuilder=new S.RestartValuesBuilder(t.RestartIdentities)));var s,a=t.SubtotalMember;a&&(o.push(a),s={identityFields:i,kind:2,depth:r},n?s.forSynchronization=!0:t.SynchronizedGroup&&(s.isSynchronized=!0),e[a]=s)}function u(e,t,r){e=e.Source;if(e)return a.SQExprBuilder.columnRef(a.SQExprBuilder.entity(S.schemaName(e),e.Entity||e.EntitySet),e.Property);0<=t&&_.size(r);t=r[t].Name;return t?a.SQExprBuilder.selectRef(t):void 0}S=a.dsr||(a.dsr={}),e.prototype.getCalcValue=function(e,t){if(!(e>=this.parsedValues.length)){var r=this.parsedValues[e];return void 0===r&&(r=a.PrimitiveValueEncoding.parseOptimizedValue(this.values[e],t),this.parsedValues[e]=r),r}},e.prototype.getCalcValueExpr=function(e,t,r){if(!(t>=this.parsedValues.length)){var i=this.parsedValueExprs[t];return void 0===i&&(i=a.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(e,this.values[t],r),this.parsedValueExprs[t]=i),i}},r=e,t.prototype.getCalcValue=function(e,t,r){if(t&&"number"==typeof e){this.resolvedValueDictionaries;t=this.resolvedValueDictionaries[t];return t.getCalcValue(e,r)}},t.prototype.getCalcValueExpr=function(e,t,r,i){if(r&&"number"==typeof t){this.resolvedValueDictionaries;r=this.resolvedValueDictionaries[r];return r.getCalcValueExpr(e,t,i)}},S.ValueDictionaryHandler=t,S.createDsrParserContext=function(e){var t=e.Select,r=e.Expressions,i=r&&r.Primary,a=i&&i.Groupings,n=i&&i.Synchronization,o=r&&r.Secondary&&r.Secondary.Groupings,s={},u=a&&[],c=o&&[];if(a)for(var l=0,p=a.length;l<p;l++)C(s,a[l],l,u,t);if(o)for(l=0,p=o.length;l<p;l++)c[l]=[],C(s,o[l],l,c,t);var d=0,h=[];if(t&&o)for(l=0;l<t.length;l++){var m=t[l];m&&m.Kind===S.SelectKind.Measure&&null==m.Depth&&null==m.SecondaryDepth&&(h[d++]=l)}var f={intersectionMeasureToSelectIndex:h,secondaryLeafDataMemberId:o&&[],dataMemberIdToMetadata:s,selects:t,maxPrimaryDepth:_.size(a),maxSecondaryDepth:_.size(o),memberInstanceCalcMetadataCache:{},calcIdToCalcMetadata:{},intersectionCalcMetadataCache:{},primaryDataMemberIdCache:u,secondaryDataMemberIdCache:c,instancesCalcCache:{},lastIntersectionCalcCache:{},locked:!1};if(n){var y=n.length;f.primarySynchronizedGroups=new Array(y);for(l=0;l<y;l++){var g=n[l],v=_.last(g.Groupings);f.primarySynchronizedGroups[l]={groupings:g.Groupings,dataShapeId:g.DataShape,synchronizationIndexCalcId:a[v].SynchronizationIndex,context:(function(e,t){e.Expressions.Primary;for(var r=e.Expressions.Primary.Groupings,i=e.Select,a={},n=[],o=t.Groupings,s=0;s<o.length;s++){var u=o[s];C(a,r[u].SynchronizedGroup,s,n,i,!0)}return{dataMemberIdToMetadata:a,selects:i,maxPrimaryDepth:_.size(o),primaryDataMemberIdCache:n,memberInstanceCalcMetadataCache:{},calcIdToCalcMetadata:{},locked:!1,intersectionCalcMetadataCache:{},maxSecondaryDepth:0,secondaryDataMemberIdCache:void 0,instancesCalcCache:{},lastIntersectionCalcCache:{},intersectionMeasureToSelectIndex:[],secondaryLeafDataMemberId:void 0}})(e,g)}}}return f},S.convertKey=u})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(n){var e;function t(e,t){this.context=e,this.calcIdToGroupingKeysIndex={},this.initialize(t)}e=n.dsr||(n.dsr={}),t.prototype.initialize=function(e){var t,r=this.context,i=r.selects,a=r.dataMemberIdToMetadata[e];this.identityFields=a.identityFields,this.identityFieldsCount=this.identityFields.length;var n=a.axisGrouping.Keys;n.length,this.identityFieldsCount;for(var o=0;o<this.identityFieldsCount;o++){var s=n[o],u=void 0;s.Calc?u=s.Calc:null!=s.Select&&0<=s.Select&&(u=a.forSynchronization?null===(t=i[s.Select].Synchronized)||void 0===t?void 0:t.Value:i[s.Select].Value),this.calcIdToGroupingKeysIndex[u]=o}},t.prototype.reset=function(){this.identityParts=new Array(this.identityFieldsCount)},t.prototype.addExpr=function(e,t){var r=this.calcIdToGroupingKeysIndex[e],e=this.identityFields[r];e&&(this.identityParts[r]=n.SQExprBuilder.equal(e,t))},t.prototype.getIdentity=function(){for(var e,t=this.identityParts,r=this.identityFieldsCount,i=0;i<r;i++)e=n.SQExprBuilder.and(e,t[i]);var a=n.createDataViewScopeIdentity(e);return a},t.prototype.getIdentityFields=function(){return this.identityFields},e.IdentityBuilder=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var u;function t(e){this.context=e,this.measureValueAggregatorsBySelectIdx=[]}u=e.dsr||(e.dsr={}),t.prototype.read=function(e,t){void 0===t&&(t=!0);for(var r=this.context,i=r.selects,a=new Array(i.length),n=new Array(i.length);e.nextCalc();){var o=r.aggregateCalcMetadata[e.calcId()];o&&o.aggregateKind&&(u.DataShapeUtility.fillMetadataColumnAggregate(e.calcValue(),o,!1),3===o.aggregateKind&&(a[o.selectIdx]=!0),2===o.aggregateKind&&(n[o.selectIdx]=!0))}t&&this.addLocalAggregators(a,n)},t.prototype.addLocalAggregators=function(e,t){for(var r=this.measureValueAggregatorsBySelectIdx,i=this.context.measureSelectIndices,a=i.length,n=!1,o=0;o<a;o++){var s=i[o];e[s]||(n=!0,r[s]||(r[s]=[]),r[s].push(new u.MinValueAggregator)),t[s]||(n=!0,r[s]||(r[s]=[]),r[s].push(new u.MaxValueAggregator))}this.hasLocalAggregators=n},t.prototype.update=function(e,t){if(this.hasLocalAggregators){t=this.measureValueAggregatorsBySelectIdx[t];if(t)for(var r=0,i=t;r<i.length;r++)i[r].update(e)}},t.prototype.copyToColumns=function(){for(var e=this.context.measureSelectIndices,t=e.length,r=0;r<t;r++){var i=e[r],a=this.context.selectIndexToColumn[i],i=this.measureValueAggregatorsBySelectIdx[i];if(i&&i)for(var n=0,o=i;n<o.length;n++){var s=o[n],u=s.value();void 0!==u&&(a.aggregates||(a.aggregates={}),a.aggregates[s.name]=u)}}},u.Aggregator=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){var n,h;n=e.data||(e.data={}),h=n.dsr||(n.dsr={}),(function(){(h.converters||(h.converters={})).categorical=function(e,t,r,i){if(a.isCompatible(e))return(new a).run(e,t,r)};var a=(e.prototype.run=function(e,t,r){this.metadata=r,this.context=e,this.dsrParser=t,this.selectIndexToCategoryColumn={},this.selectIndexToPrimaryValueColumn={},this.selectIndexToDynamicFormatColumn={},this.intersectionValueColumnsMap=[],this.intersectionDynamicFormatColumnsMap=[],this.primaryMeasureCount=0,this.intersectionMeasureCount=0,this.seriesSelectIndex=-1,this.primaryMeasureSelectIndexMap=[],this.intersectionMeasuresSelectIndexMap=[],this.selectIndexToValueColumnsMap=[],t.reset(),this.aggregator=new h.Aggregator(e);var i=this.dsrParser.dataShapes();i.next();var a,r={};return 0===e.maxPrimaryDepth?(this.readSelectsAndCreateCategoryColumns(void 0,void 0),a=r.values=n.DataViewTransform.createValueColumns(),this.readMeasuresWithNoGrouping(i,a)):(t=[],r.categories=e=[],this.readSelectsAndCreateCategoryColumns(e,t),a=void 0,(0<this.intersectionMeasureCount||0<this.primaryMeasureCount||0<=this.seriesSelectIndex)&&(r.values=a=n.DataViewTransform.createValueColumns()),this.readSecondaryAndCreateValueColumns(a),this.readData(i,a,t,t={}),void 0!==t.value&&(r.lastMergeIndex=t.value)),r},e.isCompatible=function(e){return e.maxPrimaryDepth<=1&&e.maxSecondaryDepth<=1&&!(0===e.maxPrimaryDepth&&0<e.maxSecondaryDepth)&&0<_.size(e.selects)},e.prototype.readSelectsAndCreateCategoryColumns=function(e,t){var r=this.context,i=r.selectIndexToColumn,a=r.selects,n=a.length,r=this.dsrParser.dataShapes().secondaryHierarchy();this.primaryMeasureSelectIndexMap=new Array(a.length),this.intersectionMeasuresSelectIndexMap=new Array(a.length);for(var o=!!r,s=0;s<n;s++){var u,c=a[s];c&&c.Value&&(c.Kind===h.SelectKind.Group?null==c.SecondaryDepth?null!=c.Depth&&(u={source:i[s],values:[],identity:t},e.push(u),this.selectIndexToCategoryColumn[s]=u):this.seriesSelectIndex=s:c.Kind===h.SelectKind.Measure&&(o&&null==c.Depth?this.intersectionMeasuresSelectIndexMap[this.intersectionMeasureCount++]=s:this.primaryMeasureSelectIndexMap[this.primaryMeasureCount++]=s))}},e.prototype.readSecondaryAndCreateValueColumns=function(e){var t=this.dsrParser.dataShapes().secondaryHierarchy();!t?this.addPrimaryValueColumns(e,!0):(this.addIntersectionValueColumns(e,t),0<this.primaryMeasureCount&&this.addPrimaryValueColumns(e))},e.prototype.addIntersectionValueColumns=function(e,t){for(var r=new Array,i=this.context;t.next();){var a=t.id(),n=t.instances();if(2!==i.dataMemberIdToMetadata[a].kind){var o=i.dataMemberIdToIdentityBuilder[a];o||(o=new h.IdentityBuilder(i,a),i.dataMemberIdToIdentityBuilder[a]=o);for(var a=o.getIdentityFields(),s=-1;n.next();){s++,o.reset();for(var u=void 0,c=void 0;n.nextCalc();){var c=n.calcId(),l=this.context.calcInfo[c];l.isGroupKeyButNotSelect||(u=n.calcValue()),l.forIdentity&&o.addExpr(c,n.calcValueAsExpr())}this.addIntersectionValueColumnsCore(e,r,c,u,s,o.getIdentity()),n.intersections(),n.members()}0===e.length&&0===r.length&&this.addIntersectionValueColumnsCore(e,r,void 0,void 0,0,void 0),e.grouped=function(){return r},e.source=this.context.selectIndexToColumn[this.seriesSelectIndex],e.identityFields=a}else for(;n.next(););}},e.prototype.addIntersectionValueColumnsCore=function(o,e,t,s,u,c){for(var l,p,d,h=this.context,m=h.selects,r=this.intersectionMeasureCount,f=new Array(r),y=this.metadata.columns,g=this,i=0;i<r;i++)!(function(e){var t=void 0,r=g.intersectionMeasuresSelectIndexMap[e];void 0!==s?(t=h.createColumns(y,r).column).groupName=s:t=_.find(y,(function(e){return e.index===r}));var i=g.createValueColumn(t,c,r,!!m[r].Highlight,!1);o.push(i),f[e]=i;var a=m[r],n=g.intersectionValueColumnsMap[u];(n=n||(g.intersectionValueColumnsMap[u]={}))[a.Value]=i;e=a.Highlight&&a.Highlight.Value;e&&(n[e]=i),t.formatSource&&t.formatSource.formatString&&(null===(l=a.DynamicFormat)||void 0===l||l.Format,i=g.createValueColumn(t.formatSource.formatString,void 0,r,!!m[r].Highlight,!0),(t=(t=g.intersectionDynamicFormatColumnsMap[u])||(g.intersectionDynamicFormatColumnsMap[u]={}))[a.DynamicFormat.Format]=i,o.push(i),(a=null===(d=null===(p=a.Highlight)||void 0===p?void 0:p.DynamicFormat)||void 0===d?void 0:d.Format)&&(t[a]=i))})(i);var a={values:f};void 0!==s&&(a.name=s),void 0!==c&&(a.identity=c),e.push(a)},e.prototype.addPrimaryValueColumns=function(e,t){for(var r,i=new Array,a=this.context,n=a.selects,o=0;o<this.primaryMeasureCount;o++){var s=this.primaryMeasureSelectIndexMap[o],u=a.selectIndexToColumn[s],c=this.createValueColumn(u,void 0,s,!!n[s].Highlight,!1);this.selectIndexToPrimaryValueColumn[s]=c,i.push(c),e.push(c),u.formatSource&&u.formatSource.formatString&&(u=this.createValueColumn(u.formatSource.formatString,void 0,s,!!n[s].Highlight,!0),this.selectIndexToDynamicFormatColumn[s]=u,e.push(u),i.push(u))}t&&e&&(r=[{values:i}],e.grouped=function(){return r})},e.prototype.createValueColumn=function(e,t,r,i,a){e={source:e,values:[]};return i&&(e.highlights=[]),t&&(e.identity=t),a||(this.selectIndexToValueColumnsMap[r]||(this.selectIndexToValueColumnsMap[r]=[])).push(e),e},e.prototype.readData=function(e,t,r,i){var a=this.context,n=e.primaryHierarchy();for(this.aggregator.read(e,0===this.intersectionMeasureCount);n.next();){var o=n.id(),s=a.dataMemberIdToMetadata[o];if(s){var s=1===s.kind,u=a.dataMemberIdToIdentityBuilder[o];!u&&s&&(u=new h.IdentityBuilder(a,o),a.dataMemberIdToIdentityBuilder[o]=u);for(var c=n.instances();c.next();){for(u&&u.reset(),1===c.restartFlagKind()&&(i.value=c.currentIndex());c.nextCalc();)this.readPrimaryHierarchyCalc(c,u);u&&r.push(u.getIdentity()),this.parseIntersections(c),c.members()}if(s)for(var l=u.getIdentityFields(),p=0;p<a.selects.length;p++){var d=this.selectIndexToCategoryColumn[p];d&&(d.identityFields=l)}}}this.aggregator.copyToColumns(),this.copyAggregatesToValueColumns()},e.prototype.copyAggregatesToValueColumns=function(){for(var e=this.context.measureSelectIndices,t=this.context.selectIndexToColumn,r=e.length,i=0;i<r;i++){var a=e[i],n=t[a].aggregates;if(n){var o=this.selectIndexToPrimaryValueColumn[a];o&&h.DataShapeUtility.copyAggregates(n,o);a=this.selectIndexToValueColumnsMap[a];if(a)for(var s=0,u=a;s<u.length;s++){var c=u[s];h.DataShapeUtility.copyAggregates(n,c)}}}},e.prototype.readPrimaryHierarchyCalc=function(e,t){var r,i=e.calcId(),a=this.context.aggregateCalcMetadata[i];a&&1===a.aggregateKind?h.DataShapeUtility.fillMetadataColumnAggregate(e.calcValue(),a):(r=this.context.calcInfo[i])&&(a=e.calcValue(),r.kind===h.SelectKind.Group?(r.isGroupKeyButNotSelect||this.selectIndexToCategoryColumn[r.selectIdx].values.push(a),r.forIdentity&&t.addExpr(i,e.calcValueAsExpr())):r.kind===h.SelectKind.Measure&&(1===(e=r.calcKind)?(this.selectIndexToPrimaryValueColumn[r.selectIdx].values.push(a),this.aggregator.update(a,r.selectIdx)):4===e?this.selectIndexToDynamicFormatColumn[r.selectIdx].values.push(a):3===e?this.selectIndexToPrimaryValueColumn[r.selectIdx].highlights.push(a):6===e&&this.selectIndexToDynamicFormatColumn[r.selectIdx].highlights.push(a)))},e.prototype.parseIntersections=function(e){var t=e.intersections();if(t)for(var r=this.context.calcInfo,i=0;t.next();){var a=this.intersectionValueColumnsMap[i],n=this.intersectionDynamicFormatColumnsMap[i];if(t.nextCalc()&&this.parseIntersectionCalc(t,a,n,r))for(i++;t.nextCalc();)this.parseIntersectionCalc(t,a,n,r)}},e.prototype.parseIntersectionCalc=function(e,t,r,i){var a=e.calcId(),i=i[a];if(i)switch(i.kind,h.SelectKind.Measure,i.calcKind){case 1:return t[a].values.push(e.calcValue()),!0;case 3:return t[a].highlights.push(e.calcValue()),!0;case 4:return r[a].values.push(e.calcValue()),!0;case 6:return r[a].highlights.push(e.calcValue()),!0;case 2:case 5:return!1}},e.prototype.readMeasuresWithNoGrouping=function(e,t){this.aggregator.read(e),this.aggregator.copyToColumns();e=e.primaryHierarchy();if(e.next()){this.addPrimaryValueColumns(t,!0);for(var r=this.context.calcInfo,i=e.instances();i.next();)for(;i.nextCalc();){var a=r[i.calcId()];a&&(a.selectIdx,1===a.calcKind?this.selectIndexToPrimaryValueColumn[a.selectIdx].values.push(i.calcValue()):3===a.calcKind?this.selectIndexToPrimaryValueColumn[a.selectIdx].highlights.push(i.calcValue()):4===a.calcKind?this.selectIndexToDynamicFormatColumn[a.selectIdx].values.push(i.calcValue()):6===a.calcKind&&this.selectIndexToDynamicFormatColumn[a.selectIdx].highlights.push(i.calcValue()))}}},e);function e(){}})()})(powerbi=powerbi||{}),(function(g){var e,N;e=g.data||(g.data={}),N=e.dsr||(e.dsr={}),(function(){(N.converters||(N.converters={})).createMatrix=function(e,t,r,i,a,n){return new o(e,t,r,i,a,n).run()};var o=(e.prototype.run=function(){var e=this.aggregator,t=this.dsrParser;t.reset();var r=t.dataShapes();this.calcInfoCache={};r.next();this.createHierarchiesLevels(),this.readValueSources(r),0<this.context.maxPrimaryDepth||_.isEmpty(this.context.measureSelectIndices),e.read(r,1===this.context.maxPrimaryDepth&&0===this.context.maxSecondaryDepth);var i=r.secondaryHierarchy(),t=this.readHierarchy(1,i,r),i=r.primaryHierarchy(),r=this.readHierarchy(0,i,r);return e.copyToColumns(),{rows:r,columns:t,valueSources:this.valueSources}},e.prototype.createHierarchiesLevels=function(){var e=this.context.selects,t=this.context.maxPrimaryDepth,r=this.context.maxSecondaryDepth;this.primaryHierarchyLevels=new Array(t),this.secondaryHierarchyLevels=new Array(r);for(var i=0;i<t;i++)this.primaryHierarchyLevels[i]={sources:[]};for(i=0;i<r;i++)this.secondaryHierarchyLevels[i]={sources:[]};for(var a=this.metadata.columns,n=a.length,o=this.columnIndexToZoneIndex=new Array(n),i=0;i<n;i++){var s,u=a[i],c=u.index;null!=c&&(s=void 0,(c=e[c]).Kind===N.SelectKind.Group&&(null!=c.Depth?s=this.primaryHierarchyLevels[c.Depth].sources:null!=c.SecondaryDepth&&(s=this.secondaryHierarchyLevels[c.SecondaryDepth].sources),o[i]=s.length,s.push(u)))}},e.prototype.readHierarchy=function(e,t,r){var i,a=this.valueSources.length;switch(e){case 0:if(i=this.context.primaryAxisGroupings,this.context.maxPrimaryDepth,!i)return this.createRowHierarchyForNoGroupings(t);break;case 1:if(i=this.context.secondaryAxisGroupings,this.context.maxSecondaryDepth,!i)return 0===a?{levels:[],root:{children:[]}}:this.createColumnHierarchyForNoGroupings()}_.size(i);var n,o={levels:0===e?this.primaryHierarchyLevels:this.secondaryHierarchyLevels,root:{}};1===e&&1<a&&o.levels.push(this.createColumnHierarchyMeasuresLevel()),this.synchronizedGroupsEnabled&&(n=this.context.primarySynchronizedGroups,0===e&&n&&this.readRowsSynchronizedGroups(n,o,r));r=this.context;return this.readNodeChildren(r,r.calcInfo,this.columnIndexToZoneIndex,r.dataMemberIdToIdentityBuilder,r.dataMemberIdToMetadata,o.root,t,0,e,a,this.context.maxSecondaryDepth,o.levels),_.isEmpty(o.root.children)||_.isEmpty(o.synchronizedGroups)||this.ensureRowNodeSynchronization(o.root,0),o},e.prototype.readRowsSynchronizedGroups=function(e,t,r){var i=e.length;t.synchronizedGroups=new Array(i),this.primarySynchronizedGroupByLevel=new Array(t.levels.length);for(var a=r.nestedDataShapes(),n=0;n<i;n++){var o=e[n],s=o.groupings;_.isEmpty(s);for(var u=a[o.dataShapeId],c=(u.next(),u.primaryHierarchy()),l=t.synchronizedGroups[n]={levels:new Array,root:{}},p=0;p<s.length;p++){var d=s[p],h=l.levels[p]=t.levels[d];h.valueSources&&((t.levels[d]=g.Prototype.inherit(h)).valueSources=h.valueSources,delete h.valueSources)}this.primarySynchronizedGroupByLevel[s[0]]=l;for(var m=this.metadata.columns,f=new Array(m.length),y=0;y<m.length;y++)!(function(e){for(var t=m[e],r=0,i=l.levels;r<i.length;r++){var a=i[r],a=_.findIndex(a.sources,(function(e){return e===t}));if(-1<a){f[e]=a;break}}})(y);u=this.context.createContextForPrimarySynchronizedGroup(o,u);this.readNodeChildren(u,u.calcInfo,f,u.dataMemberIdToIdentityBuilder,u.dataMemberIdToMetadata,l.root,c,0,0,0,u.maxSecondaryDepth,l.levels,{currentIndex:0})}},e.prototype.readNodeChildren=function(e,t,r,i,a,n,o,s,u,c,l,p,d){if(o&&0!==o.count())for(;o.next();){var h=o.id(),m=a[h];if(m){var f=2===m.kind,y=f&&0===s,g=void 0,v=void 0;f||(v=(g=(g=i[h])||(i[h]=new N.IdentityBuilder(e,h))).getIdentityFields());var S=o.instances();if(S&&0!==S.count()){v&&(n.childIdentityFields=v);var C=C||(n.children=[]),x=this.calcInfoCache[h];for(null==x&&(x=this.calcInfoCache[h]=[]);S.next();){var D=this.readNode(e,m,i,a,t,r,S,s,f,y,x,u,c,l,g,m.restartValuesBuilder,p,d);C.push(D),d&&d.currentIndex++}}}}},e.prototype.readNode=function(e,t,r,i,a,n,o,s,u,c,l,p,d,h,m,f,y,g){var v=e.aggregateCalcMetadata,S={level:s};t.forSynchronization&&(S.synchronizationIndex=g.currentIndex),1===o.restartFlagKind()&&(S.isMerge=!0),u?S.isSubtotal=!0:m.reset();for(var C=[],x=this.synchronizedGroupsEnabled&&t.isSynchronized,D=0;o.nextCalc();D++){var E=o.calcId(),I=l[D];if(!I){if(!(I=a[E]))continue;l[D]=I}if(10!==I.calcKind){var w=I.columnIndex;I.isGroupKeyButNotSelect;var b=n[w];I.isGroupKeyButNotSelect;var w=I.kind,M=void 0;if(w===N.SelectKind.Group)x||(M=(V=o.calcValueAsExpr()).value,I.isGroupKeyButNotSelect||(C[b]={value:M,levelSourceIndex:b}),m.addExpr(E,V));else if(w===N.SelectKind.Measure){if(!this.scopedMeasuresEnabled&&0<h)continue;I.selectIdx;var V=this.measuresGroupingScopeBySelectIndex[I.selectIdx];V.secondary;w=void 0,V=(w=0===h&&V.primary===y.length?(null==S.values&&(w=S.values={}),S.values):(y[s].valueSources[0].length,S.nodeValues||(S.nodeValues={0:{}}),S.nodeValues[0]))[b];V||(V=w[b]={},0<b&&(V.valueSourceIndex=b)),M=o.calcValue(),this.readNodeValueCalc(V,M,I),this.scopedAggregatesEnabled&&I.scopedAggregateCalcMetadata&&this.setScopeAggregateValue(S,M,I,y[s-1]),!c||2!==I.calcKind&&5!==I.calcKind||(e.aggregateCalcMetadata[E],N.DataShapeUtility.fillMetadataColumnAggregate(M,v[E]))}if(!x&&I.hasDuplicateColumnIndices)for(var R=0,T=e.calcIdToColumnIndices[E];R<T.length;R++){var P=n[T[R]];C[P]||(C[P]={value:M,levelSourceIndex:P})}}else{E=o.calcValue();S.synchronizationIndex=E}}u||x||(S.levelValues=C,S.value=C[0].value,S.identity=m.getIdentity(),(A=o.restartKind())&&(1===A?S.restartKind=1:2===A?S.restartKind=2:3===A&&(S.restartKind=3),S.restartKind&&(S.restartValues=f.getRestartValues(o))));var A=o.intersections(),f=o.members();return A?this.readIntersectionsValues(a,n,d,S,A):f?(this.readNodeChildren(e,a,n,r,i,S,f,s+1,p,d,h,y,g),!t.isSynchronized||_.isEmpty(S.children)||void 0!==(t=S.children[0].synchronizationIndex)&&(S.synchronizationIndex=t)):1===p&&1<d&&(s===h-1||S.isSubtotal)&&this.createColumnHierarchyMeasuresNodes(S),S},e.prototype.setScopeAggregateValue=function(e,t,r,i){var a,n=r.scopedAggregateCalcMetadata,o=this.findDataViewNodeAggregates(e,n.metadata);switch(r.calcKind){case 7:a=o.values;break;case 8:a=o.highlight}switch(n.aggregateKind){case 2:a.max=t;break;case 3:a.min=t;break;case 6:a.avg=t}var s=n.metadata,n=i.aggregates;n?_.some(n,(function(e){return e.column===s.column&&N.DataViewConverterContext.sameScopedAggregatesInputScope(e.inputScope,s.inputScope)&&e.respectInstanceFilters===s.respectInstanceFilters}))||n.push(s):i.aggregates=[s]},e.prototype.findDataViewNodeAggregates=function(e,t){var r,i=e.aggregateValues;return i?(r=_.find(i,(function(e){e=e.metadata;return e.column===t.column&&N.DataViewConverterContext.sameScopedAggregatesInputScope(e.inputScope,t.inputScope)&&e.respectInstanceFilters===t.respectInstanceFilters})))||i.push(r={metadata:t,values:{},highlight:{}}):e.aggregateValues=[r={metadata:t,values:{},highlight:{}}],r},e.prototype.readIntersectionsValues=function(e,t,r,i,a){if(0!==r)for(var n=i.values={},o=0;a.next();){for(var s=0;s<r;s++){var u=n[r*o+s]={};0<s&&(u.valueSourceIndex=s)}for(;a.nextCalc();){var c=e[a.calcId()];c&&(u=n[r*o+t[c.columnIndex]],this.readNodeValueCalc(u,a.calcValue(),c))}o++}},e.prototype.readNodeValueCalc=function(e,t,r){switch(r.calcKind){case 1:case 4:e.value=t,this.aggregator.update(t,r.selectIdx);break;case 2:case 5:e.value=t;break;case 3:case 6:case 9:e.highlight=t;break;case 7:case 8:case 10:break;default:r.calcKind}},e.prototype.createRowHierarchyForNoGroupings=function(e){var t={level:0,values:{}},r={levels:[],root:{children:[t]}};e.count(),e.next();e=e.instances();return this.readNodeForNoGroupings(t,e),r},e.prototype.readNodeForNoGroupings=function(e,t){t.count();var r=this.context.calcInfo,i=this.columnIndexToZoneIndex;t.next();for(var a=e.values={};t.nextCalc();){var n,o,s=r[t.calcId()];s&&((o=a[n=i[s.columnIndex]])||(o=a[n]={},0<n&&(o.valueSourceIndex=n)),this.readNodeValueCalc(o,t.calcValue(),s))}},e.prototype.createColumnHierarchyForNoGroupings=function(){var e=[],t={};return 0<this.valueSources.length&&(e=[this.createColumnHierarchyMeasuresLevel()],this.createColumnHierarchyMeasuresNodes(t)),{levels:e,root:t}},e.prototype.createColumnHierarchyMeasuresLevel=function(){for(var e=this.valueSources.length,t=new Array(e),r=0;r<e;r++)t[r]=this.valueSources[r];return{sources:t}},e.prototype.createColumnHierarchyMeasuresNodes=function(e){for(var t=null==e.level?0:this.context.maxSecondaryDepth,r=this.valueSources.length,i=e.children=new Array(r),a=e.isSubtotal,n=0;n<r;n++){var o=i[n]={level:t};0<n&&(o.levelSourceIndex=n),a&&(o.isSubtotal=!0)}},e.prototype.readValueSources=function(e){var t=this.context,r=t.selects,i=t.measureSelectIndices,a=i.length,n=t.selectIndexToColumn,o=t.selectIndexToColumnIndex,s=this.columnIndexToZoneIndex;this.valueSources=[],this.measuresGroupingScopeBySelectIndex={};var u={};if(0<e.calcCount()){for(;e.nextCalc();)u[e.calcId()]=!0;e.restartCalcs()}for(var c=0;c<a;c++){var l=i[c],p=r[l];p.Kind,N.SelectKind.Measure,p.Value;var d,h,m=o[l],f=this.measuresGroupingScopeBySelectIndex[l]=this.getMeasureGroupingScope(p,u[p.Value]);f&&(h=f.primary,d=f.secondary,f=void 0,f=(h!==this.context.maxPrimaryDepth||d!==this.context.maxSecondaryDepth)&&this.scopedMeasuresEnabled?(this.primaryHierarchyLevels.length,(h=this.primaryHierarchyLevels[h-1]).valueSources||(h.valueSources={0:[]}),h.valueSources[0]):this.valueSources,l=n[l],s[m]=f.length,f.push(l),p.DynamicFormat&&p.DynamicFormat.Format&&(l=l.formatSource&&l.formatSource.formatString,s[m+1]=f.length,f.push(l)))}},e.prototype.getMeasureGroupingScope=function(e,t){return null==e.Depth&&null==e.SecondaryDepth?t?null:{primary:this.context.maxPrimaryDepth,secondary:this.context.maxSecondaryDepth}:{primary:null!=e.Depth?e.Depth+1:0,secondary:null!=e.SecondaryDepth?e.SecondaryDepth+1:0}},e.prototype.ensureRowNodeSynchronization=function(e,t){if(this.isRowLeaf(e),!this.isRowLeaf(e)){var r=this.primarySynchronizedGroupByLevel[t];if(r)this.synchronizeNodeChildren(e,r.root);else for(var e=e.children,i=t+1,a=0,n=e;a<n.length;a++){var o=n[a];this.ensureRowNodeSynchronization(o,i)}}},e.prototype.synchronizeNodeChildren=function(e,t){if(!this.isRowLeaf(e)){var r=e.level+1,i=t.children;if(_.isEmpty(i))this.ensureRowNodeSynchronization(e,r);else{var a=i.length,n=e.children||[],o=new Array(a);e.children=o;for(var s=0,u=s<n.length?n[s]:void 0,c=null==u?void 0:u.synchronizationIndex,l=0;l<a;l++){var p=i[l],d=p.synchronizationIndex,h=this.copyFromMasterNode(p);h.level=r,o[l]=h,u&&c===d?(u.level,this.copyFromExistingNode(u,h),this.synchronizeNodeChildren(h,p),c=null==(u=++s<n.length?n[s]:void 0)?void 0:u.synchronizationIndex):(void 0===c||d<c)&&(this.isRowLeaf(h)||(h.children=[],this.synchronizeNodeChildren(h,p)))}}}},e.prototype.copyFromMasterNode=function(e){var t={};if(t.synchronizationIndex=e.synchronizationIndex,e.identity&&(t.identity=e.identity),void 0!==e.value&&(t.value=e.value),void 0!==e.isSubtotal&&(t.isSubtotal=e.isSubtotal),e.levelValues){var r=e.levelValues.length;t.levelValues=new Array(r);for(var i=0;i<r;i++){var a=e.levelValues[i];t.levelValues[i]={value:a.value,levelSourceIndex:a.levelSourceIndex}}}return void 0!==e.restartKind&&(t.restartKind=e.restartKind),void 0!==e.restartValues&&(t.restartValues=e.restartValues),t},e.prototype.copyFromExistingNode=function(e,t){e.aggregateValues&&(t.aggregateValues=e.aggregateValues),e.values&&(t.values=e.values),e.nodeValues&&(t.nodeValues=e.nodeValues),_.isEmpty(e.children)&&_.isEmpty(t.children),e.children&&(t.children=e.children),e.childIdentityFields&&!t.childIdentityFields&&(t.childIdentityFields=e.childIdentityFields)},e.prototype.isRowLeaf=function(e){return!(e.level!==this.context.maxPrimaryDepth-1&&!e.isSubtotal)&&(_.isEmpty(e.children),!0)},e);function e(e,t,r,i,a,n){this.context=e,this.dsrParser=t,this.metadata=r,this.synchronizedGroupsEnabled=a,this.scopedMeasuresEnabled=n,r.columns,this.aggregator=new N.Aggregator(e),this.scopedAggregatesEnabled=i}})()})(powerbi=powerbi||{}),(function(e){var D;e=e.data||(e.data={}),D=e.dsr||(e.dsr={}),(function(){(D.converters||(D.converters={})).createTable=function(e,t,r){return new i(e,t,r).run()};var i=(e.prototype.run=function(){if(this.isCompatible()){var e={columns:this.metadata.columns},t=this.dsrParser;t.reset();var r=t.dataShapes(),t=(r.next(),this.aggregator);t.read(r);r=r.primaryHierarchy();return 1===this.context.maxPrimaryDepth?this.readRows(e,r):0===this.context.maxPrimaryDepth&&this.readRowWithoutGrouping(e,r),t.copyToColumns(),e}},e.prototype.readRows=function(e,t){var r,i=this.context,a=this.getRowCellsCount(t);for(t.reset();t.next();){var n=t.id(),o=i.dataMemberIdToMetadata[n];if(o){var s=o.kind,u=t.instances(),c=[];if(1===s){for(var l=(l=i.dataMemberIdToIdentityBuilder[n])||(i.dataMemberIdToIdentityBuilder[n]=new D.IdentityBuilder(i,n)),p=o.axisGrouping,o=u.count(),d=new Array(o),h=new Array(o),m=0;u.next();m++)1===u.restartFlagKind()&&(r=m),l.reset(),d[m]=this.readRow(u,p,c,a,l,!1),h[m]=l.getIdentity();_.isEmpty(h)||(e.identity=h),e.identityFields=l.getIdentityFields()}else if(2===s){if(0===a)continue;for(;u.next();){e.totals;for(var f=this.readRow(u,null,c,a,null,!0),y=f.length,m=0;m<y;m++)void 0===f[m]&&(f[m]=null);e.totals=f}}e.rows=d,void 0!==r&&(e.lastMergeIndex=r)}}},e.prototype.readRow=function(e,t,r,i,a,n){var o,s=this.aggregator,u=new Array(i),c=0===r.length;c&&t&&(e.calcCount(),o=this.createCalcIdToGroupingIdentityIndexMap(t),r.length=e.calcCount());for(var l=this.context,p=l.aggregateCalcMetadata,d=0;e.nextCalc();d++){var h,m,f,y=e.calcId();c&&(h=o&&o[y],f=(m=l.calcInfo[y])&&m.columnIndex,g=m&&m.selectIdx,!m||3!==m.calcKind&&6!==m.calcKind&&9!==m.calcKind||(f=null),r[d]={axisGroupingIndex:h,columnIndex:f,hasDuplicateColumnIndices:m&&m.hasDuplicateColumnIndices,isGroupKeyOnly:null!=h&&null==f,selectIndex:g,aggregateMetadata:p[y]});var g=r[d];if(null!=g.columnIndex){var v=e.calcValue();if(u[g.columnIndex]=v,n?D.DataShapeUtility.fillMetadataColumnAggregate(v,g.aggregateMetadata):s.update(v,g.selectIndex),g.hasDuplicateColumnIndices)for(var S=0,C=l.calcIdToColumnIndices[y];S<C.length;S++){var x=C[S];void 0===u[x]&&(u[x]=v)}}a&&a.addExpr(y,e.calcValueAsExpr())}return u},e.prototype.readRowWithoutGrouping=function(e,t){if(t.count(),t.next()){var r=t.instances(),t=[];if(r.count(),r.next()){for(var i=[];r.nextCalc();){var a=r.calcId(),a=this.context.calcInfo[a];a&&3!==a.calcKind&&(i[a.columnIndex]=r.calcValue())}t.push(i)}e.rows=t}},e.prototype.getRowCellsCount=function(e){for(e.reset();e.next();){var t=e.id(),t=this.context.dataMemberIdToMetadata[t];if(t&&1===t.kind){var r=e.instances();if(r.next()){for(var i=0;r.nextCalc();){var a=r.calcId(),n=this.context.calcInfo[a];!n||1!==n.calcKind&&2!==n.calcKind||(n.hasDuplicateColumnIndices?i+=_.size(this.context.calcIdToColumnIndices[a]):i++)}return i}}}return 0},e.prototype.createCalcIdToGroupingIdentityIndexMap=function(e){for(var t={},r=e.Keys,i=this.context.selects,a=r.length,n=0;n<a;n++){var o=r[n];t[o.Calc||i[o.Select].Value]=n}return t},e.prototype.isCompatible=function(){var e=this.context;return 0===e.maxSecondaryDepth&&e.maxPrimaryDepth<=1},e);function e(e,t,r){this.context=e,this.dsrParser=t,this.metadata=r,this.aggregator=new D.Aggregator(e)}})()})(powerbi=powerbi||{}),(function(e){var E;e=e.data||(e.data={}),E=e.dsr||(e.dsr={}),(function(){(E.converters||(E.converters={})).createTree=function(e,t){return new r(e,t).run()};var r=(e.prototype.run=function(){if(this.isCompatible()){var e={};return this.parseTree(e),{root:e}}},e.prototype.parseTree=function(e){var t=this.dsrParser;t.reset();var r=t.dataShapes(),t=(r.next(),this.context.maxPrimaryDepth);this.aggregator.read(r,1===t),0===t?this.parseDataMembersWithNoGrouping(e,r.primaryHierarchy()):this.parseDataMembers(e,r.primaryHierarchy(),0),this.parseAggregates(e)},e.prototype.parseDataMembers=function(e,t,r){for(;t.next();){var i=this.context,a=t.id(),n=i.dataMemberIdToMetadata[a];if(n){var o=t.instances(),s=this.calcIndexToCalcMetadataDictionary[a];switch(s||(this.calcIndexToCalcMetadataDictionary[a]=s=[]),n.kind){case 1:var u=i.dataMemberIdToIdentityBuilder[a];u||(u=new E.IdentityBuilder(i,a),i.dataMemberIdToIdentityBuilder[a]=u);var c=u.getIdentityFields();c&&(e.childIdentityFields=c),this.parseInstances(e,o,s,u,!1,r);break;case 2:this.parseInstances(e,o,s,null,!0,r)}}}},e.prototype.parseInstances=function(e,t,r,i,a,n){var o=this.context,s=this.aggregator,u=o.aggregateCalcMetadata,c=e.children;for(a||!c&&0<t.count()&&(c=e.children=new Array(t.count()));t.next();){var l=void 0,p=void 0,d=void 0;a||i.reset();var h=0===r.length;h&&(r.length=t.calcCount());for(var m,f,y=0;t.nextCalc();y++){var l=(l=a?e.values:l)||{},g=t.calcId();h&&(x=o.calcInfo[g],r[y]=x);var v,S,C,x,D=r[y];D&&(v=t.calcValue(),S=D.calcKind,C=D.kind,x=D.selectIdx,a?(E.SelectKind.Group,this.addTreeNodeMeasureValues(l,x,S,v),0===n&&E.DataShapeUtility.fillMetadataColumnAggregate(v,u[g])):((D=D.isGroupKeyButNotSelect)||this.addTreeNodeMeasureValues(l,x,S,v),C===E.SelectKind.Group?(D||(d=v),i.addExpr(g,t.calcValueAsExpr())):C===E.SelectKind.Measure&&1===S&&s.update(p=v,x)))}a?(e.values=l,1===t.restartFlagKind()&&(e.isMerge=!0)):(m={values:l,identity:i.getIdentity()},void 0!==d&&(m.name=d),void 0!==p&&(m.value=p),1===t.restartFlagKind()&&(m.isMerge=!0),(f=t.members())&&this.parseDataMembers(m,f,n+1),c[t.currentIndex()]=m)}},e.prototype.addTreeNodeMeasureValues=function(e,t,r,i){var a=e[t];switch(!a&&this.isSupportedMeasureType(r)&&(a=e[t]={}),r){case 1:a.value=i;break;case 2:a.subtotal=i;break;case 3:a.highlight=i}},e.prototype.isSupportedMeasureType=function(e){return 1===e||2===e||3===e},e.prototype.parseDataMembersWithNoGrouping=function(e,t){t.count(),t.next();var r,i=t.instances();i.count(),i.next();for(var a=this.context.calcInfo;i.nextCalc();){e.values||(e.values=r={});var n,o,s=a[i.calcId()];s&&(n=s.calcKind,o=i.calcValue(),this.addTreeNodeMeasureValues(r,s.selectIdx,n,o),1===n&&(e.value=o))}},e.prototype.isCompatible=function(){return 0===_.size(this.context.secondaryAxisGroupings)},e.prototype.parseAggregates=function(e){var t=this.context;this.aggregator.copyToColumns();for(var r=t.measureSelectIndices,i=r.length,a=0;a<i;a++){var n,o=r[a],s=t.selectIndexToColumn[o].aggregates,u=e.values;s&&(n=(n=(u=u||(e.values={}))[o])||(u[o]={}),E.DataShapeUtility.copyAggregates(s,n))}},e);function e(e,t){this.context=e,this.dsrParser=t,this.calcIndexToCalcMetadataDictionary={},this.aggregator=new E.Aggregator(e)}})()})(powerbi=powerbi||{}),(function(e){var c;e=e.data||(e.data={}),c=e.dsr||(e.dsr={}),(function(){(c.converters||(c.converters={})).createSingle=function(e,t){if(r.isCompatible(e))return new r(e,t).run()};var r=(e.prototype.run=function(){return this.parseSingle()},e.prototype.parseSingle=function(){var e=this.dsrParser;e.reset();e=e.dataShapes(),e.next();return this.aggregator.read(e,!1),this.aggregator.copyToColumns(),0===this.context.maxPrimaryDepth?this.parseMeasureValue(e.primaryHierarchy()):this.parseSubtotal(e.primaryHierarchy())},e.prototype.parseMeasureValue=function(e){if(e.count(),e.next())return this.parseInstance(e.instances())},e.prototype.parseSubtotal=function(e){for(;e.next();)if(2===this.context.dataMemberIdToMetadata[e.id()].kind)return this.parseInstance(e.instances())},e.prototype.parseInstance=function(e){for(var t,r,i=this.context,a=i.calcInfo;e.next();)for(;e.nextCalc();){var n,o,s=e.calcId(),u=a[s];u&&(o=2===(n=u.calcKind),1!==n&&!o||(t=e.calcValue(),r=u.selectIdx,o&&(i.aggregateCalcMetadata[s],c.DataShapeUtility.fillMetadataColumnAggregate(t,i.aggregateCalcMetadata[s]))))}if(void 0!==t)return{column:i.selectIndexToColumn[r],value:t}},e.isCompatible=function(e){return 0===e.maxSecondaryDepth&&1===e.measureSelectIndices.length},e);function e(e,t){this.context=e,this.dsrParser=t,this.aggregator=new c.Aggregator(e)}})()})(powerbi=powerbi||{}),(function(T){var P,s,A,e;P=T.data||(T.data={}),A=s=P.dsr||(P.dsr={}),(function(e){var h,t=jsCommon.EnumExtensions,S=jsCommon.PerfTimer;function d(e,t){var r;e.metadata.dataReduction={},e.categorical&&(r=e.metadata.dataReduction.categorical={},t.Primary&&(r.categories=i(t.Primary)),t.Secondary&&(r.values=i(t.Secondary)),t.Intersection&&(r.metadata=i(t.Intersection))),e.matrix&&(r=e.metadata.dataReduction.matrix={},t.Primary&&(r.rows=i(t.Primary)))}function i(e){switch(e.Type){case 3:return{binnedLineSample:{}};case 4:return{overlappingPointsSample:{}};default:return{}}}function m(e,t){var r=e.values;return(r=r||(e.values={}))[t]||(r[t]={})}function f(e){for(var t={sources:[]},r=0,i=e.length;r<i;r++)t.sources.push(e[r]);return t}function y(e){return e.isSubtotal?e.level:e.level+1}function c(e){return e&&e.Groupings?e.Groupings.length:0}function l(e,t,r,i){e.children=[];for(var a=0;a<t;a++){var n={level:r};0<a&&(n.levelSourceIndex=a),e.children.push(n),i&&(n.isSubtotal=!0)}}function p(e,t,r,i,a){var n={};return (function e(t,r,i,a,n,o,s){if(!a)return;var u=t.selects;var c=C(r,o);for(var l=0,p=a.length;l<p;l++)for(var d=a[l],h=0,m=0,f=d.Instances.length;m<f;m++){var y=d.Instances[m];if(0===h&&4===(h=D(u,n,o,d,y)))break;var g,v={level:o};i.children||(i.children=[]),i.children.push(v),1===h?(g=x(u,y.Calculations,c),_.isEmpty(g)||(v.levelValues=g,S=_.last(g),v.value=S.value,0<S.levelSourceIndex&&(v.levelSourceIndex=S.levelSourceIndex))):3===h&&(v.isSubtotal=!0),y.RestartFlag&&1===y.RestartFlag&&(v.isMerge=!0),n&&1===h&&(i.childIdentityFields=t.readKeys(n,o),v.identity=t.readIdentity(n,y,o));var S=y.Members;S&&0<S.length?e(t,r,v,S,n,o+1,s):s&&s(t,h,y,v,o+1)}})(e,t,n,r,i,0,a),n}function C(e,t){var r=[],i=e&&e[t]&&e[t].sources;if(!_.isEmpty(i))for(var a=0,n=i.length;a<n;a++){var o=i[a];o.index,r[o.index]=a}return r}function x(e,t,r){for(var i,a=0,n=e.length;a<n;a++){var o=e[a];o&&o.Value&&o.Kind===A.SelectKind.Group&&(void 0!==(o=A.DataShapeUtility.findAndParseCalculation(t,o.Value))&&(i=i||[]).push({levelSourceIndex:r[a],value:o}))}return i}function D(e,t,r,i,a){if(t&&t.length>r&&null!=i.Id){r=t[r];if(i.Id===r.Member)return 1;if(i.Id===r.SubtotalMember)return 3}var n=a.Calculations;if(n){for(var o=!1,s=0,u=e.length;s<u;s++){var c=e[s];if(c&&A.DataShapeUtility.findCalculation(n,c.Value)){if(c.Kind===A.SelectKind.Group)return 1;o||c.Kind!==A.SelectKind.Measure||(o=!0)}}if(o)return 2}return 4}function g(e,t,r,i,a,n,o,s){if(r)for(var u={index:0},c=0,l=t.length;c<l;c++){var p=t[c];p.Kind,A.SelectKind.Measure;var d=p.Highlight,h=d&&d.Value,d=d&&d.DynamicFormat&&d.DynamicFormat.Format;v(e,r,i,a,u,n,o,s,0,p.Value,h,p.Subtotal),p.DynamicFormat&&p.DynamicFormat.Format&&(h=_.map(p.SubtotalDynamicFormat,(function(e){return e&&e.Format})),v(e,r,i,a,u,n,o,s,0,p.DynamicFormat.Format,d,h))}}function v(e,t,r,i,a,n,o,s,u,c,l,p){var d=m(r,i.index),h=null;null!=(h=3!==e?A.DataShapeUtility.findAndParseCalculation(t,c):h)||void 0!==(s=(function(e,t,r,i,a,n){if(t){n=A.DataShapeUtility.computeAggIdx(r,i,a,n);if(n<t.length)return A.DataShapeUtility.findAndParseCalculation(e,t[n])}return})(t,p,y(r),n,o,s))&&(h=s),l&&(d.highlight=A.DataShapeUtility.findAndParseCalculation(t,l)),d.value=h,0<a.index&&(d.valueSourceIndex=a.index),i.index++,a.index++}e.read=function(e,t,r,i,a,n,o){if(!(s=r)||1!==_.size(s.DataShapes))return null;var s=r.DataShapes[0];if(s["odata.error"]){r=new T.DsrClientError(s["odata.error"]);return a&&(r.requestId=a),{error:r}}var o=new b(e,t,o,new M(t,s)),u={dataView:i=(function(e){if(null!=e.scriptVisualBinding)return new E(e);for(var t=0,r=0,i=e.selects,a=0,n=i.length;a<n;a++){var o=i[a];o&&(null!=o.Depth&&(t=Math.max(t,o.Depth+1)),null!=o.SecondaryDepth&&(r=Math.max(r,o.SecondaryDepth+1)))}return new(1<=r&&1===t?w:I)(e)})(o).read(t.Expressions,s,i)};if(s.RestartTokens&&(u.restartToken=s.RestartTokens),s.DataLimitsExceeded&&0<s.DataLimitsExceeded.length&&(u.warnings||(u.warnings=[]),t=new A.DsrLimitsWarning(t,s.DataLimitsExceeded,s.Calculations),u.warnings.push(t),d(i,t.limits)),s.DataShapeMessages&&0<s.DataShapeMessages.length)for(var c=0,l=s.DataShapeMessages;c<l.length;c++){var p=l[c];A.KnownDsrMessages[p.Code]&&p.Severity===P.dsr.getDsrMessageSeverityValue(0)&&(u.warnings||(u.warnings=[]),u.warnings.push(new A.DsrMessage(p)))}return u.dataView&&!_.isEmpty(n)&&(P.ClientSideFilter.applyClientSideFilters(u.dataView,n),u.disallowPersisting=!0),o.stats,u},e.applyReductionMetadata=d,(h||(h={})).parse=function(e,t,r,i){e.includes(2);var a=S.start("DSR.matrix("+e.perfId+")"),n=[],o=[];!(function(e,t,r,i,a){for(var n=e.selects,o=0,s=n.length;o<s;o++){var u,c,l=n[o];l&&(u=(function(e,t,r){for(var i=0,a=t.length;i<a;i++){var n=t[i];if(n&&n.index===r&&void 0===n.groupName)return n}return e.createColumns(t,r)})(e,a,o),l.Kind===A.SelectKind.Measure?i.push(u):null!=l.Depth?null!=(c=t[l.Depth])?c.sources.push(u):t[l.Depth]=f([u]):null!=l.SecondaryDepth&&(null!=(c=r[l.SecondaryDepth])?c.sources.push(u):r[l.SecondaryDepth]=f([u])),l.DynamicFormat&&l.DynamicFormat.Format&&(u.formatSource&&u.formatSource.formatString,i.push(u.formatSource.formatString)))}var p=i.length;(1<p||0<p&&(0===t.length||0===r.length))&&r.push(f(i))})(e,n,o,u=[],i.columns);var s=[],i=(function(s,u,e,t,r,c){if(!r.SecondaryHierarchy||0===r.SecondaryHierarchy.length){var i={};return l(i,e,0,!1),i}var a;t&&t.Secondary&&(a=t.Secondary.Groupings);return p(s,u,r.SecondaryHierarchy,a,(function(e,t,r,i,a){var n,o;a<u.length&&(i.isSubtotal?(n=u.length-1,1<(o=u[n].sources.length)&&l(i,o,n,!0)):(u.length,l(i,u[a].sources.length,a,!1))),c.push(y(i)),s.stats.secondary++}))})(e,o,u.length,t,r,s),u={rows:{root:(function(e,t,r,i,n){if(i.PrimaryHierarchy&&0!==i.PrimaryHierarchy.length){var a;r&&r.Primary&&(a=r.Primary.Groupings);var o=0,s=0;r&&(o=c(r.Primary),s=c(r.Secondary));var u=_.filter(e.selects,(function(e){return e&&e.Kind===A.SelectKind.Measure}));return p(e,t,i.PrimaryHierarchy,a,(function(e,t,r,i,a){!(function(e,t,r,i,a,n,o){var s=r.Intersections,u={index:0};if(s)for(var c,l=0,p=s.length;l<p;l++)s[l].Calculations&&(c=a[l],g(e,t,s[l].Calculations,i,u,c,n,o));else g(e,t,r.Calculations,i,u,0,n,o)})(t,u,r,i,n,o,s),e.stats.primary++}))}})(e,n,t,r,s),levels:n},columns:{root:i,levels:o},valueSources:u};return a(),u};var E=(r.prototype.read=function(e,r,t){var i=this,a={metadata:{columns:[]}};return t.script=S.logTime((function(){var e,t;r.PrimaryHierarchy&&0<r.PrimaryHierarchy.length&&((t=r.PrimaryHierarchy[0])&&0<t.Instances.length&&(e=t.Instances[0].Calculations,t=i._context.scriptVisualBinding.PayloadCalculationId||i._context.scriptVisualBinding.ImageCalculationId,(t=A.DataShapeUtility.findCalculation(e,t))&&(t=t.Value,(t=P.PrimitiveValueEncoding.parseBinary(t))&&(a.scriptResult={payloadBase64:t}))))})),a},r);function r(e){this._context=e}var I=(u.prototype.read=function(t,r,e){var i,a,n=this,o=this.context,s=this.readMetadata(r.IsComplete),u={metadata:s},c=o.includes(16),l=o.includes(1),p=o.includes(4),d=o.includes(8);return(c||l||p||d)&&(a=S.logTime((function(){i=n.parseTree(s.columns,t,r)})),c&&(e.tree=a+S.logTime((function(){var e=n.createTree(s,i);e&&(u.tree=e)}))),l&&(e.categorical=a+S.logTime((function(){var e=n.categorize(s,i);e&&(u.categorical=e)}))),p&&(e.single=a+S.logTime((function(){var e=n.createSingleValue(s,i);e&&(u.single=e)}))),d&&(e.table=a+S.logTime((function(){var e=n.createTable(s,i);e&&(u.table=e)})))),o.includes(2)&&(e.matrix=S.logTime((function(){var e=h.parse(n.context,t,r,u.metadata);e&&(u.matrix=e)}))),u},u.prototype.readMetadata=function(e){for(var t={columns:[]},r=this.context,i=r.selects,a=0,n=i.length;a<n;a++)i[a]?r.createColumns(t.columns,a):r.actionHistory|=1;return e||(t.segment={}),t},u.prototype.parseTree=function(e,t,r){var i=S.start("DSR.tree("+this.context.perfId+")"),a={},n=this.context.selects;this.parseRootAggregates(e,a);var o,s=A.DataShapeUtility.getTopLevelPrimaryDynamicMember(r,t,!0);return s?(s!==(o=r.PrimaryHierarchy[0])&&this.parseValues(n,a,u.getFirstInstanceCalcs(o)),o=void 0,t&&t.Primary&&(o=t.Primary.Groupings),this.parseRecursive(a,s,o,0,e)):_.isEmpty(r.PrimaryHierarchy)||this.parseValues(n,a,u.getFirstInstanceCalcs(r.PrimaryHierarchy[0])),i(),a},u.prototype.parseRecursive=function(e,t,r,i,a){var n,o=this.context,s=t.Instances,u=s.length;u&&(e.children=[],0===i&&(n=V.create(e,o))),r&&(e.childIdentityFields=o.readKeys(r,i));for(var c=0;c<u;c++){var l=s[c],p={};e.children.push(p),l.RestartFlag&&1===l.RestartFlag&&(p.isMerge=!0),this.parseValues(o.selects,p,l.Calculations,n),r&&(p.identity=o.readIdentity(r,l,i));var d=l.Members;this.parseAggregates(o.selects,p,l.Calculations,d,i+1),_.isEmpty(d)||(d=A.DataShapeUtility.getDynamicMember(d,r,i+1))&&this.parseRecursive(p,d,r,i+1)}n&&n.complete(a)},u.getFirstInstanceCalcs=function(e){e=e.Instances;return 0<e.length?e[0].Calculations:null},u.prototype.parseRootAggregates=function(e,t){for(var r=0,i=e.length;r<i;r++){var a=e[r].aggregates;a&&A.DataShapeUtility.copyAggregates(a,m(t,r))}},u.prototype.parseAggregates=function(e,t,r,i,a){for(var n=0,o=e.length;n<o;n++){var s,u=e[n];u&&((s=M.parseAggregates(u,r,i,a))&&(u=this.context.selectIndexToColumnIndexMap[n],A.DataShapeUtility.copyAggregates(s,m(t,u))))}},u.prototype.parseValues=function(e,t,r,i){if(!_.isEmpty(r))for(var a=0,n=0,o=e.length;a<o;a++){var s,u,c=e[a];c&&(c.Value&&void 0!==(u=A.DataShapeUtility.findAndParseCalculation(r,c.Value))&&(c.Kind===A.SelectKind.Group?t.name=u:(t.value=u,i&&i.add(n,u)),m(t,n).value=u),!c.Highlight||void 0!==(s=A.DataShapeUtility.findAndParseCalculation(r,c.Highlight.Value))&&(m(t,n).highlight=s),n++,c.DynamicFormat&&c.DynamicFormat.Format&&(u=A.DataShapeUtility.findAndParseCalculation(r,c.DynamicFormat.Format),m(t,n).value=u,n++))}},u.prototype.categorize=function(e,t){if(!this.canCategorize())return null;for(var r,i=S.start("DSR.categorical("+this.context.perfId+")"),a={},n=0,o=e.columns.length;n<o;n++){var s,u,c=e.columns[n];void 0!==c.index&&(c.isMeasure?(s={source:c,values:[]},(u=c.aggregates)&&A.DataShapeUtility.copyAggregates(u,s),a.values||(a.values=P.DataViewTransform.createValueColumns()),a.values.push(s)):(r=r||[]).push({columnIndex:n,metadataColumn:c}))}if(r){a.categories=[];for(var l=void 0,p=0,d=r.length;p<d;p++){var h=r[p],m=t.children,f={source:h.metadataColumn,values:[]};if(m)for(var y=0,g=m.length;y<g;y++){var v=m[y];f.values.push(v.values[h.columnIndex].value),0===p&&(this.writeCategoricalValues(e,v,a.values),v.identity&&(l=l||[]).push(v.identity)),v.isMerge&&(a.lastMergeIndex=y)}l&&(f.identity=l),t.childIdentityFields&&(f.identityFields=t.childIdentityFields),a.categories.push(f)}}else this.writeCategoricalValues(e,t,a.values);return i(),a},u.prototype.canCategorize=function(){for(var e=this.context.selects,t=0,r=e.length;t<r;t++){var i=e[t];if(i&&0<i.Depth)return!1}return!0},u.prototype.createTree=function(e,t){var r=this.context;if(!(2&r.actionHistory||1&r.actionHistory))return{root:t};var r=T.Prototype.inherit(t),i=e.columns,a=t.values;if(a){for(var n={},o=0;o<i.length;o++){var s=i[o];void 0!==s.index&&void 0!==a[o]&&(n[s.index]=a[o])}r.values=n}t=t.children;return t&&(r.children=this.removeFormatSourceFromTreeChildren(i,t)),{root:r}},u.prototype.removeFormatSourceFromTreeChildren=function(e,t){for(var r=t.length,i=_.map(t,(function(e){return e})),a=0;a<r;a++){var n=T.Prototype.inherit(i[a]);i[a]=n;for(var o={},s=0;s<e.length;s++){var u=e[s];void 0!==u.index&&void 0!==i[a].values[s]&&(o[u.index]=i[a].values[s])}i[a].values=o;n=i[a].children;n&&(i[a].children=this.removeFormatSourceFromTreeChildren(e,n))}return i},u.prototype.createTable=function(e,t){for(var r,i,a=this.context.selects,n=0,o=a.length;n<o;n++)a[n]&&(0<=(i=a[n].Depth)&&(r=Math.max(i,r||0)));if(0<r)return null;var s,u,c=S.start("DSR.table("+this.context.perfId+")"),l=[],p=e.columns.length;if(0<=r){var d=t.children;if(d)for(var n=0,h=d.length;n<h;n++){var m=d[n];this.toTableRow(m,p,l),m.isMerge&&(s=n),m.identity&&(u=u||[]).push(m.identity)}}else T.DataViewAnalysis.countGroups(e.columns),this.toTableRow(t,p,l);var f=this.toTotals(t,p),e={rows:l,columns:e.columns};return u&&(e.identity=u),t.childIdentityFields&&(e.identityFields=t.childIdentityFields),f&&(e.totals=f),0<=s&&(e.lastMergeIndex=s),c(),e},u.prototype.toTableRow=function(e,t,r){for(var i=[],a=0;a<t;a++){var n=e.values[a];n&&i.push(n.value)}r.push(i)},u.prototype.toTotals=function(e,t){var r=[],i=e.values,a=!1;if(i)for(var n=0;n<t;n++){var o=i[n],o=o?o.subtotal:null,a=a||null!=o;r.push(o)}return a?r:null},u.prototype.writeCategoricalValues=function(e,t,r){for(var i=e.columns,a=0,n=0,o=i.length;n<o;n++){var s,u=i[n];u.isMeasure&&(void 0===u.index||(s=t.values[n])&&((u=r[a++]).values.push(s.value),void 0!==s.highlight&&(u.highlights||(u.highlights=[]),u.highlights.push(s.highlight))))}},u.prototype.createSingleValue=function(e,t){if(t.values){for(var r=e.columns,i=null,a=void 0,n=0,o=r.length;n<o;n++)if(r[n].isMeasure&&null!=r[n].index){if(i)return null;i=r[n],a=n}if(!i)return null;t=t.values[a];if(!t)return null;t=0===T.DataViewAnalysis.countGroups(e.columns)?t.value:t.subtotal;return void 0===t?null:{column:i,value:t}}return null},u);function u(e){this.context=e}var w=(a.prototype.read=function(t,r,e){var i=this,a=this._context,n={metadata:this.readMetadata(r.IsComplete)};return a.includes(1)&&(e.categorical=S.logTime((function(){var e=i.categorize(r,n.metadata,t);e&&(n.categorical=e)}))),a.includes(2)&&(e.matrix=S.logTime((function(){var e=h.parse(i._context,t,r,n.metadata);e&&(n.matrix=e)}))),n},a.prototype.readMetadata=function(e){for(var t={columns:[]},r=this._context,i=r.selects,a=0,n=i.length;a<n;a++){var o,s=i[a];s&&(s.Kind!==A.SelectKind.Measure?(s.Kind,A.SelectKind.Group,o=r.createColumns(t.columns,a),0<=s.SecondaryDepth?(this._secondarySelects.push(s),this._secondaryDepth=Math.max(this._secondaryDepth||0,s.SecondaryDepth),this._seriesColumn=o):0===s.Depth&&this._categoriesMetadata.push({select:s,column:o})):(0===s.Depth?this._primaryMeasureSelects:this._measureSelects).push(s))}return e||(t.segment={}),t},a.prototype.categorize=function(e,t,r){if(0!==this._secondaryDepth||0===this._categoriesMetadata.length)return null;var i=S.start("DSR.categorical("+this._context.perfId+", secondary)");r&&(r.Primary&&(o=r.Primary.Groupings),r.Secondary&&(n=r.Secondary.Groupings));var a=A.DataShapeUtility.getTopLevelSecondaryDynamicMember(e,r),n=this.readColumnsFromSecondary(a,t,n,e.Calculations),r=A.DataShapeUtility.getTopLevelPrimaryDynamicMember(e,r),o=this.readCategoriesAndValues(r,t,n,o),n={categories:o.categories,values:n};return void 0!==o.lastMergeIndex&&(n.lastMergeIndex=o.lastMergeIndex),i(),n},a.prototype.readColumnsFromSecondary=function(e,t,r,i){var a=this._context;r&&(M=a.readKeys(r,0));var n=[],o=a.selects,s=this._measureSelects.length,u=[],c=e.Instances,l=c.length;if(l)for(var p=0;p<l;p++){var d=c[p],h=d.Calculations,m=void 0;r&&(m=a.readIdentity(r,d,0));for(var f=0,y=this._secondarySelects.length;f<y;f++){for(var g=this._secondarySelects[f],v=A.DataShapeUtility.findAndParseCalculation(h,g.Value),S=[],C=0;C<s;C++){var x=this._measureSelects[C],D=o.indexOf(x),E=a.createColumns(t.columns,D,!0);void 0!==v&&(E.groupName=v);var I={source:E,values:[]};m&&(I.identity=m),this.addColumnAggregates(i,x,I),n.push(I),S.push(I)}u.push({identity:m,name:v,values:S})}}else{for(C=0;C<s;C++){x=this._measureSelects[C],D=o.indexOf(x),I={source:E=a.createColumns(t.columns,D),values:[]};this.addColumnAggregates(i,x,I),n.push(I)}u.push({values:__spreadArray([],n||[])})}for(var C=0,w=this._primaryMeasureSelects.length;C<w;C++){var b=this._primaryMeasureSelects[C],D=o.indexOf(b),I={source:E=a.createColumns(t.columns,D),values:[]};n.push(I)}M&&(n.identityFields=M);var M=this._seriesColumn;return M&&(n.source=M),n.grouped=function(){return u},n},a.prototype.addColumnAggregates=function(e,t,r){e&&(t.Max&&(r.max=A.DataShapeUtility.findAndParseCalculation(e,t.Max[0])),t.Min&&(r.min=A.DataShapeUtility.findAndParseCalculation(e,t.Min[0])))},a.prototype.readCategoriesAndValues=function(e,t,r,i){for(var a,n=[],o=this._categoriesMetadata,s=o.length,u=this._context,c=0;c<s;c++){var l={source:o[c].column,values:[]};n.push(l),i&&(l.identity=a=a||[],l.identityFields=u.readKeys(i,0))}for(var p,d=e.Instances,h=this._primaryMeasureSelects,c=0,m=d.length;c<m;c++){var f=d[c];1===f.RestartFlag&&(p=c);for(var y=0;y<s;y++)(l=n[y]).values.push(A.DataShapeUtility.findAndParseCalculation(f.Calculations,o[y].select.Value));a&&a.push(u.readIdentity(i,f,0));for(var g=f.Intersections,v=0,S=0,C=g.length;S<C;S++)for(var x=g[S].Calculations,D=0,E=this._measureSelects.length;D<E;D++){var I,w=this._measureSelects[D];void 0!==(V=A.DataShapeUtility.findAndParseCalculation(x,w.Value))&&((b=r[v++]).values.push(V),w.Highlight&&(b.highlights||(b.highlights=[]),I=A.DataShapeUtility.findAndParseCalculation(x,w.Highlight.Value),b.highlights.push(I)))}for(S=0,C=h.length;S<C;S++){var b,M,w=h[S],x=f.Calculations,V=A.DataShapeUtility.findAndParseCalculation(x,w.Value);(b=r[v++]).values.push(V),w.Highlight&&(b.highlights||(b.highlights=[]),M=A.DataShapeUtility.findAndParseCalculation(x,w.Highlight.Value),b.highlights.push(M))}}return{categories:n,lastMergeIndex:p}},a);function a(e){this._context=e,this._categoriesMetadata=[],this._primaryMeasureSelects=[],this._measureSelects=[],this._secondarySelects=[],this._seriesColumn=null}var b=(n.prototype.createColumns=function(e,t,r){var i=e.length,i=this.columnMetadata(t,i,r);e.push(i);r=e.length,r=this.tryCreatingDynamicFormatColumnMetadata(t,r,i);return r&&e.push(r),i},n.prototype.columnMetadata=function(e,t,r){var i=this.selects[e],a={displayName:"",index:e};i.Format&&(a.format=i.Format),a.type=A.DataShapeUtility.describeDataType(i.Type,i.DataCategory),i.Kind===A.SelectKind.Measure&&(a.isMeasure=!0),r||(r=this.aggregateReader.compute(i,t))&&(a.aggregates=r);i=i.GroupKeys;if(i)for(var n=a.identityExprs=[],o=0,s=i;o<s.length;o++){var u=s[o],u=this.convertKey(u);n.push(u)}return this.selectIndexToColumnIndexMap[e]=t,a},n.prototype.tryCreatingDynamicFormatColumnMetadata=function(e,t,r,i){var a=this.selects[e];if(a.DynamicFormat&&a.DynamicFormat.Format){e={displayName:"",isMeasure:!0};r.formatSource={formatString:e};a={Kind:A.SelectKind.Measure,Subtotal:_.map(a.SubtotalDynamicFormat,(function(e){return e&&e.Format}))};return i||(t=this.aggregateReader.compute(a,t))&&(e.aggregates=t),this.actionHistory|=2,e}},n.prototype.readIdentity=function(e,t,r){for(var i=this.readKeys(e,r),a=e[r].Keys,n=0,o=a.length;n<o;n++)var s=a[n],s=s.Calc||this.selects[s.Select].Value,s=A.DataShapeUtility.findAndParseCalculationToSQExpr(t.Calculations,s),s=P.SQExprBuilder.equal(i[n],s),u=P.SQExprBuilder.and(u,s);return P.createDataViewScopeIdentity(u)},n.prototype.readKeys=function(e,t){var r=this.getAxisCache(e);if(void 0===(i=r.exprs[t]))for(var i=r.exprs[t]=[],a=e[t].Keys,n=0,o=a.length;n<o;n++)i.push(this.convertKey(a[n]));return i},n.prototype.includes=function(e){return t.hasFlag(this.targets,e)},n.prototype.getAxisCache=function(e){for(var t=this.cacheItems,r=0,i=t.length;r<i;r++){var a=t[r];if(a.axisGroupings===e)return a}var n={axisGroupings:e,exprs:[]};return t.push(n),n},n.prototype.convertKey=function(e){e=e.Source;return P.SQExprBuilder.columnRef(P.SQExprBuilder.entity(s.schemaName(e),e.Entity||e.EntitySet),e.Property)},n);function n(e,t,r,i){null!=t.Select||t.ScriptVisualBinding,this.targets=e,this.selects=t.Select,this.scriptVisualBinding=t.ScriptVisualBinding,this.perfId=r||"",this.stats={id:r||void 0,primary:0,secondary:0},this.aggregateReader=i,this.cacheItems=[],this.selectIndexToColumnIndexMap={}}var M=(o.prototype.compute=function(e,t,r){var i=this.cache;if(i){var a=i[t];if(a)return a}if(e){i||(this.cache=i={});a=this.dataShape,a=o.parseAggregates(e,a.Calculations,a.PrimaryHierarchy,0);return i[t]=a=r&&!a?{}:a}},o.prototype.updateAggregates=function(e,t,r,i){t=this.compute(e,t,!0);if(t)return t[r]=i,t},o);function o(e,t){null!=e.Select||e.ScriptVisualBinding,this.dataShape=t}(M||(M={})).parseAggregates=function(e,t,r,i){if(r=!_.isEmpty(r)&&I.getFirstInstanceCalcs(r[0]),!_.isEmpty(t)||!_.isEmpty(r)){if(_.isEmpty(r)||e.Subtotal&&(o=e.Subtotal[i])&&void 0!==(s=A.DataShapeUtility.findAndParseCalculation(r,o))&&((c=c||{}).subtotal=s),!_.isEmpty(t)){e.Max&&(o=e.Max[i])&&void 0!==(s=A.DataShapeUtility.findAndParseCalculation(t,o))&&((c=c||{}).max=s),e.Min&&(o=e.Min[i])&&void 0!==(s=A.DataShapeUtility.findAndParseCalculation(t,o))&&((c=c||{}).min=s),e.Count&&(o=e.Count[i])&&void 0!==(s=A.DataShapeUtility.findAndParseCalculation(t,o))&&((c=c||{}).count=s);r=e.Aggregates;if(r)for(var a=0,n=r;a<n.length;a++){var o,s,u,c,l=n[a],p=l.Aggregate;(o=l.Ids[i])&&void 0!==(s=A.DataShapeUtility.findAndParseCalculation(t,o))&&((u=p.Percentile)?(l={k:u.K,value:s},u.Exclusive&&(l.exclusive=u.Exclusive),((c=c||{}).percentiles||(c.percentiles=[])).push(l)):p.Average?(c=c||{}).average=s:p.Median&&((c=c||{}).median=s))}0===i&&(o=e.Value)&&void 0!==(s=A.DataShapeUtility.findAndParseCalculation(t,o))&&((c=c||{}).single=s)}return c}};var V=(R.create=function(e,t){for(var r=e.values,i=t.selects,a=!1,n={},o=0,s=0,u=i.length;o<u;o++){var c=i[o];if(c)if(c.Kind===A.SelectKind.Measure){var l=void 0,p=void 0;if(r&&(p=r[s])){if(l=[],void 0===p.min&&l.push(new A.MinValueAggregator),void 0===p.max&&l.push(new A.MaxValueAggregator),0===l.length){s++;continue}}else l=[new A.MinValueAggregator,new A.MaxValueAggregator];n[s]=l,a=!0,s++,c.DynamicFormat&&c.DynamicFormat.Format&&s++}else s++}if(a)return new R(e,t.aggregateReader,t.selects,n)},R.prototype.add=function(e,t){var r=this.aggregators[e];if(r)for(var i=0,a=r.length;i<a;i++)r[i].update(t)},R.prototype.complete=function(e){for(var t=this.aggregators,r=this.node,i=this.aggregateReader,a=0,n=0,o=this.selects.length;a<o;a++){var s=this.selects[a];if(s){var u=t[n];if(u){for(var c=0,l=u.length;c<l;c++){var p=u[c],d=p.value();void 0!==d&&(p=p.name,m(r,n)[p]=d,e[n].aggregates=i.updateAggregates(s,n,p,d))}n++,s&&s.DynamicFormat&&s.DynamicFormat.Format&&n++}else n++}}},R);function R(e,t,r,i){this.node=e,this.aggregateReader=t,this.selects=r,this.aggregators=i}})((e=A.reader||(A.reader={})).V1||(e.V1={}))})(powerbi=powerbi||{}),(function(e){var R,T,P;R=e.data||(e.data={}),T=R.dsr||(R.dsr={}),(function(e){e.createDsrParser=function(e,t){return new r(e,t)};var r=(t.prototype.dataShapes=function(){return this.parser},t.prototype.reset=function(){this.parser.reset()},t.prototype.lockCache=function(){this.dsrParserContext.locked||(this.dsrParserContext.locked=!0)},t);function t(e,t){this.dsrParserContext=t,this.parser=new u(e.DS,this.dsrParserContext)}var i=(a.prototype.initialize=function(e,t){this.lastContainerCalculations=t,this.repeatedValuesHandler.initialize(e&&e.R,t),this.nullValuesHandler.initialize(e&&e.Ø)},a.prototype.getCurrentCalc=function(e,t,r,i){if(!r)return this.calculationContainerKind,null;var a=this.repeatedValuesHandler.tryRead(e);return void 0!==a||(void 0!==(a=this.nullValuesHandler.tryRead(e))?this.lastContainerCalculations[e]=null:t?t.next()&&(a=t.current(),this.lastContainerCalculations[e]=a):(a=r[i],this.lastContainerCalculations[e]=a=void 0===a?null:a)),a},a);function a(e){this.calculationContainerKind=e,this.nullValuesHandler=new E,this.repeatedValuesHandler=new w}var n=(o.prototype.setCalculations=function(e){this.calculationContainer=e;var t,r,i=this.context;i&&(t=this.calcMetadataCacheKey,(r=e.S)&&(this.metadata=r,t&&!i.locked&&(i.memberInstanceCalcMetadataCache[t]=r),this.lastContainerCalculations||(this.lastContainerCalculations=new Array(r.length))),i.instancesCalcCache[t]&&(this.lastContainerCalculations=i.instancesCalcCache[t]),this.baseCalculationParser.initialize(e,this.lastContainerCalculations),e=e.C,(r=this.getCalcMetadata())?this.calcMetadataIt=new P.Iterator(r):this.calcMetadataIt&&this.calcMetadataIt.reset(),0<_.size(e)?this.calcIt=new P.Iterator(e):this.calcIt=void 0)},o.prototype.restartCalcs=function(){this.calcMetadataIt,this.calcIt,this.calcIt&&this.calcIt.reset(),this.calcMetadataIt.reset(),delete this.dsrCalcValue},o.prototype.nextCalc=function(){var e=!1,t=this.calcMetadataIt;return t&&((e=t.next()||e)&&(this.dsrCalcValue=this.baseCalculationParser.getCurrentCalc(t.index(),this.calcIt,this.calculationContainer,this.calcId())),t.done()&&(this.context.instancesCalcCache[this.calcMetadataCacheKey]=this.lastContainerCalculations)),e||!1},o.prototype.calcId=function(){return this.metadata[this.calcMetadataIt.index()].N},o.prototype.getCalcMetadata=function(){return this.metadata||(this.metadata=this.context.memberInstanceCalcMetadataCache[this.calcMetadataCacheKey])},o.prototype.calcValue=function(){var e=this.metadata[this.calcMetadataIt.index()],t=this.context.valueDictionaryHandler.getCalcValue(this.dsrCalcValue,e.DN,e.T);return t=void 0===t?R.PrimitiveValueEncoding.parseOptimizedValue(this.dsrCalcValue,e.T):t},o.prototype.calcValueAsExpr=function(){this.dsrCalcValue;var e=this.calcMetadataIt.current(),t=this.calcValue();return this.context.valueDictionaryHandler.getCalcValueExpr(t,this.dsrCalcValue,e.DN,e.T)||R.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(t,this.dsrCalcValue,e.T)},o.prototype.calcCount=function(){return this.calcMetadataIt?this.calcMetadataIt.count():this.calcIt?this.calcIt.count():0},o);function o(e,t,r){this.context=e,this.calcMetadataCacheKey=r,this.baseCalculationParser=new i(t)}var s,u=(__extends(c,s=n),c.prototype.reset=function(){this.it.reset()},c.prototype.index=function(){return this.it.index()},c.prototype.count=function(){return this.it.count()},c.prototype.next=function(){this.primaryHierarchyParser=this.secondaryHierarchyParser=this.messageParser=void 0;var e,t=this.it.next();return t&&(e=this.it.current(),this.setCalculations(e),this.context&&(this.context.valueDictionaryHandler=new T.ValueDictionaryHandler(e.ValueDicts||(null===(e=this.rootDataShape)||void 0===e?void 0:e.ValueDicts)))),t},c.prototype.id=function(){return this.it.current().N},c.prototype.nestedDataShapes=function(){this.context.primarySynchronizedGroups;var r=this.it.current(),i=r.DS;if(!_.isArray(i)||i.length<1)return{};for(var a={},n=this,e=0,t=this.context.primarySynchronizedGroups;e<t.length;e++)!(function(t){var e=_.find(i,(function(e){return e.N===t.dataShapeId}));t.dataShapeId,e&&(a[e.N]=new c([e],t.context,n.rootDataShape||r))})(t[e]);return a},c.prototype.primaryHierarchy=function(){var e;return this.parserContext,!this.primaryHierarchyParser&&this.parserContext&&(e=this.it.current().PH,this.primaryHierarchyParser=e&&new m(e,this.parserContext,0,0)),this.primaryHierarchyParser},c.prototype.secondaryHierarchy=function(){var e;return this.parserContext,!this.secondaryHierarchyParser&&this.parserContext&&(e=this.it.current().SH,this.secondaryHierarchyParser=e&&new m(e,this.parserContext,1,0)),this.secondaryHierarchyParser},c.prototype.messages=function(){return!this.messageParser&&0<_.size(this.it.current().Msg)&&(this.messageParser=new d(this.it.current().Msg)),this.messageParser},c.prototype.hasRestartTokens=function(){return 0<_.size(this.restartTokens())},c.prototype.restartTokens=function(){var e=this.it.current(),t=e.DW;return _.isEmpty(t)?e.RT:(t.length,t[0].RT)},c.prototype.complete=function(){var e=this.it.current(),t=e.DW;return _.isEmpty(t)?e.IC:(t.length,t[0].IC)},c.prototype.hasAllData=function(){return this.it.current().HAD},c.prototype.limitsExceeded=function(){return 0<_.size(this.it.current().DLEx)},c.prototype.limits=function(){return this.limitsParser||(this.limitsParser=new l(this.it.current().DLEx)),this.limitsParser},c);function c(e,t,r){var i=s.call(this,t,1)||this;return i.parserContext=t,i.rootDataShape=r,i.it=new P.Iterator(e),i}var l=(p.prototype.next=function(){return this.it.next()},p.prototype.id=function(){return this.it.current().N},p.prototype.count=function(){return this.it.count()},p);function p(e){this.it=new P.Iterator(e)}var d=(h.prototype.next=function(){return this.it.next()},h.prototype.code=function(){return this.it.current().Code},h.prototype.severity=function(){return this.it.current().Severity},h.prototype.dsrMessage=function(){return new T.DsrMessage(this.it.current())},h);function h(e){this.it=new P.Iterator(e)}var m=(f.prototype.count=function(){return this.it.count()},f.prototype.reset=function(){this.it.reset(),this.dataMemberId=void 0},f.prototype.next=function(){this.instancesParser&&(this.instancesParser=void 0),this.dataMemberId&&(this.dataMemberId=void 0);var e=this.it.next();if(e){var t=this.dataMemberIdCache();if(0<_.size(t))for(var r=this.it.current(),i=0,a=t[this.depth];i<a.length;i++){var n=a[i];r[n]&&(this.dataMemberId=n)}void 0===this.dataMemberId&&(t=Object.keys(this.it.current()),1===_.size(t)&&(this.dataMemberId=t[0]))}return e},f.prototype.id=function(){return this.dataMemberId},f.prototype.dataMemberIdCache=function(){return 0===this.hierarchy?this.context.primaryDataMemberIdCache:this.context.secondaryDataMemberIdCache},f.prototype.instances=function(){var e;return this.instancesParser||(e=this.it.current()[this.dataMemberId],this.instancesParser=e&&new g(e,this.context,this.id(),this.hierarchy,this.depth)),this.instancesParser},f);function f(e,t,r,i){this.context=t,this.hierarchy=r,this.depth=i,this.it=new P.Iterator(e)}var y,g=(__extends(v,y=n),v.prototype.next=function(){var e,t=this.it.next();return t&&(e=this.it.current(),this.context.locked||e.M||1!==this.hierarchy||this.context.secondaryLeafDataMemberId.push(this.parentDataMemberId),this.setCalculations(e),this.dataMemberIt=void 0,this.intersectionParserDirty=!0,1!==this.hierarchy||e.Intersections),t},v.prototype.count=function(){return this.it.count()},v.prototype.currentIndex=function(){return this.it.index()},v.prototype.intersections=function(){if(this.intersectionParser)return this.intersectionParserDirty&&(this.intersectionParserDirty=!1,this.intersectionParser.reset(this.it.current().X)),this.intersectionParser;this.intersectionParserDirty=!1;var e=this.it.current().X;return this.intersectionParser=e&&new S(e,this.context,this.parentDataMemberId)},v.prototype.restartFlagKind=function(){return this.it.current().RF},v.prototype.restartKind=function(){return this.it.current().RK},v.prototype.members=function(){var e;return this.dataMemberIt||(e=this.it.current().M,this.dataMemberIt=e&&new m(e,this.context,this.hierarchy,this.depth+1)),this.dataMemberIt},v);function v(e,t,r,i,a){t=y.call(this,t,2,r)||this;return t.parentDataMemberId=r,t.hierarchy=i,t.depth=a,t.it=new P.Iterator(e),t}var S=(C.prototype.reset=function(e){this.it.reset(e),this.logicalIntersectionIndex=-1,this.physicalIntersectionIndex=-1,this.hasIntersectionElements=0<e.length},C.prototype.next=function(){if(this.resetCalcIt(),this.logicalIntersectionIndex++,this.logicalIntersectionIndex>=this.expectedIntersectionCount)return!1;if(this.setIntersectionId(),this.it.count()===this.expectedIntersectionCount){var e=this.it.next();return e&&this.initialize(this.it.current()),e}if(this.hasIntersectionElements){e=void 0;if((0===this.logicalIntersectionIndex||this.physicalIntersectionIndex<this.logicalIntersectionIndex)&&this.it.next()&&((e=this.it.current()).I||0===this.logicalIntersectionIndex?this.physicalIntersectionIndex=e.I||0:this.physicalIntersectionIndex++),this.physicalIntersectionIndex===this.logicalIntersectionIndex)return e=e||this.it.current(),this.initialize(e),!0}return this.initialize(),!0},C.prototype.setIntersectionId=function(){this.intersectionId=this.parentDataMemberId+this.context.secondaryLeafDataMemberId[this.logicalIntersectionIndex]},C.prototype.resetCalcIt=function(e){e=e&&e.C;this.currentCalcIndex=-1,this.currentCalc=void 0,this.calcIt=e?new P.Iterator(e):void 0},C.prototype.initialize=function(e){if(this.logicalIntersectionIndex,this.resetCalcIt(e),e){var t=e.S;if(t&&!this.context.locked){void 0===this.intersectionCalcCount&&(this.intersectionCalcCount=t.length),this.calcMetadataCache[this.logicalIntersectionIndex],this.calcMetadataCache[this.logicalIntersectionIndex]=t;for(var r=this.context.calcIdToCalcMetadata,i=0,a=t;i<a.length;i++)r[a[i].N]=t}}this.calculationContainer=e;var n=this.context.lastIntersectionCalcCache[this.intersectionId];!n&&this.intersectionId&&(n=this.context.lastIntersectionCalcCache[this.intersectionId]=new Array(this.intersectionCalcCount)),this.baseCalculationParser.initialize(e,n);n=this.getCalcMetadata();n&&(this.currentCalcMetadata=n,void 0===this.intersectionCalcCount&&(0<this.intersectionMeasureCount?this.intersectionCalcCount=this.currentCalcMetadata.length:this.intersectionCalcCount=0))},C.prototype.restartCalcs=function(){this.calcIt&&this.calcIt.reset(),this.currentCalcIndex=-1,delete this.currentCalc},C.prototype.nextCalc=function(){var e=++this.currentCalcIndex;return e<this.intersectionCalcCount?(this.currentCalc=this.baseCalculationParser.getCurrentCalc(e,this.calcIt,this.calculationContainer,this.calcId()),!0):(this.currentCalc=void 0,!1)},C.prototype.calcId=function(){return this.currentCalcMetadata[this.currentCalcIndex].N},C.prototype.getCalcMetadata=function(){this.logicalIntersectionIndex;var e,t=this.calcMetadataCache[this.logicalIntersectionIndex];return t||this.context.locked||(e=this.getExpectedCalcId())&&(t=this.calcMetadataCache[this.logicalIntersectionIndex]=this.context.calcIdToCalcMetadata[e]),t},C.prototype.getExpectedCalcId=function(){if(0!==this.intersectionMeasureCount){var e=this.context,t=e.dataMemberIdToMetadata[e.secondaryLeafDataMemberId[this.logicalIntersectionIndex]],r=1===t.kind,i=this.currentCalcIndex<0?e.intersectionMeasureToSelectIndex[0]:e.intersectionMeasureToSelectIndex[this.currentCalcIndex],i=e.selects[i];if(r&&this.primaryMemberIsGroupMember)return i.Value;if(i.Subtotal){e=T.DataShapeUtility.computeAggIdx(this.primaryDataMemberDepth,t.depth,e.maxPrimaryDepth,e.maxSecondaryDepth);return i.Subtotal.length>e&&i.Subtotal[e]}}},C.prototype.calcValue=function(){return void 0!==this.currentCalc&&null!==this.currentCalc?this.parseCalcValue(this.currentCalc):null},C.prototype.parseCalcValue=function(e){var t=this.calcMetadataCache[this.logicalIntersectionIndex][this.currentCalcIndex],r=this.context.valueDictionaryHandler.getCalcValue(e,t.DN,t.T);return r=void 0===r?R.PrimitiveValueEncoding.parseOptimizedValue(e,t.T):r},C.prototype.calcValueAsExpr=function(){if(void 0!==this.currentCalc)return this.parseCalcValueExpr(this.currentCalc,this.calcValue());if(this.it.index()!==this.logicalIntersectionIndex)return R.SQExprBuilder.nullConstant();var e=this.calcValue();return null===e?R.SQExprBuilder.nullConstant():this.parseCalcValueExpr(this.it.current()[this.calcId()],e)},C.prototype.parseCalcValueExpr=function(e,t){var r=this.calcMetadataCache[this.logicalIntersectionIndex][this.currentCalcIndex],i=this.context.valueDictionaryHandler.getCalcValueExpr(t,e,r.DN,r.T);return i=void 0===i?R.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(t,e,r.T):i},C.prototype.calcCount=function(){return this.calcIt?this.calcIt.count():0},C);function C(e,t,r){this.context=t,this.parentDataMemberId=r,this.it=new P.Iterator(null),this.reset(e),this.baseCalculationParser=new i(3),this.intersectionMeasureCount=_.size(this.context.intersectionMeasureToSelectIndex),this.expectedIntersectionCount=_.size(this.context.secondaryLeafDataMemberId);e=t.dataMemberIdToMetadata[r];this.primaryMemberIsGroupMember=1===e.kind,this.primaryDataMemberDepth=e.depth,t.intersectionCalcMetadataCache,this.calcMetadataCache=t.intersectionCalcMetadataCache[r],this.calcMetadataCache||t.locked||(this.calcMetadataCache=t.intersectionCalcMetadataCache[r]=new Array(this.expectedIntersectionCount))}var x=(D.prototype.initialize=function(e){this.value=e,this.overflowValue=D.MaxSignedNumberFor32Bits<e?V(e):0},D.prototype.hasBitAtPosition=function(e){if(52<e)return!1;if(0<this.value){var t=0,r=this.value;return e<31?t=1<<e:(t=1<<e-31,r=this.overflowValue),0<(r&t)}},D.MaxSignedNumberFor32Bits=Math.pow(2,31)-1,D);function D(){}e.BitSequenceHandler=x;var E=(I.prototype.initialize=function(e){this.bitSequenceHandler.initialize(e)},I.prototype.tryRead=function(e){if(this.bitSequenceHandler.hasBitAtPosition(e))return null},I);function I(){this.bitSequenceHandler=new x}var w=(b.prototype.initialize=function(e,t){this.bitSequenceHandler.initialize(e),this.lastContainerCalculations=t},b.prototype.tryRead=function(e){if(this.bitSequenceHandler.hasBitAtPosition(e))return this.lastContainerCalculations[e]},b);function b(){this.bitSequenceHandler=new x}var M=31;function V(e){e=e.toString(2),e=e.substr(0,e.length-M);return parseInt(e,2)}e.getLast33BitsIn64Bits=V})((P=T.reader||(T.reader={})).V2||(P.V2={}))})(powerbi=powerbi||{}),(function(i){var e;(function(d){var o=jsCommon.JsonComparer;d.http2MaxConnections=20;var e=(t.prototype.enqueue=function(e){var t,r=this;if(!(function(e,t){var r=t.options;if(1===r.executionType){r.queryId;t=_.findIndex(e,(function(e){return e.options.queryId===r.queryId}));if(-1<t)return e[t].execution.rejected(),!0}return!1})(this.pending,e))return this.pending.push(e),this.currentBatchDeferred||(this.currentBatchDeferred=e.options.telemetryV2Enabled?new i.PbiDeferred(!0):$.Deferred(),t=this.immediateQuery?-1:0,this.timeoutService.setTimeout(t,this.telemetryV2Enabled).promise.then((function(){var e=r.createBatches();r.clearPending(),r.queryExecuteCallback(e),r.currentBatchDeferred.resolve(),r.currentBatchDeferred=void 0}))),e.options.telemetryV2Enabled?this.currentBatchDeferred.promise:this.currentBatchDeferred.promise()},t.prototype.clearPending=function(){this.pending=[]},t.prototype.setMaxBatches=function(e){this.maxBatches=e,this.preferredMaxBatchesConfigured=0<e},t.prototype.createBatches=function(){var e=[],t=this.sortQueriesByDataSource(),r=this.maxBatches,i=!1;if(!this.preferredMaxBatchesConfigured&&this.useHttp2QueryDataEnabled&&(_.some(t,(function(e){return _.some(e.dataSources,(function(e){return e.isLimitedParallelQueryModel}))}))||(r=d.http2MaxConnections,i=!0)),t.length>=r)for(var a=0,n=t.length;a<n;++a)e.push(this.createBatchFromDataSourceGroup(t[a]));else e=this.splitDataSourcesIntoBatches(t,r);return i&&_.forEach(e,(function(e){return e.useSynchronous=!0})),e},t.prototype.sortQueriesByDataSource=function(){var e,i=this;e=this.addVisualIdToQueryDataAsHttpBodyId?_.groupBy(this.pending,(function(e){return null===(e=null===(e=null===(e=null==(e=e.options)?void 0:e.applicationContext)||void 0===e?void 0:e.Sources)||void 0===e?void 0:e[0])||void 0===e?void 0:e.VisualId})):{"":this.pending};var t=[];return _.forEach(e,(function(e){var r=[];_.forEach(e,(function(e){var t;!(function(e){if(d.isRejectableQueuedExecution(e))return e.execution.rejected();return!1})(e)&&((t=i.findDataSourceGroup(e.options.dataSources,r,e.options.cacheResponseOnServer))?t.queuedExecutions.push(e):(e={dataSources:e.options.dataSources,queuedExecutions:[e],cacheResponseOnServer:e.options.cacheResponseOnServer,cacheOptions:e.options.cacheOptions},r.push(e)))})),t.push.apply(t,r)})),t},t.prototype.findDataSourceGroup=function(e,t,r){for(var i=0,a=t.length;i<a;++i){var n=t[i];if(o.equals(e,n.dataSources)&&n.cacheResponseOnServer===r)return n}return null},t.prototype.createBatchFromDataSourceGroup=function(e){for(var t=[],r=[],i=[],a=e.queuedExecutions,n=[],o=[],s=0,u=a.length;s<u;++s){var c=a[s],l=a[s].options,p=a[s].enqueueActivity;d.isRejectableQueuedExecution(c)?(t.push(l),i.push(c.deferred),p&&n.push(p),a[s].queryActivity&&o.push(a[s].queryActivity)):(l.executionType,r.push(l))}return{dataSources:e.dataSources,queryOptions:t,cancelQueryOptions:r,promises:i,cacheOptions:e.cacheOptions,cacheResponseOnServer:e.cacheResponseOnServer,enqueueActivities:n,queryActivities:o}},t.prototype.splitDataSourcesIntoBatches=function(e,t){for(var r=[],i=0,a=e.length;i<a;++i)r.push(this.createBatchFromDataSourceGroup(e[i]));return r=this.splitBatches(r,t)},t.prototype.splitBatches=function(e,t){for(var r=e.slice();r.length<t;){for(var i=void 0,a=0,n=r.length;a<n;++a){var o=r[a];1<o.queryOptions.length&&(!i||i.queryOptions.length<o.queryOptions.length)&&(i=o)}if(!i)return r;r.push(this.splitBatch(i)),i=null}return r},t.prototype.splitBatch=function(e){var t=e.queryOptions.length,r=e.queryOptions.splice(t/2),i=e.promises.splice(t/2),a=e.enqueueActivities.splice(t/2),n=e.queryActivities.splice(t/2),o=e.cancelQueryOptions.length,t=[];return o&&(t=e.cancelQueryOptions.splice(o/2)),{dataSources:e.dataSources,queryOptions:r,promises:i,cacheOptions:e.cacheOptions,cacheResponseOnServer:e.cacheResponseOnServer,cancelQueryOptions:t,enqueueActivities:a,queryActivities:n}},t);function t(e,t,r,i,a,n){this.addVisualIdToQueryDataAsHttpBodyId=a,this.immediateQuery=n,this.preferredMaxBatchesConfigured=0<e,this.maxBatches=this.preferredMaxBatchesConfigured?e:4,this.queryExecuteCallback=t,this.pending=[],this.timeoutService=r,this.telemetryV2Enabled=i,this.useHttp2QueryDataEnabled=jsCommon.BrowserUtils.browserSupportsHttp2()}d.ExecuteSemanticQueryBatcher=e,d.createBatchFromQueries=function(e,t,r,i,a){return{queryOptions:_.map(e,(function(e){return{command:e,dataSources:t}})),cancelQueryOptions:[],cacheOptions:r,dataSources:t,cacheResponseOnServer:i,promises:[],enqueueActivities:[],queryActivities:[],useSynchronous:a}}})((e=i.data||(i.data={})).dsr||(e.dsr={}))})(powerbi=powerbi||{}),(function(v){var e;(function(y){var t=v.ClientErrorStrings,e=v.telemetry.DataQueryDataEventName,i=jsCommon.HttpUtils;y.createExecuteSemanticQueryProxyHttpCommunication=function(e,t,r,i,a,n,o,s,u){return new c(e,t,r,i,a,n,o,s)},y.executeSemanticQueryRequestVersion1="1.0.0";var c=(r.prototype.execute=function(e){for(var t=this.httpService.powerbiRequestOptions(null,"ExecuteSemanticQuery",void 0,!0),r=y.generateSemanticQueryRequest(e,this.localeProvider,this.impersonationStateProvider),i=0,a=e.enqueueActivities;i<a.length;i++)a[i].resolve();var n=this.featureSwitches&&this.featureSwitches().telemetryV2,o=this.featureSwitches&&this.featureSwitches().addVisualIdToQueryDataAsHttpBodyId,s=this.promiseFactory.defer(n),u=e.cacheOptions,c=e.useSynchronous,l=e.dataSources[0].dbName,p=!1;(!l||1<e.dataSources.length)&&(this.telemetryService.logEvent(v.telemetry.Error,{message:"A direct to MWC request was missing a dbName or more then one source was used in this request. This will cause issues routing with AutoPremium"}),p=!0);n=this.uri;(c||o)&&(f={},c&&(f.synchronous="true"),!o||(m=null===(h=null===(m=null===(h=null===(m=null===(h=e.queryOptions)||void 0===h?void 0:h[0])||void 0===m?void 0:m.applicationContext)||void 0===h?void 0:h.Sources)||void 0===m?void 0:m[0])||void 0===h?void 0:h.VisualId)&&(f.$httpBodyId=m),n=jsCommon.UrlUtils.setQueryParameters(n,f,!0));var d,h=n,m=t.authorizationHeaderOverride,f=r.modelId;return!(this.featureSwitches&&this.featureSwitches().directToMwc&&this.directToMwcConnectionInfoService)||!(d=this.directToMwcConnectionInfoService.checkModelConnectionInfo(f))||this.impersonationStateProvider&&this.impersonationStateProvider.impersonating||p?this.sendHttpRequest(n,r,t,s,u,e.queryActivities,c):this.sendDirectToMwcRequestWithFallbackOnFailure(d,n,r,t,s,f,h,m,u,l,e.queryActivities,c),s.promise},r.prototype.sendDirectToMwcRequestWithFallbackOnFailure=function(e,a,n,o,s,u,c,l,p,t,d,h){var m=this;a=e.capacityUri+"query",o.mwcTokenAuthorizationModelId=u,o.authorizationHeaderOverride=e.mwcToken;var f=this.telemetryService.startEvent(v.telemetry.DataQueryData,{endPoint:this.uri,clientAndServerRequestIdMatch:!0,synchronous:h,cacheOptions:p});o.headers["x-ms-root-activity-id"]=o.headers.RequestId,o.headers["x-ms-parent-activity-id"]=o.headers.RequestId,o.headers["x-ms-workload-resource-moniker"]=t;for(var y=[],r=0,i=d;r<i.length;r++){var g=i[r].createChildActivity({name:"Query Executing"});g&&y.push(g)}this.httpService.post(a,n,o).then((function(e){m.attachHttpMetadataToTelemetry(f.event,e,a),m.attachCacheMetadataToTelemetryDirectToMwc(f.event,e);for(var t=0,r=y;t<r.length;t++){var i=r[t];i.setProperty("requestId",e.requestId),i.resolve()}f.resolve(),s.resolve(m.attachHttpMetadataToResult(e))}),(function(e){m.attachHttpMetadataToTelemetry(f.event,e,a),m.attachCacheMetadataToTelemetryDirectToMwc(f.event,e);for(var t=0,r=y;t<r.length;t++){var i=r[t];i.setProperty("requestId",e.requestId),i.reject()}f.reject(v.errorDetailsHelper.getTelemetryErrorDetails(e.error,e.status)),m.directToMwcConnectionInfoService.removeModelConnectionInfo(u),o.authorizationHeaderOverride=l,o.mwcTokenAuthorizationModelId=null,m.sendHttpRequest(c,n,o,s,p,d,h)}))},r.prototype.sendHttpRequest=function(a,e,t,n,r,i,o){for(var s=this,u=this.telemetryService.startEvent(v.telemetry.DataQueryData,{endPoint:this.uri,clientAndServerRequestIdMatch:!0,synchronous:o,cacheOptions:r}),c=[],l=0,p=i;l<p.length;l++){var d=p[l].createChildActivity({name:"Query Executing"});d&&c.push(d)}this.httpService.post(a,e,t).then((function(e){s.attachHttpMetadataToTelemetry(u.event,e,a);for(var t=0,r=c;t<r.length;t++){var i=r[t];i.setProperty("requestId",e.requestId),i.resolve()}u.resolve(),n.resolve(s.attachHttpMetadataToResult(e))}),(function(e){s.attachHttpMetadataToTelemetry(u.event,e,a);for(var t=0,r=c;t<r.length;t++){var i=r[t];i.setProperty("requestId",e.requestId),i.reject()}u.reject(v.errorDetailsHelper.getTelemetryErrorDetails(e.error,e.status)),n.reject(s.attachHttpMetadataToResult(e))}))},r.prototype.attachHttpMetadataToTelemetry=function(e,t,r){e.info.endPoint=r,e.info.clientAndServerRequestIdMatch=i.clientAndServerRequestIdMatch(t),e.info.responseRequestId=i.getResponseRequestId(t),e.info.requestId=t.requestId},r.prototype.attachCacheMetadataToTelemetryDirectToMwc=function(e,t){t.data.results&&(e.info.fromCache=_.reduce(t.data.results,(function(e,t){return t.fromCache?++e:e}),0),e.info.resultCount=t.data.results.length)},r.prototype.attachHttpMetadataToResult=function(e){if(e&&e.data){var t=e.data;return t.requestId=e.responseRequestId||e.requestId,t.httpStatusCode=e.status,t}return{jobIds:null,results:null,requestId:e.responseRequestId||e.requestId,httpStatusCode:e.status}},__decorate([v.MonitorWith(e)],r.prototype,"execute",null),r);function r(e,t,r,i,a,n,o,s){this.httpService=e,this.impersonationStateProvider=n,this.promiseFactory=i,this.telemetryService=t,this.localeProvider=r,this.uri=a,this.featureSwitches=o,this.directToMwcConnectionInfoService=s}a.prototype.setQueryContext=function(i){var a;return __awaiter(this,void 0,v.Promise,(function(){var t,r;return __generator(this,(function(e){switch(e.label){case 0:if(null===(a=this.featureSwitches)||void 0===a||!a.queryContext)return[2];if(!this.queryContextProvider||!i.options.applicationContext)return[2];_.size(i.options.applicationContext.Sources),t=i.options.applicationContext.Sources[0],e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.queryContextProvider.generateQueryContext()];case 2:return(r=e.sent())?(t.CustomProperties=__assign(__assign({},t.CustomProperties),r),[3,4]):[2];case 3:return e.sent(),[2];case 4:return[2]}}))}))},a.prototype.enqueueExecution=function(e){this.isCommunicationStopped?(this.pausedQueries=this.pausedQueries||[],this.pausedQueries.push(e)):this.batcher.enqueue(e)},a.prototype.execute=function(e){if(!_.isEmpty(e.dataSources))return this.queryCache.ensure(e);var t=this.promiseFactory.defer(e.telemetryV2Enabled),r=v.createRejectablePromise2(t);return t.resolve(e.command),r},a.prototype.stopCommunication=function(){this.isCommunicationStopped=!0},a.prototype.resumeCommunication=function(){this.isCommunicationStopped=!1;var e=this.pausedQueries;if(e){for(var t=0,r=e.length;t<r;t++){var i=e[t];!(function(e){if(m(e))return e.execution.pending();return!1})(i)||this.batcher.enqueue(i)}this.pausedQueries=void 0}},a.prototype.cache=function(){return this.queryCache},a.prototype.setLocalCacheResult=function(e,t){this.queryCache.put(e.dataSources,e.command,t)},a.prototype.setPreferredMaxConnections=function(e){this.batcher.setMaxBatches(e)},a.prototype.executeBatch=function(e){var t=this;e.queryOptions.length,e.promises.length;var r=e.promises;this.communication.execute(e).then((function(e){return t.onSuccess(e,r)}),(function(e){return t.onError(e,r)}))},a.prototype.onSuccess=function(e,t){this.rejectExecutionsForMissingJobs(e,t);for(var r=e.jobIds,i={},a=0,n=t.length;a<n;++a)i[r[a]]=t[a];for(var o=e.results,a=0,n=o.length;a<n;++a){var s=o[a],u=s.result,c=i[h=s.jobId];delete i[h];var l,p=u.data,d=u.error;p?(l={descriptor:p.descriptor,dsr:p.dsr,metrics:p.metrics,requestId:e.requestId,timestamp:p.timestamp,fromCache:p.fromCache},c.resolve(l)):d?((l=new v.ServiceErrorToClientError(d)).requestId=e.requestId,c.reject(l)):u.asyncResult&&this.delayedQueryResultResolver.resolveDelayedQuery(s.jobId,e.requestId,c)}if(!_.isEmpty(Object.keys(i))){var h,d=new y.ExecuteSemanticQueryProxyError(e.requestId,"MissingJobResult");for(h in i)i[h].reject(d)}},a.prototype.rejectExecutionsForMissingJobs=function(e,t){var r=e.jobIds.length,i=t.length;if(r<i)for(var a=new y.ExecuteSemanticQueryProxyError(e.requestId,"MissingJobId"),n=r;n<i;n++)t[n].reject(a)},a.prototype.onError=function(e,t){var r,i,a,n,o;(r=e&&e.requestError?new v.ServiceErrorToClientError(e.requestError):r)?r.requestId=e.requestId:(i=n=a=void 0,(o=e.error)&&(a=o.message,n=o.code,null!=(o=o["pbi.error"]&&o["pbi.error"].exceptionCulprit)&&(i=v.errorDetailsHelper.getErrorSource(o))),r=e&&null!=e.httpStatusCode&&e.requestId?new v.HttpClientError(e.httpStatusCode,e.requestId,n,a,i):new p(e.requestId));for(var s=0,u=t.length;s<u;s++)t[s].reject(r)},e=a;function a(e,t,r,i,a,n,o,s){var u=this;this.communication=t,this.telemetryService=i,this.featureSwitches=o,this.queryContextProvider=s,this.promiseFactory=e.promiseFactory(),this.delayedQueryResultResolver=a||new l,this.batcher=new y.ExecuteSemanticQueryBatcher(null==n?0:n,function(e){for(var t=0,r=e.length;t<r;++t)u.executeBatch(e[t])},r,o&&o.telemetryV2,o&&o.addVisualIdToQueryDataAsHttpBodyId,o&&o.immediateQuery),this.queryCache=y.createQueryCache(this.promiseFactory,this.telemetryService,(function(e,t){var r={options:e,deferred:t.deferred,execution:t.promise,enqueueActivity:e.performanceActivity&&e.performanceActivity.isRunning()&&e.performanceActivity.createChildActivity({name:"Query Pending"}),queryActivity:e.performanceActivity};null!==(e=u.featureSwitches)&&void 0!==e&&e.queryContext?u.setQueryContext(r).then((function(){return u.enqueueExecution(r)})):u.enqueueExecution(r)}),(function(e,t){u.telemetryService.logEvent(v.telemetry.DataQueryCancellation,{source:t}),u.enqueueExecution({options:e,enqueueActivity:e.performanceActivity&&e.performanceActivity.isRunning()&&e.performanceActivity.createChildActivity({name:"Query Pending"}),queryActivity:e.performanceActivity})}),o)}y.ExecuteSemanticQueryProxy=e;var l=(n.prototype.resolveDelayedQuery=function(e,t,r){r.reject(new d(e))},n);function n(){}var o,p=(o=v.UnknownClientError,__extends(s,o),Object.defineProperty(s.prototype,"requestId",{get:function(){return this.httpRequestId},enumerable:!1,configurable:!0}),s.prototype.getDetails=function(e){e=o.prototype.getDetails.call(this,e);return e.debugErrorInfo=e.debugErrorInfo||[],e.debugErrorInfo.push({errorInfoKey:t.HttpRequestId,errorInfoValue:this.httpRequestId}),e},s);function s(e){var t=this;return(t=o.call(this,"ExecuteSemanticQueryUnknownError")||this).httpRequestId=e,t}var u,d=(u=v.UnknownClientError,__extends(h,u),h.prototype.getDetails=function(e){e=u.prototype.getDetails.call(this,e);return e.debugErrorInfo=e.debugErrorInfo||[],e.debugErrorInfo.push({errorInfoKey:t.JobId,errorInfoValue:this.jobId}),e},h);function h(e){var t=this;return(t=u.call(this,"DelayedQueryTimeoutError")||this).jobId=e,t}function m(e){return null!=e&&void 0!==e.deferred&&void 0!==e.execution}y.single=function(e){return e.length,_.head(e)},y.isRejectableQueuedExecution=m})((e=v.data||(v.data={})).dsr||(e.dsr={}))})(powerbi=powerbi||{}),(function(r){!(function(e){function t(e,t){this.requestId=e,this.errorCode=t}e=e.dsr||(e.dsr={}),Object.defineProperty(t.prototype,"code",{get:function(){return this.errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getDetails=function(e){return{message:e.get("ServiceError_CannotLoadVisual"),displayableErrorInfo:[{errorInfoKey:e.get("ServiceError_ExecuteSemanticQueryErrorKey"),errorInfoValue:e.get("ServiceError_ExecuteSemanticQueryErrorValue")},{errorInfoKey:e.get("AdditionalErrorInfo_ErrorText"),errorInfoValue:this.code}],debugErrorInfo:[{errorInfoKey:r.ClientErrorStrings.ClientErrorCode,errorInfoValue:this.code}]}},e.ExecuteSemanticQueryProxyError=t})(r.data||(r.data={}))})(powerbi=powerbi||{}),(function(e){var u;e=(e=e.data||(e.data={})).dsr||(e.dsr={}),u=jsCommon.DateExtensions,e.parseExecutionEvents=function(e,t){for(var r=[],i={},a=0,n=e;a<n.length;a++){var o=n[a],s={id:o.Id,name:o.Name,component:o.Component,pageHidden:void 0,start:u.parseIsoDate(o.Start).valueOf(),end:o.End?u.parseIsoDate(o.End).valueOf():void 0,metrics:o.Metrics,status:1,rootId:t,parentId:o.ParentId};o.ParentId?(i[o.ParentId]||(i[o.ParentId]=[]),i[o.ParentId].push(s)):r.push(s)}return (function e(t,r){for(var i=0,a=t;i<a.length;i++){var n=a[i];r[n.id]&&(n.children=r[n.id],e(n.children,r))}})(r,i),r}})(powerbi=powerbi||{}),(function(e){var o,t,u;function c(e,t){e.query=e.query.addSelect(t);var r=e.query.select(),i=o.SQExprUtils.indexOfNamedExpr(r,t),r=r[i];return(e.additionalProjections||(e.additionalProjections=[])).push({queryName:r.name,selector:null}),{index:i,expr:t,queryName:r.name}}o=e.data||(e.data={}),t=o.dsr||(o.dsr={}),u=e.data.SQExprBuilder,(t.AggregatesQueryRewriter||(t.AggregatesQueryRewriter={})).run=function(e){var t=e.mappings;if(1!==t.length)return e;var r=(function(e){var a,n;if(o.CompiledDataViewMapping.visitMapping(e,{visitRole:function(e){if(e.aggregates&&!_.isEmpty(e.items)){a||(a={},n=[]);for(var t=0,r=e.items;t<r.length;t++){var i=r[t];a[i.queryName]=e.aggregates}n.push(e)}}}),a)return{queryNames:a,roles:n}})(t[0]);return r&&(t=(t=e.queryRewrites)||(e.queryRewrites=[]),(function(e,t,r){var i,a=e.query.select();for(i in t){var n=a.withName(i).expr,o=t[i],s={};o.min&&(s.min=c(e,u.aggregate(n,3))),o.max&&(s.max=c(e,u.aggregate(n,4))),r.push({aggregatesAdded:{originalQueryRef:i,aggregates:s}})}})(e,r.queryNames,t),(function(e){for(var t=e.queryNames,r=0,i=e.roles;r<i.length;r++){var a=i[r];a.items,_.remove(a.items,(function(e){return t[e.queryName]}))}})(r)),e}})(powerbi=powerbi||{}),(function(e){var v,S,o;function C(e,t,r,i){var a=r.queryName,n=(n=e[a])||(e[a]={categoryAndValueGroup:[],categoryOnly:[]}),r={roleName:t,roleItem:r};(i?n.categoryAndValueGroup:n.categoryOnly).push(r)}function x(e,t){for(var r={for:{in:t}},i=0,a=e;i<a.length;i++){var n=a[i];if(o.equals(n,r))return}e.push(r)}v=e.data||(e.data={}),S=v.dsr||(v.dsr={}),o=jsCommon.JsonComparer,(S.MultiMappedQueryRewriter||(S.MultiMappedQueryRewriter={})).run=function(e){var t=e.mappings.length;return 1===t?e:1<t?(function(e,t,r){for(var i=[],a=[],n={by:null,select:[]},o={categories:{select:i},values:{group:n,select:a}},s={},u=0,c=t;u<c.length;u++){var l=c[u];if(!l.categorical)return;l=l.categorical;!(function(e,n,t,o,s){var u,r=e.values;r&&(v.CompiledDataViewMapping.visitCategoricalCategories(e.categories,{visitRole:function(e){x(t,e)}}),v.CompiledDataViewMapping.visitGrouped(r,{visitRole:function(e){if((s.by=e).items)for(var t=0,r=e.items;t<r.length;t++){var i=r[t];C(n,e.role,i,!0),u=!0}}}),v.CompiledDataViewMapping.visitCategoricalValues(r,{visitRole:function(e,t){if(x("CategoricalValueGroup"===t?s.select:o,e),e.items)for(var r=0,i=e.items;r<i.length;r++){var a=i[r];C(n,e.role,a,u)}}}))})(l,s,i,a,n),null==o.dataVolume||null==l.dataVolume||(l.dataVolume,o.dataVolume),null!=l.dataVolume&&null==o.dataVolume&&(o.dataVolume=l.dataVolume)}var p,d=[];for(p in s){var h=s[p];if(!_.isEmpty(h.categoryAndValueGroup)&&!_.isEmpty(h.categoryOnly))for(var m=0,f=h.categoryAndValueGroup;m<f.length;m++){var y=f[m],g=y.roleItem,y=S.QueryRewriterUtils.duplicateSelect(e,g.queryName,y.roleName);g.queryName=y.newQueryName,e=y.newQuery,d.push.apply(d,y.rewriteRecords)}}return{query:e,mappings:[{metadata:t[0].metadata,categorical:o}],queryRewrites:_.isEmpty(d)?void 0:d,additionalProjections:r}})(e.query,e.mappings,e.additionalProjections):void 0}})(powerbi=powerbi||{}),(function(e){var t;e=e.data||(e.data={}),(t=e.dsr||(e.dsr={})).DefaultSchemaName=void 0,t.schemaName=function(e){return e.Schema||t.DefaultSchemaName},(e=t.SelectKind||(t.SelectKind={}))[e.None=0]="None",e[e.Group=1]="Group",e[e.Measure=2]="Measure"})(powerbi=powerbi||{}),(function(e){(function(e){function r(e,t,r){if(e){t.visitDescriptor(e,r);var i=e.Select;if(i&&i.length)for(var a=0,n=i.length;a<n;a++)t.visitSelect(i[a],r);e=e.Expressions;e&&(function(e,t,r){t.visitExpressions(e,r),e.Primary,o(e.Primary,t,r);e=e.Secondary;e&&o(e,t,r)})(e,t,r)}}function o(e,t,r){t.visitDataShapeExpressionsAxis(e,r);for(var i=e.Groupings,a=0,n=i.length;a<n;a++)!(function(e,t,r){t.visitDataShapeExpressionsAxisGrouping(e,r);var i=e.Keys;for(var a=0,n=i.length;a<n;a++)!(function(e,t,r){t.visitDataShapeExpressionsAxisGroupingKey(e,r),e.Source,t.visitConceptualPropertyReference(e.Source,r)})(i[a],t,r)})(i[a],t,r)}e.traverseQueryBindingDescriptor=function(e,t){r(e,t,void 0)},e.traverseQueryBindingDescriptorWithArg=r;var t=(i.prototype.visitDescriptor=function(e,t){},i.prototype.visitSelect=function(e,t){},i.prototype.visitExpressions=function(e,t){},i.prototype.visitDataShapeExpressionsAxis=function(e,t){},i.prototype.visitDataShapeExpressionsAxisGrouping=function(e,t){},i.prototype.visitDataShapeExpressionsAxisGroupingKey=function(e,t){},i.prototype.visitConceptualPropertyReference=function(e,t){},i);function i(){}e.DefaultQueryBindingDescriptorVisitorWithArg=t;var a,t=(__extends(n,a=t),n);function n(){return null!==a&&a.apply(this,arguments)||this}e.DefaultQueryBindingDescriptorVisitor=t})((e=e.data||(e.data={})).dsr||(e.dsr={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var t,u;function r(e,t){e.Select,t.ScriptVisualBinding||(t.Select,e.Select.length,t.Select.length),this._metadata=e,this._binding=t}t=e.dsr||(e.dsr={}),u=jsCommon.ArrayExtensions,r.prototype.getSelectRestatements=function(){return this.getRestatements()},r.prototype.getGroupRestatements=function(){return this.getRestatements(t.SelectKind.Group)},r.prototype.getMeasureRestatements=function(){return this.getRestatements(t.SelectKind.Measure)},r.prototype.getFilterRestatements=function(){var e=this._metadata.Filters;if(_.isEmpty(e))return null;for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a?a.Restatement:"")}return u.emptyToNull(t)},r.prototype.getRestatements=function(e){var t=this._metadata,r=this._binding,i=[];if(!r.ScriptVisualBinding)for(var a=0,n=t.Select.length;a<n;a++){var o=r.Select[a],s=t.Select[a];o&&(void 0!==e&&o.Kind!==e||i.push(s.Restatement||""))}return u.emptyToNull(i)},t.QueryDescription=r})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(v){var I;(function(c){var l=jsCommon.ArrayExtensions,E=v.data.services,a=v.data.FilterKindDetector,i=v.data.dsr.SelectToIdentityExpressionsVisitor,d=v.data.SQExpr;c.createQueryGenerator=function(e){return new t(I.services.SemanticQuerySerializer,e)};var S,t=(e.prototype.execute=function(e){var t=this.executeForQueryOnlyImpl(e);if(!t||!t.dataShapeBinding&&t.mergedQueries&&t.mergedQueries.mapping&&2===t.mergedQueries.mapping.updateType)return{command:void 0};var r=t.mergedQueries,i=t.dataShapeBinding,a=t.query;this.adjustIntersectionDataReduction(i,r.mapping,a,e.highVolumeOverride),_.isEmpty(a.groupBy())||this.applyDataReductionForGroupByQuery(i,a);var n=t.mergedQueries&&t.mergedQueries.mapping&&1===t.mergedQueries.mapping.updateType&&_.isEmpty(e.additionalProjections);return{command:this.createDataQuery(a,t.queryExtensionSchema,e.dataSourceVariables,i,t.compiledDataViewMappings,e.dataWindow,e.executionMetricsKinds,e.anchorTime),splits:r.splits,queryRewrites:t.queryRewrites,deferred:n}},e.prototype.executeForQueryOnly=function(e){e=this.executeForQueryOnlyImpl(e);return e&&e.query},e.prototype.produceIdentities=function(e,t){var r=new i;return e.accept(r,t)},e.prototype.executeForQueryOnlyImpl=function(e){var t,r=this.getQueryableMappings(e.mappings),i=this.prepareQuery(e.query,r,e.additionalProjections),a=i.query,n=i.mappings,o=i.queryRewrites,s=i.additionalProjections,i=S.getIndicesByName(a),r=c.mergeMappings(r,i);I.applyDataReductionDefaults(e.mappings),e.highVolumeOverride&&(t=6),r.mapping.categorical&&S.updateMappingsWithScalarKeys(r.mapping,i);var u,s=c.generateDataShapeBinding(this.serializer,i,r.mapping,a.select(),s,e.highlightFilter,e.restartToken,a.groupBy(),t,e.expansionStates,e.keepProjectionOrder,e.noDefaultProjections,e.windowExpansion,this.featureSwitches);return I.DataViewPivotCategoricalToPrimaryGroups.pivotBinding(s,n,r.mapping,a.select(),3,t),this.queryHasMeasureFilter(a)&&s&&(this.processTargetsForMeasureFilters(a,n,s),a=this.adjustQueryMeasureFilters(a,s)),e.queryExtensionLookup&&(a=(e=e.queryExtensionLookup(a,o)).query,u=e.extensions,o=e.queryRewrites),{query:a,queryExtensionSchema:u,mergedQueries:r,dataShapeBinding:s,compiledDataViewMappings:n,queryRewrites:o}},e.prototype.hasAmbiguousEqualitySemantics=function(e){return d.equals(e,I.SQExprBuilder.boolean(!1))||d.equals(e,I.SQExprBuilder.integer(0))},e.prototype.getQueryableMappings=function(e){return _.filter(e,(function(e){return!e.usage||!e.usage.regression}))},e.prototype.prepareQuery=function(e,t,r){for(var i=0,a=C(t,e.select());i<a.length;i++){var n=a[i];e=e.rewrite(n)}r=this.rewriteQuery(e,t,r);return r.query=(function(e){for(var t,r=e.select(),i=r.length-1;0<=i;i--)d.isConstant(r[i].expr)&&(r.splice(i,1),t=!0);if(t)return e.select(r);return e})(r.query),r},e.prototype.rewriteQuery=function(e,t,r){r={query:e,mappings:t,additionalProjections:r},r=c.MultiMappedQueryRewriter.run(r);return r=c.AggregatesQueryRewriter.run(r),r=this.featureSwitches&&this.featureSwitches.scopedMeasuresEnabled?c.ScopedValuesQueryRewriter.run(r,!0):r},e.prototype.adjustIntersectionDataReduction=function(e,t,r,i){var a,n;!t.categorical||(a=t.categorical).dataReductionAlgorithm&&(e.DataReduction&&e.DataReduction.Intersection?(e.Secondary&&e.Primary,e.Primary&&!e.Secondary&&(e.DataReduction.Primary,e.DataReduction.Primary=e.DataReduction.Intersection,e.DataReduction.Intersection=void 0)):(n=e.Primary&&(!e.DataReduction||!e.DataReduction.Primary),t=e.Secondary&&(!e.DataReduction||!e.DataReduction.Secondary),(n||t)&&(e.DataReduction||(e.DataReduction={DataVolume:a.dataVolume||(i?6:3)}),n&&(e.DataReduction.Primary=I.DataShapeBindingDataReduction.createFrom(a.dataReductionAlgorithm,r.select())),t&&(e.DataReduction.Secondary=I.DataShapeBindingDataReduction.createFrom(a.dataReductionAlgorithm,r.select())))))},e.prototype.applyDataReductionForGroupByQuery=function(e,t){e.DataReduction={},e.DataReduction.Primary=I.DataShapeBindingDataReduction.createFrom({top:{count:1e3}},t.select())},e.prototype.generateScriptVisualCommand=function(e,t){var r=v.ScriptResultUtil.extractScriptResult(e);if(!(r=r||v.ScriptResultUtil.extractScriptResultDefaultFromDataViewMappings(e)))return null;r={Version:0,Script:r.source,RenderingEngine:r.provider,ScriptOutputType:r.outputType};t&&t.height&&t.width&&(r.ViewportWidthPx=t.width,r.ViewportHeightPx=t.height);e=v.ScriptResultUtil.findScriptResultMapping(e);return e&&e.script.scriptInput&&(r.ScriptInput=e.script.scriptInput),{ScriptVisualCommand:r}},e.prototype.queryHasMeasureFilter=function(e){for(var t=0,r=e.where();t<r.length;t++){var i=r[t];if(1===a.runDetector(i.condition))return!0}return!1},e.prototype.removeExprFromTargetExprs=function(e,t){for(var r=0,i=e;r<i.length;r++){var a=i[r].target;if(null!=a)for(var n=0,o=a.length;n<o;n++)d.equals(a[n],t)&&a.splice(n,1)}},e.prototype.processTargetsForMeasureFilters=function(s,e,t){for(var u=this,c=this.getProjectedSelectIndexMap(t),r=0,i=e;r<i.length;r++){var a=i[r];I.CompiledDataViewMapping.visitMapping(a,{visitRole:function(e){var t=e.activeItems,r=e.items;if(t&&!_.isEmpty(t)&&!_.isEmpty(r))for(var i=_.findIndex(r,(function(e){return _.includes(t,e.queryName)})),a=0;a<i;a++){var n=r[a].queryName,o=s.select(),n=l.indexWithName(o,n);c[n]||(n=o[n].expr,u.removeExprFromTargetExprs(s.where(),n))}}})}},e.prototype.adjustQueryMeasureFilters=function(e,t){var r=e.where(),i=[],a=[];if(_.isEmpty(t.Primary.Groupings)||_.isEmpty(t.Primary.Groupings[0].Projections)||!_.isEmpty(t.Secondary))return e;for(var n=e.select(),o=0,s=t.Primary.Groupings[0].Projections;o<s.length;o++){var u=n[s[o]];if(!I.SQExprUtils.isMeasure(u.expr))return e}for(var c=0,l=r;c<l.length;c++){var p=l[c];_.isEmpty(p.target)?a.push(p):i.push(p)}if(_.isEmpty(i))return e;r=I.SemanticQuery.createWith({from:e.from(),select:e.select(),orderBy:e.orderBy(),top:e.top(),transforms:e.transforms(),groupBy:e.groupBy(),where:a}),t=I.SemanticFilter.fromMeasureFilters(e,i,t);return r=r.addSemanticFilter(t)},e.prototype.getProjectedSelectIndexMap=function(e){return e?_.chain([e.Primary,e.Secondary]).filter((function(e){return e&&!_.isEmpty(e.Groupings)})).map((function(e){return e.Groupings})).flatten().filter((function(e){return!_.isEmpty(e.Projections)})).map((function(e){return e.Projections})).flatten(!1).reduce((function(e,t){return e[t]=!0,e}),{}).value():{}},e.prototype.createDataQuery=function(e,t,r,i,a,n,o,s){s={Query:this.serializer.serializeQuery(e),Binding:i,AnchorTime:s};t&&(s.Extension=t),r&&(s.DataSourceVariables=r),o&&(s.ExecutionMetricsKind=o);s={Commands:[{SemanticQueryDataShapeCommand:s}]},n=this.generateScriptVisualCommand(a,n);return n&&s.Commands.push(n),s},e);function e(e,t){this.serializer=e,this.featureSwitches=t}function C(e,t){return[new n,new m(e,t),new u]}c.generateDataShapeBinding=function(e,t,r,i,a,n,o,s,u,c,l,p,d,h){var m,f=n;if(n)for(var y=0,g=C([r],i);y<g.length;y++)var v=g[y],f=f.rewrite(v);return n&&(m=[e.serializeFilter(f)]),S.generateBaseDataShapeBinding(t,r,i,a,m,o,s,u,c,e,l,p,d,h)},(function(e){e.generateBaseDataShapeBinding=function e(t,r,i,a,n,o,s,u,c,l,p,d,h,m){var f,y,g,v,S,C,n=new D(t,i,p,m).withRestartToken(o).withHighlightFilter(n).withAdditionalProjections(a);if(r.table?n=n.withGroupBy(s):_.isEmpty(s),2!==r.updateType)if(r.categorical)v=n,S=r.categorical,C=d,I.CompiledDataViewMapping.visitCategoricalCategories(S.categories,{visitRole:function(e){v.withPrimaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,!0,C)},visitReduction:function(e){v.withPrimaryDataReduction(e)}}),I.CompiledDataViewMapping.visitGrouped(S.values,{visitRole:function(e){v.withSecondaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,C)},visitReduction:function(e){v.withSecondaryDataReduction(e)}}),I.CompiledDataViewMapping.visitCategoricalValues(S.values,{visitRole:function(e,t){v.withCurrentInnermostPrimaryGrouping(e.items,e.showAll,e.subtotalType,"CategoricalValueGroup"!==t)}}),v.withIntersectionDataReduction(S.dataReductionAlgorithm).withDataVolume(S.dataVolume).withIncludeEmptyGroups(S.includeEmptyGroups);else if(r.table)g=n,S=r.table,I.CompiledDataViewMapping.visitTable(S,{visitRole:function(e){g.withPrimaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,!0,!1)},visitReduction:function(e){g.withPrimaryDataReduction(e)}}),g.withDataVolume(S.dataVolume);else if(r.matrix)!(function(t,e,r,i,a){var n=new x(t,i);I.CompiledDataViewMapping.visitMatrixRows(e.rows,n),r&&r.length,(r=(function(e,t,r,i,a){if(!(_.isEmpty(i)||_.isEmpty(t)&&a||(i=_.find(i,(function(e){return _.isEqual(e.roles,r)})),_.isEmpty(i.levels))))return e=_.uniqBy(e,(function(e){return e.queryName})),t=_.uniq(t),t=(_.isEmpty(t)?e:t).length-1,E.DataShapeBindingExpansionStateSerializer.serializeExpansionState(i,t)})(n.primaryRoleItems,n.primaryActiveRoleItems,n.primaryRoles,r,i))&&t.withPrimaryExpansion(r),a&&t.withPrimaryWindowExpansion(a),I.CompiledDataViewMapping.visitMatrixColumns(e.columns,{visitRole:function(e){t.withSecondaryGroupingNested(e.items,e.activeItems,e.showAll,e.subtotalType,i)},visitReduction:function(e){t.withSecondaryDataReduction(e)}}),I.CompiledDataViewMapping.visitMatrixValues(e.values,{visitRole:function(e){t.withCurrentInnermostGrouping(e.items,e.showAll,e.subtotalType)}}),t.withDataVolume(e.dataVolume),t.withIncludeEmptyGroups(e.includeEmptyGroups)})(n,r.matrix,c,d,h);else if(r.tree)f=n,h=r.tree,y=d,I.CompiledDataViewMapping.visitTreeNodes(h.nodes,{visitRole:function(e){f.withPrimaryGroupingNested(e.items,e.activeItems,e.showAll,e.subtotalType,y)},visitReduction:function(e){f.withPrimaryDataReduction(e)}}),I.CompiledDataViewMapping.visitTreeValues(h.values,{visitRole:function(e){f.withCurrentInnermostPrimaryGrouping(e.items,e.showAll,e.subtotalType)}}),f.withDataVolume(h.dataVolume);else if(r.scriptResult)return e(t,r.scriptResult.dataInput,i,a);return u&&n.withDataVolume(u),n.withTopLevelAggregates(r.scopedAggregates),n.toBinding(r)};var x=(t.prototype.visitRole=function(e,t){var r;"MatrixRowsScopedValue"===t?this.builder.withCurrentInnermostPrimaryGrouping(e.items,e.showAll,e.subtotalType,!0):this.inComposite?(r=this.startedCompositeNest,this.startedCompositeNest=!0,this.builder.withPrimaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,r,this.noDefaultProjections)):this.builder.withPrimaryGroupingNested(e.items,e.activeItems,e.showAll,e.subtotalType,this.noDefaultProjections),this.primaryRoleItems||(this.primaryRoleItems=[]),this.primaryRoles||(this.primaryRoles=[]),this.primaryRoles.push(e.role),(r=this.primaryRoleItems).push.apply(r,e.items||[]),_.isEmpty(e.activeItems)||(this.primaryActiveRoleItems||(this.primaryActiveRoleItems=[]),(r=this.primaryActiveRoleItems).push.apply(r,e.activeItems||[]))},t.prototype.visitReduction=function(e){this.builder.withPrimaryDataReduction(e)},t.prototype.enterComposite=function(e){this.inComposite=!0,this.startedCompositeNest=!1,this.compositeGroupingIndexStart=this.builder.primaryGroupingCount},t.prototype.exitComposite=function(e){var t,r;this.inComposite=!1,this.startedCompositeNest=!1,!e.dataReductionAlgorithm&&!e.synchronized||(t=this.compositeGroupingIndexStart)<(r=this.builder.primaryGroupingCount)&&(r=_.range(t,r),e.synchronized&&this.builder.withPrimarySynchronization({Groupings:r}),e.dataReductionAlgorithm&&this.builder.withScopedDataReduction(e.dataReductionAlgorithm,{Primary:r}))},t);function t(e,t){this.inComposite=!1,this.startedCompositeNest=!1,this.builder=e,this.noDefaultProjections=t}function r(e,t){if(t)for(var r=0,i=t.Groupings;r<i.length;r++){var a=i[r];if(_.includes(a.Projections,e))return!0}}e.getIndicesByName=function(e){for(var t={},r=e.select(),i=e.groupBy(),a=0,n=r.length;a<n;a++)t[r[a].name]=a;for(a=0,n=i.length;a<n;a++)t[i[a].name]=a;return t},e.updateMappingsWithScalarKeys=function(e,t){function r(e){this.indicesByName=e}var i=new(r.prototype.visitRole=function(e,t){if(!_.isEmpty(e.items)){for(var r,i=0,a=e.items;i<a.length;i++){var n=a[i];n.scalarKeyInfo&&null!=n.scalarKeyInfo.scalarKeyQueryName&&(r=n.scalarKeyInfo.scalarKeyQueryName)}r&&(this.primaryScalarKey,this.primaryScalarKey=this.indicesByName[r])}},r)(t);I.CompiledDataViewMapping.visitMapping(e,i),null!=i.primaryScalarKey&&I.CompiledDataViewMapping.visitMapping(e,{visitRole:function(){},visitReduction:function(e){e.binnedLineSample&&(e.binnedLineSample.primaryScalarKey=i.primaryScalarKey)}})};var D=(Object.defineProperty(i.prototype,"primaryGroupingCount",{get:function(){return this.primary&&this.primary.Groupings&&this.primary.Groupings.length||0},enumerable:!1,configurable:!0}),i.prototype.withRestartToken=function(e){return this.restartToken=e,this},i.prototype.withPrimaryWindowExpansion=function(e){return this.reduction.Primary&&this.reduction.Primary.TopNPerLevel&&(this.reduction.Primary.TopNPerLevel.WindowExpansion=E.DataShapeBindingWindowExpansionStateSerializer.serializeWindowExpansionState(e)),this},i.prototype.withDataVolume=function(e){return null==e||(this.reduction.DataVolume=e),this},i.prototype.withIncludeEmptyGroups=function(e){return this.includeEmptyGroups=e,this},i.prototype.withHighlightFilter=function(e){return this.highlightFilter=e,this},i.prototype.withGroupBy=function(e){return _.isEmpty(e)||(this.groupByNames=_.map(e,(function(e){return e.name}))),this},i.prototype.withPrimaryGrouping=function(e,t,r,i,a,n){if(this.secondary,e=this.filterItems(e,t,n),_.isEmpty(e))return this;var o;this.primary?a?o=_.last(this.primary.Groupings):this.primary.Groupings.push(o={Projections:[]}):this.primary={Groupings:[o={Projections:[]}]},this.updateGrouping(o,e,r,i);e=this.getAggregatesForRoleItems(e);return this.applyTopLevelAggregates(e),this},i.prototype.withPrimaryExpansion=function(e){return this.ensurePrimaryAxis(),this.primary.Expansion=e,this},i.prototype.withPrimarySynchronization=function(e){return this.ensurePrimaryAxis(),this.primary.Synchronization||(this.primary.Synchronization=[]),this.primary.Synchronization.push(e),this},i.prototype.ensurePrimaryAxis=function(){this.primary||(this.primary={Groupings:[]})},i.prototype.ensureSecondaryAxis=function(){this.secondary||(this.secondary={Groupings:[]})},i.prototype.withPrimaryGroupingNested=function(e,t,r,i,a){return this.secondary,e=this.filterItems(e,t,a),_.isEmpty(e)?this:(this.primary||(this.primary={Groupings:[]}),a=this.primary.Groupings,this.withNested(a,e,r,i))},i.prototype.withSecondaryGrouping=function(e,t,r,i,a){if(e=this.filterItems(e,t,a),_.isEmpty(e))return this;var n;this.primary?(a=_.last(this.primary.Groupings),this.containsAll(a,e)?n=a:(this.secondary||(this.secondary={Groupings:[]}),this.secondary.Groupings.push(n={Projections:[]}))):(this.primary={Groupings:[n={Projections:[]}]},this.pivotedSecondaryToPrimary=!0),this.updateGrouping(n,e,r,i);e=this.getAggregatesForRoleItems(e);return this.applyTopLevelAggregates(e),this},i.prototype.withSecondaryExpansion=function(e){return this.ensureSecondaryAxis(),this.secondary.Expansion=e,this},i.prototype.withSecondaryGroupingNested=function(e,t,r,i,a){return e=this.filterItems(e,t,a),_.isEmpty(e)?this:(this.primary?(this.secondary||(this.secondary={Groupings:[]}),n=this.secondary.Groupings):(this.primary={Groupings:n=[]},this.pivotedSecondaryToPrimary=!0),this.withNested(n,e,r,i));var n},i.prototype.withCurrentInnermostGrouping=function(e,t,r){return e=this.filterItems(e,null,!1),_.isEmpty(e)||(this.secondary&&(i=_.last(this.secondary.Groupings)),this.addValuesToGrouping(e,t,r,i)),this;var i},i.prototype.withCurrentInnermostPrimaryGrouping=function(e,t,r,i){if(e=this.filterItems(e,null,!1),_.isEmpty(e))return this;if(this.addValuesToGrouping(e,t,r),i){this.primaryOnlyProjections=this.primaryOnlyProjections||[];for(var a=0,n=e;a<n.length;a++){var o=n[a];this.primaryOnlyProjections.push(this.indicesByName[o.queryName])}}return this},i.prototype.addValuesToGrouping=function(e,t,r,i){i=i||this.ensureInnermostPrimaryGrouping(),this.updateGrouping(i,e,t,r);e=this.getAggregatesForRoleItems(e);this.applyTopLevelAggregates(e)},i.prototype.ensureInnermostPrimaryGrouping=function(){var e;return this.primary?e=_.last(this.primary.Groupings):this.primary={Groupings:[e={Projections:[]}]},e},i.prototype.withPrimaryDataReduction=function(e){return e&&this.primary&&(this.reduction.Primary=I.DataShapeBindingDataReduction.createFrom(e,this.querySelects)),this},i.prototype.withScopedDataReduction=function(e,t){return e&&(this.reduction.Scoped||(this.reduction.Scoped=[]),this.reduction.Scoped.push({Scope:t,Algorithm:I.DataShapeBindingDataReduction.createFrom(e,this.querySelects)})),this},i.prototype.withSecondaryDataReduction=function(e){if(this.pivotedSecondaryToPrimary)return this.withPrimaryDataReduction(e);if(!e||!this.secondary)return this;if(!this.reduction.Scoped||_.isEmpty(this.secondary.Groupings))return this.reduction.Secondary=I.DataShapeBindingDataReduction.createFrom(e,this.querySelects),this;var t=this.secondary.Groupings.length,t=_.range(0,t);return this.withScopedDataReduction(e,{Secondary:t}),this},i.prototype.withIntersectionDataReduction=function(e){return e&&(this.reduction.Primary||this.reduction.Secondary||e.binnedLineSample&&(this.reduction.Intersection=I.DataShapeBindingDataReduction.createFrom(e,this.querySelects))),this},i.prototype.withTopLevelAggregates=function(e){var t=this;if(!this.featureSwitches.scopedAggregates)return this;if(_.isEmpty(e))return this;e=this.convertDataViewMappingAggregate(e,(function(e){return t.toAggregateScope(e,t.primary.Groupings,0)})),e=this.getDataShapeBindingAggregates(e);return this.applyTopLevelAggregates(e),this},i.prototype.toAggregateScope=function(r,e,i){for(var a=0,n=this.querySelects,t=0,o=e;t<o.length;t++){var s=o[t];if(!_.isEmpty(s.ShowItemsWithNoData))return;for(var u=0,c=s.Projections;u<c.length;u++){var l=(function(e){e=n[e];if(I.SQExprUtils.isMeasure(e.expr))return"continue";var t=e.name;return r.some((function(e){return e===t}))?void 0:i<a?{value:{PrimaryDepth:a}}:{value:void 0}})(c[u]);if("object"==typeof l)return l.value}a++}return i<a?{PrimaryDepth:a}:void 0},i.prototype.updateScopeAggregatesForGroupings=function(t,e){var r=this,i=this.featureSwitches;if(i.scopedAggregates&&e&&t)for(var a=0,n=0,o=e;n<o.length;n++){var s=o[n],s=s.aggregates&&s.aggregates.filter(I.CompiledDataViewMapping.isCompiledDataViewMappingScopedAggregate);_.isEmpty(s)||(s=this.convertDataViewMappingAggregate(s,(function(e){return r.toAggregateScope(e,t,a+1)})),s=this.getDataShapeBindingAggregates(s),_.isEmpty(s)||(t[a].Aggregates=s),a++)}},i.prototype.getDataShapeBindingAggregates=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var a=i[r];_.forEach(a,(function(e,t){for(var r=n[t]=n[t]||[],i=0,a=e;i<a.length;i++)!(function(t){r.some((function(e){return _.isEqual(e,t)}))||r.push(t)})(a[i])}))}return _.map(n,(function(e,t){return{Select:+t,Aggregations:e}}))},i.prototype.updateGrouping=function(e,t,r,i){this.addProjections(e.Projections,t);var a=this.indicesByName;if(r){e.ShowItemsWithNoData||(e.ShowItemsWithNoData=[]);for(var n=0,o=t;n<o.length;n++){var s=o[n];this.insertProjection(e.ShowItemsWithNoData,a[s.queryName])}}for(var u=t[0].subtotalType,c=1,l=t.length;c<l;c++)if(t[c].subtotalType!==u){u=void 0;break}i=(function(e){switch(e){case 1:return 1;case 2:return 2;case 0:return}})(null!=u?u:i);null!=i&&(e.Subtotal=i);i=this.groupByNames;i&&(e.GroupBy=_.map(i,(function(e){return a[e]})))},i.prototype.withNested=function(e,t,r,i){for(var a=0,n=t;a<n.length;a++){var o=n[a],s={Projections:[]};this.updateGrouping(s,[o],r,i),e.push(s)}this.updateScopeAggregatesForGroupings(e,t);t=this.getAggregatesForRoleItems(t);return this.applyTopLevelAggregates(t),this},i.prototype.filterItems=function(e,t,r){if(!_.isEmpty(e)){e=_.uniqBy(e,(function(e){return e.queryName}));var i,a=this.indicesByName;t&&(i=[]);for(var n=0,o=e.length;n<o;n++){var s=e[n],u=null,c=t&&!_.isEmpty(t)&&!_.includes(t,s.queryName);null==a[s.queryName]?u=n-1:(c||this.isReferenced(s))&&(u=n),null==u?i&&i.push(s):i=i||(u<0?[]:l.range(e,0,u))}return i||(r?[]:e)}},i.prototype.isReferenced=function(e){e=this.indicesByName[e.queryName];return r(e,this.primary)||r(e,this.secondary)||_.includes(this.projections,e)},i.prototype.containsAll=function(e,t){for(var r=e.Projections,i=this.indicesByName,a=0,n=t;a<n.length;a++){var o=n[a];if(!_.includes(r,i[o.queryName]))return!1}return!0},i.prototype.addProjections=function(e,t){for(var r=this.indicesByName,i=0,a=t;i<a.length;i++){var n=a[i],o=r[n.queryName];this.insertProjection(e,o),this.addJoinPredicateBehavior(o,n.joinPredicate)}},i.prototype.addJoinPredicateBehavior=function(e,t){this.joinPredicateBehaviors[e]?void 0===t&&(this.joinPredicateBehaviors[e].behavior=t):this.joinPredicateBehaviors[e]={behavior:t}},i.prototype.withAdditionalProjections=function(e){return _.isEmpty(e)||(this.additionalProjections=e),this},i.prototype.applyAdditional=function(e){var t=this,r=this.querySelects,i=this.additionalProjections,a=y.findActive(e);if(!_.isEmpty(i))for(var n=this.primary,o=this.secondary,s=this.projections,u=0,c=i;u<c.length;u++){var l,p=c[u],d=I.DataBoundObjectQueryExtender.getScopeRefs(null===(l=p.selector)||void 0===l?void 0:l.data,r,a),h=this.indicesByName[p.queryName],m=this.convertProjectionAggregates(h,p.aggregates);m&&this.applyTopLevelAggregates([m]),null!==d?(l=_.map(d,(function(e){return t.indicesByName[e]})),m=o&&!_.isEmpty(o.Groupings),(d=n&&this.addAdditional(h,l,n))&&m&&this.addSuppressedProjection(_.last(o.Groupings),h),(d=d||m&&this.addAdditional(h,l,o))&&this.addJoinPredicateBehavior(h,p.joinPredicate)):p.aggregates||(s||(this.projections=s=[]),this.insertProjection(s,h),this.addJoinPredicateBehavior(h,p.joinPredicate))}},i.prototype.addAdditional=function(e,t,r){r.Groupings;for(var i,a=r.Groupings,n=!1,o=0;o<a.length;o++)if(i=a[o],n)this.addSuppressedProjection(i,e);else if(_.remove(t,(function(e){return _.includes(i.Projections,e)})),0===t.length){if(!this.isProjectingOnNonLeafGrouping(o,r))return this.insertProjection(_.last(a).Projections,e),!0;this.insertProjection(i.Projections,e),n=!0}return n},i.prototype.isProjectingOnNonLeafGrouping=function(e,t){t.Groupings,0<=e&&t.Groupings.length;var r=t.Groupings.length;return e!==r-1&&!(2!==r||!t.Synchronization)},i.prototype.addSuppressedProjection=function(e,t){e.SuppressedProjections||(e.SuppressedProjections=[]),this.insertProjection(e.SuppressedProjections,t)},i.prototype.applyTopLevelAggregates=function(e){var t;_.isEmpty(e)||(this.aggregates||(this.aggregates=[]),(t=this.aggregates).push.apply(t,e))},i.prototype.getAggregatesForRoleItems=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var a=i[r];a.aggregates&&t.push(this.convertDataViewMappingAggregate(a.aggregates,a.queryName))}if(!_.isEmpty(t))return this.getDataShapeBindingAggregates.apply(this,t)},i.prototype.convertDataViewMappingAggregate=function(e,t){var r,i;_.isFunction(t)?i=t:r=this.indicesByName[t];for(var a={},n=0,o=e;n<o.length;n++){var s=o[n],u=void 0,c=void 0;if(I.CompiledDataViewMapping.isCompiledDataViewMappingScopedAggregate(s)){if(!i)continue;if(u=s.queryName?this.indicesByName[s.queryName]:r,!(c=s.scope&&i(s.scope)))continue}else u=r;var l=a[u]=a[u]||[],u=!!c||void 0;s.min||s.max||s.average,s.min&&l.push({Scope:c,RespectInstanceFilters:u,Min:{}}),s.max&&l.push({Scope:c,RespectInstanceFilters:u,Max:{}}),s.average&&l.push({Scope:c,RespectInstanceFilters:u,Average:{}})}return _.isEmpty(a)?void 0:a},i.prototype.convertProjectionAggregates=function(e,t){if(t){var r,i=[],e={Select:e,Aggregations:i};if(t.min&&i.push({Min:{}}),t.max&&i.push({Max:{}}),t.average&&i.push({Average:{}}),t.median&&i.push({Median:{}}),t.percentiles)for(var a=0,n=t.percentiles;a<n.length;a++){var o=n[a];i.push((r=void 0,r={K:(o=o).k},o.exclusive&&(r.Exclusive=o.exclusive),{Percentile:r}))}return _.isEmpty(e.Aggregations),e}},i.prototype.suppressProjectionsIfNeeded=function(){if(!_.isEmpty(this.primaryOnlyProjections)&&this.secondary)for(var e=_.last(this.secondary.Groupings),t=0,r=this.primaryOnlyProjections;t<r.length;t++){var i=r[t];this.addSuppressedProjection(e,i)}},i.prototype.toBinding=function(e){this.applyAdditional(e),this.suppressProjectionsIfNeeded();var t=this.primary,e=this.projections;if(!t){if(!e)return;t={Groupings:[{Projections:e}]},e=null}var r=this.restartToken;if(r)if(this.reduction.Primary&&this.reduction.Primary.Window&&(this.reduction.Primary.Window.RestartTokens=r,0),this.reduction.Scoped)for(var i=0,a=this.reduction.Scoped;i<a.length;i++){var n=a[i];n.Algorithm.Window&&(n.Algorithm.Window.RestartTokens=r,n.Algorithm.Window.RestartMatchingBehavior=1,0)}t={Primary:t};this.secondary&&(t.Secondary=this.secondary),e&&(t.Projections=e),(this.reduction.Primary||this.reduction.Secondary||this.reduction.Intersection||this.reduction.Scoped)&&(t.DataReduction=this.reduction),this.includeEmptyGroups&&(t.IncludeEmptyGroups=this.includeEmptyGroups);e=this.aggregates;e&&(t.Aggregates=e);for(var o=[],s=0;s<this.joinPredicateBehaviors.length;s++)this.joinPredicateBehaviors[s]&&0===this.joinPredicateBehaviors[s].behavior&&o.push(s);return _.isEmpty(o)||(t.SuppressedJoinPredicates=o),t.Version=1,this.highlightFilter&&(t.Highlights=this.highlightFilter),t},i);function i(e,t,r,i){this.indicesByName=e,this.querySelects=t,this.reduction={DataVolume:3},this.joinPredicateBehaviors=[],this.insertProjection=r?l.insertUnique:l.insertSorted,this.featureSwitches=i||{}}})(S=S||{});var r,n=(r=I.SQExprRewriter,__extends(o,r),o.prototype.visitScopedEval=function(e){return _.isEmpty(e.scope)?e:I.SQExprBuilder.scopedEval(e.expression,_.filter(e.scope,(function(e){return!d.isWithRef(e)})))},o);function o(){return null!==r&&r.apply(this,arguments)||this}var s,u=(s=I.SQExprRewriter,__extends(p,s),p.prototype.visitGroupRef=function(e){return new I.SQColumnRefExpr(e.source,e.ref)},p);function p(){return null!==s&&s.apply(this,arguments)||this}var h,m=(h=I.SQExprRewriter,__extends(f,h),f.prototype.visitScopedEval=function(e){for(var r=[],t=!1,i=0,a=e.scope;i<a.length;i++){var n=a[i];if(d.isRoleRef(n))for(var t=!0,o=0,s=this.mappings;o<s.length;o++){var u=s[o],u=y.findActive(u)[n.role];if(u)for(var c=this,l=0,p=u;l<p.length;l++)!(function(t){var e=_.find(c.selects,(function(e){return e.name===t}));e&&r.push(e.expr)})(p[l])}else r.push(n)}return t?I.SQExprBuilder.scopedEval(e.expression,_.uniqBy(r,(function(e){return I.services.SemanticQuerySerializer.serializeExpr(e)}))):e},f);function f(e,t){var r=h.call(this)||this;return r.mappings=e,r.selects=t,r}var y=(g.findActive=function(e){var t=new g;return I.CompiledDataViewMapping.visitMapping(e,t),t.queryReferencesByRole},g.prototype.visitRole=function(t){var e=t.items;_.isEmpty(t.activeItems)||(e=_.filter(e,(function(e){return _.includes(t.activeItems,e.queryName)}))),this.queryReferencesByRole[t.role]=_.map(e,(function(e){return e.queryName}))},g);function g(){this.queryReferencesByRole={}}})((I=v.data||(v.data={})).dsr||(I.dsr={}))})(powerbi=powerbi||{}),(function(S){var C;(function(c){var e=jsCommon.Utility;c.createQueryCache=function(e,t,r,i,a){return new o(e,t,r,i,a)};var t=e.generateGuid;c.setGenerateGuid=function(e){t=e};var l,d,o=(h.prototype.ensure=function(e){var r=this;e.command;var t=e.command;t&&t.Commands&&t.Commands.length;var i=t.Commands[0].SemanticQueryDataShapeCommand,a=this.ensureCache(e.dataSources),n=l.generateCacheKeyDataQuery(t);if(a.hasCacheEntry(n)){if(h.allowResultFromClientCacheOrDefault(e))return this.telemetryService.logEvent(S.telemetry.DataClientCacheHit,{cacheHit:!0,isCacheFull:a.isFull(),entryCount:a.getEntryCount()}),a.bindCacheEntry(n,void 0,e.telemetryV2Enabled);a.clearEntry(n)}this.telemetryService.logEvent(S.telemetry.DataClientCacheHit,{cacheHit:!1,isCacheFull:a.isFull(),entryCount:a.getEntryCount()});var o=l.createCacheItemContext(t,this.featureSwitches,n),t=this.findEquivalentCache(e,a,o);if(t)return t;var s=__assign({},e);s.queryId=o.queryId,s.executionType=0,null!==(t=this.featureSwitches)&&void 0!==t&&t.queryContext&&(u=function(e){var t=r.findQueryContext(s);if(!t)return e;e=__assign({},e);return e.queryContext=t,e});var u=a.createCacheEntry(n,o,u,h.rewriteCachedResult,e.telemetryV2Enabled);u.promise.catch((function(e){S.isHttpClientError(e)||r.featureSwitches&&r.featureSwitches.queryCancellation&&r.createCancelQuery({dataSources:s.dataSources,command:s.command,allowResultFromClientCache:s.allowResultFromClientCache,allowClientSideFilters:s.allowClientSideFilters,cacheResponseOnServer:s.cacheResponseOnServer,ignoreViewportForCache:s.ignoreViewportForCache,cacheOptions:s.cacheOptions,queryId:s.queryId,executionType:1},e&&e.queryCancellationSource)})),this.createQuery(s,u);u=a.bindCacheEntry(n,void 0,e.telemetryV2Enabled);return!1===e.cacheResponseOnClient&&a.clearEntry(n),i.Binding&&i.Binding.DataReduction&&(g(i.Binding.DataReduction.Primary)||g(i.Binding.DataReduction.Secondary))||u.then((function(e){e&&e.dsr&&(function(e,t){{if(c.isDsrV2(e)){if(!t)return!1;for(var r=c.reader.V2.createDsrParser(e,void 0).dataShapes(),i=c.getDsrV2MinorVersion(e);r.next();)if(i&&1<=i){if(!0!==r.hasAllData())return!1}else if(!r.complete()||r.limitsExceeded()||r.hasRestartTokens())return!1;return!0}return _.every(e.DataShapes,(function(e){return e&&e.IsComplete&&_.isEmpty(e.DataLimitsExceeded)&&!e.RestartTokens}))}})(e.dsr,r.featureSwitches&&r.featureSwitches.dsrV2)&&(o.hasAllData=!0)}),(function(){})),u},h.prototype.findQueryContext=function(e){e=e.applicationContext;if(e)return _.size(e.Sources),e.Sources[0].CustomProperties},h.prototype.clear=function(e){e=this.getCache(e);e&&e.clearAllEntries()},h.prototype.rewrite=function(e,n){var o=this,s=this.getCache(e);s&&(e={},n.rewriteCacheKey&&n.rewriteDataQueryCacheKey&&(e.rewriteKey=function(e){var t,r,i=JSON.parse(e),a=s.getEntryContext(e);return a.compositeDataQuery?(t=n.rewriteDataQueryCacheKey(e=i))&&t!==e&&(r=l.createCacheItemContextForCompositeDataQuery(t,o.featureSwitches),_.assign(a,r)):(i=n.rewriteCacheKey(t=i))&&i!==t&&(r=l.createCacheItemContextForNonCompositeDataQuery(i,o.featureSwitches),_.assign(a,r)),a.key}),n.rewriteCacheResult&&(e.rewriteResult=function(e){var t=e,e=n.rewriteCacheResult({descriptor:t.descriptor,dsr:t.dsr});return e?{descriptor:e.descriptor,dsr:e.dsr}:{descriptor:t.descriptor,dsr:t.dsr}}),s.rewriteAllEntries(e))},h.prototype.put=function(e,t,r){var i=this.ensureCache(e),e=t,t=l.generateCacheKeyDataQuery(e);i.hasCacheEntry(t)?i.putCacheResult(t,r,h.rewriteCachedResult):(e=l.createCacheItemContext(e,this.featureSwitches,t),i.createCacheEntry(t,e,void 0,h.rewriteCachedResult).deferred.resolve(r))},h.allowResultFromClientCacheOrDefault=function(e){return!1!==e.allowResultFromClientCache},h.prototype.findEquivalentCache=function(e,t,r){if(h.allowResultFromClientCacheOrDefault(e))if(r.compositeDataQuery){if(e.ignoreViewportForCache)for(var i=0,a=t.keys();i<a.length;i++){p=a[i];if((l=t.getEntryContext(p))&&l.keyWithoutViewport&&l.keyWithoutViewport===r.keyWithoutViewport)return t.bindCacheEntry(l.key,void 0,e.telemetryV2Enabled)}}else{var n=e.command;n&&_.isEmpty(n.Commands);for(var n=n.Commands[0].SemanticQueryDataShapeCommand.Binding,o=!!(n&&n.DataReduction&&n.DataReduction.Primary&&n.DataReduction.Primary.TopNPerLevel),s=!1,u=0,c=t.keys();u<c.length;u++){var l,p=c[u];if(l=t.getEntryContext(p)){if(!o&&l.hasAllData&&l.keyWithoutReduction===r.keyWithoutReduction)return t.bindCacheEntry(l.key,void 0,e.telemetryV2Enabled);if(d.tryReuseCacheWithClientSideFilters(t,l,e,r,e.telemetryV2Enabled)){s=!0;break}}}s&&jsCommon.Trace.information("Reused cache with client side filters")}},h.prototype.getCache=function(e){return this.cacheByModel[this.generateModelKey(e)]},h.prototype.ensureCache=function(e){var t=this.generateModelKey(e),r=this.cacheByModel,i=r[t];return i=void 0===i?null!==(e=this.featureSwitches)&&void 0!==e&&e.useLegacyQueryCache?r[t]=new S.LegacyRejectablePromiseCache(this.promiseFactory):null!==(e=this.featureSwitches)&&void 0!==e&&e.lruCacheEvictionPolicy?r[t]=new S.RejectablePromiseCache(this.promiseFactory,1):r[t]=new S.RejectablePromiseCache(this.promiseFactory,0):i},h.prototype.generateModelKey=function(e){if(!_.isEmpty(e))return JSON.stringify(_.map(e,(function(e){return{dbName:e.dbName,vsName:e.vsName,schemaName:e.schemaName}})))},h.rewriteCachedResult=function(e){if(!e)return e;e=__assign({},e);return delete e.metrics,e.fromClientCache=!0,e},h);function h(e,t,r,i,a){this.featureSwitches=a,this.createQuery=r,this.createCancelQuery=i,this.promiseFactory=e,this.cacheByModel={},this.telemetryService=t}function i(e,t,r){return n(e),r&&m(e),{key:r||m(e),keyWithoutReduction:(function(e){if(e&&n(e),e){e=_.cloneDeep(e);return p(e.Commands[0].SemanticQueryDataShapeCommand),JSON.stringify(e)}})(e),keyWithoutViewport:(function(e){if(e&&n(e),e){e.Commands,e.Commands.length,e.Commands[1].ScriptVisualCommand;e=_.cloneDeep(e);return (function(e){e&&(e.ViewportHeightPx=void 0,e.ViewportWidthPx=void 0)})(e.Commands[1].ScriptVisualCommand),JSON.stringify(e)}})(e),keyWithoutFilter:void 0,queryFilters:void 0,compositeDataQuery:!0,queryId:u(t)}}function a(e,t,r){r&&s(e);var i=d.isDataShapeCommandSuitableForClientSideFiltering(e);return{key:r||s(e),keyWithoutReduction:(function(e){if(e){e=_.cloneDeep(e);return p(e),JSON.stringify(e)}})(e),keyWithoutViewport:void 0,keyWithoutFilter:i?(function(e){if(e){e=_.cloneDeep(e);return (function(e){e&&e.Query&&e.Query.Where&&(e.Query.Where=void 0)})(e),JSON.stringify(e)}})(e):void 0,queryFilters:i?(function(e){e=e&&e.Query;if(e&&!_.isEmpty(e.Where)){e=v(e),e=e&&e.where();if(!_.isEmpty(e))return e}})(e):void 0,compositeDataQuery:!1,queryId:u(t)}}function n(e){return e&&e.Commands&&e.Commands.length,1<e.Commands.length}function s(e){if(e)return JSON.stringify(e)}function u(e){return e&&e.queryCancellation?t():""}function p(e){e&&e.Binding&&"object"==typeof e.Binding&&(e.Binding.DataReduction=void 0,e.Binding.Limits=void 0)}function m(e){if(e&&n(e),e)return JSON.stringify(e)}function f(e,t){if(!t.compositeDataQuery&&!!t.keyWithoutFilter){var r=!e.compositeDataQuery&&e.keyWithoutFilter&&e.hasAllData;if(r&&e.keyWithoutFilter===t.keyWithoutFilter){var i,r=y(e.queryFilters,t.queryFilters);if(r=r,i=t.queryFilters,_.every(r,(function(t){return _.some(i,(function(e){return C.ClientSideFilter.isMoreRestrictiveFilter(e,t)}))}))){e=y(t.queryFilters,e.queryFilters);if(!_.isEmpty(e))return (function(e,t){e&&e.compositeDataQuery;var e=JSON.parse(e.key),r=v(e&&e.Query);if(r)return _.every(t,(function(e){return C.SQFilter.contains(r.where(),e)})),C.ClientSideFilter.tryConvertToClientSideFilters(r.select(),t)})(t,e)}}}}function y(e,t){return _.isEmpty(t)?e:_.filter(e,(function(e){return!C.SQFilter.contains(t,e)}))}function g(e){return e&&e.Window&&null!=e.Window.RestartTokens}function r(e){return!e||e.Window}function v(e){if(e&&e.From&&e.Select)return C.services.SemanticQuerySerializer.deserializeQuery(e)}(e=l=l||{}).createCacheItemContext=function(e,t,r){return e&&e.Commands&&e.Commands.length,n(e)?i(e,t,r):(e.Commands.length,a(e.Commands[0].SemanticQueryDataShapeCommand,t,r))},e.generateCacheKeyDataQuery=function(e){return e&&e.Commands&&e.Commands.length,n(e)?m(e):s(e.Commands[0].SemanticQueryDataShapeCommand)},e.createCacheItemContextForCompositeDataQuery=i,e.createCacheItemContextForNonCompositeDataQuery=a,(e=d=d||{}).isDataShapeCommandSuitableForClientSideFiltering=function(e){if(!e)return!1;var e=(t=e.Binding&&e.Binding.DataReduction)&&t.Primary,t=t&&t.Secondary;return!(!r(e)||!r(t))&&(!g(e)&&!g(t))},e.tryReuseCacheWithClientSideFilters=function(e,t,r,i,a){if(void 0===a&&(a=!1),o.allowResultFromClientCacheOrDefault(r),r.allowClientSideFilters){var n=f(t,i);return _.isEmpty(n)?void 0:e.bindCacheEntry(t.key,(function(e){return (function(e,t){e=__assign({},e);return e.clientSideFilters=t,e})(e,n)}),a)}},e.tryComputeClientSideFilters=f})((C=S.data||(S.data={})).dsr||(C.dsr={}))})(powerbi=powerbi||{}),(function(i){var o,e,s,u,c;function a(e,t){var r=typeof e;if("string"==r){if(_.endsWith(e,"L")){var i=parseInt(e,10);return t?o.SQExprBuilder.integer(i,e):i}if(_.endsWith(e,"D")){i=l(e);return t?o.SQExprBuilder.double(i,e):i}if(_.endsWith(e,"M")){var a=l(e);return t?o.SQExprBuilder.decimal(a,e):a}if(_.endsWith(e,"'")){if("'"===e.charAt(0)){var n=e.substring(1,e.length-1).replace(s,"'");return t?o.SQExprBuilder.text(n,e):n}if(0===e.indexOf("datetime'")){a=e.replace(u,"'"),n=e.substring(9,a.length-1),n=c.parseIsoDate(n);return t?o.SQExprBuilder.dateTime(n,a):n}}if("null"===e)return t?o.SQExprBuilder.nullConstant():null;if("true"===e)return!t||o.SQExprBuilder.boolean(!0);if("false"===e)return!!t&&o.SQExprBuilder.boolean(!1)}return"boolean"==r?t?o.SQExprBuilder.boolean(e):e:null===e?t?o.SQExprBuilder.nullConstant():null:e}function l(e){var t=parseFloat(e);return isNaN(t)?parseFloat(e.replace("INF","Infinity")):t}o=i.data||(i.data={}),c=jsCommon.DateExtensions,e=o.PrimitiveValueEncoding||(o.PrimitiveValueEncoding={}),s=/''/g,u=/\.000'$/,e.parseValue=function(e){return a(e)},e.parseValueToSQExpr=function(e){return a(e,!0)},e.parseBinary=function(e){return e&&_.startsWith(e,"base64'")?e.substring("base64'".length,e.length-1):null},e.parseOptimizedValue=function(e,t){if(null===e)return null;switch(t){case 4:return"number"==typeof e?e:parseInt(e,10);case 2:case 3:return"number"==typeof e?e:l(e);case 7:case 6:if("number"!=typeof e)return c.parseIsoDate(e);var r=new Date(e),i=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),i=new Date(r.getTime()+6e4*i.getTimezoneOffset());return i.epochTimeStamp=e,i;case 1:return e;case 5:return"number"==typeof e?1===e:e;case 13:return a(e)}},e.parseOptimizedValueToSQExpr=function(e,t,r){if(null===e)return o.SQExprBuilder.nullConstant();switch(r){case 4:return"number"==typeof t?o.SQExprBuilder.integer(+e):o.SQExprBuilder.fromRawValue(260,+e,t.toString());case 2:return"number"==typeof t?o.SQExprBuilder.decimal(+e):o.SQExprBuilder.fromRawValue(258,+e,t.toString());case 3:return"number"==typeof t?o.SQExprBuilder.double(+e):o.SQExprBuilder.fromRawValue(259,+e,t.toString());case 7:case 6:return"number"==typeof t?new o.SQConstantExpr(i.ValueType.fromExtendedType(519),e):o.SQExprBuilder.fromRawValue(519,e,t.toString());case 1:return o.SQExprBuilder.text(e.toString());case 5:return o.SQExprBuilder.boolean(!!e);case 13:return a(t,!0)}},e.parseTypeEncodedValue=a})(powerbi=powerbi||{}),(function(e){!(function(a){function n(e){return new c(e)}function o(e){return new t(e)}function s(e){return new d(e)}function u(e){return new f(e)}a.createSchemaChangeRewriters=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];a.measureMove&&t.push(n(a.measureMove)),a.entityRename&&t.push(o(a.entityRename)),a.propertyRename&&t.push(s(a.propertyRename)),a.hierarchyLevelRename&&t.push(u(a.hierarchyLevelRename))}return t},a.createMoveMeasureRewriter=n,a.createEntityRenameRewriter=o,a.createPropertyRenameRewriter=s,a.createHierarchyLevelRenameRewriter=u,a.createSetSchemaMeasureRewriter=function(e){return new v(e)};var r,t=(r=a.SQExprRewriter,__extends(e,r),e.prototype.visitColumnRef=function(e){if(a.SQExpr.isEntity(e.source)||a.SQExpr.isSubqueryRef(e.source)){var t=e.source.accept(this);return t!==e.source?new a.SQColumnRefExpr(t,e.ref):e}return e},e.prototype.visitEntity=function(e){var t=this.change;return e.schema===t.schema&&e.entity===t.before?new a.SQEntityExpr(e.schema,t.after,e.variable):e},e.prototype.visitSubqueryRef=function(e){if(e.query){var t=e.query.rewrite(this);return t!==e.query?new a.SQSubqueryRefExpr(t):e}return e},e);function e(e){var t=this;return(t=r.call(this)||this).change=e,t}var i,c=(i=a.SQExprRewriter,__extends(l,i),l.prototype.visitMeasureRef=function(e){var t=this.change,r=a.FieldExprPattern.toFieldExprEntityItemPattern(a.SQExprConverter.asFieldPattern(e));if(r.schema!==t.schema||r.entity!==t.source||e.ref!==t.property)return e;r=new a.SQEntityExpr(r.schema,t.destination);return new a.SQMeasureRefExpr(r,t.property)},l.prototype.visitSubqueryRef=function(e){if(e.query){var t=e.query.rewrite(this);return t!==e.query?new a.SQSubqueryRefExpr(t):e}return e},l);function l(e){var t=this;return(t=i.call(this)||this).change=e,t}var p,d=(p=a.SQExprRewriter,__extends(h,p),h.prototype.visitColumnRef=function(e){if(a.SQExpr.isSubqueryRef(e.source)){var t=e.source.accept(this);return t!==e.source?new a.SQColumnRefExpr(t,e.ref):e}if(a.SQExpr.isTransformTableRef(e.source))return e;t=this.change;return this.matches(t,e)?new a.SQColumnRefExpr(e.source,t.after):e},h.prototype.visitMeasureRef=function(e){var t=this.change;return this.matches(t,e)?new a.SQMeasureRefExpr(e.source,t.after):e},h.prototype.visitGroupRef=function(e){var t=this,r=e,i=this.change;this.matches(i,e)&&(r=new a.SQGroupRefExpr(i.after,e.source,e.groupedExprs));i=_.map(e.groupedExprs,(function(e){return e.accept(t)}));return r=!a.SQExprUtils.sequenceEqual(i,e.groupedExprs)?new a.SQGroupRefExpr(r.ref,r.source,i):r},h.prototype.visitHierarchy=function(e){e.arg;var t=e.arg.accept(this);if(t!==e.arg)return new a.SQHierarchyExpr(t,e.hierarchy);t=this.change;return this.hierarchyMatches(t,e)?new a.SQHierarchyExpr(e.arg,t.after):e},h.prototype.visitPropertyVariationSource=function(e){var t=this.change;return this.variationMatches(t,e)?new a.SQPropertyVariationSourceExpr(e.arg,e.name,t.after):e},h.prototype.visitSubqueryRef=function(e){if(e.query){var t=e.query.rewrite(this);return t!==e.query?new a.SQSubqueryRefExpr(t):e}return e},h.prototype.variationMatches=function(e,t){var r=t.arg;return a.SQEntityExpr,r.schema===e.schema&&r.entity===e.entity&&t.property===e.before},h.prototype.hierarchyMatches=function(e,t){var r=t.arg;if(a.SQExpr.isEntity(r))return"Hierarchy"===e.objectType&&r.schema===e.schema&&r.entity===e.entity&&t.hierarchy===e.before},h.prototype.matches=function(e,t){var r=a.FieldExprPattern.toFieldExprEntityItemPattern(a.SQExprConverter.asFieldPattern(t));return r.schema===e.schema&&r.entity===e.entity&&t.ref===e.before},h);function h(e){var t=this;return(t=p.call(this)||this).change=e,t}var m,f=(m=a.SQExprRewriter,__extends(y,m),y.prototype.visitHierarchyLevel=function(e){e.arg;var t=this.change;return this.matches(t,e)?new a.SQHierarchyLevelExpr(e.arg,t.after):e},y.prototype.matches=function(e,t){var r=a.SQExprConverter.asFieldPattern(t);if(!r.columnHierarchyLevelVariation){var i=a.FieldExprPattern.toFieldExprEntityItemPattern(r),r=t.arg;return i.schema===e.schema&&i.entity===e.entity&&r.hierarchy===e.hierarchy&&t.level===e.before}},y);function y(e){var t=this;return(t=m.call(this)||this).change=e,t}var g,v=(g=a.SQExprRewriter,__extends(S,g),S.prototype.visitMeasureRef=function(e){var t=this.change,r=a.FieldExprPattern.toFieldExprEntityItemPattern(a.SQExprConverter.asFieldPattern(e));if(r.schema===t.schema||r.entity!==t.entity||e.ref!==t.name)return e;e=new a.SQEntityExpr(t.schema,t.entity);return new a.SQMeasureRefExpr(e,t.name)},S);function S(e){var t=this;return(t=g.call(this)||this).change=e,t}})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){var t;function r(e){this.clauses={from:e,select:[]}}t=e.data||(e.data={}),r.prototype.addWhere=function(e){var t=this.clauses;t.where||(t.where=[]),t.where.push(e)},r.prototype.addWheres=function(e){var t=this.clauses;t.where||(t.where=[]);for(var r=0,i=e;r<i.length;r++){var a=i[r];t.where.push(a)}},r.prototype.addOrderBy=function(e){var t=this.clauses;t.orderBy||(t.orderBy=[]),t.orderBy.push(e)},r.prototype.addSelect=function(e){this.clauses.select.push(e)},r.prototype.addGroupBy=function(e){var t=this.clauses;t.groupBy||(t.groupBy=[]),t.groupBy.push(e)},r.prototype.addTransform=function(e){var t=this.clauses;t.transforms||(t.transforms=[]),t.transforms.push(e)},r.prototype.setTop=function(e){this.clauses.top=e},r.prototype.toQuery=function(){return t.SemanticQuery.createWith(this.clauses,!0)},r.prototype.toFilter=function(){var e=this.clauses;if(e.orderBy||e.select.length,e.from&&e.where)return new t.SemanticFilter(e.from,e.where)},t.SemanticQueryBuilder=r})(powerbi=powerbi||{}),(function(e){(e=(e=e.data||(e.data={})).SemanticQueryVersions||(e.SemanticQueryVersions={}))[e.Version0=0]="Version0",e[e.Version1=1]="Version1",e[e.Version2=2]="Version2"})(powerbi=powerbi||{}),(function(e){var d,h;function c(e){for(var t={Version:0,Sources:[],GroupedColumns:[]},r=new d.SQFrom,i=0,a=e.groupedColumns;i<a.length;i++){var n=a[i],o=d.SQExprRewriterWithSourceRenames.rewrite(n,void 0,r);t.GroupedColumns.push(h.SemanticQuerySerializer.serializeExprWithRef(o))}if(e.groupItems){t.GroupItems=[];for(var s=0,u=e.groupItems;s<u.length;s++){var c=u[s],l={DisplayName:c.name};c.expression&&(o=d.SQExprRewriterWithSourceRenames.rewrite(c.expression,void 0,r),l.Expression=h.SemanticQuerySerializer.serializeExprWithRef(o)),c.blankDefaultPlaceholder&&(l.BlankDefaultPlaceholder=!0),t.GroupItems.push(l)}}e.binItem&&(t.BinItem={Expression:h.SemanticQuerySerializer.serializeExprWithRef(d.SQExprRewriterWithSourceRenames.rewrite(e.binItem,void 0,r))}),h.SemanticQuerySerializer.serializeFrom(r,t.Sources);var p=e.partitionTable;return p&&(t.PartitionTable={Definition:{TableDefinition:h.SemanticQuerySerializer.serializeQuery(p.mappingTable),ItemIdColumns:p.itemIdColumns,PartitionIdColumn:p.partitionIdColumn}},(p=p.partitions)&&(t.PartitionTable.Definition.Partitions=m(p)),(p=e.partitionTableResult)&&(t.PartitionTable.Result={TableName:p.tableName,PartitionIdColumn:p.partitionIdColumn}),(e=e.partitionTable.defaultPartitionPrefix)&&(t.PartitionTable.Definition.DefaultPartitionPrefix=e)),t}function l(e){if(0===e.Version){for(var t,r,i={groupedColumns:[]},a=h.SemanticQuerySerializer.deserializeFrom(e.Sources),n=0,o=e.GroupedColumns;n<o.length;n++){var s=o[n];i.groupedColumns.push(h.SemanticQuerySerializer.deserializeExprWithRef(s,a))}if(e.GroupItems){i.groupItems=[];for(var u=0,c=e.GroupItems;u<c.length;u++){var l=c[u],p={name:l.DisplayName};l.Expression&&(p.expression=h.SemanticQuerySerializer.deserializeExprWithRef(l.Expression,a)),l.BlankDefaultPlaceholder&&(p.blankDefaultPlaceholder=!0),i.groupItems.push(p)}}return e.BinItem&&(i.binItem=h.SemanticQuerySerializer.deserializeExprWithRef(e.BinItem.Expression,a)),e.PartitionTable&&(t=(r=e.PartitionTable.Definition).TableDefinition,i.partitionTable={mappingTable:h.SemanticQuerySerializer.deserializeQuery(t),itemIdColumns:r.ItemIdColumns,partitionIdColumn:r.PartitionIdColumn},(t=r.Partitions)&&(i.partitionTable.partitions=_.map(t,(function(e){return{displayName:e.DisplayName,partitionIds:_.map(e.PartitionIds,h.SemanticQuerySerializer.deserializeExpr)}}))),(e=e.PartitionTable.Result)&&(i.partitionTableResult={tableName:e.TableName,partitionIdColumn:e.PartitionIdColumn}),(r=r.DefaultPartitionPrefix)&&(i.partitionTable.defaultPartitionPrefix=r)),i}}function m(e){return _.map(e,(function(e){return{DisplayName:e.displayName,PartitionIds:_.map(e.partitionIds,(function(e){return h.SemanticQuerySerializer.serializeExpr(e)}))}}))}d=e.data||(e.data={}),h=d.services||(d.services={}),(e=h.SemanticGroupingSerializer||(h.SemanticGroupingSerializer={})).serialize=c,e.deserialize=l,e.serializePartitions=m,e.normalizeFromRefs=function(e,t){for(var r=l(c(e)),i=new d.SQFrom,a=r.groupedColumns,n=0;n<a.length;n++)a[n]=d.SQExprRewriterWithSourceRenames.rewrite(a[n],i,t);for(var o=0,s=r.groupItems;o<s.length;o++){var u=s[o];u.expression&&(u.expression=d.SQExprRewriterWithSourceRenames.rewrite(u.expression,i,t))}return(e=r.binItem)&&(r.binItem=d.SQExprRewriterWithSourceRenames.rewrite(e,i,t)),r}})(powerbi=powerbi||{}),(function(o){!(function(e){var t=o.ClientErrorStrings,r=(Object.defineProperty(i.prototype,"code",{get:function(){return"FailedRealTimeUpdate"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getDetails=function(e){return{message:e.get("Realtime_UpdateFailedValue"),displayableErrorInfo:[{errorInfoKey:e.get("Realtime_UpdateFailedKey"),errorInfoValue:e.get("Realtime_UpdateFailedValue")}],debugErrorInfo:[{errorInfoKey:t.ClientErrorCode,errorInfoValue:this.code}]}},i);function i(){}e.FailedRealTimeUpdateClientError=r;Object.defineProperty(a.prototype,"code",{get:function(){return"EmptyData"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.getDetails=function(e){return{message:e.get("ServiceError_CannotLoadVisual"),displayableErrorInfo:[{errorInfoKey:e.get("ServiceError_ExecuteSemanticQueryErrorKey"),errorInfoValue:e.get("InvalidDataFormat_DataFormatIsInvalid")}],debugErrorInfo:[{errorInfoKey:t.ClientErrorCode,errorInfoValue:this.code}]}},r=a;function a(){}e.EmptyDataClientError=r;Object.defineProperty(n.prototype,"code",{get:function(){return"InvalidDataResponse"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.getDetails=function(e){return{message:e.get("ServiceError_CannotLoadVisual"),displayableErrorInfo:[{errorInfoKey:e.get("ServiceError_ExecuteSemanticQueryErrorKey"),errorInfoValue:e.get("InvalidDataResponse_ServerError")}],debugErrorInfo:[{errorInfoKey:t.ClientErrorCode,errorInfoValue:this.code}]}},r=n;function n(){}e.InvalidDataResponseClientError=r})(o.data||(o.data={}))})(powerbi=powerbi||{}),(function(c){!(function(u){var r=jsCommon.JsonComparer;function o(e,t){return!(!e.query||!t.query)&&(e.type===t.type&&e.kinds===t.kinds&&e.perfId===t.perfId&&e.query.allowResultFromClientCache===t.query.allowResultFromClientCache&&e.query.allowClientSideFilters===t.query.allowClientSideFilters&&e.query.cacheResponseOnServer===t.query.cacheResponseOnServer&&e.query.ignoreViewportForCache===t.query.ignoreViewportForCache&&r.equals(e.query.cacheOptions,t.query.cacheOptions)&&r.equals(e.query.command,t.query.command)&&r.equals(e.query.dataSources,t.query.dataSources))}u.areEquivalentOptions=o,u.createDataProxy=function(e,t,r){return new i(e,t,r)},u.createSingleExecutableDataProxy=function(e,t,r,i){return new a(e,t,r,i)},u.setCreateSingleExecutableDataProxy=function(e){u.createSingleExecutableDataProxy=e};var i=(e.prototype.execute=function(e){return this.getReader(e.type).execute(e.query,e.kinds,e.perfId)},e.prototype.getReader=function(e){var t=this.dataReaders[e];if(t)return t;t=this.dataReaderProvider.reader(e);return this.dataReaders[e]=new n(e,t,this.promiseFactory,this.telemetryService)},e.prototype.stopCommunication=function(e){this.getReader(e).stopCommunication()},e.prototype.resumeCommunication=function(e){this.getReader(e).resumeCommunication()},e.prototype.clearCache=function(e,t){this.getReader(e).clearCache(t)},e.prototype.rewriteCacheEntries=function(e,t,r){this.getReader(e).rewriteCacheEntries(t,r)},e.prototype.setLocalCacheResult=function(e,t){return this.getReader(e.type).setLocalCacheResult(e.query,t)},e);function e(e,t,r){this.promiseFactory=e,this.dataReaderProvider=t,this.dataReaders={},this.telemetryService=r}var a=(t.prototype.execute=function(e){var i=this,t=this.lastExecute;if(t&&t.promise.pending()){if(o(e,t.query)){var r=c.createRejectablePromise2(t.deferred);return r.matchesLastExecuteQuery=!0,r}this.lastExecute.ended=!0,this.lastExecute.promise.reject(new c.QueryCancellationClientError("NewQuery"))}var a=e&&e.query&&e.query.telemetryV2Enabled,t=this.promiseFactory.defer(a),r=c.createRejectablePromise2(t),n=this.lastExecute={query:e,deferred:t,promise:r,ended:!1};return this.queuedExecution||(this.queuedExecution=!0,e=this.featureSwitchService.featureSwitches.immediateQuery&&(this.featureSwitchService.featureSwitches.immediateQueryOnWarmLoad||!0===e.isColdLoad)?-1:0,this.timeoutService.setTimeout(e,a).promise.then((function(){i.queuedExecution=!1;var t,r=i.lastExecute;r&&!r.ended&&((t=i.proxy.execute(r.query)).then((function(e){r.ended?r.deferred.reject():r.deferred.resolve(e)}),(function(e){return r.deferred.reject(e)})),r.promise.catch((function(e){return t.reject(e)})))})).catch((function(){}))),r.finally((function(){n.ended=!0,n===i.lastExecute&&(i.lastExecute=void 0)})).catch((function(){})),r},t.prototype.cancelQuery=function(e){var t=this.lastExecute;t&&t.promise.pending()&&(t.ended=!0,t.promise.reject(new c.QueryCancellationClientError(e)))},t);function t(e,t,r,i){this.proxy=e,this.promiseFactory=t,this.timeoutService=r,this.featureSwitchService=i}var n=(s.prototype.execute=function(i,a,n){var o=this,s=this.promiseFactory.defer(i.telemetryV2Enabled),e=this.reader;if(e.execute){var t=e.execute(i,n);t.then((function(e){if(e){var t=o.transform(e,a,n,i.performanceActivity),r=t.error;if(t.performanceActivities&&r&&(r.performanceActivities=t.performanceActivities),r)return s.reject(r),void o.telemetryService.logEvent(c.telemetry.DataExecuteQuery,{requestId:e.requestId,isError:!0,errorSource:"PowerBI",errorCode:r.code});s.resolve({dataReaderResult:t,dataViewSource:{data:e}})}else s.reject(new u.EmptyDataClientError),o.telemetryService.logEvent(c.telemetry.DataExecuteQuery,{isError:!0,errorSource:"PowerBI",errorCode:"DataProxy_EmptyData"})}),(function(e){s.reject(e),e&&e.ignorable||o.telemetryService.logEvent(c.telemetry.DataExecuteQuery,{requestId:null==e?void 0:e.requestId,isError:!0,errorSource:"PowerBI",errorCode:e?e.code:"DataProxy_ProviderError"})})).catch((function(e){s.reject(e)}));e=c.createRejectablePromise2(s);return e.catch((function(e){e=e||new u.InvalidDataResponseClientError,t.reject(e)})),e}return i.command?s.resolve({dataReaderResult:this.transform(i.command,a,n)}):s.reject(),c.createRejectablePromise2(s)},s.prototype.stopCommunication=function(){var e=this.reader;e.stopCommunication&&e.stopCommunication()},s.prototype.resumeCommunication=function(){var e=this.reader;e.resumeCommunication&&e.resumeCommunication()},s.prototype.clearCache=function(e){var t=this.reader.cache;t&&t.clear(e)},s.prototype.rewriteCacheEntries=function(e,t){var r=this.reader.cache;r&&r.rewrite(e,t)},s.prototype.setLocalCacheResult=function(e,t){var r=this.reader;r.setLocalCacheResult&&r.setLocalCacheResult(e,t)},s.prototype.transform=function(e,t,r,i){var a=this.reader;if(a.transform)return a.transform(e,t||31,r,i);i={metadata:{columns:[]}};return i[this.name]=e,{dataView:i}},s);function s(e,t,r,i){this.name=e,this.reader=t,this.promiseFactory=r,this.telemetryService=i}})(c.data||(c.data={}))})(powerbi=powerbi||{}),(function(s){!(function(d){var t=jsCommon.EnumExtensions,h=s.data.FederatedConceptualSchema;d.createConceptualSchemaProxy=function(e,t,r,i,a){return new n(e,t,r,i,a)};var n=(e.prototype.get=function(e,t){var o=this,s=this.featureSwitchService&&this.featureSwitchService.featureSwitches&&this.featureSwitchService.featureSwitches.telemetryV2;if(!e)return this.promiseFactory.reject({clientError:{code:d.DataSourcesUndefined}},s);var r=this.generateSchemaKey(e),i=this.mergedConceptualSchemaCache[r];if(this.isSchemaPaused(i))return this.promiseFactory.reject(this.getPauseReason(i),s);if(i&&i.promise)return t&&t.setProperty("isConceptualSchemaCached",!0),i.promise;var a=this.promiseFactory.defer(s),n={deferred:a,promise:a.promise};(this.mergedConceptualSchemaCache[r]=n).promise.then((function(){return delete n.deferred}),(function(){return delete o.mergedConceptualSchemaCache[r]}));var u,c=[],l=m(e),p=this;for(u in l)!(function(e){var t=l[e],r=p.generateSchemaKey(t),i=p.individualConceptualSchemaCache[r];if(p.isSchemaPaused(i))return c.push(p.promiseFactory.reject(p.getPauseReason(i),s));if(i)return c.push(i.promise);var a=p.promiseFactory.defer(s),i=a.promise;c.push(i),p.individualConceptualSchemaCache[r]={deferred:a,promise:i},i.finally((function(){o.individualConceptualSchemaCache[r]&&delete o.individualConceptualSchemaCache[r].deferred}));var n=p.dataReaderProvider.schemaReader(e);if(!n)return a.reject({clientError:{code:d.SchemaReaderUndefined}});n.execute({dataSources:t}).then((function(e){return o.onSuccess(n,e,r,a)}),(function(e){return o.onError(n,e,r,a)}))})(u);return this.promiseFactory.all(c,s).then((function(e){e=h.merge(e);o.validator&&o.validator.validate(e),n.result=e,a.resolve(e)})).catch((function(e){a.reject(e)})),n.promise},e.prototype.getWithWireContract=function(r){var i=this;return r&&1<_.uniqBy(r,(function(e){return d.DataReaderUtils.readerType(e)})).length?this.promiseFactory.reject():this.get(r).then((function(e){var t=i.individualConceptualSchemaCache[i.generateSchemaKey(r)];if(t)return{data:t.data,contract:e}}))},e.prototype.getLatestCapabilities=function(e,t){var r,i=m(e);for(r in i){var a=i[r],a=this.generateSchemaKey(a),a=this.individualConceptualSchemaCache[a];if(a&&a.result){a=a.result.schema(t);if(a)return a.capabilities}}},e.prototype.clearCache=function(t,e){var r=this;if(!e)return this.rejectPendingDeferred(t),this.individualConceptualSchemaCache={},void(this.mergedConceptualSchemaCache={});var i,a=m(e);for(i in a){var n=a[i],o=this.generateSchemaKey(n),n=JSON.stringify(_.map(n,(function(e){return e.id})));this.telemetryService.logEvent(s.telemetry.DataClearConceptualSchemaCache,{datasetIds:n,requestId:t&&t.requestId,reason:t&&t.clientError.code}),this.forSchemasContainingKey(this.individualConceptualSchemaCache,o,(function(e){r.rejectPendingDeferred(t,e),delete r.individualConceptualSchemaCache[e]})),this.forSchemasContainingKey(this.mergedConceptualSchemaCache,o,(function(e){delete r.mergedConceptualSchemaCache[e]}))}},e.prototype.stopCommunication=function(e,t){var r={clientError:e};if(t){var i,a=m(t);for(i in a){var n=a[i],o=this.generateSchemaKey(n);(n=this.individualConceptualSchemaCache[o])||(this.individualConceptualSchemaCache[o]=n={}),n.pauseReason=r,this.rejectPendingDeferred(r,o)}}else this.pauseAllSchemasReason=r,this.rejectPendingDeferred(r);for(var s=0,u=this.stopCommunicationHandlers;s<u.length;s++)(0,u[s])()},e.prototype.resumeCommunication=function(e){for(var t=this,e=e?_.map(m(e),(function(e){return t.generateSchemaKey(e)})):(this.pauseAllSchemasReason=void 0,Object.keys(this.individualConceptualSchemaCache)),r=0,i=e;r<i.length;r++){var a=i[r],n=this.individualConceptualSchemaCache[a];this.isSchemaPaused(n)&&(delete this.individualConceptualSchemaCache[a],this.forSchemasContainingKey(this.mergedConceptualSchemaCache,a,(function(e){return delete t.mergedConceptualSchemaCache[e]})))}for(var o=0,s=this.resumeCommunicationHandlers;o<s.length;o++)(0,s[o])()},e.prototype.registerStopCommunicationHandlers=function(e){var t=this;return this.stopCommunicationHandlers.push(e),function(){return _.pull(t.stopCommunicationHandlers,e)}},e.prototype.registerResumeCommunicationHandlers=function(e){var t=this;return this.resumeCommunicationHandlers.push(e),function(){return _.pull(t.resumeCommunicationHandlers,e)}},e.prototype.isEmpty=function(i){return __awaiter(this,void 0,s.Promise,(function(){var t,r=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.get(i)];case 1:return t=e.sent(),[2,_.every(t.schemas,(function(e){return _.isEmpty(e.entities)||r.isSystemEntity(e.entities)}))]}}))}))},e.prototype.isSystemEntity=function(e){return _.every(e,(function(e){return t.hasFlag(e.visibility,4)||t.hasFlag(e.visibility,2)}))},e.prototype.isSchemaPaused=function(e){return!!this.pauseAllSchemasReason||e&&!e.promise},e.prototype.getPauseReason=function(e){return e&&e.pauseReason?e.pauseReason:this.pauseAllSchemasReason},e.prototype.rejectPendingDeferred=function(r,e){var t,i,a;for(a in e?(t={})[e]=null:t=this.individualConceptualSchemaCache,t)(i=this.individualConceptualSchemaCache[a])&&(i.deferred&&i.deferred.reject(r),delete i.promise,delete i.deferred,this.forSchemasContainingKey(this.mergedConceptualSchemaCache,a,(function(e,t){t.deferred&&t.deferred.reject(r),delete t.promise,delete t.deferred})))},e.prototype.onSuccess=function(e,t,r,i){var a=e.transform(t);a.error?this.onErrorCore(a,r,i):((e=this.individualConceptualSchemaCache[r])&&(e.result=a.schema,e.data=t.data),(r=this.tryGetAdditionalIndividualCacheKey(r,a))&&(this.individualConceptualSchemaCache[r]=e),i.resolve(a.schema))},e.prototype.onError=function(e,t,r,i){t=e.transform(t);this.onErrorCore(t,r,i)},e.prototype.onErrorCore=function(e,t,r){var i=this;delete this.individualConceptualSchemaCache[t],e.error&&e.error.serviceError&&(e.error.clientError=new s.ServiceErrorToClientError(e.error.serviceError),e.error.clientError.requestId=e.error.requestId),r.reject(e.error),this.forSchemasContainingKey(this.mergedConceptualSchemaCache,t,(function(e){delete i.mergedConceptualSchemaCache[e]}))},e.prototype.tryGetAdditionalIndividualCacheKey=function(e,t){t=t.schema.schemas;if(t){t.length;t=t[0];if(t.cubeName){e=JSON.parse(e);e.length;e=e[0];if(t.name,e.name,!e.perspectiveId)return e.perspectiveId=t.cubeName,this.generateSchemaKey([e])}}},e.prototype.forSchemasContainingKey=function(e,t,r){for(var i=0,a=JSON.parse(t);i<a.length;i++){var n,o=a[i];for(n in e)for(var s=0,u=JSON.parse(n);s<u.length;s++){var c=u[s];o.id===c.id&&o.name===c.name&&o.type===c.type&&r(n,e[n])}}},e.prototype.generateSchemaKey=function(e){return JSON.stringify(_.chain(e).map((function(e){return{id:e.id,name:e.name,type:d.DataReaderUtils.readerType(e),perspectiveId:e.perspectiveId}})).orderBy(["type","name","id","perspectiveId"]).value())},e);function e(e,t,r,i,a){this.stopCommunicationHandlers=[],this.resumeCommunicationHandlers=[],this.promiseFactory=e,this.dataReaderProvider=t,this.featureSwitchService=r,this.telemetryService=i,this.validator=a,this.individualConceptualSchemaCache={},this.mergedConceptualSchemaCache={}}function m(e){return _.groupBy(e,(function(e){return d.DataReaderUtils.readerType(e)}))}})(s.data||(s.data={}))})(powerbi=powerbi||{}),(function(m){!(function(y){var g=jsCommon.EnumExtensions,e=(t.getDataPointsDescription=function(e,t){if(e&&!_.isEmpty(t)){for(var r=this.getDataViewKind(e),i=[],a=0,n=t;a<n.length;a++){var o=n[a],s=this.query([e],o,r,[],!0),o=y.Selector.convertSelectorsByColumnToSelector(o);i.push({selector:o,values:s})}return i}},t.getDataViewKind=function(e){var t=0;if(e.matrix)t=2;else if(e.table)t=8;else{if(!e.categorical)return;t=1}return t},t.query=function(e,t,r,i,a){if(_.isEmpty(e)||!t)return[];var n=y.Selector.getScopeIdentities(t);if(_.some(n,(function(e){return!y.Selector.isScopeIdentity(e)})))return[];var o=i&&!a?i:t.metadata,s=[];if(g.hasFlag(r,8))for(var u=0,c=e;u<c.length;u++){var l=c[u],p=new x(t,o,a);C.visitTable(l.table,p),s.push.apply(s,p.valueDetails||[])}else if(g.hasFlag(r,1))for(var d=0,h=e;d<h.length;d++){l=h[d],p=new v(t,o,a);C.visitCategorical(l,p),s.push.apply(s,p.valueDetails||[])}else if(g.hasFlag(r,2))for(var m=0,f=e;m<f.length;m++){l=f[m],p=new S(t);C.visitMatrix(l.matrix,p),s.push.apply(s,p.valueDetails||[])}return s},t);function t(){}y.DataViewQueryEngine=e;var v=(r.prototype.visitCategoryColumns=function(e,a){if(!_.isEmpty(e))for(var n=this,t=0,r=e;t<r.length;t++)!(function(t){if(n.ignoreQueryName||_.includes(n.requestedValues,t.source.queryName))for(var e=0;e<t.identity.length;e++){var r=t.identity[e];if(_.includes(n.identities,r)){var i=_.find(a.columns,(function(e){return e.index===t.source.index}));n.valueDetails.push({identity:r,value:t.values[e],expr:i.expr,formattedValue:m.visuals.valueFormatter.format(t.values[e],t.source.format)});break}}})(r[t])},r.prototype.visitValueColumnGroups=function(e,t){if(!_.isEmpty(e)&&t&&(this.ignoreQueryName||_.includes(this.requestedValues,t.queryName)))for(var r=0,i=e;r<i.length;r++){var a=i[r];if(_.includes(this.identities,a.identity))return void this.valueDetails.push({value:a.name,formattedValue:m.visuals.valueFormatter.format(a.name,t.format),expr:t.expr,identity:a.identity})}},r.prototype.visitValueColumn=function(e){return!!_.isEmpty(this.requestedValues)||_.includes(this.requestedValues,e.source.queryName)},r.prototype.visitValue=function(e,t,r,i,a){C.isIdentityFilteredOut(this.identities,t.data)||this.valueDetails.push({expr:r.expr,value:e,formattedValue:m.visuals.valueFormatter.format(e,r.format),identity:_.head(t.data)})},r);function r(e,t,r){this.ignoreQueryName=r,this.requestedValues=t,this.identities=y.Selector.getScopeIdentities(e),this.valueDetails=[]}var S=(i.prototype.visitHierarchy=function(e){for(var t=e.root;t&&t.children&&0<this.identitiesToSearch.length;)t=this.searchNode(t,e.levels)},i.prototype.searchNode=function(e,t){for(var r=0,i=this.identitiesToSearch;r<i.length;r++)for(var a=i[r],n=0,o=e.children;n<o.length;n++){var s=o[n];if(s.identity===a){var u=s.levelValues,c=t[s.level||0];if(!_.isEmpty(u))for(var l=0,p=u;l<p.length;l++){var d=p[l],h=c.sources[d.levelSourceIndex||0];this.valueDetails.push({expr:h.expr,identity:a,value:d.value,formattedValue:m.visuals.valueFormatter.format(d.value,h.format)})}return _.remove(this.identitiesToSearch,a),s}}},i);function i(e){this.valueDetails=[],this.identitiesToSearch=y.Selector.getScopeIdentities(e)}var C,x=(a.prototype.visitColumn=function(e,t){(this.ignoreQueryName||e.isMeasure&&(_.isEmpty(this.requestedValues)||_.includes(this.requestedValues,e.queryName)))&&this.requestedColumnsIndices.push(t)},a.prototype.visitRow=function(e,t){e.rows[t];if(!e.identity||!C.isIdentityFilteredOut(this.identities,[e.identity[t]]))for(var r=0,i=this.requestedColumnsIndices;r<i.length;r++){var a=i[r],n=e.rows[t][a],a=e.columns[a];this.valueDetails.push({expr:a.expr,value:n,formattedValue:m.visuals.valueFormatter.format(n,a.format),identity:e.identity&&e.identity[t]})}},a);function a(e,t,r){this.ignoreQueryName=r,this.requestedValues=t,this.identities=y.Selector.getScopeIdentities(e),this.valueDetails=[],this.requestedColumnsIndices=[]}(e=C=y.DataViewScan||(y.DataViewScan={})).isIdentityFilteredOut=function(e,r){if(e)for(var t=0,i=e;t<i.length;t++){var a=(function(t){if(!_.some(r,(function(e){return m.DataViewScopeIdentity.equals(t,e)})))return{value:!0}})(i[t]);if("object"==typeof a)return a.value}return!1},e.visitCategorical=function(e,t){var r=e.categorical;if(r&&!_.isEmpty(r.values)){var i=y.DataViewConcatenateCategoricalColumns.getUntransformedCategories(r);t.visitCategoryColumns(i,e.metadata);var e=_.head(r.categories),a=e&&_.clone(e.identity),e=r.values.grouped();t.visitValueColumnGroups(e,r.values.source);for(var n=0,o=e;n<o.length;n++)for(var s=o[n],u=s.identity,c=0,l=s.values;c<l.length;c++){var p=l[c];if(t.visitValueColumn(p))for(var d=Object.keys(p.values),h=0;h<d.length;h++){var m=d[h],f=p.values[m],m=p.source,m={data:a?[a[h]]:[],metadata:m.queryName};u&&m.data.push(u),t.visitValue(f,m,p.source,r.categories,h)}}}},e.visitTable=function(e,t){if(e&&!_.isEmpty(e.rows)){for(var r=e.columns,i=0;i<r.length;i++)t.visitColumn(r[i],i);for(var a=0;a<e.rows.length;a++)t.visitRow(e,a)}},e.visitMatrix=function(e,t){e.rows&&t.visitHierarchy(e.rows),e.columns&&t.visitHierarchy(e.columns)}})(m.data||(m.data={}))})(powerbi=powerbi||{}),(function(e){(e.data||(e.data={})).createDefaultFederatedSchemaValidator=function(){return{validate:_.noop}}})(powerbi=powerbi||{}),(function(e){var t,r;t=e.data||(e.data={}),r=t.services||(t.services={}),(e=r.DataViewScopeIdentitySerializer||(r.DataViewScopeIdentitySerializer={})).serializeScopeIdentity=function(e){return{scopeId:r.SemanticQuerySerializer.serializeExpr(e.expr)}},e.deserializeScopeIdentity=function(e){if(e.scopeId){e=r.SemanticQuerySerializer.deserializeExpr(e.scopeId);if(e)return t.createDataViewScopeIdentity(e)}}})(powerbi=powerbi||{}),(function(e){var o;e=e.data||(e.data={}),(e=(o=e.services||(e.services={})).DisplayNameSerializer||(o.DisplayNameSerializer={})).serializeFilterLabelIdPairs=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];n.identity&&n.identity.expr&&((a=o.DataViewScopeIdentitySerializer.serializeScopeIdentity(n.identity))&&t.push({id:a,displayName:n.displayName}))}return t}},e.deserializeFilterLabelIdPairs=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];!n.id||(a=o.DataViewScopeIdentitySerializer.deserializeScopeIdentity(n.id))&&t.push({identity:a,displayName:n.displayName})}return t}},e.serializeIdentityValueMap=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];_.isEmpty(n.identities)||(a=_.map(n.identities,(function(e){return o.DataViewScopeIdentitySerializer.serializeScopeIdentity(e)})))&&t.push({identities:a,valueMap:n.valueMap})}return t}},e.deserializeIdentityValueMap=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];_.isEmpty(n.identities)||(a=_.map(n.identities,(function(e){return o.DataViewScopeIdentitySerializer.deserializeScopeIdentity(e)})))&&t.push({identities:a,valueMap:n.valueMap})}return t}}})(powerbi=powerbi||{}),(function(e){var r,i;function a(e){if(!_.isEmpty(e.expressions)){var t={expressions:_.map(e.expressions,(function(e){return i.SemanticQuerySerializer.serializeExpr(e)}))};return _.isEmpty(e.cachedValueItems)||(t.cachedValueItems=i.DisplayNameSerializer.serializeIdentityValueMap(e.cachedValueItems)),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t}}function n(e){if(!_.isEmpty(e.expressions)){var t={expressions:_.map(e.expressions,(function(e){return i.SemanticQuerySerializer.deserializeExpr(e)}))};return _.isEmpty(e.cachedValueItems)||(t.cachedValueItems=i.DisplayNameSerializer.deserializeIdentityValueMap(e.cachedValueItems)),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t}}function o(e){return!!e.decomposedIdentities}r=e.data||(e.data={}),i=r.services||(r.services={}),(e=i.FilterExpressionMetadataSerializer||(i.FilterExpressionMetadataSerializer={})).isFilterExpressionMetadataOverLimit=function(e){return e.cachedValueItems&&e.cachedValueItems.length>i.DataViewObjectSerializer.IdentityLimit},e.isDecomposedFilterExpressionMetadataOverLimit=function(e){return e.decomposedIdentities&&e.decomposedIdentities.values[0].length>i.DataViewObjectSerializer.IdentityLimit},e.serializeFilterExpressionMetadata=function(e,t){if(!_.isEmpty(e.expressions))return t?(t=r.DecomposedIdentities.decomposeFilterExpressionMetadata(e),i.DataViewObjectSerializer.serializeDecomposedFilterExpressionMetadata(t)):a(e)},e.deserializeFilterExpressionMetadata=function(e){if(!_.isEmpty(e.expressions)){if(o(e)){var t=i.DataViewObjectSerializer.deserializeDecomposedFilterExpressionMetadata(e);return r.DecomposedIdentities.convertDecomposedFilterExpressionMetadata(t)}return n(e)}},e.serializeOldFilterExpressionMetadata=a,e.deserializeOldFilterExpressionMetadata=n,e.isDecomposedFilterExpressionMetadata=o,e.isFilterExpressionMetadata=function(e){return!!e.cachedValueItems}})(powerbi=powerbi||{}),(function(e){var o,h;function s(e,t){return{Expressions:_.map(e.identityKeys,(function(e){e=o.SQExprRewriterWithSourceRenames.rewrite(e,t,t);return h.SemanticQuerySerializer.serializeExprWithRef(e)})),Default:e.isCollapsed?0:1}}o=e.data||(e.data={}),h=o.services||(o.services={}),(e=h.DataShapeBindingExpansionStateSerializer||(h.DataShapeBindingExpansionStateSerializer={})).serializeExpansionState=function(e,t){if(!_.isEmpty(e.levels)&&0!==t){e.root;var r=(function e(t,r,i,a){var n=-1===r;var o=r+1===i;var s=!n&&!!a[r].isCollapsed;if(!t.isToggled&&(s||o||_.isEmpty(t.children)))return;var s=!n&&!s&&t.isToggled;s=!o&&!_.isEmpty(t.children)&&!s;var u;var c=0;if(s){u=[];for(var l=0,p=t.children;l<p.length;l++){var d=p[l];d.identityValues;d=e(d,r+1,i,a);d&&(c=Math.max(c,d.depth+1),u.push(d.instance))}}if(!t.isToggled&&_.isEmpty(u))return;s={};_.isEmpty(t.identityValues)||(s.Values=_.map(t.identityValues,(function(e){return h.SemanticQuerySerializer.serializeExpr(e)})));_.isEmpty(u)||(s.Children=u);return{depth:c,instance:s}})(e.root,-1,t,e.levels);if(r){for(var i=new Array(r.depth),a=new o.SQFrom(null),n=0;n<r.depth;n++)i[n]=s(e.levels[n],a);t=[];return h.SemanticQuerySerializer.serializeFrom(a,t),{From:t,Levels:i,Instances:r.instance}}}},e.serializeLevelExpansionState=s})(powerbi=powerbi||{}),(function(r){var e,u,c;e=r.data||(r.data={}),u=e.services||(e.services={}),c=r.data.ExpansionState,(e=u.ExpansionStateSerializer||(u.ExpansionStateSerializer={})).serializeExpansionStates=function(e){return _.filter(_.map(e,(function(e){if(debug.assertValue(e,"expansionState"),_.isEmpty(e.roles),r.data.ExpansionState.hasNodes(e)||r.data.ExpansionState.hasPinnedLevels(e)){var t={roles:e.roles};return _.isEmpty(e.levels)||(e.root,t.levels=_.map(e.levels,(function(e){if(debug.assertAnyValue(e,"level"),e){e.queryRefs;var t={queryRefs:_.clone(e.queryRefs)};return e.isCollapsed&&(t.isCollapsed=!0),e.identityKeys&&(t.identityKeys=_.map(e.identityKeys,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)}))),e.isPinned&&(t.isPinned=e.isPinned),e.isLocked&&(t.isLocked=e.isLocked),e.AIInformation&&(t.AIInformation=_.cloneDeep(e.AIInformation)),t}})),t.root=(function e(t){var r={identityValues:t.identityValues?_.map(t.identityValues,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)})):null};t.isToggled&&(r.isToggled=!0);if(!_.isEmpty(t.children)){r.children=[];for(var i=0,a=t.children;i<a.length;i++){var n=a[i];_.isEmpty(n.identityValues);n=e(n);r.children.push(n)}}return r})(e.root)),t}})),(function(e){return e}))},e.deserializeExpansionStates=function(e,t,r){if(e){for(var i=[],a=0,n=e;a<n.length;a++){var o,s=n[a];s&&(_.isEmpty(s.roles),o=new c(s.roles,t,r),_.isEmpty(s.levels)||(s.root,o.levels=_.map(s.levels,(function(e){var t={queryRefs:_.clone(e.queryRefs),isCollapsed:!!e.isCollapsed,toggledNodes:[],isPinned:e.isPinned,isLocked:e.isLocked,AIInformation:_.cloneDeep(e.AIInformation)};e.identityKeys&&(t.identityKeys=_.map(e.identityKeys,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e)})));return t})),o.root=(function t(e,r,i,a,n){var o={identityValues:e.identityValues?_.map(e.identityValues,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e)})):null,parent:i,children:[]};e.isToggled&&(o.isToggled=!0,0<=r&&a[r].toggledNodes.push(o));{var s;_.isEmpty(e.children)||(s=r+1,o.children=_.map(e.children,(function(e){return t(e,s,o,a,n)})))}return o})(s.root,-1,null,o.levels,r)),i.push(o))}return i}}})(powerbi=powerbi||{}),(function(o){var n,u,e,t,s,c,l,p;function i(e){return e&&"ExprContext"===e.propertyDefinitionKind}function r(e){return!_.isArray(e)&&!!e.decomposedIdentities}function d(e){if(null===e)return null;if(e){var t={};return e.data&&(t.data=_.chain(e.data).map(g).filter((function(e){return null!=e})).value()),e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),void 0!==e.highlightMatching&&(t.highlightMatching=e.highlightMatching),t}}function a(e){if(e){var t={};if(e.dataMap)for(var r in t.dataMap={},e.dataMap)t.dataMap[r]=_.chain(e.dataMap[r]).map(g).filter((function(e){return null!=e})).value();return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),t}}function h(e){for(var t=[],r=0,i=e.values;r<i.length;r++){for(var a=[],n=0,o=i[r];n<o.length;n++){var s=o[n],s=_.mapValues(s,(function(e){return _.map(e,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e)}))}));a.push(s)}t.push(a)}return{values:t,columns:_.map(e.columns,y)}}function m(e,t,r){e.decomposedIdentities&&(t.decomposedIdentities=r(e.decomposedIdentities)),e.queryNames&&(t.queryNames=e.queryNames),e.queryNameMap&&(t.queryNameMap=e.queryNameMap),e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id)}function f(e){if(e){var t={};return m(e,t,h),t}}function y(e){var t={};if(e.left&&e.right)return t.left=y(e.left),t.right=y(e.right),t;if(e.value){e=u.SemanticQuerySerializer.deserializeExpr(e.value);return(n.SQExpr.isEntity(e)||n.SQExpr.isMeasure(e)||n.SQExpr.isColumn(e)||n.SQExpr.isAggregation(e))&&(t.value=e),t}}function g(e){return e.scopeId?u.DataViewScopeIdentitySerializer.deserializeScopeIdentity(e):e.wildcard?n.DataViewScopeWildcard.fromExprs(_.map(e.wildcard,u.SemanticQuerySerializer.deserializeExpr)):e.roles?n.DataViewRoleWildcard.fromRoles(e.roles):e.total?n.DataViewScopeTotal.fromExprs(_.map(e.total,u.SemanticQuerySerializer.deserializeExpr)):e.dataViewWildcard?n.DataViewWildcard.create(e.dataViewWildcard.matchingOption):void 0}function v(e,t,r){if(t){t=F(t.type);return i(e)?{propertyDefinitionKind:"ExprWithContext",value:S(e.value,t.value),context:x(e.context)}:t.value?S(e,t.value):C(e,t.structural)}if(r&&e)return i(e)?{propertyDefinitionKind:"ExprWithContext",value:u.SemanticQuerySerializer.deserializeExpr(e.value.expr),context:x(e.context)}:e.expr?u.SemanticQuerySerializer.deserializeExpr(e.expr):e.solid?C(e,p):e.filter?u.SemanticQuerySerializer.deserializeFilter(e.filter):void 0}function S(e,t){if(void 0!==t.primitiveType&&e.expr)return u.SemanticQuerySerializer.deserializeExpr(e.expr)}function C(e,t){if(t.fill&&t.fill.solid&&t.fill.solid.color&&e)return e.solid&&e.solid.color?{solid:{color:S(e.solid.color,o.ValueType.fromPrimitiveTypeAndCategory(1))}}:void 0;if(t.fillRule){var r=z(e,S);if(r)return r}var i,a,n,r=e;return t.filter&&r&&r.filter?u.SemanticQuerySerializer.deserializeFilter(r.filter):t.image&&r&&r.image?(function(e){var t={name:S(e.name,l),url:S(e.url,o.ValueType.fromDescriptor(o.ImageDefinition.urlType))};e.scaling&&(t.scaling=S(e.scaling,l));return t})(r.image):t.geoJson&&r&&r.geoJson?{type:S((i=r.geoJson).type,l),name:S(i.name,l),content:S(i.content,l)}:t.paragraphs&&e?(i=e,_.map(i,(function(e){var t={textRuns:_.map(e.textRuns,(function(e){return o.ParagraphsDefinition.isTextRunDefinitionGeneric(e)?D(e):o.ParagraphsDefinition.isConditionalDefinitionGeneric(e)?(e=e,{cases:_.map(e.cases,(function(e){return{pattern:S(e.pattern,l),textRuns:_.map(e.textRuns,D)}})),defaultCase:{textRuns:_.map(e.defaultCase.textRuns,D)},expression:(function(e){var t;(t=S(e,l))||(e=e,o.isValueRef(e)&&(t=e));return t})(e.expression)}):void 0}))};return e.horizontalTextAlignment&&(t.horizontalTextAlignment=e.horizontalTextAlignment),e.listType&&(t.listType=e.listType),t}))):t.queryTransform&&e?{algorithm:(a=e).algorithm,parameters:_.map(a.parameters,(function(e){return{name:e.Name,expr:u.SemanticQuerySerializer.deserializeExpr(e)}}))}:t.dataBars&&e?{minValue:(n=e).minValue?S(n.minValue,c):void 0,maxValue:n.maxValue?S(n.maxValue,c):void 0,positiveColor:C(n.positiveColor,p),negativeColor:C(n.negativeColor,p),axisColor:C(n.axisColor,p),reverseDirection:S(n.reverseDirection,s),hideText:S(n.hideText,s)}:t.icon&&e&&"Icon"===e.kind?(function(e){var t={kind:"Icon"};e.layout&&(t.layout=S(e.layout,l));e.verticalAlignment&&(t.verticalAlignment=S(e.verticalAlignment,s));e.value&&(t.value=S(e.value,l));return t})(e):t.exprList&&e&&"ExprList"===e.kind?(a=e,(n={exprs:[],kind:"ExprList"}).exprs=_.map(a.exprs,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e.expr)})),n):t.errorRange&&e&&"ErrorRange"===e.kind?(function(e){var t={kind:"ErrorRange"},e=e.explicit;e&&(t.explicit={isRelative:u.SemanticQuerySerializer.deserializeExpr(e.isRelative.expr)},e.lowerBound&&(t.explicit.lowerBound=u.SemanticQuerySerializer.deserializeExpr(e.lowerBound.expr)),e.upperBound&&(t.explicit.upperBound=u.SemanticQuerySerializer.deserializeExpr(e.upperBound.expr)));return t})(e):void 0}function x(e){var t={};return _.isEmpty(e.filterContext)||(t.filterContext=_.map(e.filterContext,(function(e){return{filter:u.SemanticQuerySerializer.deserializeFilter(e.filter),metadata:e.metadata?u.FilterExpressionMetadataSerializer.deserializeFilterExpressionMetadata(e.metadata):void 0}}))),t}function D(e){var t={value:(function(e){var t;_.isString(e)?t=e:(t=S(e,l))||(e=e,o.isValueRef(e)&&(t=e));return t})(e.value)};return e.textStyle&&(t.textStyle=e.textStyle),e.url&&(t.url=e.url),e.mentionEmail&&(t.mentionEmail=e.mentionEmail),t}function E(e){if(null===e)return null;if(e){var t={};return e.data&&(t.data=_.chain(e.data).map(V).filter((function(e){return null!=e})).value()),e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),void 0!==e.highlightMatching&&(t.highlightMatching=e.highlightMatching),t}}function I(e){if(e){var t={};if(e.dataMap)for(var r in t.dataMap={},e.dataMap){var i=jsCommon.ArrayExtensions.ensureArray(e.dataMap[r]);t.dataMap[r]=_.chain(i).map(V).filter((function(e){return null!=e})).value()}return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),t}}function w(e){if(e){for(var t=[],r=0,i=e.values;r<i.length;r++){for(var a=[],n=0,o=i[r];n<o.length;n++){var s=o[n],s=_.mapValues(s,(function(e){return _.map(e,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)}))}));a.push(s)}t.push(a)}return{values:t,columns:_.map(e.columns,M)}}}function b(e){if(e){var t={};return m(e,t,w),t}}function M(e){var t={};return e.left&&e.right?(t.left=M(e.left),t.right=M(e.right),t):e.value?(t.value=u.SemanticQuerySerializer.serializeExpr(e.value),t):void 0}function V(e){return n.Selector.isScopeIdentity(e)&&e.expr?u.DataViewScopeIdentitySerializer.serializeScopeIdentity(e):n.Selector.isScopeWildcard(e)&&e.exprs?{wildcard:_.map(e.exprs,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)}))}:n.Selector.isRoleWildcard(e)&&e.roles?{roles:e.roles}:n.Selector.isScopeTotal(e)&&e.exprs?{total:_.map(e.exprs,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)}))}:n.Selector.isWildcard(e)?{dataViewWildcard:{matchingOption:e.matchingOption}}:void 0}function R(e,t,r,i){if(t){t=F(t.type);return n.DataViewObjectDefinitions.isObjectPropertySQExprWithContext(e)?{propertyDefinitionKind:"ExprContext",value:T(e.value,t.value),context:A(e.context,i)}:t.value?T(e,t.value):P(e,t.structural)}if(r&&e)return n.DataViewObjectDefinitions.isObjectPropertySQExprWithContext(e)?{propertyDefinitionKind:"ExprContext",value:{expr:u.SemanticQuerySerializer.serializeExpr(e.value)},context:A(e.context,i)}:e instanceof n.SQExpr?{expr:u.SemanticQuerySerializer.serializeExpr(e)}:e instanceof n.SemanticFilter?{filter:u.SemanticQuerySerializer.serializeFilter(e)}:e.solid?P(e,p):void 0}function T(e,t){if(void 0!==t.primitiveType&&e instanceof n.SQExpr)return{expr:u.SemanticQuerySerializer.serializeExpr(e,!0)}}function P(e,t){if(e){var r,i;if(t.fill&&t.fill.solid&&t.fill.solid.color)return{solid:{color:T(e.solid.color,l)}};if(t.fillRule){var a=z(e,T);if(a)return a}return t.filter?{filter:u.SemanticQuerySerializer.serializeFilter(e)}:t.image?{image:(function(e){var t={name:T(e.name,l),url:T(e.url,o.ValueType.fromDescriptor(o.ImageDefinition.urlType))};e.scaling&&(t.scaling=T(e.scaling,l));return t})(e)}:t.geoJson?{geoJson:{type:T((a=e).type,l),name:T(a.name,l),content:T(a.content,l)}}:t.paragraphs?(r=e,_.map(r,(function(e){var t={textRuns:_.map(e.textRuns,(function(e){return o.ParagraphsDefinition.isTextRunDefinition(e)?N(e):o.ParagraphsDefinition.isTextRunConditionalDefinition(e)?{cases:_.map(e.cases,(function(e){return{pattern:T(e.pattern,l),textRuns:_.map(e.textRuns,N)}})),defaultCase:{textRuns:_.map(e.defaultCase.textRuns,N)},expression:(function(e){var t;e instanceof n.SQExpr?t=T(e,l):o.isValueRef(e)&&(t=e);return t})(e.expression)}:void 0}))};return e.horizontalTextAlignment&&(t.horizontalTextAlignment=e.horizontalTextAlignment),e.listType&&(t.listType=e.listType),t}))):t.queryTransform?{algorithm:e.algorithm,parameters:_.map(e.parameters,(function(e){var t=u.SemanticQuerySerializer.serializeExpr(e.expr);return t.Name=e.name,t}))}:t.dataBars?{minValue:T((i=e).minValue,c),maxValue:T(i.maxValue,c),positiveColor:P(i.positiveColor,p),negativeColor:P(i.negativeColor,p),axisColor:P(i.axisColor,p),reverseDirection:T(i.reverseDirection,s),hideText:T(i.hideText,s)}:t.icon&&"Icon"===e.kind?(function(e){var t={kind:"Icon"};e.layout&&(t.layout=T(e.layout,l));e.verticalAlignment&&(t.verticalAlignment=T(e.verticalAlignment,s));e.value&&(t.value=T(e.value,l));return t})(e):t.exprList&&"ExprList"===e.kind?(r=e,(i={exprs:[],kind:"ExprList"}).exprs=_.map(r.exprs,(function(e){return T(e,l)})),i):t.errorRange&&"ErrorRange"===e.kind?(function(e){var t={kind:"ErrorRange"},e=e.explicit;e&&(t.explicit={isRelative:T(e.isRelative,s)},e.lowerBound&&(t.explicit.lowerBound=T(e.lowerBound,c)),e.upperBound&&(t.explicit.upperBound=T(e.upperBound,c)));return t})(e):void 0}}function A(e,t){var r={};return _.isEmpty(e.filterContext)||(r.filterContext=_.map(e.filterContext,(function(e){return{filter:u.SemanticQuerySerializer.serializeFilter(e.filter),metadata:e.metadata?u.FilterExpressionMetadataSerializer.serializeFilterExpressionMetadata(e.metadata,t):void 0}}))),r}function N(e){var t={value:(function(e){var t;e instanceof n.SQExpr?t=T(e,l):(_.isString(e)||o.isValueRef(e))&&(t=e);return t})(e.value)};return e.textStyle&&(t.textStyle=e.textStyle),e.url&&(t.url=e.url),e.mentionEmail&&(t.mentionEmail=e.mentionEmail),t}function F(e){var t=o.ValueType.fromDescriptor(e);return 0!==t.primitiveType?{value:t}:{structural:e}}function z(e,t){if(e.linearGradient2){var r={min:{color:t((i=e.linearGradient2).min.color,o.ValueType.fromPrimitiveTypeAndCategory(1))},max:{color:t(i.max.color,o.ValueType.fromPrimitiveTypeAndCategory(1))}};return i.min.value&&(r.min.value=t(i.min.value,o.ValueType.fromPrimitiveTypeAndCategory(3))),i.max.value&&(r.max.value=t(i.max.value,o.ValueType.fromPrimitiveTypeAndCategory(3))),i.nullColoringStrategy&&(r.nullColoringStrategy={strategy:t(i.nullColoringStrategy.strategy,o.ValueType.fromPrimitiveTypeAndCategory(1))},i.nullColoringStrategy.color&&(r.nullColoringStrategy.color=t(i.nullColoringStrategy.color,o.ValueType.fromPrimitiveTypeAndCategory(1)))),{linearGradient2:r}}if(e.linearGradient3){var i,r={min:{color:t((i=e.linearGradient3).min.color,o.ValueType.fromPrimitiveTypeAndCategory(1))},mid:{color:t(i.mid.color,o.ValueType.fromPrimitiveTypeAndCategory(1))},max:{color:t(i.max.color,o.ValueType.fromPrimitiveTypeAndCategory(1))}};return i.min.value&&(r.min.value=t(i.min.value,o.ValueType.fromPrimitiveTypeAndCategory(3))),i.mid.value&&(r.mid.value=t(i.mid.value,o.ValueType.fromPrimitiveTypeAndCategory(3))),i.max.value&&(r.max.value=t(i.max.value,o.ValueType.fromPrimitiveTypeAndCategory(3))),i.nullColoringStrategy&&(r.nullColoringStrategy={strategy:t(i.nullColoringStrategy.strategy,o.ValueType.fromPrimitiveTypeAndCategory(1))},i.nullColoringStrategy.color&&(r.nullColoringStrategy.color=t(i.nullColoringStrategy.color,o.ValueType.fromPrimitiveTypeAndCategory(1)))),{linearGradient3:r}}return null}n=o.data||(o.data={}),u=n.services||(n.services={}),((e=u.wireContracts||(u.wireContracts={})).DataViewObjectDefinitions||(e.DataViewObjectDefinitions={})).getObjectDefinitionProperties=function(e,t){var r=e&&e[t];if(r){for(var i,a=0,n=r.length;a<n;a++){var o=r[a];if(null==o.selector){i=o;break}}if(i)return i.properties}},t=u.DataViewObjectSerializer||(u.DataViewObjectSerializer={}),s=o.ValueType.fromDescriptor({bool:!0}),c=o.ValueType.fromDescriptor({numeric:!0}),l=o.ValueType.fromDescriptor({text:!0}),p={fill:{solid:{color:!0}}},t.IdentityLimit=300,t.isObjectPropertyWithContext=i,t.isDecomposedSelectors=r,t.isSelectorsByColumn=function(e){return _.isArray(e)&&!!e[0].dataMap},t.isDecomposedSelectorOverLimit=function(e){return e.decomposedIdentities.values[0].length>t.IdentityLimit},t.isSelectorsByColumnOverLimit=function(e){return e.length>t.IdentityLimit},t.deserializeObjects=function(e,t){if(e){var r,i={};for(r in e){var a=void 0;if(!t||(a=t[r]))for(var n=e[r],o=i[r]=[],s=0,u=n.length;s<u;s++)o.push(function(e,t,r){if(debug.assertAnyValue(e,"input"),e){r={properties:(function(e,t,r){if(debug.assertAnyValue(e,"input"),e){var i,a={};for(i in e){var n=v(e[i],t?t[i]:null,r);void 0!==n&&(a[i]=n)}return a}})(e.properties,t?t.properties:null,r)},e=d(e.selector);return e&&(r.selector=e),r}}(n[s],a,!t))}return i}},t.deserializeSelectors=function(e){if(e)return _.map(e,d)},t.serializeSelectors=function(e){if(e)return _.map(e,E)},t.serializeValueType=function(e){if(e)return{category:e.categoryString,underlyingType:e.extendedType}},t.deserializeValueType=function(e){if(e)return new o.ValueType(e.underlyingType,e.category)},t.deserializeSelector=d,t.deserializeSelectorsByColumn=a,t.deserializeDecomposedIdentities=h,t.deserializeDecomposedSelectors=f,t.deserializeDecomposedFilterExpressionMetadata=function(e){if(e){var t={expressions:_.map(e.expressions,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e)}))};return e.decomposedIdentities&&(t.decomposedIdentities=h(e.decomposedIdentities)),e.valueMap&&(t.valueMap=e.valueMap),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t}},t.deserializeDecomposedTree=y,t.deserializeVisualObjects=function(e){if(e)return _.map(e,(function(e){return{objectName:e.objectName,selectorsByColumn:a(e.selectorsByColumn)}}))},t.deserializeObjectProperty=v,t.serializeObjects=function(e,t,r){if(e){var i,a={};for(i in e){var n=void 0;if(!t||(n=t[i]))for(var o=e[i],s=a[i]=[],u=0,c=o.length;u<c;u++)s.push(function(e,t,r,i){if(debug.assertAnyValue(e,"contract"),e){i=(function(e,t,r,i){if(debug.assertAnyValue(e,"contract"),e){var a,n={};for(a in e){var o=t?t[a]:null;(r||o)&&(void 0===(o=R(e[a],o,r,i))||(n[a]=o))}return n}})(e.properties,t?t.properties:null,r,i);if(i){i={properties:i},e=E(e.selector);return e&&(i.selector=e),i}}}(o[u],n,!t,r))}return a}},t.serializeSelector=E,t.serializeSelectorsByColumn=I,t.serializeDecomposedIdentities=w,t.serializeDecomposedSelectors=b,t.serializeSelection=function(e,t){return t?b(n.DecomposedIdentities.decomposeSelectorsByColumn(e)):_.map(e,I)},t.deserializeSelection=function(e){if(r(e)){var t=f(e);return n.DecomposedIdentities.convertDecomposedSelectors(t)}return _.map(e,a)},t.serializeDecomposedFilterExpressionMetadata=function(e){if(e){var t={expressions:_.map(e.expressions,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)}))};return e.decomposedIdentities&&(t.decomposedIdentities=w(e.decomposedIdentities)),e.valueMap&&(t.valueMap=e.valueMap),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t}},t.serializeDecomposedTree=M,t.serializeVisualObjects=function(e){if(e)return _.map(e,(function(e){return{objectName:e.objectName,selectorsByColumn:I(e.selectorsByColumn)}}))},t.serializeObjectProperty=R})(powerbi=powerbi||{}),(function(i){!(function(h){var a,n;function o(){}a=h.services||(h.services={}),n=i.data.services.ExpansionStateSerializer,o.deserializeDataViewSelectTransforms=function(e){return a.DataViewTransformActionsUpgrade.V1.upgradeDataViewSelectTransform(e),_.map(e,(function(e){var t={displayName:e.displayName,format:e.format,kpi:e.kpi,queryName:e.queryName,roles:e.roles,sort:e.sort,sortOrder:e.sortOrder,type:a.DataViewObjectSerializer.deserializeValueType(e.type)};return e.expr&&(t.expr=a.SemanticQuerySerializer.deserializeExpr(e.expr)),e.aggregateSources&&(t.aggregateSources=e.aggregateSources),t}))},o.serializeDataViewSelectTransforms=function(e){return _.map(e,(function(e){var t={displayName:e.displayName,format:e.format,kpi:e.kpi,queryName:e.queryName,roles:e.roles,sort:e.sort,sortOrder:e.sortOrder,type:a.DataViewObjectSerializer.serializeValueType(e.type)};return e.expr&&(t.expr=a.SemanticQuerySerializer.serializeExpr(e.expr)),e.aggregateSources&&(t.aggregateSources=e.aggregateSources),t}))},o.serializeDataViewTransformActions=function(e,t){var r={objects:(e=e||{}).objects,projectionOrdering:e.roles&&e.roles.ordering,projectionActiveItems:e.roles&&e.roles.activeItems,splits:e.splits,queryMetadata:null,visualElements:null};return e&&e.objects&&(r.objects=a.DataViewObjectSerializer.serializeObjects(e.objects,t)),e&&e.selects&&(r.selects=o.serializeDataViewSelectTransforms(e.selects)),e&&!_.isEmpty(e.expansionStates)&&(r.expansionStates=n.serializeExpansionStates(e.expansionStates)),r},o.deserializeDataViewTransformActions=function(e,t){var r=t&&t.objects,i=e.objects?a.DataViewObjectSerializer.deserializeObjects(e.objects,r):null,r=o.createTransformActions(e.queryMetadata,e.visualElements,r,i)||{},i=e&&e.projectionActiveItems;return _.isEmpty(i)||this.upgradeActiveItemsIfNeeded(i),r.roles={ordering:e.projectionOrdering,activeItems:i},r.splits=e.splits,e.selects&&(r.selects=o.deserializeDataViewSelectTransforms(e.selects)),e.expansionStates&&(i=t&&t.expandCollapse&&t.expandCollapse.supportsMerge,t=t&&t.noDefaultProjections,r.expansionStates=n.deserializeExpansionStates(e.expansionStates,i,t)),this.upgradeComboChartFromCY16SU04AndPrior(r),r},o.isStringArray=function(e){return _.isString(e[0])},o.upgradeActiveItemsIfNeeded=function(e){for(var t in e){var r=e[t],i=void 0;!_.isEmpty(r)&&this.isStringArray(r)&&(i=_.map(r,(function(e){return{queryRef:e}}))),e[t]=i||r}},o.upgradeComboChartFromCY16SU04AndPrior=function(e){var t,r,i,a,n=e.roles&&e.roles.ordering;!n||void 0!==(t=n.Y&&1===n.Y.length&&_.includes(n.Y2,n.Y[0])?n.Y[0]:void 0)&&(!(r=e.splits&&2===e.splits.length&&!e.splits[0].selects[t]&&e.splits[1].selects[t]?e.splits[0]:void 0)||(i=_.chain(Object.keys(r.selects)).filter((function(e){return r.selects[e]})).map((function(e){return parseInt(e,10)})).maxBy((function(e){return e})).value())!==Number.NEGATIVE_INFINITY&&(!e.selects||e.selects.length!==i||(a=e.selects[t])&&a.roles.Y&&a.roles.Y2&&(delete a.roles.Y,(n=__assign({},a)).roles=((t={}).Y=!0,t),n.queryName=a.queryName,e.selects[i]=n,e.roles.ordering.Y=[i])))},o.serializeTransformActions=function(e){return JSON.stringify(e)},o.createTransformActions=function(e,t,r,i){if(e&&!_.isEmpty(e.Select)||!_.isEmpty(t)||i){var a={};if(e){var n=e.Select;if(n)for(var o=a.selects=[],s=0,u=n.length;s<u;s++){var c,l=n[s];l?(c=this.toTransformSelect(l,s),o.push(c),c.format&&r&&(c.queryName,(l=h.DataViewObjectDescriptors.findFormatString(r))&&h.DataViewObjectDefinitions.setValue(i=i||{},l,{metadata:c.queryName},h.SQExprBuilder.text(c.format)))):o.push(null)}}if(t){var p=(t=_.unionBy(t,(function(e){return JSON.stringify(e)}))).length;1<p&&(a.splits=[]);for(s=0;s<p;s++){var d=t[s];d.Settings&&0===s&&(i=this.upgradeSettingsToObjects(d.Settings,i)),d.DataRoles&&(a.selects||(a.selects=[]),a.roles||(a.roles={ordering:{}}),this.populateDataRoles(d.DataRoles,a.selects,a.roles.ordering)),a.splits&&a.splits.push(this.populateSplit(d.DataRoles))}}return i&&(a.objects=i),a}},o.toTransformSelect=function(e,t){var r={};return e.Restatement&&(r.displayName=e.Restatement),e.Name?r.queryName=e.Name:r.queryName||(r.queryName="$select"+t),e.Format&&(r.format=e.Format),e.Type&&(r.type=this.describeDataType(e.Type,i.data.conceptualDataCategoryToString(e.DataCategory))),e.kpi&&(r.kpi=e.kpi),e.kpiStatusGraphic&&(r.kpi={graphic:e.kpiStatusGraphic}),r},o.describeDataType=function(e,t){var r=0;switch(e=e||0){case 2048:r=1;break;case 1:r=3;break;case 3:r=4;break;case 4096:r=5;break;case 20:r=6;break;case 4:r=7;break;case 8:r=9;break;case 67:r=4,t="Year";break;case 35:r=4,t="Month"}return i.ValueType.fromPrimitiveTypeAndCategory(r,t)},o.populateDataRoles=function(e,t,r){for(var i=0,a=e.length;i<a;i++){var n=e[i],o=n.Projection,s=n.Name,u=t[o];void 0===u&&(this.fillArray(t,o),u=t[o]={});n=u.roles;(n=void 0===u.roles?u.roles={}:n)[s]=!0;n=r[s];(n=void 0===n?r[s]=[]:n).push(o)}},o.fillArray=function(e,t){for(var r=e.length;r<t;r++)e[r]={}},o.populateSplit=function(e){var t={},r={selects:t};if(e)for(var i=0,a=e.length;i<a;i++)t[e[i].Projection]=!0;return r},o.upgradeSettingsToObjects=function(e,t){if(e){for(var r in t=t||{},e){var i=e[r],a=r,n=i,o="general";switch(r){case"hasScalarCategoryAxis":o="categoryAxis",a="axisType",n=h.SQExprBuilder.text(i?"Scalar":"Categorical");break;case"Totals":a="totals",n=h.SQExprBuilder.boolean(!!i);break;case"textboxSettings":a="paragraphs",i&&i.paragraphs&&(n=i.paragraphs);break;case"VisualType1":a="visualType1",n=h.SQExprBuilder.text(i);break;case"VisualType2":a="visualType2",n=h.SQExprBuilder.text(i);break;case"imageVisualSettings":a="imageUrl",i&&i.imageUrl&&(n=h.SQExprBuilder.text(i.imageUrl));break;default:continue}this.setObjectDefinition(t,o,a,n)}return t}},o.setObjectDefinition=function(e,t,r,i){var a=e[t],t=(a=void 0===a?e[t]=[]:a)[0];(t=void 0===t?a[0]={properties:{}}:t).properties[r]=i},a.DataViewTransformActionsSerializer=o})(i.data||(i.data={}))})(powerbi=powerbi||{}),(function(i){var a,e,n;function o(e,t){var r={type:(function(e,t){var r=i.ValueType.fromDescriptor(e);e=r&&r.enum?{enumeration:u(r.enum,t)}:null!=r&&r.flagsEnum?{flagsEnumeration:u(r.flagsEnum,t)}:e;return e})(e.type,t)};return e.rule&&(r.rule=e.rule),e.displayName&&(r.displayName=a.getDisplayName(e.displayName,t)),e.description&&(r.description=a.getDisplayName(e.description,t)),e.placeHolderText&&(r.placeHolderText=a.getDisplayName(e.placeHolderText,t)),r}function s(e){var t={type:(function(e){e=i.ValueType.fromDescriptor(e)?(function(e){var t;if(e.enumeration){var r=c(e.enumeration);t={enumeration:r}}else if(e.flagsEnumeration)t={flagsEnumeration:c(e.flagsEnumeration)};else for(var i in t={},e)t[i]=e[i];return t})(e):e;return e})(e.type)};return e.displayName&&(t.displayName=a.createDisplayNameGetter(e.displayName)),e.description&&(t.description=a.createDisplayNameGetter(e.description)),e.placeHolderText&&(t.placeHolderText=a.createDisplayNameGetter(e.placeHolderText)),e.rule&&(t.rule=e.rule),t}function u(e,t){return _.map(e.members(),(function(e){return e=e,{displayName:a.getDisplayName(e.displayName,t),value:e.value}}))}function c(e){return i.createEnumType(e)}a=i.data||(i.data={}),e=a.services||(a.services={}),n={get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}},(e=e.DataViewObjectDescriptorSerializer||(e.DataViewObjectDescriptorSerializer={})).serialize=function(e,t){var r,i={};for(r in e)i[r]=(function(e,t){if(e){var r,i={properties:{}};for(r in e.displayName&&(i.displayName=a.getDisplayName(e.displayName,t)),e.description&&(i.description=a.getDisplayName(e.description,t)),e.properties)i.properties[r]=o(e.properties[r],t);return i}})(e[r],t||n);return i},e.deserialize=function(e){var t,r={};for(t in e)r[t]=(function(e){var t,r={properties:{}};e.displayName&&(r.displayName=a.createDisplayNameGetter(e.displayName));e.description&&(r.description=a.createDisplayNameGetter(e.description));for(t in e.properties)r.properties[t]=s(e.properties[t]);return r})(e[t]);return r},e.serializePropertyDescriptor=o,e.deserializePropertyDescriptor=s})(powerbi=powerbi||{}),(function(e){((e=(e=(e=e.data||(e.data={})).services||(e.services={})).DataViewTransformActionsUpgrade||(e.DataViewTransformActionsUpgrade={})).V1||(e.V1={})).upgradeDataViewSelectTransform=function(e){if(e)for(var t=0,r=e;t<r.length;t++){var i=r[t];i.kpiStatusGraphic&&(i.kpi={graphic:i.kpiStatusGraphic})}}})(powerbi=powerbi||{}),(function(e){((e=e.data||(e.data={})).tabular||(e.tabular={})).type="tabular"})(powerbi=powerbi||{}),(function(e){(function(i){function r(e){var t,r,i,a=[];for(t in e=y(e))e.hasOwnProperty(t)&&(i=void 0,(r=e[t])&&(_.isDate(r)||null!=f(r.toString().substr(0,26))?i={dateTime:!0}:isNaN(+r)?_.isString(r)&&(i={text:!0}):i={numeric:!0},i&&a.push({name:t,type:i})));return a}function f(e){var t,r=null,i=+e;return isNaN(i)?r=jsCommon.DateExtensions.parseIsoDate(e.toString()):((t=new Date).setDate(t.getDate()-a),e=t.getTime(),(t=new Date).setDate(t.getDate()+a),t=t.getTime(),i<e&&(i*=1e3),e<i&&i<t&&(r=new Date(i))),r}function y(e){try{return (function r(e,i,a){i=i||{};_.isObject(e)?_.forOwn(e,(function(e,t){r(e,i,a?a+"."+t:t)})):i[a]=e;return i})(e)}catch(e){}return e}i.createTabularDataCache=function(){return new e},i.getColumnsMetadata=r,i.parseDate=f,i.flattenJSON=y,i.MaxRealTimeDataWindowInMs=36e5;var a=7,e=(t.prototype.add=function(e){var t=this.getKey(e.modelId,e.name);return this.tabularDataMap[t]=e,t},t.prototype.get=function(e){return this.tabularDataMap[e]},t.prototype.remove=function(e){delete this.tabularDataMap[e]},t.prototype.clear=function(){this.tabularDataMap={}},t.prototype.getKey=function(e,t){return e+"_"+t},t.prototype.mergeRows=function(e,t,r,i){var a=this.getKey(e,t),a=this.get(a);if(!a||!a.rowGroups){t={modelId:e,name:t,rowGroups:r,lastVersion:i,columns:a&&a.columns};return this.constructColumnsMetadataIfNeeded(t),this.fixUpValues(t.rowGroups,t.columns),void this.add(t)}var n=[],o=a.rowGroups||[],s=r||[];for(this.fixUpValues(s,a.columns);;){if(_.isEmpty(o)&&_.isEmpty(s))break;var u=_.head(o),c=_.head(s);u&&!c?(this.appendRow(n,u,i),o.shift()):!u&&c?(this.appendRow(n,c,i),s.shift()):u.version<c.version?(this.appendRow(n,u,i),o.shift()):c&&(s.shift(),u.version===c.version&&o.shift(),this.appendRow(n,c,i))}a.rowGroups=n,a.lastVersion=i},t.prototype.constructColumnsMetadataIfNeeded=function(e){var t;e.columns||(!(t=_.last(e.rowGroups))||(t=_.last(t.rows))&&(e.columns=r(t)))},t.prototype.fixUpValues=function(e,t){if(!_.isEmpty(e)){for(var r={},i={},a=0,n=t;a<n.length;a++){var o=n[a];r[o.name]=o.type&&o.type.dateTime,i[o.name]=o.type&&o.type.numeric}for(var s=0,u=e;s<u.length;s++){var c=u[s];if(c.rows)for(var l=0;l<c.rows.length;l++){var p,d,h,m=c.rows[l]=y(c.rows[l]);for(p in m)m.hasOwnProperty(p)&&((h=m[p])&&(r[p]?(d=f(h))&&(m[p]=d):i[p]&&(h=parseFloat(h.toString()),isNaN(h)||(m[p]=h))))}}}},t.prototype.appendRow=function(e,t,r){r-t.version>i.MaxRealTimeDataWindowInMs||e.push(t)},t);function t(){this.clear()}})((e=e.data||(e.data={})).tabular||(e.tabular={}))})(powerbi=powerbi||{}),(function(e){var i;i=e.data||(e.data={}),(function(){(i.tabular||(i.tabular={})).createQueryGenerator=function(){return new e(i.services.SemanticQuerySerializer)};var e=(t.prototype.execute=function(e){var t=e.query,r={SemanticQueryDataShapeCommand:{Query:this.serializer.serializeQuery(t),Binding:null}},t=i.SQExprUtils.getActiveTablesNames(t);t.length;t=t[0];return{command:{dataWindow:e.dataWindow,tableName:t,mappings:e.mappings,Commands:[r]}}},t.prototype.produceIdentities=function(e,t){return[e]},t);function t(e){this.serializer=e}})()})(powerbi=powerbi||{}),(function(o){var u;(function(e){var n=o.data.createDataViewScopeIdentity;function g(e){var t=_.indexOf(e,".");return t<0||t>=e.length-1?e:e.substr(t+1)}e.normalizedName=g;var t=(v.prototype.execute=function(e){var t=_.head(e.dataSources),e=e.command,e=this.buildDataView(e,t.modelId),t=this.promiseFactory.defer();return t.resolve(e),o.createRejectablePromise(t)},v.prototype.transform=function(e,t,r){return null==e?{dataView:{metadata:{columns:[]},error:{code:"UndefinedData"}}}:{dataView:e}},v.prototype.buildDataView=function(e,t){var r=this,i=e.mappings[0],a=this.tabularDataCache,n=a.get(a.getKey(t,e.tableName)),a=v.getLastVersion(n)-e.dataWindow;if(n.rowGroups){t=e&&_.head(e.Commands);!t||(t=t.SemanticQueryDataShapeCommand)&&t.Query&&t.Query.Select&&t.Query.Select.map((function(e,t){r.columnToIndexMap[g(e.Name)]=t}));a=this.filterTabularDataRowGroups(n.rowGroups,a),i=this.createDataView({rowGroups:a,columns:n.columns,modelId:n.modelId,name:n.name},i);return e.dataWindow&&(i.metadata.objects={categoryAxis:{duration:e.dataWindow}}),i}},v.prototype.filterTabularDataRowGroups=function(e,t){return _.filter(e,(function(e){return e.version>=t}))},v.prototype.createDataView=function(e,t){var r,i={metadata:{columns:[]}},a=this.extractColumns(t),n=[];return t.categorical&&(r=this.getCategoricalDataViewInfo(a.categorical,e),i.categorical=r.dataView,_.isEmpty(i.categorical.values)&&(i.categorical.values=void 0),n.push.apply(n,r.columns||[])),t.table&&(e=this.getSingleDataViewInfo(a.table,e),i.single=e.dataView,e=e.columns[0],null==_.find(n,e)&&n.push(e)),i.metadata.columns=n,i},v.prototype.getCategoricalDataViewInfo=function(e,t){var r=u.createCategoricalDataViewBuilder();_.isEmpty(e.categories)||(i=this.getCategoryColumnOption(e.categories,t),r.withCategory(i));var i=this.getValueColumnOptions(e.categories,e.values,t);_.isEmpty(e.groupedValues)||e.groupedValues===e.categories?r.withValues({columns:i}):this.addGroupValues(e,t,r,i);r=r.build();return{dataView:r.categorical,columns:r.metadata.columns}},v.prototype.addGroupValues=function(e,t,r,i){e.groupedValues;for(var a=g(e.groupedValues),n=this.getCategoryColumnOption(a,t),a=this.extractColumnValues(a,t),o=v.getUniqueValues(a),s=this.getValueToIndicesMap(a),u={},c=0,l=e.values;c<l.length;c++)for(var p=g(l[c]),d=this.extractColumnValues(p,t),h=0,m=o;h<m.length;h++){var f=m[h],y=v.valueToString(f);null==u[y]&&(u[y]=[]);f=s[y],f=_.at(d,f);u[y].push({values:f})}e=_.values(u);_.isEmpty(e)||r.withGroupedValues({groupColumn:n,valueColumns:i,data:e})},v.prototype.getValueToIndicesMap=function(e){for(var t={},r=0,i=e.length;r<i;r++){var a=v.valueToString(e[r]),n=t[a];n?n.push(r):t[a]=[r]}return t},v.prototype.getSingleDataViewInfo=function(e,t){e=this.getColumnMetadataAndValues(e,t),t=e.values.length-1;return{dataView:{value:e.values[t],column:e.metadataColumn},columns:[e.metadataColumn]}},v.prototype.extractColumns=function(e){function t(e,t){if(e=e.items)for(var r=0,i=e;r<i.length;r++){var a=i[r];t.push(a.queryName)}}var r,i,a,n={},o=e.categorical;o&&(r=[],u.CompiledDataViewMapping.visitCategoricalCategories(o.categories,{visitRole:function(e){t(e,r)}}),i=[],u.CompiledDataViewMapping.visitCategoricalValues(o.values,{visitRole:function(e){t(e,i)}}),a=[],u.CompiledDataViewMapping.visitGrouped(o.values,{visitRole:function(e){t(e,a)}}),n.categorical={categories:r[0],groupedValues:a[0],values:i});var s,e=e.table;return e&&(s=[],u.CompiledDataViewMapping.visitTable(e,{visitRole:function(e){t(e,s)}}),n.table=s[0]),n},v.prototype.getCategoryColumnOption=function(e,t){var r=this.getColumnMetadataAndValues(e,t),i=v.getUniqueValues(r.values),a=u.SQExprBuilder.columnRef(u.SQExprBuilder.entity(null,t.name),e),e=_.map(i,(function(e){return n(u.SQExprBuilder.equal(a,u.SQExprBuilder.text(e.toString())))}));return{source:r.metadataColumn,values:i,identityFrom:{fields:[a],identities:e}}},v.prototype.getValueColumnOptions=function(e,t,r){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a],s=this.getColumnMetadataAndValues(o,r,e),o=s.values;e||_.isEmpty(o)||(o=[_.last(o)]);o={source:s.metadataColumn,values:o,minLocal:_.min(o),maxLocal:_.max(o)};i.push(o)}return i},v.prototype.getColumnMetadataAndValues=function(e,t,r){var i=t.columns,a=g(e),e=this.columnToIndexMap[a];t=r?(r=g(r),this.extractUniqueColumnValues(a,t,r)):this.extractColumnValues(a,t);i=_.find(i,(function(e){return e.name===a}));return{metadataColumn:v.createMetadataColumn(a,e,o.ValueType.fromDescriptor(i.type)),values:t}},v.prototype.extractColumnValues=function(e,t){for(var r=[],i=0,a=t.rowGroups;i<a.length;i++)for(var n=0,o=a[i].rows;n<o.length;n++){var s=o[n];r.push(s[e])}return r},v.prototype.extractUniqueColumnValues=function(e,t,r){for(var i={},a=0,n=t.rowGroups;a<n.length;a++)for(var o=0,s=n[a].rows;o<s.length;o++){var u=s[o],c=u[r];i[v.valueToString(c)]=u[e]}return _.values(i)},v.getLastVersion=function(e){if(_.isEmpty(e.rowGroups))return e.lastVersion||Number.NEGATIVE_INFINITY;var t=Number.NEGATIVE_INFINITY;if(!e.rowGroups)return t;for(var r=0,i=e.rowGroups;r<i.length;r++){var a=i[r];a.version>t&&(t=a.version)}return t},v.createMetadataColumn=function(e,t,r){t={displayName:e,queryName:e,index:t,isMeasure:!1};return null!=r&&(t.type=r,t.isMeasure=!!r.numeric),t},v.getUniqueValues=function(e){return _.uniqBy(e,(function(e){return v.valueToString(e)}))},v.valueToString=function(e){return _.isDate(e)?e.getTime().toString():e?e.toString():""},v);function v(e,t){this.promiseFactory=e.promiseFactory(),this.tabularDataCache=t,this.columnToIndexMap={}}e.TabularDataReader=t})((u=o.data||(o.data={})).tabular||(u.tabular={}))})(powerbi=powerbi||{}),(function(e){(e=e.alignment||(e.alignment={})).right="right",e.left="left",e.center="center"})(powerbi=powerbi||{}),(function(e){(e=e.data||(e.data={})).DataSourcesUndefined="DataSourcesUndefined",e.SchemaReaderUndefined="SchemaReaderUndefined"})(powerbi=powerbi||{}),(function(e){var o;e=e.data||(e.data={}),(o=e.dsr||(e.dsr={})).transformDataQueryToSemanticQueryDataShapeCommand=function(e){return e.Commands,e.Commands[0].SemanticQueryDataShapeCommand,e.Commands.length,1===e.Commands.length||2===e.Commands.length&&(e.Commands[1].ScriptVisualCommand||e.Commands[1].ExportDataCommand),e.Commands[0].SemanticQueryDataShapeCommand},o.generateSemanticQueryRequest=function(r,e,t){var i=_.map(r.queryOptions,(function(e){var t=e.command,t={Query:t,CacheKey:e.cacheResponseOnServer?JSON.stringify(t):void 0,CacheOptions:r.cacheOptions,QueryId:e.queryId};return e.applicationContext&&(t.ApplicationContext=e.applicationContext),1===e.requestPriority&&(t.RequestPriority=1),t})),a=_.map(r.cancelQueryOptions,(function(e){return{QueryId:e.queryId}})),n=o.single(r.dataSources),e={version:o.executeSemanticQueryRequestVersion1,queries:i,cancelQueries:a,modelId:n.modelId,userPreferredLocale:e.getUserPreferredLocale()};return t&&t.impersonating&&((t=t.getImpersonationState()).modelId===e.modelId&&_.extend(e,t)),e}})(powerbi=powerbi||{}),(function(m){var e,t,f,y,g;function v(e){return null==e?"":(e=e.replace(/\"/g,'""'),_.includes(e,"\n")||_.includes(e,t)||_.includes(e,f)||_.includes(e,"\r")||0===e.length?t+e+t:e)}e=(e=m.data||(m.data={})).CsvWriter||(e.CsvWriter={}),t='"',f=",",y="yyyy-MM-dd HH:mm:ss",g="'",e.fromDataView=function(e,t,r){var i,a=e.table;if(!a)return"";var n=a.columns,o="";o+=(function(e){for(var t=[],r=0,i=e;r<i.length;r++){var a=i[r];t.push(v(a.displayName))}return t.join(f)})(n)+"\r\n",(null==r||r>a.rows.length)&&(r=a.rows.length);for(var s=0;s<r;s++){for(var u=a.rows[s],c=[],l=0,p=u.length;l<p;l++){var d=n[l],h=d&&d.type,d=m.DataViewObjects.getValue(null===(i=u.objects)||void 0===i?void 0:i[l],t)||d&&d.format;c.push(function(e,t,r){if(null==e)return"";t=t||(function(e){return _.isDate(e)?m.ValueType.fromPrimitiveTypeAndCategory(6):_.isBoolean(e)?m.ValueType.fromPrimitiveTypeAndCategory(5):_.isNumber(e)?m.ValueType.fromPrimitiveTypeAndCategory(3):m.ValueType.fromPrimitiveTypeAndCategory(1)})(e);var i="";i=t.dateTime?m.formattingService.formatValue(e,y):t.bool||t.numeric&&!r?e.toString():t.numeric?m.formattingService.formatValue(e,(function(e){return e.replace(/(\r\n|\n|\r|,)/g,"")})(r)):(function(e){"="!==e.charAt(0)&&"-"!==e.charAt(0)&&"+"!==e.charAt(0)&&"@"!==e.charAt(0)||(e=g.concat(e));return e})(e.toString());return v(i)}(u[l],h,d))}0<c.length&&(o+=c.join(f)+"\r\n")}return o}})(powerbi=powerbi||{}),(function(t){var r,e,x,l,n,f;function p(e,t,r){for(var i=e.Capabilities,a=e.Source,n={name:e.Name,displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,visibility:M(e.Hidden,e.ShowAsVariationsOnly,e.Private),calculated:e.Calculated,queryable:e.Queryable,properties:x.createWithName(),hierarchies:x.createWithName(),displayFolders:x.createWithName(),navigationProperties:x.createWithName(),errorMessage:e.ErrorMessage,isDateTable:!0===e.IsDateTable,source:{mode:a&&a.Mode,refreshedTime:a&&a.RefreshedTime,directQuerySourceType:a&&a.DirectQuerySourceType,directQuerySourceName:a&&a.DirectQuerySourceName},capabilities:{canRefresh:!i||!1!==i.CanRefresh,canEditSource:t.canEdit&&(!i||!1!==i.CanEditSource),canRename:t.canEdit&&(!i||!1!==i.CanRename),canDelete:t.canEdit&&(!i||!1!==i.CanDelete),canEditStorageMode:t.canEdit&&(!i||!1!==i.CanEditStorageMode),supportsClustering:t.canEdit&&(!i||!1!==i.SupportsClustering),supportsBinByCount:t.canEdit&&(!i||!1!==i.SupportsBinByCount),limitOnNumberOfGroups:i&&i.LimitOnNumberOfGroups||null,dataView:i&&i.DataView||null}},o=0,s=e.Properties;o<s.length;o++){var u=s[o];n.properties.push(b(u))}n.properties.length,e.Properties.length;for(var c=0,l=e.Properties.length;c<l;++c){var p=n.properties[c],d=e.Properties[c];p.canDelete=t.canEdit&&!1!==d.CanDelete;var h=d.Column;h&&(m=p.column=p.column||{},h.Keys&&(m.keys=I(h.Keys,n.properties)),h.OrderBy&&(m.orderBy=I(h.OrderBy,n.properties)));var m=d.Measure;m&&((h=p.measure=p.measure||{}).canEdit=!1!==m.canEdit,m.Kpi&&(w((d=h.kpi=(function(e,t,r){r=r.normalizedFiveStateKpiRange,t={statusMetadata:{graphic:e.StatusGraphic,normalizedFiveStateKpiRange:r},status:t.withName(e.Status),goal:t.withName(e.Goal),trend:t.withName(e.Trend)};e.TrendGraphic&&(t.trendMetadata={graphic:e.TrendGraphic,normalizedFiveStateKpiRange:r});return t})(m.Kpi,n.properties,t)).goal,p,1,r),w(d.status,p,0,r),w(d.trend,p,3,r)),m.Template&&(h.template={name:m.Template.DaxTemplateName}),m.ChangeDetectionMetadata&&(h.changeDetectionMetadata={refreshInterval:m.ChangeDetectionMetadata.RefreshInterval}),null!=m.DistributiveAggregate&&(h.distributiveAggregate=m.DistributiveAggregate))}if(e.Hierarchies)for(var f=0,y=e.Hierarchies;f<y.length;f++){var g=y[f];n.hierarchies.push(E(g,n.properties))}if(e.DisplayFolders)for(var v=0,S=e.DisplayFolders;v<S.length;v++){var C=S[v];n.displayFolders.push(D(C,n.properties,n.hierarchies))}return e.DefaultLabelColumnRef&&(n.defaultLabel=n.properties.withName(e.DefaultLabelColumnRef)),e.DefaultFieldPropertyRefs&&(n.defaultFields=_.map(e.DefaultFieldPropertyRefs,(function(e){return n.properties.withName(e)}))),n}function D(e,t,r){var i={name:e.Name,displayName:e.DisplayName||e.Name,description:e.Description,properties:x.createWithName(),hierarchies:x.createWithName(),displayFolders:x.createWithName()};if(e.DisplayItems)for(var a=0,n=e.DisplayItems;a<n.length;a++){var o=n[a];o.PropertyRef&&t?i.properties.push(t.withName(o.PropertyRef)):o.HierarchyRef&&r?i.hierarchies.push(r.withName(o.HierarchyRef)):o.DisplayFolder&&i.displayFolders.push(D(o.DisplayFolder,t,r))}return i}function E(e,t){for(var r={name:e.Name,displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,hidden:e.Hidden,levels:x.createWithName(),canDelete:!1!==e.CanDelete},i=0,a=e.Levels;i<a.length;i++){var n=a[i];r.levels.push(o(n,t))}return r}function o(e,t){return{name:e.Name,displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,column:t.withName(e.Column),canDelete:!1!==e.CanDelete}}function I(e,t){for(var r=x.createWithName(),i=0,a=e;i<a.length;i++){var n=a[i];r.push(t.withName(n))}return r}function w(e,t,r,i){if(e){var a=t.displayName;switch(r){case 1:a=n.format(i.kpiGoalFmt,a);break;case 0:a=n.format(i.kpiStatusFmt,a);break;case 3:a=n.format(i.kpiTrendFmt,a)}e.displayName=a,e.hidden=!1,e.kpiValue=t}}function b(e){return{displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,name:e.Name,type:t.ValueType.fromPrimitiveTypeAndCategory(e.DataType,e.DataCategory),column:e.Column?i(e.Column):null,kind:e.Measure?1:0,format:e.FormatString,hidden:e.Hidden,queryable:e.Queryable,errorMessage:e.ErrorMessage}}function i(e){var t={defaultAggregate:e.DefaultAggregate,idOnEntityKey:e.IdOnEntityKey,calculated:e.Calculated,variations:x.createWithName(),aggregateBehavior:e.AggregateBehavior};return void 0!==e.DefaultValue&&(t.defaultValue=r.PrimitiveValueEncoding.parseValueToSQExpr(e.DefaultValue)),t}function M(e,t,r){var i=0;return e&&(i|=1),t&&(i|=2),r&&(i|=4),i}function d(e){return{canEdit:e&&e.CanEdit||!1,discourageQueryAggregateUsage:e&&e.DiscourageQueryAggregateUsage||!1,isExtendable:e&&e.IsExtendable||!1,isQnaEnabled:e&&e.IsQnaEnabled||!1,normalizedFiveStateKpiRange:e&&e.NormalizedFiveStateKpiRange||!1,supportsMedian:e&&e.SupportsMedian||!1,supportsPercentile:e&&e.SupportsPercentile||!1,supportsScopedEval:e&&e.SupportsScopedEval||!1,supportsStringMinMax:e&&e.SupportsStringMinMax||!1,supportsMultiTableTupleFilters:e&&e.SupportsMultiTableTupleFilters||!1,supportsTimeIntelligenceQuickMeasures:e&&e.SupportsTimeIntelligenceQuickMeasures||!1,supportsCalculatedColumns:e&&!1!==e.SupportsCalculatedColumns||!1,supportsGrouping:e&&!1!==e.SupportsGrouping||!1,limitMultiColumnFiltersToQueryGroupColumns:e&&e.LimitMultiColumnFiltersToQueryGroupColumns||!1,supportsBinnedLineSample:e&&e.SupportsBinnedLineSample||!1,supportsOverlappingPointsSample:e&&e.SupportsOverlappingPointsSample||!1,supportsQna:e&&e.SupportsQna||!1,supportsInstanceFilters:e&&e.SupportsInstanceFilters||!1,supportsDataSourceVariables:e&&e.SupportsDataSourceVariables||!1,insights:e?a(e.Insights):{},supportsFastRefresh:e&&e.SupportsFastRefresh||!1,supportsSubqueryRegrouping:e&&e.SupportsSubqueryRegrouping||!1,supportsTopNPerLevel:e&&e.SupportsTopNPerLevel||!1,supportsExtensionColumns:e&&e.SupportsExtensionColumns||!1,canEditChangeDetectionMeasure:e&&e.CanEditChangeDetectionMeasure||!1,supportsGroupSynchronization:e&&e.SupportsGroupSynchronization||!1,supportsScopedDataReduction:e&&e.SupportsScopedDataReduction||!1,transformCapabilities:s(e&&e.TransformCapabilities),supportChangeDetectionMeasureRefresh:e&&e.SupportChangeDetectionMeasureRefresh||!1,supportsSparklineData:e&&e.SupportsSparklineData||!1}}function a(e){return e?{supportsDistributionFactors:e.SupportsDistributionFactors||!1,supportsExplainChange:e.SupportsExplainChange||!1,supportsExplore:e.SupportsExplore||!1,supportsKeyDrivers:e.SupportsKeyDrivers||!1,supportsRelatedInsights:e.SupportsRelatedInsights||!1,supportsDecomposition:e.SupportsDecomposition||!1,supportsExplainAnomalies:e.SupportsExplainAnomalies||!1,supportsCompatibleFields:e.SupportsCompatibleFields||!1,supportsQuerySuggestions:e.SupportsQuerySuggestions||!1,supportsExplainVarianceToTarget:e.SupportsExplainVarianceToTarget||!1,supportsGenerateSummaries:e.SupportsGenerateSummaries||!1}:{}}function s(e){return e?{supportedTransforms:e.SupportedTransforms}:{supportedTransforms:[]}}r=t.data||(t.data={}),e=r.dsr||(r.dsr={}),x=jsCommon.ArrayExtensions,l=r.ConceptualSchema,n=jsCommon.StringExtensions,f=jsCommon.Utility,(e=e.ConceptualSchemaFactory||(e.ConceptualSchemaFactory={})).createLocOptions=function(e){return{kpiGoalFmt:e.get("KpiGoalDisplayName"),kpiStatusFmt:e.get("KpiStatusDisplayName"),kpiTrendFmt:e.get("KpiTrendDisplayName")}},e.convertSchema=function(e,t,r,i){var a=new l;a.name=t,a.cubeName=i,a.entities=x.createWithName(),e.canEdit&&(e.Capabilities||(e.Capabilities={}),e.Capabilities.CanEdit=e.canEdit),a.capabilities=d(e.Capabilities);for(var n=0,o=e.Entities;n<o.length;n++){var s=o[n];a.entities.push(p(s,a.capabilities,r))}for(var u=0,c=e.Entities.length;u<c;++u)!(function(e,t,r){var i;if(t.NavigationProperties)for(var a=0,n=t.NavigationProperties;a<n.length;a++){var o=n[a];e.navigationProperties.push(function(e,t,r){r={name:e.Name,isActive:e.Active,sourceColumn:null,targetEntity:r.withName(e.TargetEntity),sourceMultiplicity:e.SourceMultiplicity,targetMultiplicity:e.TargetMultiplicity,behavior:e.Behavior||0,crossFilterDirection:f.valueOrDefault(e.CrossFilterDirection,0)};!e.SourceColumn||(e=t.properties.withName(e.SourceColumn))&&(r.sourceColumn=e.column);return r}(o,e,r))}if(t.Properties)for(var s=0,u=t.Properties.length;s<u;++s){var c=t.Properties[s],l=c.Column;if(l&&l.Variations&&(function(e,t,r){for(var i=0,a=t.Variations;i<a.length;i++){var n=a[i];e.variations.push(function(e,t){var r={name:e.Name,isDefault:e.Default,navigationProperty:null,defaultHierarchy:null,defaultProperty:null},i=t;e.NavigationProperty&&(r.navigationProperty=t.navigationProperties.withName(e.NavigationProperty),i=r.navigationProperty.targetEntity);e.DefaultHierarchy&&(r.defaultHierarchy=i.hierarchies.withName(e.DefaultHierarchy));e.DefaultProperty&&(r.defaultProperty=i.properties.withName(e.DefaultProperty));return r}(n,r))}})(e.properties[s].column,l,e),l&&l.GroupingMetadata&&(e.properties[s].column.groupingMetadata=(function(e,t){var r={groupedColumns:_.map(e.GroupedColumns,(function(e){return e.ColumnRef&&!e.LevelRef?t.properties.withName(e.ColumnRef):e.LevelRef&&!e.ColumnRef?t.hierarchies.withName(e.LevelRef.Hierarchy).levels.withName(e.LevelRef.Level):void 0}))};e.BinningMetadata&&(r.binningMetadata=(function(e){var t={};e.BinSize&&(t.binSize=(function(e){return{value:e.Value,unit:e.Unit}})(e.BinSize));return t})(e.BinningMetadata));return r})(l.GroupingMetadata,e)),l&&l.ParameterMetadata){var p=(function(e){return{kind:null!=e.Kind?e.Kind:0,mappedMParameterNames:e.MappedMParameterNames,supportsMultipleValues:e.SupportsMultipleValues,supportsSelectAll:e.SupportsSelectAll}})(l.ParameterMetadata);if(2===(e.properties[s].column.parameterMetadata=p).kind)for(var d=0,h=e.properties;d<h.length;d++){var m=h[d];if(null!==(i=null==m?void 0:m.column)&&void 0!==i&&i.keys&&1===m.column.keys.length&&null!=(null===(i=null===(i=m.column.keys[0].column)||void 0===i?void 0:i.parameterMetadata)||void 0===i?void 0:i.kind)&&2===m.column.keys[0].column.parameterMetadata.kind){m.column.parameterMetadata=p;break}}}c=c.Measure;c&&!_.isEmpty(c.DistributiveBy)&&(e.properties[s].measure.distributiveBy=_.map(c.DistributiveBy,(function(e){return r.withName(e)})))}})(a.entities[u],e.Entities[u],a.entities);return a},e.convertEntity=p,e.convertDisplayFolder=D,e.convertHierarchy=E,e.convertHierarchyLevel=o,e.convertProperty=b,e.convertColumn=i,e.convertVisibility=M,e.convertCapabilities=d,e.convertInsightsCapabilities=a,e.convertTranformCapabilities=s})(powerbi=powerbi||{}),(function(p){var d;(function(u){var s=p.telemetry.DataGetConceptualSchemaEventName,c=p.fillTelemetryEvent,r=jsCommon.HttpUtils,e=p.MonitorWith;(u.wireContracts||(u.wireContracts={})).InsightsCapabilities=function(){},u.createConceptualSchemaReader=function(e,t,r,i,a,n,o){return new l(e,t,r,i,a,n,o)},u.createConceptualSchemaProxyHttpCommunication=function(e,t,r,i,a){return new n(e,t,r,i,a)};var n=(t.prototype.execute=function(t,r){var e,i,a,n=this,o=this.featureSwitches&&this.featureSwitches().telemetryV2,s=this.promiseFactory.defer(o);return r.event.info.endPoint=this.uri,this.preloadConceptualSchemaService&&(e=this.preloadConceptualSchemaService.getPreloadedConceptualSchema(),i=this.preloadConceptualSchemaService.getPreloadConceptualSchemaUrl(),a=this.preloadConceptualSchemaService.getPreloadConceptualSchemaRequestBody()),JSON.stringify(t)===a&&this.uri===i&&e?(e.then((function(e){1!==e.schemas.length||e.schemas[0].modelId!==t.modelIds[0]||e.error?n.httpExecute(t,r,s):s.resolve({requestId:n.preloadConceptualSchemaService.getPreloadConceptualSchemaResponseRequestId(),schemas:e.schemas})}),(function(e){n.httpExecute(t,r,s)})),this.preloadConceptualSchemaService.clear()):this.httpExecute(t,r,s),s.promise},t.prototype.httpExecute=function(e,t,r){var i=this;this.httpService.post(this.uri,e,this.httpService.powerbiRequestOptions(t.event,"GetConceptualSchema")).then((function(e){i.setTelemetryEventInfo(t.event,e),r.resolve({requestId:e.responseRequestId||e.requestId,schemas:e.data.schemas})}),(function(e){e=e||{};i.setTelemetryEventInfo(t.event,e),r.reject({requestId:e.responseRequestId||e.requestId,error:e.error,status:e.status,schemas:void 0})}))},t.prototype.setTelemetryEventInfo=function(e,t){e.info.clientAndServerRequestIdMatch=r.clientAndServerRequestIdMatch(t),e.info.responseRequestId=r.getResponseRequestId(t),e.info.requestId=t.requestId},t);function t(e,t,r,i,a){this.httpService=e,this.promiseFactory=t,this.uri=r,this.featureSwitches=i,this.preloadConceptualSchemaService=a}var l=(i.prototype.execute=function(e){var t=this,r=e.dataSources,i=this.featureSwitches&&this.featureSwitches().telemetryV2;if(!r||1<r.length)return this.promiseFactory.reject({},i);var a=this.promiseFactory.defer(i),n=_.map(r,(function(e){return e.name})),e={modelIds:_.map(r,(function(e){return e.id})),userPreferredLocale:this.localeProvider.getUserPreferredLocale()};r.some((function(e){return e.perspectiveId}))&&(e.perspectiveIds=_.map(r,(function(e){return e.perspectiveId})));r=JSON.stringify(e.modelIds);i&&c(s,{datasetIds:r});var o=this.telemetryService.startEvent(p.telemetry.DataGetConceptualSchema,{endPoint:"",datasetIds:r,clientAndServerRequestIdMatch:!0,embedType:this.embedModeService&&this.embedModeService.getEmbedTypeDescription()});return this.conceptualSchemaProxyCommunication.execute(e,o).then((function(e){return t.onSuccess(e,n,a,o)}),(function(e){return t.onError(e,a,o)})),a.promise},i.prototype.transform=function(e){if(!e.data)return{schema:null,error:e.error};var t=e.data,r=t.schemas,i=e.schemaNames;i.length,r.length;for(var a={},n=0,o=r.length;n<o;n++){var s=i[n];a[s]=u.ConceptualSchemaFactory.convertSchema(r[n].schema,s,this.locOptions,r[n].cubeName)}return{schema:new d.FederatedConceptualSchema({schemas:a})}},i.prototype.onSuccess=function(e,t,r,i){if(_.isEmpty(e.schemas))this.onError(e,r,i);else{for(var a=0,n=e.schemas;a<n.length;a++){var o=n[a].error;if(o){r.reject({data:null,error:{requestId:e.requestId,serviceError:o,clientError:null,ignorable:!0}});var s=p.errorDetailsHelper.getTelemetryErrorDetailsFromServiceError(o);return s.asErrorCode=o.parameters&&o.parameters.ASErrorCode,void i.reject(s)}}r.resolve({data:e,schemaNames:t,error:null}),i.resolve()}},i.prototype.onError=function(e,t,r){var i=e.error;t.reject({data:null,error:{requestId:e.requestId,clientError:new p.PowerBIAPIErrorToClientError(e.error)}}),r.reject(p.errorDetailsHelper.getTelemetryErrorDetails(i,e.status))},__decorate([e(s)],i.prototype,"execute",null),i);function i(e,t,r,i,a,n,o){this.promiseFactory=e,this.telemetryService=t,this.localeProvider=r,this.conceptualSchemaProxyCommunication=i,this.locOptions=a,this.featureSwitches=n,this.embedModeService=o}})((d=p.data||(p.data={})).dsr||(d.dsr={}))})(powerbi=powerbi||{}),(function(e){((e=e.data||(e.data={})).fake||(e.fake={})).queryGenerator={execute:function(e){return{command:{query:e.query,mappings:e.mappings}}},produceIdentities:function(e,t){return[e]}}})(powerbi=powerbi||{}),(function(n){var u,d;(function(e){var o=u.SQExpr,s=u.SQExprUtils,t=(r.prototype.execute=function(r){var i=this.promiseFactory.defer();return this.schemaProvider.get().then((function(e){var t=r.command;t.schema=e,i.resolve(t)}),(function(){i.reject()})),n.createRejectablePromise2(i)},r.prototype.transform=function(e){var t=e.schema,r=e.query,e=e.mappings,t=(function(e,t,r,i){if(debug.assertValue(e,"query"),t)return t.categorical?(function(e,t,o,s){var u,c=e.select(),l=d.createCategoricalDataViewBuilder();d.CompiledDataViewMapping.visitCategoricalCategories(t.categories,{visitRole:function(e){if(!_.isEmpty(e.items))for(var t=0,r=e.items;t<r.length;t++){var i=r[t],a=c.withName(i.queryName),n=a.expr,i=o.generate(n,s.rowCount);l.withCategory({source:p(a,_.indexOf(c,a)),values:i,identityFrom:{fields:[n]}}),u=!0}}});var a=[];d.CompiledDataViewMapping.visitCategoricalValues(t.values,{visitRole:function(e){if(!_.isEmpty(e.items))for(var t=0,r=e.items;t<r.length;t++){var i=r[t],i=c.withName(i.queryName);a.push({source:p(i,_.indexOf(c,i)),values:o.generate(i.expr,u?s.rowCount:1)})}}}),_.isEmpty(a)||l.withValues({columns:a});return l.build()})(e,t.categorical,r,i):void 0})(r,_.head(e),new i(t),{rowCount:10});if(t)return{dataView:t}},r);function r(e,t){this.promiseFactory=e.promiseFactory(),this.schemaProvider=t}function p(e,t){return{displayName:"",queryName:e.name,index:t,type:{}}}e.FakeDataReader=t;var i=(a.prototype.generate=function(e,t){if(o.isConstant(e)){for(var r=[],i=0;i<t;i++)r.push(e.value);return r}var a=e.getMetadata(this.schema);if(a){if(a.aggregate)return _.range(10,11*t,10);a=a.type;if(a){if(a.integer||a.numeric)return _.range(1,1+t);if(a.text){var n=s.defaultName(e,"value ")+" ";return _.range(1,1+t).map((function(e){return n+e}))}}}return _.range(1,1+t)},a);function a(e){this.schema=e}})((d=u=n.data||(n.data={})).fake||(d.fake={}))})(powerbi=powerbi||{}),(function(e){var s;function t(e,t,r){this.deepestNodeLevelInPath=-1,this.measures=t||[],this.dataMap=e||null,this.nodeIsCollapsed=null!=r?r:null}e=e.visuals||(e.visuals={}),s="noQueryName",t.prototype.withCategory=function(e,t,r){var i,a;return void 0===r&&(r=!1),e&&e.source&&e.identity&&e.identity[t]&&(i=e.identity[t],a=e.source.queryName||s),this.addItemToDataMap(a,i),this},t.prototype.withSeries=function(e,t,r){var i,a;return void 0===r&&(r=!1),e&&e.source&&t&&(i=t.identity,a=e.source.queryName||s),this.addItemToDataMap(a,i),this},t.prototype.withMeasure=function(e){return this.measures.push(e),this},t.prototype.withMatrixNode=function(e,t,r){var i,a,n,o;return void 0===r&&(r=!1),e&&e.identity&&t&&t[e.level]&&t[e.level].sources&&t[e.level].sources[0]&&(i=e.identity,a=t[e.level].sources[0].queryName||s),e&&null!=e.isCollapsed&&null!=e.level&&(n=e.isCollapsed,o=e.level),this.addItemToDataMap(a,i,n,o),this},t.prototype.withTable=function(e,t,r){var i,a;return void 0===r&&(r=!1),e&&e.identity&&null!=t&&(a=(i=e.identity[t])?JSON.stringify(i):s),this.addItemToDataMap(a,i),this},t.prototype.equals=function(e){return!!(this.compareMeasures(this.measures,e.measures)&&this.compareMetadata(this.getSelector(),e.getSelector())&&this.compareMetadata(e.getSelector(),this.getSelector()))},t.prototype.createSelectionId=function(e){return this.key=JSON.stringify(this.dataMap)+JSON.stringify(this.measures),this},t.prototype.getKey=function(){return this.key},t.prototype.includes=function(e,t){void 0===t&&(t=!1);return!(this.dataMap||!this.compareMeasures(this.measures,e.measures))||!!(this.dataMap&&e.dataMap&&this.compareMetadata(this.getSelector(),e.getSelector()))},t.prototype.hasIdentity=function(){return!!this.dataMap},t.prototype.compareMeasures=function(e,t){if(e.length!==t.length)return!1;for(var r=0,i=t;r<i.length;r++){var a=i[r];if(-1===e.indexOf(a))return!1}return!0},t.prototype.compareMetadata=function(e,r){if(!e.data&&r.data||e.data&&!r.data)return!1;if(!e.data&&!r.data)return!0;for(var t=0,i=e.data;t<i.length;t++){var a=(function(t){if(!r.data.some((function(e){return JSON.stringify(e)===JSON.stringify(t)})))return{value:!1}})(i[t]);if("object"==typeof a)return a.value}return!0},t.prototype.addItemToDataMap=function(e,t,r,i){if(t){this.dataMap||(this.dataMap={});var a=this.dataMap,n=a[e];if(null==n)return a[e]=[t],void(null!=r&&null!=i&&i>this.deepestNodeLevelInPath&&(this.nodeIsCollapsed=r,this.deepestNodeLevelInPath=i));n.push(t)}},t.prototype.getSelector=function(){var e={data:void 0,metadata:_.head(this.measures)};if(this.dataMap)for(var t in e.data=[],this.dataMap)this.dataMap[t].length,e.data.push(this.dataMap[t][0]);return e},t.prototype.getSelectorsByColumn=function(){return null},e.CustomVisualSelectionId=t})(powerbi=powerbi||{}),(function(e){((e=e.data||(e.data={})).contracts||(e.contracts={})).primitiveTypeFromDataType=function(e){switch(e){case"Binary":return 11;case"Boolean":return 5;case"Currency":return 2;case"Number":return 3;case"Date":return 6;case"DateTime":return 7;case"Time":return 9;case"WholeNumber":return 4;case"Text":return 1}}})(powerbi=powerbi||{}),(function(e){var a;function n(e){return _.isPlainObject(e)}e=e.data||(e.data={}),(a=e.dsr||(e.dsr={})).registerDsrPlugin=function(e,t){var r=n(t.reader.communication)?a.createExecuteSemanticQueryProxyHttpCommunication(t.reader.communication.httpService,t.telemetryService,t.localeProvider,t.promiseFactory,t.reader.communication.uri,t.reader.communication.impersinationStateProvider,t.reader.featureSwitches,t.reader.directToMwcConnectionInfoService,t.queryContextProvider):t.reader.communication,i=n(t.schemaReader.communication)?a.createConceptualSchemaProxyHttpCommunication(t.schemaReader.communication.httpService,t.promiseFactory,t.schemaReader.communication.uri,t.reader.featureSwitches,t.schemaReader.preloadConceptualSchemaService):t.schemaReader.communication;e.dsr={name:"dsr",reader:function(e){return new a.DsrDataReader(e,r,t.telemetryService,t.reader.featureSwitches(),t.reader.timeoutService,t.reader.delayedQueryResultResolver,t.reader.preferredMaxConnections,t.queryContextProvider)},queryGenerator:function(){return a.createQueryGenerator(t.reader.featureSwitches())},schemaReader:function(){return a.createConceptualSchemaReader(t.promiseFactory,t.telemetryService,t.localeProvider,i,t.schemaReader.localizationOptions,t.reader.featureSwitches,t.embedModeService)},queryExtensionProvider:a.createQueryExtensionProvider()}}})(powerbi=powerbi||{}),(function(e){(e=(e=e.data||(e.data={})).dsr||(e.dsr={})).toDsrV1Calc=function(e){for(var t=new Array(e.calcCount()),r=0;e.nextCalc();r++)t[r]={Id:e.calcId(),Value:e.calcValue()};return t},e.toDsrV1Limit=function(e){for(var t=e.limits(),r=t.count(),i=new Array(r),a=0;a<r;a++)t.next(),i[a]={Id:t.id()};return i}})(powerbi=powerbi||{}),(function(e){var o,t;function r(){this.from={},this.selects={}}o=e.data||(e.data={}),t=e.data.services.SemanticQuerySerializer,r.prototype.withFrom=function(e,t){return this.from[e]={Name:e,Entity:t,Type:0},this},r.prototype.withSelect=function(e,t,r){return this.withNamedSelect(e,t,this.buildSelectName(t,e,r),r)},r.prototype.withNamedSelect=function(e,t,r,i){r={Name:r},t={Expression:{SourceRef:{Source:e}},Property:t};return void 0!==i?r.Aggregation={Expression:{Column:t},Function:i}:r.Column=t,this.selects[r.Name]=r,this},r.prototype.build=function(e){return{Version:null!=e?e:o.SemanticQueryVersions.Version2,From:_.values(this.from),Select:_.values(this.selects)}},r.prototype.buildAndDeserialize=function(e){return t.deserializeQuery(this.build(e))},r.prototype.buildSelectName=function(e,t,r){for(var t=this.from[t],i=t.Entity+"."+e,a=1,n=i=void 0!==r?o.aggregateFunctionName(r)+"("+i+")":i;null!=this.selects[i];)i=n+a,a++;return i},o.QueryDefinitionBuilder=r})(powerbi=powerbi||{}),(function(o){var s;(function(c){var e=o.data.SQExprRewriter,n=jsCommon.StringExtensions;function t(e){return function(e,t,r){var i={query:e,extensions:void 0,queryRewrites:t},r=new a(t,r);return i.query=e.rewrite(r),i.extensions=r.extensionSchema,i.queryRewrites=r.queryRewrites,i}}c.createQueryExtensionProvider=function(){return t},c.nativeMeasureFlexibleEntityName="NativeMeasures_778a1d25-9ebf-4f33-a1c3-827ad532874e",c.extensionSchemaName="NativeExpressionExtensions";var i,a=(__extends(r,i=e),r.prototype.visitNativeMeasure=function(t){this.ensureSchemaInitialized(),this.nativeMeasuresTargetEntity||(this.nativeMeasuresTargetEntity={Name:n.findUniqueName(this.existingEntityNames,c.nativeMeasureFlexibleEntityName),NamingBehavior:1,Measures:[]},this.extensionSchema.Entities.push(this.nativeMeasuresTargetEntity));var e=_.find(this.nativeMeasuresTargetEntity.Measures,(function(e){return e.DataType===t.dataType&&e.Expression===t.expression}));if(e)return s.SQExprBuilder.measureRef(s.SQExprBuilder.entity(this.extensionSchema.Name,this.nativeMeasuresTargetEntity.Name),e.Name);var r=n.findUniqueName(this.existingExtensionFieldNames,t.proposedName||"NativeMeasure");this.existingExtensionFieldNames[r]=!0;e=s.SQExprBuilder.measureRef(s.SQExprBuilder.entity(this.extensionSchema.Name,this.nativeMeasuresTargetEntity.Name),r);return this.nativeMeasuresTargetEntity.Measures.push({Name:r,DataType:t.dataType,Expression:t.expression}),e},r.prototype.visitNativeColumn=function(t){this.ensureSchemaInitialized();var r=t.source.getTargetEntity(),e=_.find(this.extensionSchema.Entities,(function(e){return e.Name===r.entity}));e||(e={Name:r.entity,Extends:r.entity,Columns:[]},this.extensionSchema.Entities.push(e)),e.Columns||(e.Columns=[]);var i=_.find(e.Columns,(function(e){return e.DataType===t.dataType&&e.Expression===t.expression}));if(i)return s.SQExprBuilder.columnRef(s.SQExprBuilder.entity(this.extensionSchema.Name,e.Name),i.Name);var a=n.findUniqueName(this.existingExtensionFieldNames,t.proposedName||"NativeColumn");this.existingExtensionFieldNames[a]=!0;i=s.SQExprBuilder.columnRef(s.SQExprBuilder.entity(this.extensionSchema.Name,e.Name),a);return e.Columns.push({Name:a,DataType:t.dataType,Expression:t.expression,NamingBehavior:1}),this.queryRewrites||(this.queryRewrites=[]),this.queryRewrites.push({selectExprReplaced:{originalExpr:t,replacedExpr:i}}),i},r.prototype.ensureSchemaInitialized=function(){if(!this.schemaInitialized){this.extensionSchema?this.extensionSchema.Version=Math.max(this.extensionSchema.Version,1):this.extensionSchema={Name:c.extensionSchemaName,Version:1,Extends:c.DefaultSchemaName},this.extensionSchema.Entities||(this.extensionSchema.Entities=[]),this.existingExtensionFieldNames={};for(var e=0,t=this.extensionSchema.Entities;e<t.length;e++){var r=t[e];if(this.existingEntityNames[r.Name]=!0,r.Measures)for(var i=0,a=r.Measures;i<a.length;i++){var n=a[i];this.existingExtensionFieldNames[n.Name]=!0}if(r.Columns)for(var o=0,s=r.Columns;o<s.length;o++){var u=s[o];this.existingExtensionFieldNames[u.Name]=!0}}this.schemaInitialized=!0}},r);function r(e,t){var r=i.call(this)||this;return r.queryRewrites=e,r.extensionSchema=t,r.existingEntityNames={},r.existingExtensionFieldNames={},r}})((s=o.data||(o.data={})).dsr||(s.dsr={}))})(powerbi=powerbi||{}),(function(e){((e=(e=e.data||(e.data={})).dsr||(e.dsr={})).QueryRewriterUtils||(e.QueryRewriterUtils={})).duplicateSelect=function(e,t,r){var i=[],a=e.select(),n=null===(o=a.withName(t))||void 0===o?void 0:o.expr,o=e.addSelect(n);return(e=o.select()).length,a.length,n=e.length-1,e=e[n],a.withName(e.name),a=t,t=e.name,i.push({selectExprAdded:{selectIndex:n,namedSQExpr:e}}),void 0!==r&&i.push({projectionQueryRefChanged:{role:r,oldQueryRef:a,newInternalQueryRef:t}}),{rewriteRecords:i,newQuery:o,newQueryName:t}}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e){this.restartValuesCount=e.length,this.calcIdToRestartIdentityIndex={};for(var t=0;t<this.restartValuesCount;t++)this.calcIdToRestartIdentityIndex[e[t]]=t}e=e.dsr||(e.dsr={}),t.prototype.getRestartValues=function(e){var t=new Array(this.restartValuesCount);for(e.restartCalcs();e.nextCalc();){var r=this.calcIdToRestartIdentityIndex[e.calcId()];void 0!==r&&(t[r]=e.calcValueAsExpr())}return _.every(t,(function(e){return!!e})),t},e.RestartValuesBuilder=t})(e.data||(e.data={}))})(powerbi=powerbi||{}),(function(e){var l,p,o,d,a,n;function t(){}function r(e,t,r){var i,a=o.call(this)||this,n=(a.additionalProjection=e).aggregates&&_.isEmpty(null===(i=e.selector)||void 0===i?void 0:i.data)?[l.DataViewWildcard.create()]:null===(n=e.selector)||void 0===n?void 0:n.data;return a.scopeRefs=l.DataBoundObjectQueryExtender.getScopeRefs(n,t,r),a}function i(e,t,r){var i=a.call(this)||this;return i.roleItem=e,i.roleName=t,i.scopeRefs=r,i}l=e.data||(e.data={}),p=l.dsr||(l.dsr={}),t.prototype.conflictsWith=function(e){if(this.getQueryName()!==e.getQueryName())return!1;e=_.xor(this.getScopeRefs(),e.getScopeRefs());return!_.isEmpty(e)},__extends(r,o=e=t),r.prototype.getQueryName=function(){return this.additionalProjection.queryName},r.prototype.getScopeRefs=function(){return this.scopeRefs},r.prototype.updateQueryName=function(e){this.additionalProjection.queryName=e},r.prototype.getRoleName=function(){},d=r,__extends(i,a=e),i.prototype.getQueryName=function(){return this.roleItem.queryName},i.prototype.getScopeRefs=function(){return this.scopeRefs},i.prototype.getRoleName=function(){return this.roleName},i.prototype.updateQueryName=function(e){this.roleItem.queryName=e},n=i,(function(){(p.ScopedValuesQueryRewriter||(p.ScopedValuesQueryRewriter={})).run=function(e,t){void 0===t&&(t=!1);var r=[],i=(function(e){if(!(1<e.length)&&e[0].matrix){var t=e[0].matrix,r=new u("MatrixRowsGroup");l.CompiledDataViewMapping.visitMatrixRows(t.rows,r);var i=new u("MatrixColumnsGroup");l.CompiledDataViewMapping.visitMatrixColumns(t.columns,i);var a=__spreadArray(__spreadArray([],r.scopeRefs),i.scopeRefs),n=new c(a,"MatrixIntersection");l.CompiledDataViewMapping.visitMatrixValues(t.values,n);a=new c(r.scopeRefs,"MatrixRowsScopedValue");return l.CompiledDataViewMapping.visitMatrixRows(t.rows,a),{groupingRefsByRole:__assign(__assign({},r.queryRefsByRole),i.queryRefsByRole),roleItemsInfo:__spreadArray(__spreadArray([],n.rolesMeasures),a.rolesMeasures)}}e.length<=1||null==e[0].matrix&&e[1].matrix})(e.mappings);if(!i)return e;if(r.push.apply(r,i.roleItemsInfo),t&&!_.isEmpty(e.additionalProjections))for(var a=e.query.select(),n=0,o=e.additionalProjections;n<o.length;n++){var s=o[n];r.push(new d(s,a,i.groupingRefsByRole))}return _.isEmpty(r)?e:e=(function(e,t){for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<r;a++){var n=e[a];i.conflictsWith(n)&&(t=(function(e,t){var r=t.queryRewrites||[],i=t.query,i=p.QueryRewriterUtils.duplicateSelect(i,e.getQueryName(),null===(i=e.getRoleName)||void 0===i?void 0:i.call(e));return e.updateQueryName(i.newQueryName),r.push.apply(r,i.rewriteRecords),{query:i.newQuery,queryRewrites:r,mappings:t.mappings,additionalProjections:t.additionalProjections}})(i,t))}return t})(r,e)};var u=(e.prototype.visitRole=function(e,t){if(t===this.expectedContext)for(var t=l.CompiledDataViewMapping.getRoleActiveItems(e),r=this.queryRefsByRole[e.role]=[],i=0,a=t;i<a.length;i++){var n=a[i];this.scopeRefs.push(n.queryName),r.push(n.queryName)}},e);function e(e){this.expectedContext=e,this.scopeRefs=[],this.queryRefsByRole={}}var c=(t.prototype.visitRole=function(e,t){if(t===this.expectedContext)for(var r=0,i=l.CompiledDataViewMapping.getRoleActiveItems(e);r<i.length;r++){var a=i[r];this.rolesMeasures.push(new n(a,e.role,this.scopeRefs))}},t);function t(e,t){this.scopeRefs=e,this.expectedContext=t,this.rolesMeasures=[]}})()})(powerbi=powerbi||{}),(function(e){(function(e){function t(e){this.elements=e,this.currentIndex=-1}e=e.reader||(e.reader={}),t.prototype.reset=function(e){this.currentIndex=-1,e&&(this.elements,this.elements=e)},t.prototype.count=function(){return _.size(this.elements)},t.prototype.current=function(){return this.currentIndex,this.elements[this.currentIndex]},t.prototype.done=function(){return this.currentIndex===_.size(this.elements)-1},t.prototype.next=function(){return!this.done()&&(this.currentIndex++,!0)},t.prototype.index=function(){return this.currentIndex},e.Iterator=t})((e=e.data||(e.data={})).dsr||(e.dsr={}))})(powerbi=powerbi||{}),(function(e){var S,C,x;S=e.data||(e.data={}),C=S.dsr||(S.dsr={}),x=C.reader||(C.reader={}),(function(){(x.V1||(x.V1={})).createDsrParser=function(e){return new t(e)};var t=(e.prototype.dataShapes=function(){return this.parser},e.prototype.reset=function(){this.parser.reset()},e.prototype.lockCache=function(){},e);function e(e){this.parser=new n(e.DataShapes)}var r=(i.prototype.setCalculations=function(e){this.calcIt?this.calcIt.reset(e):this.calcIt=new x.Iterator(e),this.calcExpr=void 0},i.prototype.restartCalcs=function(){this.calcIt,this.calcIt.reset(),this.calcExpr=void 0},i.prototype.nextCalc=function(){var e=this.calcIt.next();return e&&(this.calcExpr=S.PrimitiveValueEncoding.parseValueToSQExpr(this.calcIt.current().Value)),e},i.prototype.calcId=function(){return this.calcIt.current().Id},i.prototype.calcValue=function(){return this.calcValueAsExpr().value},i.prototype.calcValueAsExpr=function(){return this.calcExpr||(this.calcExpr=S.PrimitiveValueEncoding.parseValueToSQExpr(this.calcIt.current().Value)),this.calcExpr},i.prototype.calcCount=function(){return this.calcIt.count()},i);function i(){}var a,n=(__extends(o,a=r),o.prototype.reset=function(){this.it.reset()},o.prototype.index=function(){return this.it.index()},o.prototype.count=function(){return this.it.count()},o.prototype.next=function(){this.primaryHierarchyParser=this.secondaryHierarchyParser=this.messageParser=void 0;var e,t=this.it.next();return t&&(e=this.it.current(),this.setCalculations(e.Calculations)),t},o.prototype.id=function(){return this.it.current().Id},o.prototype.nestedDataShapes=function(){return{}},o.prototype.primaryHierarchy=function(){var e;return this.primaryHierarchyParser||(e=this.it.current().PrimaryHierarchy,this.primaryHierarchyParser=e&&new p(e,0)),this.primaryHierarchyParser},o.prototype.secondaryHierarchy=function(){var e;return this.secondaryHierarchyParser||(e=this.it.current().SecondaryHierarchy,this.secondaryHierarchyParser=e&&new p(e,1)),this.secondaryHierarchyParser},o.prototype.messages=function(){return!this.messageParser&&0<_.size(this.it.current().DataShapeMessages)&&(this.messageParser=new c(this.it.current().DataShapeMessages)),this.messageParser},o.prototype.hasRestartTokens=function(){return 0<_.size(this.restartTokens())},o.prototype.restartTokens=function(){return this.it.current().RestartTokens},o.prototype.complete=function(){return this.it.current().IsComplete},o.prototype.hasAllData=function(){},o.prototype.limitsExceeded=function(){return 0<_.size(this.it.current().DataLimitsExceeded)},o.prototype.limits=function(){return this.limitsParser||(this.limitsParser=new s(this.it.current().DataLimitsExceeded)),this.limitsParser},o);function o(e){var t=a.call(this)||this;return t.it=new x.Iterator(e),t}var s=(u.prototype.next=function(){return this.it.next()},u.prototype.id=function(){return this.it.current().Id},u.prototype.count=function(){return this.it.count()},u);function u(e){this.it=new x.Iterator(e)}var c=(l.prototype.next=function(){return this.it.next()},l.prototype.code=function(){return this.it.current().Code},l.prototype.severity=function(){return this.it.current().Severity},l.prototype.dsrMessage=function(){return new C.DsrMessage(this.it.current())},l);function l(e){this.it=new x.Iterator(e)}var p=(d.prototype.count=function(){return this.it.count()},d.prototype.reset=function(){this.it.reset()},d.prototype.next=function(){return this.instancesParser&&(this.instancesParser=void 0),this.it.next()},d.prototype.id=function(){return this.it.current().Id},d.prototype.instances=function(){var e;return this.instancesParser||(e=this.it.current().Instances,this.instancesParser=e&&new m(e,this.hierarchy)),this.instancesParser},d);function d(e,t){this.hierarchy=t,this.it=new x.Iterator(e)}var h,m=(__extends(f,h=r),f.prototype.next=function(){var e,t=this.it.next();return t&&(e=this.it.current(),this.setCalculations(e.Calculations),this.dataMemberIt=void 0,this.intersectionParserDirty=!0,1===this.hierarchy&&e.Intersections),t},f.prototype.count=function(){return this.it.count()},f.prototype.currentIndex=function(){return this.it.index()},f.prototype.intersections=function(){if(this.intersectionParser)return this.intersectionParserDirty&&this.intersectionParser.reset(this.it.current().Intersections),this.intersectionParser;this.intersectionParserDirty=!1;var e=this.it.current().Intersections;return this.intersectionParser=e&&new g(e)},f.prototype.restartFlagKind=function(){return this.it.current().RestartFlag},f.prototype.restartKind=function(){return 0},f.prototype.members=function(){var e;return this.dataMemberIt||(e=this.it.current().Members,this.dataMemberIt=e&&new p(e,this.hierarchy)),this.dataMemberIt},f);function f(e,t){var r=h.call(this)||this;return r.hierarchy=t,r.it=new x.Iterator(e),r}var y,g=(__extends(v,y=r),v.prototype.reset=function(e){this.it.reset(e)},v.prototype.next=function(){var e=this.it.next();return e&&this.setCalculations(this.it.current().Calculations),e},v);function v(e){var t=y.call(this)||this;return t.it=new x.Iterator(e),t}})()})(powerbi=powerbi||{}),(function(e){var a,n;a=e.data||(e.data={}),((n=a.services||(a.services={})).DataShapeBindingWindowExpansionStateSerializer||(n.DataShapeBindingWindowExpansionStateSerializer={})).serializeWindowExpansionState=function(e){if(e&&e.root){var t=(function t(e){return{Values:_.map(e.identityValues,(function(e){return n.SemanticQuerySerializer.serializeExpr(e)})),WindowExpansionInstanceWindowValue:_.map(e.windowValues,(function(e){return{Values:_.map(e.restartValues,(function(e){return n.SemanticQuerySerializer.serializeExpr(e)})),WindowStartKind:e.windowKind}})),Children:_.map(e.children,(function(e){return t(e)}))}})(e.root),r=(function t(e){if(!e||_.isEmpty(e.Children))return 0;return Math.max.apply(Math,_.map(e.Children,(function(e){return t(e)})))+1})(t),i=new a.SQFrom(null);_.size(e.levels);e=_.take(e.levels,r),r=_.map(e,(function(e){return e=e,t=i,{Expressions:_.map(e.identityKeys,(function(e){e=a.SQExprRewriterWithSourceRenames.rewrite(e,t,t);return n.SemanticQuerySerializer.serializeExprWithRef(e)})),Default:0};var t})),e=[];return n.SemanticQuerySerializer.serializeFrom(i,e),{From:e,Levels:r,WindowInstances:t}}}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(n){!(function(o){var e=jsCommon.Utility,r=n.telemetryEventFactory,t=n.telemetry.EventFactories;e?e.generateGuid:Function.prototype;o.ProvidersExcelWorkbookUploadEventName="PBI.Providers.ExcelWorkbookUpload",o.ProvidersExcelWorkbookUpload=t[o.ProvidersExcelWorkbookUploadEventName]=function(e){return r({name:o.ProvidersExcelWorkbookUploadEventName,baseEvent:o.CustomerAction(e),info:e,category:n.TelemetryCategory.CustomerAction,loggers:o.ProvidersExcelWorkbookUploadLoggers,logExpAssignment:!0})}})(n.telemetry||(n.telemetry={}))})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(l){(l.common||(l.common={})).featureSwitchesHostFilters={annotationsUI:8,reportAnnotationsUI:10,userFavoriteResourcePackagesEnabled:24575,queryCancellation:25,personalVisualizationPaneEnabled:24575}})(powerbi=powerbi||{}),(function(l){(l.common||(l.common={})).ClientFeatureSwitches=function(){this.eimInformationProtectionMandatoryLabelSettingEnabled=null,this.adminCustomDisclaimerEnabled=null,this.bingMapEnabled=null,this.autoInstallPowerBIAppInTeamsTenant=null,this.datamartTenantEnabled=null,this.deprovisionScdInstanceEnabled=null,this.externalDatasetSharingTenantEnabled=null,this.microsoftOrgAppEnabled=null,this.withinDXT=null,this.liveWorkbookTiles=null,this.csvContentProviderEnabled=null,this.vsoVnextAppEnabled=null,this.excelWorkbooksInContentPackEnabled=null,this.ffxlChartSelectionEnabled=null,this.ffxlLocalFilesEnabled=null,this.sharePointDocumentLibrariesEnabled=null,this.sparkAppEnabled=null,this.psaPracticeManagerAppEnabled=null,this.anonymousEmbeddingEnabled=null,this.psaResourceManagerAppEnabled=null,this.psaAccountManagerAppEnabled=null,this.azureUsageAndBillingAppEnabled=null,this.bingAdsAppEnabled=null,this.salesforcePersonasEnabled=null,this.fullFidelityExcelEnabled=!0,this.disableAnimation=null,this.pseudoLocEnabled=null,this.includeFlightingContentProviders=null,this.exportallowed=null,this.ignoreGettingStartedPopups=null,this.insightsDevModeEnabled=null,this.snapshotEmbedEnabled=null,this.closeAccountEnabled=null,this.dataDotChartEnabled=null,this.enterpriseGatewayEnabled=null,this.enterpriseGatewayETLEnabled=null,this.quotaSmallLimitEnabled=null,this.forceFreeUserEnabled=null,this.salesforceAndOneDriveCredentialsEnabled=null,this.scriptVisualEnabled=null,this.embedFullFidelityWorkbooks=null,this.readOnlyGroupEnabled=null,this.sandboxVisualsEnabled=!0,this.pauseQueriesEnabled=null,this.sunburstVisualEnabled=null,this.cloudRlsImpersonationEnabled=null,this.cloudRlsRoleMembershipEnabled=null,this.filledMapDataLabelsEnabled=null,this.enableTableToTableRelationship=null,this.isLabelInteractivityEnabled=null,this.hierarchyAuthoringEnabled=null,this.importPbiviz=null,this.analyzeInExcelEnabled=null,this.dataClassificationEnabled=null,this.scriptVisualAuthoringEnabled=null,this.hierarchyDragDrop=null,this.mapCurrentLocationEnabled=null,this.devToolsVisualApiVersioning=null,this.insightsStoreEnabled=null,this.saasMarketplace=null,this.permissionCenterEnabled=null,this.oneGBUploadFileSizeEnabled=null,this.templatePublishFlightingWorkAroundEnabled=null,this.enableGroupAuthoring=null,this.exportVisualToExcelEnabled=null,this.showGeneratedColumnsInDetailView=null,this.alwaysPromptForContentProviderCreds=null,this.serviceAppsDisabled=null,this.builtInContentProvidersDisabled=null,this.shapeMapVisualEnabled=null,this.exportReportToPowerPointEnabled=null,this.adminAuditingEnabled=null,this.dynamicMessageEnabled=null,this.preloadLinkedDashboardEnabled=null,this.scriptVisualLaunchExternalIDEEnabled=null,this.esriEnabled=null,this.sharePointEmbedEnabled=null,this.emailSubscriptionEnabled=!0,this.downloadReportEnabled=null,this.socialSharingEnabled=!0,this.isSovereignCloud=null,this.scriptVisualAnonymousEmbeddingEnabled=null,this.analyzeInExcelSovereignFormatEnabled=null,this.appTemplatesEnabled=null,this.directQueryScheduledRefresh=null,this.previewDefaultOptIn=null,this.serviceAppsEnabled=null,this.templateAppUpgradeEnabled=null,this.useBackendFSEnabled=null,this.granularTenantControls=null,this.adminCapacityEnabled=null,this.numericSlicerEnabled=null,this.clientUsageMetricsEnabled=null,this.pivotTableVisualEnabled=null,this.multipleODataPredicates=null,this.datasetDownloadPbix=null,this.dashboardEmailSubscription=null,this.approvedResourcesDisabled=null,this.groupCapacity=null,this.customVisualsUseStaticSandbox=null,this.reportMeasures=null,this.customVisuals=null,this.showHiddenUsageMetricsModels=null,this.appStoreCdnOverride=null,this.lineMarkersEnabled=null,this.onPremDirectQuerySingleSignOnForSql=null,this.onPremDirectQuerySingleSignOnForOracle=null,this.onPremDirectQuerySingleSignOnForSAP=null,this.onPremDirectQuerySingleSignOnForTeradata=null,this.lineStylesEnabled=null,this.cellLevelFormatting=null,this.canvasItemsPane=null,this.instantEmail=null,this.usageMetricsUpgrade=null,this.authoringCapabilitiesAdminControl=null,this.customVisualsPerformanceTelemetry=null,this.customCommands=null,this.scatterWithDataVolume=null,this.loadBaseTheme=null,this.baseTheme=null,this.reportSharingUI=null,this.scatterXYGrouping=null,this.slowDataSourceModeEnabled=null,this.zOrder=null,this.dsrV2=null,this.drillFilterOtherVisuals=null,this.mapPointSampling=null,this.themeRelative=null,this.CDSA=null,this.useBatchGeocoding=null,this.stickyUserStateUI=null,this.stickyUserStateUIThrottling=null,this.defaultSortMethodology=null,this.showIncrementalRefreshPolicy=null,this.cdsaFrontend=null,this.createAppWorkspaceSettingMigration=null,this.subscribeOthersUI=null,this.dashboardThemesUI=null,this.filtersInDataView=null,this.cdsaExternalStorageReferenceUI=null,this.notifyLegacyExternalUsers=null,this.insightApps=null,this.paginatedReports=null,this.annotationsUI=null,this.urlBookmarksUI=null,this.donutImprovements=null,this.dataClassification=null,this.editWorkspaceShowsRegion=null,this.comparisonODataPredicates=null,this.stickyUserStateCustomViz=null,this.multiGeoGatewaysCredentialsWarning=null,this.gatewayBasicLoadBalancing=null,this.showManageAggregations=null,this.dataViewTargeted=null,this.dateODataType=null,this.nonAsciiODataNames=null,this.inODataPredicates=null,this.bookmarkGrouping=null,this.outspaceBackground=null,this.personalBookmarksUI=null,this.spoWithTutorialVisuals=null,this.securePublishToWeb=null,this.redlineAlignment=null,this.capacityWorkloads=null,this.rdlReportSharingUI=null,this.lessIntrusiveNpsDialog=null,this.cartesianConditionalFormatting=null,this.openExploreErrorDetails=null,this.onPremDirectQuerySingleSignOnForSapBw=null,this.cdsaUseMashupEditorClientLibrary=null,this.capacitySettingsTabs=null,this.copyBetweenPbix=null,this.datasetPropertiesSection=null,this.certifyDatasetsSetting=null,this.allowExploreDatasetOfApp=null,this.exportExcelExcludeMeasures=null,this.exportDataMode=null,this.capacityRestartButton=null,this.cdsaExperimentalConnectors=null,this.optimizePublishToWeb=null,this.sharedDatasetDiscovery=null,this.reportAnnotationsUI=null,this.autoShareAnnotatedArtifact=null,this.onPremDirectQuerySingleSignOnForSapBwMessageServer=null,this.scheduledSubscriptionUI=null,this.userStateBookmarkImprovements=null,this.cdsaCDMFolderReferenceUI=null,this.elevatedGuests=null,this.cdsaFolderStorageAccountUI=null,this.rdlReportJsonRplRenderer=null,this.localizationModern=null,this.workloadMetrics=null,this.removeAuthoringToolSaveButton=null,this.dashboardB2BSharingWithRegularHost=null,this.PbiDedicatedPublicXmlaEndpoint=null,this.keyDrivers=null,this.cdsaDatasetCopyUI=null,this.rolloutCapacitiesList=null,this.visualTabOrders=null,this.helpAndSupportSettings=null,this.servicePrincipalTenantAdminSettings=null,this.exportReportToPdfEnabled=null,this.newLookUI=null,this.httpServiceModern=null,this.cdsaExistingDatasetCopyUI=null,this.defaultTooltipFormatting=null,this.axisInteractivity=null,this.showDataflowsInGetData=null,this.cdsaFastCombineDefaultOffFrontend=null,this.workspacesV2GA=null,this.workspacesV2GAFeatures=null,this.cdsaStorageAccountDetachUI=null,this.dataSourceVariablesOverride=null,this.capacityBanner=null,this.workspaceCapacityManagement=null,this.userFavoriteResourcePackagesEnabled=null,this.performancePane=null,this.unreadAnnotationsBadge=null,this.paginatedReportsSubscriptions=null,this.cdsaStorageUpdateMissingParamsUI=null,this.scheduledRefreshCCNotifications=null,this.sharedDataflowDiscoveryUI=null,this.lineChartLabelPosition=null,this.visualsOutsideNgZone=null,this.workspacesV2ViewerRole=null,this.exprBoundColorValidation=null,this.gatewayMultipleCredentials=null,this.gatewayMultipleCredentialsRDLReports=null,this.gatewayMultipleCredentialsDatapools=null,this.paneColorRefresh=null,this.dataSourceVariablesOverrideShared=null,this.playAxisDataColors=null,this.disableExportDataOnVisualError=null,this.stagingRdlInApps=null,this.rdlReportInGlobalSearch=null,this.useNewCY19SU06BaseTheme=null,this.paginatedReportsSqlAzureSSO=null,this.appRepublishErrorHandlingUpdate=null,this.pbiMarketplace=null,this.tablixIcons=null,this.decompositionTree=null,this.tileEmbedHostEnvChange=null,this.dataBoundPropertiesUseThemeDefaults=null,this.contactsSettingsList=null,this.drillthroughText=null,this.keyDriversDetails=null,this.propertyEvaluationWarnings=null,this.qnaVisual=null,this.workspacesV2OptInUpgrade=null,this.workspacesV2OptInUpgradeButton=null,this.workspacesV2Downgrade=null,this.aiCapacityMetrics=null,this.eimInformationProtectionUI=null,this.homeThumbnailUI=null,this.importJsonModel=null,this.allowCDNUrl=null,this.themeTextStyles=null,this.exprBoundAltText=null,this.disableServicePrincipalNotification=null,this.personalVisualizationPaneEnabled=null,this.newExportDataUI=null,this.newUsageMetrics=null,this.rdlGenerateLinkUI=null,this.subscribeExternalUsers=null,this.queryApplicationContext=null,this.snapshotGenerateUI=null,this.lazyLoadAngularJS=null,this.exprBoundActions=null,this.additionalKPISettings=null,this.externalSharingInvitationHostDeprecation=null,this.invitationHostDeprecation=null,this.visualMultiColumnFilterMetadata=null,this.deprecateArchivedContent=null,this.InsightsContinuationTokens=null,this.insightsContinuationTokensUX=null,this.conditionalTablixWebURL=null,this.addHostEnvHeader=null,this.kerberosDqRefresh=null,this.lazyLoadLandingContainer=null,this.directToMwc=null,this.rdlBootstrapNotInDashboardService=null,this.themeDialog=null,this.subscriptionUpdatePreventionOnAnonymizedUsers=null,this.manageMarketplaceVisuals=null,this.refreshCenterHistory=null,this.refreshCenterTimetable=null,this.forceCapacityFolderAlmPipeline=null,this.adlsBasedModelTakeover=null,this.canvasZoom=null,this.hierarchicalSlicer=null,this.hierarchicalSlicerCreation=null,this.pbiRSKey=null,this.umv2Upgrade=null,this.reorderAdminPortalNav=null,this.newAdminUsageMetrics=null,this.scopedAggregates=null,this.exportForPBIE=null,this.decompTreeBarsPerLevel=null,this.tableMultiSort=null,this.navAndDrillthroughActionTypes=null,this.allowSubscribingOnlyExternalUsers=null,this.modernPackageRefreshListener=null,this.emailSubscriptionV2=null,this.instantEmailSubscriptionV2=null,this.decompTreeTooltipMeasure=null,this.reusableFluentList=null,this.visualContainerLassoSelect=null,this.fluentAppListView=null,this.webNavigationMigration=null,this.saasReportIsAngular=null,this.saasReportIsAngularToThisPoint=null,this.allowGatewayForRDLWithCloudDS=null,this.decompositionTreeCoreVisual=null,this.visualInsights=null,this.useModernVisualTooltipManager=null,this.totalsConditionalFormatting=null,this.homeGettingStartedP2WSample=null,this.homeGettingStartedP2WSampleForceShow=null,this.homeGettingStartedPbixSample=null,this.updatedGetDataSamples=null,this.hideWorkspacesWidget=null,this.filteredFavoriteFrequent=null,this.discussInTeams=null,this.drillthroughButtonGA=null,this.decompositionTreeCrossHighlight=null,this.deleteSharedDatasetUi=null,this.rebindReportUi=null,this.decompositionTreeResponsiveLayout=null,this.externalTools=null,this.decompositionTreeConditionalFormat=null,this.exportReportWithExecuteScriptAsync=null,this.byoResourcesUI=null,this.byoResourcesStorageAccountUI=null,this.byoResourcesLogAnalyticsUI=null,this.discussInTeamsForDashboard=null,this.fluentTopLevelList=null,this.selfServicePurchase=null,this.fileExportPolling=null,this.openArtifactsInNewTab=null,this.d3v5=null,this.showDisableCommentingTenantSwitch=null,this.azureMapVisual=null,this.azureMapPreviewEnabled=null,this.singlePageExports=null,this.ShowQnaSettingForAllModels=null,this.qnaSupportCommitQuestionOnDemandForAll=null,this.spanishLinguisticsEnabled=null,this.qnaExportLanguageModelPackage=null,this.anomalyDetection=null,this.kustoSSO=null,this.cdpaSSO=null,this.templateAppsSimplifiedAuth=null,this.showThemeLoadError=null,this.dataPointLassoSelect=null,this.dataPointLassoSelectPreviewEnabled=null,this.interactivityServiceOptimization=null,this.gatewayVNets=null,this.eimInformationProtectionUsageRightsUI=null,this.eimInformationProtectionMandatoryLabelUI=null,this.EimInformationProtectionMandatoryLabelRemoveAdminSwitch=null,this.EimInformationProtectionMandatoryLabelSccConfig=null,this.allowPrivateLinksSecurityGroups=null,this.QnaInterpretVersion=null,this.reportPagePanePositionSetting=null,this.expFlightingTenantSetting=null,this.blankCanvasWatermark=null,this.decompositionAnalysisInsights=null,this.ppuTenantSettings=null,this.sendLocalDatesForSubscription=null,this.postNgMigrationCleanup=null,this.handleErrorOnQueryDataAPIThrottling=null,this.axisZoom=null,this.capacityGen2Create=null,this.capacityGen2Toggle=null,this.capacityGen2Notifications=null,this.autoScaleEmailNotifications=null,this.WorkspaceV1AdminUpgrade=null,this.proTrialToPPUTrialRollout=null,this.serializeSpaceOptimization=null,this.fraSubscriptionsUI=null,this.workspaceV1AdminUpgradeAll=null,this.databricksSSO=null,this.commonDataServiceSSO=null,this.capacityGen2UsageMetricsLink=null,this.disablePPUConfirmationDialog=null,this.allowSubscribeOthersWithRLS=null,this.premiumPerUserGA=null,this.qnaThumbsUpDown=null,this.cartesianMultiples=null,this.cartesianMultiplesAuthoring=null,this.lazyLoadAccessRecords=null,this.subscriptionOptionalPreviewImage=null,this.consolidateGroupDeleteState=null,this.analyticsRibbon=null,this.sharepointListLicensing=null,this.visualizeListInPowerBIUI=null,this.powerBIGoals=null,this.fluentListMigration=null,this.scorecardVisual=null,this.enhancedTooltips=null,this.MRUOptimizationFE=null,this.capacityAzureGen2Preview=null,this.cartesianMultiplesGridFormatting=null,this.newEmbedOnLoadFiltersFlow=null,this.teamsAnalyticsUI=null,this.automatedInsights=null,this.automatedInsightsBackgroundRefresh=null,this.sharedWithMeOptimizationFE=null,this.azureMapSelectionControl=null,this.promoteTeamsBanner=null,this.smallMultiplesSubheaderFormatting=null,this.lineChartVerticalReferenceLine=null,this.enterDataFooter=null,this.quickCreateDataset=null,this.quickCreateBlankReport=null,this.capacityGen2PaygUI=null,this.autoAssignTrial=null,this.cartesianMultiplesGridPadding=null,this.cancelTrial=null,this.comboMultiples=null,this.accessibilityTopLevelNav=null,this.deprecateOldVisuals=null,this.hiddenContent=null,this.streamingDataflowQueryTest=null,this.useModernFormatPane=null,this.formatPaneGroups=null,this.teamsHomePivot=null,this.topLevelListsAreAngular=null,this.appsAreAngular=null,this.shapeVisual=null,this.showLiftChart=null,this.almServicePrincipal=null,this.showAllGateways=null,this.daxTransformEnabled=null,this.expressionBasedFormatting=null,this.areaChartTransparency=null,this.totalDataBars=null,this.cesNewUserDayZeroIntent=null,this.cesCustomerVoiceTest=null,this.smallMultiplesConditionalFormatting=null,this.smallMultiplesResponsive=null,this.enableSelectAllForDynamicQueryParameter=null,this.WorkplaceAnalyticsSSO=null,this.cartesianMultiplesAccessibility=null,this.powerAutomateNativeVisual=null,this.capacityRegionalSpec=null,this.smallMultiplesSortByMeasure=null,this.teamsMobileFormatting=null,this.mobileAuthoringFormattingUI=null,this.dataverseIntegrationUI=null,this.modernCodePaneContainer=null,this.shapeFormattingFeatures=null,this.xAxisRefLineImprovements=null,this.servicePrincipalProfiles=null,this.m365DataSharingSetting=null,this.generateQesTokenPaas=null,this.SPLRegenerateModel=null,this.byolaSGWorkspacePermissionSwitch=null,this.buttonTileFormatting=null,this.lineChartSeriesLabels=null,this.waterfallTotals=null,this.visualTitleContainerPadding=null,this.capacityAzureGen2GA=null,this.useModernFieldWell=null,this.learnPageSamples=null,this.capacityBannerGen2=null,this.gatewaysAdminCenterLink=null,this.azureMapHeatmapLayer=null,this.sparklines=null,this.accessibilitySlicerNav=null,this.modernGroupingDialog=null,this.donutChartStartAngle=null,this.pieChartMarginBetweenSlices=null,this.textboxSuperSubScriptBulletedList=null,this.navigatorVisuals=null,this.sortLegend=null,this.enableBIU=null,this.adminPortalSurvey=null,this.eimInformationProtectionMandatoryLabelOnUploadRdlUI=null,this.EimInformationProtectionMandatoryLabelNewPaginatedReport=null,this.displayAdminInsights=null,this.NlToDax=null,this.EnableNLToDax=null,this.AllowSendNLToDaxDataToOtherRegions=null,this.showAllowPowerBIASDQOnTenant=null,this.useModernDatePickerSlicer=null,this.substrateDeprovisioningSetting=null,this.useCvSandboxHtmlPack=null,this.almDatamarts=null,this.allowDataMartModelAuthoringRLS=null,this.upgradeOutlineProperties=null,this.trialLifecycle=null,this.comboChartNoColumnsLegend=null,this.outlineDropdownToCheckboxes=null,this.slicerAccessibility=null,this.lineChartError=null,this.fillPointStyle=null,this.cvAggregateUpdateMessages=null,this.showDefaultTooltip=null,this.newVisualLegendPositions=null,this.columnChartError=null,this.splitSubTotals=null,this.splitGrandTotals=null,this.logAxisScale=null,this.switchAxisPosition=null,this.removeDefaultToCircleToggle=null,this.bookmarkNavigatorSeparate=null,this.formulaBarPerfImprovements=null,this.ProvideStaticOAuthOption=null,this.quickCreateSave=null,this.comboChartError=null,this.formattingPaneEnhancement=null,this.keyboardShortcutsLassoSelect=null,this.shareDatamart=null,this.a11yTable=null,this.newResizeSensor=null,this.queryContext=null,this.fieldParameters=null,this.fieldParametersAuthoring=null,this.almMultiAssign=null,this.capacityMetricsGen2App=null,this.coalesceCD=null,this.mCoalesceCD=null,this.exp_coalesceCD=null,this.improveReportLoadSpinner=null,this.disableScheduledRefreshForCapacityMetricsGen2=null,this.autoInstallPowerBIAppInTeamsClient=null,this.autoInstallPowerBIAppInTeamsActivesClient=null,this.RdlEditableSession=null,this.storytelling=null,this.storytellingIntroduction=null,this.teamsPersonalAppSideNav=null,this.bingMapTenantSetting=null,this.workbookModern=null,this.teamsPersonalAppTopBar=null,this.angularOnlyPermissionCenter=null,this.leadsCollection=null,this.trident=null,this.eimInformationProtectionSupportForTridentUI=null,this.tridentGit=null,this.embedHierarchyFilterUsingIdentities=null,this.newManageGatewaysUI=null,this.azureMapsGeocoding=null,this.showPlaygroundMenuItem=null,this.passReportIdToOnloadBookmark=null,this.standaloneUseDashboardNew=null,this.standaloneUseTileNew=null,this.showWorkspaceUpgradeEmailTenantSetting=null,this.showWorkspaceUpgradeEmptyTenantSetting=null,this.automaticAggregationsUIGAFeatures=null,this.removeScaleDetector=null,this.noEmptyUpdate=null,this.browse=null,this.browseMenu=null,this.newZoomControl=null,this.blockWorkspaceV1CreationEnabled=null,this.BlockWorkspaceV1Creation=null,this.newPowerBIDataflows=null,this.treatAllDataflowsAsGen2=null,this.copyVisualImageSaaSEmbed=null,this.mobileNewDashboardAuthoring=null,this.singleGoalVisual=null,this.rdlQuickTableSave=null,this.embedHierarchySlicerState=null,this.rlsEditor=null,this.isDownloadFilesInOfficeEnabled=null,this.isDownloadFilesInOutlookEnabled=null,this.spatialAnchorsAdminUI=null,this.quickExploreMultiTable=null,this.almPipelineHistoryWrite=null,this.almPipelineHistoryRead=null,this.utcDates=null,this.downloadReportOptionDisabledTelemetry=null,this.isViewFullScreenInOfficeEnabled=null,this.isViewFullScreenInOutlookEnabled=null,this.aasMigration=null,this.tooltipsToOverlay=null,this.oneDriveSave=null,this.storytellingSlideshowModeDisable=null,this.displayKustoAdminSettings=null,this.adminGroupApiDatamart=null,this.reportEmbedShowKeyboardHint=null,this.rdlDataPreview=null,this.appArtifactLevelSecurity=null,this.touchScreenOptimizedTooltips=null,this.usageMetricsRetroactiveDisable=null,this.trackUserInfo=null,this.reportLoadIndicator=null,this.cdsaSettingsTakeover=null,this.cdsaWorkspaceGraphDataflowEntities=null,this.cdsaSendEmailOnRefreshFailureUI=null,this.networkStatusNotification=null,this.skipTestConnection=null,this.smartAlertTenantAdminSettings=null,this.cdsaEntitiesRelationships=null,this.removeDataflowPreviewTag=null,this.queryCancellation=null,this.capacityWorkloadMemoryControls=null,this.addPreviewTagToAttachExternalDataflow=null,this.emailSubscriptionTenantAdminSettings=null,this.newDSCompInDataset=null,this.telemetryV2=null,this.adminBranding=null,this.skipTestConnectionOnPrem=null,this.northStarBreadcrumb=null,this.managedIdentityAuthorizationTenantAdminSettings=null,this.promotedContentUI=null,this.artifactDescriptionsUI=null,this.singleSignOnTestConnection=null,this.disableVisualInDesktopRS=null,this.eimInformationProtectionLicenseEnforcementUI=null,this.copyVisualImage=null,this.visualDropShadow=null,this.showDisableOutboundFlows=null,this.exportPbixForGeneratedModelsUI=null,this.modelingServiceGenerateModel=null,this.personalizeVisualUnifiedFieldList=null,this.artifactEndorsementFeatureUI=null,this.artifactEndorsementStoreOptimization=null,this.streamingDataflow=null,this.quickCreate=null,this.datamart=null,this.datamartQueryEditor=null,this.DatamartProactiveCaching=null,this.sqlDesignerView=null,this.savedQueries=null,this.queryTabs=null,this.datamartLineage=null,this.datamartIA=null,this.datamartIncrementalRefresh=null,this.appsGalleryEndorsementUI=null,this.easySharingTenantUI=null,this.easySharingProtectionLabelsTenantUI=null,this.verboseTelemetry=null,this.quickCreateSharepointList=null,this.largeFilesUI=null,this.homeEndorsementConsumptionUI=null,this.lineageShowCompositeModelsRelationship=null,this.iaShowCompositeModelsRelationship=null,this.endorsementSidePanesUI=null,this.lineageDataClusterEnable=null,this.datasetsHubActionBar=null,this.fluentAppsContainer=null,this.modernRLSContainer=null,this.enableHybridTables=null,this.enableRDLReportsOnL2=null,this.enableAutoCreateReportOnL2=null,this.enableShareReportActionOnL2=null,this.newDatahubDiscoverPage=null,this.datahubLastAccessColumn=null,this.newDatasetDetailsPage=null,this.datamartDetailsPage=null,this.dynamicParameters=null,this.allowTenantAdminDisableWorkspaceV1Creation=null,this.eimInformationProtectionExportPbixUI=null,this.skipRequiredDatsourceCredentials=null,this.compositeModelsOverAS=null,this.newFieldList=null,this.modelViewASLiveConnectEnabled=null,this.allowAsyncModelAuthoring=null,this.useTsMsagl=null,this.useFormulaBarDaxEditor=null,this.validateSortByColumnByTypescript=null,this.datahubV2OnDesktop=null,this.eimInformationProtectionForDesktop=null,this.eimInformationProtectionDesktopRemoveLabel=null,this.eimInformationProtectionEnforceDesktopLicense=null,this.useModernRealTimeTile=null,this.useModernRealTimeTileBlade=null,this.legacyPromiseFactory=null,this.legacyPbiPromise=null,this.rdlNativeVisual=null,this.rdlEditInPBIRB=null,this.rdlSSOForASAzure=null,this.gatewayVNetsRdl=null,this.useReactToolbar=null,this.formattedTableReentrancy=null,this.usageMetricsVnext=null,this.EimInformationProtectionDefaultLabel=null,this.eimInformationProtectionOverrideSensitivityLabelsUI=null,this.createDatasetFromHub=null,this.createDatasetFromLogAnalytics=null,this.datasetDescriptionSettingsUI=null,this.viewDatasetFromReportUI=null,this.teamAnalyticsHome=null,this.showRelevantUsersForSharing=null,this.bookmarksForLinks=null,this.quickCreateImportData=null,this.authorsStateAsDefaultPresentationInPersonalBookmarks=null,this.quickCreateDesktopDownloadBanner=null,this.DisableContentPacks=null,this.disableUIVirtualization=null,this.CdsaMultipleContributors=null,this.webPerformancePane=null,this.dontSerializeDoLoadPowerViewReport=null,this.staticExportReportEnabled=null,this.allUpSaveReport=null,this.highVolume=null,this.customVisualsStore=null,this.gatewayBindingEnhancement=null,this.capacitiesVCores=null,this.customVisualsGallery=null,this.capacitiesAzureTab=null,this.capacitiesMigrateSpecificWorkspaces=null,this.assignAdminsAzureCapacitiesEnabled=null,this.reportInstantEmail=null,this.dashboardInstantEmail=null,this.slicerSyncing=null,this.dsrV2_Staging=null,this.workspacesV2=null,this.workspacesV2UsageMetrics=null,this.workspacesV2UnifiedGroups=null,this.customVisualsTenantSwitch=null,this.pinReadable=null,this.artifactSearchUI=null,this.appAccessRequestUI=null,this.spoIntegration=null,this.bookmarkInitRefactor=null,this.disallowWorkbookRefresh=null,this.onDemandSmartAlerts=null,this.exportUnderlyingSetting=null,this.workspaceListView=null,this.pinInsightsFromApp=null,this.useModernExploreCanvas=null,this.modernDashboard=null,this.modernWebReportLoad=null,this.quickAccessSearch=null,this.newInfoBarRedlines=null,this.modernDatasetDialog=null,this.showMainWindowAfterRender=null,this.disableNewFeaturesDialog=null,this.copyRdlReportToWorkspaceV2=null,this.allowEmailSecurityGroupsOnOutage=null,this.modernFolderService=null,this.histogram=null,this.cdsaModelSchemaUpdate=null,this.enableRdlReportCopyFromWorkspaceV1=null,this.narrativeTextbox=null,this.rdlReportAnaheim=null,this.workspaceMultiselect=null,this.expandQueryCaching=null,this.hideReportVerticalPane=null,this.optimizedAppMetadataForDashboardLanding=null,this.capacityCachingControl=null,this.o365LauncherV2=null,this.appcues=null,this.whatfix=null,this.experimentAATest1=null,this.experimentAATest2=null,this.dqReactiveCaching=null,this.cdsaGranularSQLUI=null,this.configureAppContacts=null,this.rdlHideCredentialsDialog=null,this.increasedExportSectionLimit=null,this.proPlusServicePlan=null,this.proPlusExcludePPUCapacityCreateWorkspace=null,this.lineChartPowerAutomate=null,this.cesFormsProTest=null,this.lineChartAlert=null,this.feedbackFeature=null,this.ribbonSearchBar=null,this.exportHostErrorList=null,this.linkToPowerAutomateExportTemplate=null,this.allowGatewaysWithoutMashupCreds=null,this.enableOldJumpsPage=null,this.certifiedTelemetry=null,this.certifiedTelemetryDesktop=null,this.certifiedTelemetryUserEvents=null,this.certifiedTelemetryAssertions=null,this.certifiedTelemetryQueryEvent=null,this.certifiedTelemetryResolveParametersEvent=null,this.resolveParametersEvent=null,this.activityViewer=null,this.gatewaysTableUseConnDetails=null,this.notificationPollTimeoutFast=null,this.notificationPollTimeoutSlow=null,this.enableRefreshNowChecks=null,this.sdfArray=null,this.sdfBlob=null,this.sdfCustomNodeName=null,this.sdfTools=null,this.sdfScheduleRefresh=null,this.sdfDataContinuity=null,this.sdfPublicPreview=null,this.sdfUndo=null,this.sdfRetentionPolicyUpdate=null,this.pushDataflowCreate=null,this.invertAxis=null,this.noWaitTrialRenewal=null,this.recommendedContentUI=null,this.hideActionAsDefault=null,this.powerBIGoalsStatusRules=null,this.automaticAggregations=null,this.useReactRenderer=null,this.goalsShowImportFromFileUI=null,this.homeListSearchFilter=null,this.homeListM3_Test1=null,this.homeListM3_Test2=null,this.homeListFilterMenu=null,this.infiniteScorllHomeListM3=null;this.homeListVirtualScrollM2=null,this.recommendedViewDefault=null,this.homeListVirtualScroll=null,this.suppressDefaultTooltip=null,this.useModernBookmarksPane=null,this.useModernSelectionPane=null,this.newSearchPage=null,this.exportScorecard=null,this.loadGroupMetadataOptimization=null,this.rdlInfiniteScrolling=null,this.goalsAggregations=null,this.useModernVCDropdown=null,this.goalsSparklineChangeAggregations=null,this.goalsColumnSettings=null,this.goalsPermissionSettings=null,this.powerAutomateEntryPointFromGoalsUI=null,this.powerBIGoalsDragAndDrop=null,this.goalsXAxisDragAndDrop=null,this.goalsDelayDragAndDrop=null,this.powerBIGoalsMultipleGoalOwners=null,this.powerBIGoalsMultipleTargets=null,this.scorecardsInMyWorkspace=null,this.reliableProcessingHistory=null,this.rdlDeviceFingerprint=null,this.embeddedDeviceFingerprint=null,this.datasetsActionsWithAutoAssignTrial=null,this.datasetsHubFreeUser=null,this.datasetsSettingsUrl=null,this.capacityGen2RestoreToggle=null,this.goalsHubFRE=null,this.goalsAllowedOnShared=null,this.goalsDraftScorecards=null,this.reorderRec_Test1=null,this.reorderRec_Test2=null,this.recDefaultNoRecent=null,this.recommendedScaleCard=null,this.checkPbivizFileContentOnImport=null,this.goalsCustomizeStatus=null,this.copyVisualNoTimeout=null,this.rdlCreateSessionRefactor=null,this.rdlThrottlingIndicator=null,this.disableTrial=null,this.onObjectFormatting=null,this.goalsCategoricalValues=null,this.teamsLearnPageCards=null,this.teamsLearnTabCoachmark=null,this.onObjectEdit=null,this.formattedTableStringTest=null,this.teamsUseSDKSharing=null,this.goalsScorecardAccessBanner=null,this.onObjectSkittles=null,this.goalsMoveScorecard=null,this.goalsBulkDelete=null,this.updateScorecardDataset=null,this.goalsReportSource=null,this.addVisualIdToQueryDataAsHttpBodyId=null,this.trackTasks=null,this.trackChangeDetection=null,this.trackBrowserRender=null,this.testExperimentationSwitch=null,this.homeLayoutSelection=null,this.loadRecommendationsForNewUsers=null,this.deferVCLoading=null,this.deferVCLoadingChangeSection=null,this.deferVCLoadingEmbedOptions=null,this.deferReportPeripherals=null,this.deferCustomVCLoading=null,this.deferPreview=null,this.immediateQuery=null,this.immediateQueryOnWarmLoad=null,this.sessionExperimentation=null,this.lruCacheEvictionPolicy=null,this.onDemandApprovedResources=null,this.sectionApprovedResources=null,this.exp_deferCustomVCLoading=null,this.exp_deferVCLoading=null,this.exp_deferVCLoadingChangeSection=null,this.exp_deferVCLoading_timeoutLimit=null,this.exp_deferVCLoading_preloadFinishThreshold=null,this.exp_deferVCLoading_loadFinishThreshold=null,this.exp_deferVCLoading_primeNonQueryVisualResources=null,this.exp_deferReportPeripherals=null,this.exp_deferReportPeripherals_loadPeripheralsThreshold=null,this.exp_deferReportPeripherals_loadPeripheralsTimeout=null,this.exp_deferPreview=null,this.exp_immediateQuery=null,this.exp_immediateQueryOnWarmLoad=null,this.exp_noEmptyUpdate=null,this.exp_lruCacheEvictionPolicy=null,this.exp_saasReportIsAngularToThisPoint=null,this.exp_onDemandApprovedResources=null,this.exp_sectionApprovedResources=null,this.MultivariantExpTest_VariantA=null,this.MultivariantExpTest_VariantB=null,this.control_MultivariantExpTest=null,this.IsolationGroupExpTest=null,this.control_IsolationGroupExpTest=null,this.htmlLegend=null,this.allowAssigningTenantWorkspacesFromAzureCapacityAdmin=null,this.capacityMetricDrilldown=null,this.copyReportsToWorkspacesV2=null,this.allowFreeUsersToSubscribeInPremiumAppsUI=null,this.realTimeRefresh=null,this.realTimeRefreshDisabled=null,this.changeDetection=null,this.changeDetectionSimulation=null,this.externalConnectorSSO=null,this.tenantOutOfBoxVisualsEnabled=null,this.disablePublishToWebCreation=null,this.eimInformationProtectionColumnUISharedWithMe=null,this.eimInformationProtectionSccLink=null,this.ssasGetData=null,this.webModelingViewEnabled=null,this.newLookForAll=null,this.allowOldLookUI=null,this.yellowIntegrationOfPowerBI=null,this.newLookOnForNewUsers=null,this.analyzeInExcelOdcFallbackUI=null,this.analyzeInExcelToExcelOnline=null,this.irisCoreEnabled=null,this.esriEmbedEnabled=null,this.esriP2WEnabled=null,this.approvedServiceApps=null,this.redirectToStaticPageInTeams=null,this.quickMeasuresModern=null,this.conditionalFormattingModern=null,this.eimInformationProtectionStoreOptimization=null,this.eimSidePaneWithoutAngularJS=null,this.shouldFlushClientCacheForAPR=null,this.navigateToDatasetDetails=null,this.accessRequestDatasetsUI=null,this.eimInformationProtectionRdlReportLabelingUI=null,this.consumePublicCvsWithoutRps=null,this.stopPublicRpsPopulation=null,this.datasetDetailsSidePaneUI=null,this.datasetDetailsSidePaneDefaultOpenUI=null,this.discoverDatasetsUI=null,this.readonlyDatasetsUI=null,this.dlpPolicyTip=null,this.dataQuality=null,this.datasetDescriptionGetDatasetAPI=null,this.cdsaCCEmailContactsOnRefreshFailure=null,this.reportTileModern=null,this.createRdlFromReportMenu=null,this.PinReportToTeamsTab=null,this.pinReportNavigateUsingDeepLink=null,this.showNewVisualsMarketplace=null,this.addFolderArtifactsToGroupMetadata=null,this.workbookTileModern=null,this.cesFeedbackTenantSetting=null,this.useNewDashboard=null,this.showNewVisualsMarketplacePBID=null,this.encodeContextForChatInTeams=null,this.showAADSSOForGateway=null,this.showDremioSSO=null,this.chooseWorkspaceInReportSaveAs=null,this.datasetHubImpactAnalysis=null,this.ExportToExcelMatrixVisualData=null,this.showNonSdpInMP=null,this.accessInPlaceSharingDatasetSetting=null,this.dataflowEndorsementSettingsMigration=null,this.forceAdminPortalSurvey=null,this.textboxAtMention=null,this.multiRowCardSelection=null,this.datasetsInRecentPage=null,this.workspaceAdminSubscriptions=null,this.showPinnedTile=null,this.showFraDeprecationMessageBanner=null,this.datahubUnifyRecentAndAll=null,this.showAppBarInTeamsTabView=null,this.deprecateFraOnGen1=null,this.modernEmbedDialogs=null,this.goalsBulkEditing=null,this.useCVLicenses=null,this.useLegacyQueryCache=null,this.showModernSettings=null,this.privilegeWebAccess=null,this.privilegeLocalStorage=null,this.privilegeUX=null,this.leadsTesting=null,this.newReportMetadataEndpoint=null,this.exp_newReportMetadataEndpoint=null,this.goalsHierarchies=null,this.goalsVisualSparklines=null,this.splitHelpTooltip=null,this.cvSkipExtraResize=null,this.workspaceAdminSubscriptionsSurvey=null,this.showInTeamsPivotInOfficeAndOutlook=null,this.supportQuickCreatePasteOrEnterDataInOfficeAndOutlook=null,this.powerPlatformSolutionsIntegration=null,this.useSynchronousQueryDataForExportDashboard=null,this.searchAllDatahubTable=null,this.goalsTakeOverConnection=null,this.showPinReportIconInMetaOS=null,this.showExternalSharingTenant=null,this.EnforceSubscriptionExternalUsersTenantSwitchInBE=null,this.allowCVLocalStorageTenantSwitch=null}})(powerbi=powerbi||{});;
"use strict";var powerbi,__awaiter=this&&this.__awaiter||function(e,a,s,c){return new(s=s||Promise)(function(r,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((c=c.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(r,n){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}},__spreadArray=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};!(function(t){!(function(){(t.common||(t.common={})).createLazyInjector=function(e,t,r,n){var o=new i(e,t,r,n,{});return function(e){return o.get(e)}};var i=(e.prototype.get=function(v){return __awaiter(this,void 0,t.Promise,(function(){var t,r,n,o,i,a,s,c,u,l,h,f,p,d,y,m=this;return __generator(this,(function(e){switch(e.label){case 0:if(void 0!==(t=this.instances[v]))return[2,t.promise];if(t=this.instances[v]=this.promiseFactory.defer(),r=this.factories[v],n=r.ng,o=_.size(n),h=r.modular,f=_.size(h),i=new Array(o+f),a=0,o)for(s=this.$inj,c=0,u=n;c<u.length;c++)l=u[c],i[a++]=s.get(l,v);if(!f)return[3,4];f=_.map(h,(function(e){return m.get(e)})),h=0,f=f,e.label=1;case 1:return h<f.length?(y=f[h],p=i,d=a++,[4,y]):[3,4];case 2:p[d]=e.sent(),e.label=3;case 3:return h++,[3,1];case 4:return[4,this.loader.require(r.source)];case 5:return y=e.sent(),t.resolve(r.fn.apply(r,__spreadArray([y],i||[]))),[2,t.promise]}}))}))},e);function e(e,t,r,n,o){this.loader=e,this.promiseFactory=t,this.$inj=r,this.factories=n,this.instances=o}})()})(powerbi=powerbi||{}),(function(e){(e=(e=e.common||(e.common={})).LazyScopedInterop||(e.LazyScopedInterop={})).LegacyToModern="$$modern$$",e.ModernToLegacy="$$legacy$$",e.makeInteropServiceName=function(e,t){return t+e},e.isInteropServiceName=function(e,t){return 0===e.indexOf(t)},e.getInteropServiceName=function(e,t){return e.slice(t.length)}})(powerbi=powerbi||{}),(function(i){var e;(function(e){var t=(r.prototype.setHostEnv=function(e){this.hostEnv=e},r);function r(){var n=this;this.$get=["$ocLazyLoad","moduleLoader","promiseFactory",function(e,t,r){return n.hostEnv,new o(e,t,n.hostEnv,r)}]}e.PbiLazyLoadProvider=t;var o=(n.prototype.load=function(o){return __awaiter(this,void 0,i.Promise,(function(){var t,r,n;return __generator(this,(function(e){switch(e.label){case 0:return t=o.name,r=o.namespace,[4,this.moduleLoader.require(o.dependency)];case 1:return n=e.sent(),[4,this.isLoaded(t)];case 2:return e.sent()?[2,!1]:((n=!_.isEmpty(r)&&!i.ModuleLoader.isModuleES6(o.dependency)?this.getNamespaceObject(r):n)&&n.registerBuildingBlocksForHost&&n.registerBuildingBlocksForHost(this.hostEnv),[4,this.$ocLazyLoad.inject(t)]);case 3:return e.sent(),[2,!0]}}))}))},n.prototype.isLoaded=function(e){var t=this.$ocLazyLoad.getModules();return this.promiseFactory.resolve(_.includes(t,e))},n.prototype.getNamespaceObject=function(e){for(var e=e.split("."),t=window,r=0,n=e;r<n.length;r++)t=t[n[r]];return t},n);function n(e,t,r,n){this.$ocLazyLoad=e,this.moduleLoader=t,this.hostEnv=r,this.promiseFactory=n}})((e=i.common||(i.common={})).services||(e.services={}))})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(e){(function(l){l.AvailableScopedServices=["itemPicker","conditionalFormattingDialogViewModelService","dataSources","eventBridge","explorationNavigation","explorationCapabilities","groupAuthoring","groupingDesignStateService","lazyScoped","modelAuthoring","modelChangeHandler","schemaItemActivation","selection","shell","visualAuthoring","visualPlugin"],l.AvailableAngularServices=["aggrOps","commandStore","conceptualSchemaProxy","highContrastCssGenerationService","displayNameService","dragDataService","dropdown","errorService","explorationSerializer","featureSwitchService","fileSaver","highlight","lazy","localizationService","checkUnsavedService","modalDialogService","promiseFactory","screenReaderService","svgProvider","telemetryService","tooltipService","visualPlugin","hostTooltip"];var r="HostModalDialogScopeIdentifier";l.createHostModalDialogScope=function(e){return(e=e.$new(!0))[r]=!0,e},l.validateHostModalDialogServices=function(e,o,i){if(window.DEBUG)for(o=o||[],i=i||[];e;){if(e[r]){var t=_.filter(o,(function(e){return!(_.startsWith(e,"$")||_.includes(l.AvailableAngularServices,e))})),a=_.filter(i,(function(e){return!_.includes(l.AvailableScopedServices,e)}));return _.isEmpty(t),t.join(","),_.isEmpty(a),void a.join(",")}e=e.$parent}}})((e=e.common||(e.common={})).HostModalDialogServices||(e.HostModalDialogServices={}))})(powerbi=powerbi||{}),(function(d){!(function(r){var o=jsCommon.ModalDialog;r.createModalDialogService=function(e,o,i,t,a,l,r,n){return new s(e,o,i,t,a,l,r,n)};var s=(g.prototype.showWebModalDialog=function(e){return this.showDialogWithPromise(this.rootScope.$new(!0),e)},g.prototype.showHostModalDialog=function(e){var o=r.HostModalDialogServices.createHostModalDialogScope(this.rootScope);if(!this.isModernDialog(e))return e.bindings&&(e.bindings=JSON.parse(JSON.stringify(e.bindings))),this.showDialogWithPromise(o,e,!0)},g.prototype.isModernDialog=function(e){return void 0!==e.componentName},g.prototype.close=function(e){this.componentDialogTaskStack.length,this.componentDialogTaskStack.length;var o=this.componentDialogTaskStack.pop();return o&&o.resolve(e),this.promiseFactory.resolve()},g.getModalDialog=function(e){return g.modalDialog=!g.modalDialog?new o(null,e):g.modalDialog},g.errorServiceModalDialogControl=function(e){return g.getModalDialog(e)},g.prototype.showLegacyWebModalDialog=function(o){var i=this;o.template||o.templateUrl;var e=o.template||this.templateCacheService.get(o.templateUrl),t=o.dialogActions||[],a=this.promiseFactory.defer(),l=angular.extend(o.scope,{closeDialog:_.noop,onDialogDisplayed:a.promise}),r=this.compileService(e)(l);return this.timeoutService((function(){i.modalDialog.showCustomDialog(o.dialogName,r,t,(function(e){return i.onDialogDisplayed(e,o,l,a)}),o.isDismissable,o.focusOnFirstButton,o.dialogCssClass,o.containerCssClass,(function(){return i.onDialogClosed(l,o.onCloseDialog)}),o.notificationType,o.notificationText,o.noActiveButtons,o.htmlMessageText,o.flipContentAndNotificationOrder,void 0,o.closeOnEsc)})),this.promiseFactory.resolve(l)},g.prototype.onDialogDisplayed=function(e,o,i,t){var a=this;i.closeDialog=function(){return a.modalDialog.hideDialog()},t.resolve(null);t=e.find("button[autofocus]");_.some(t)&&t.focus();var l=e.closest(g.modalDialogSelector),e=function(){return l.draggable({containment:"parent",handle:g.modalDialogDragHandleSelector})};l.draggable?e():this.moduleLoader.require(r.modules.JQueryUIModule).then(e),window.DEBUG&&(l.find("dialog-frame").length,o.containerCssClass)},g.prototype.onDialogClosed=function(e,o){e.$destroy(),o&&o()},g.prototype.showDialogWithPromise=function(o,i,t){var a=this,l=this.promiseFactory.defer();if(0!==this.componentDialogTaskStack.length)return this.telemetryService.logEvent(d.telemetry.ShowModalDialogSkippedNestedDialogs,{dialogName:i.dialogName}),l.reject("nested dialogs is not yet implemented."),d.createRejectablePromise(l);function e(){if(0!==a.componentDialogTaskStack.length)return a.telemetryService.logEvent(d.telemetry.ShowModalDialogSkippedNestedDialogs,{dialogName:i.dialogName}),void l.reject("nested dialogs is not yet implemented.");_.assign(o,i.bindings);var e=a.templateCacheService.get(i.definitionTemplateCachePath),e={scope:o,dialogName:i.dialogTitle,template:e=t?"<legacy-scoped-root><exploration-scoped-services-bridge><host-dialog-container>"+e+"</host-dialog-container></exploration-scoped-services-bridge></legacy-scoped-root>":e,onCloseDialog:function(){_.includes(a.componentDialogTaskStack,l)&&a.close()},dialogCssClass:i.dialogCssClass,containerCssClass:g.componentDialogHostCssClass,isDismissable:null==i.isDismissable||i.isDismissable};a.showLegacyWebModalDialog(e).then((function(e){var o;a.componentDialogTaskStack.push(l),l.promise.catch((function(e){a.telemetryService.logEvent(d.telemetry.ShowModalDialogRejected,{dialogName:i.dialogName,rejectReason:JSON.stringify(e)}),_.includes(a.componentDialogTaskStack,l)&&a.close(void 0)})).finally((function(){e.closeDialog()})),t||(o=i).onDialogDisplayed&&e.onDialogDisplayed.then((function(){return o.onDialogDisplayed.resolve(null)}))}))}var r=[];if(i.lazyModuleDependencies){for(var n=0,s=i.lazyModuleDependencies;n<s.length;n++){var c=s[n];r.push(this.pbiLazyLoad.load(c))}this.promiseFactory.all(r).then(e)}else e();return d.createRejectablePromise(l)},g.modalDialogSelector=".infonav-modalDialog",g.modalDialogTitleSelector=".infonav-dialogTitle",g.componentDialogHostCssClass="componentDialog",g.modalDialogDragHandleSelector=g.modalDialogTitleSelector+", "+(g.dialogFrameDragHandleSelector="dialog-frame .frameDragHandle"),g);function g(e,o,i,t,a,l,r,n){this.compileService=e,this.pbiLazyLoad=o,this.promiseFactory=i,this.templateCacheService=t,this.timeoutService=a,this.rootScope=l,this.telemetryService=r,this.moduleLoader=n,this.modalDialog=g.getModalDialog(),this.componentDialogTaskStack=[]}r.ModalDialogService=s})(d.common||(d.common={}))})(powerbi=powerbi||{}),(function(a){!(function(o){var e=jsCommon.Utility,i=a.telemetryEventFactory,t=a.telemetry.EventFactories;e?e.generateGuid:Function.prototype;o.ShowModalDialogRejectedEventName="PBI.ShowModalDialogRejected",o.ShowModalDialogRejected=t[o.ShowModalDialogRejectedEventName]=function(e){return i({name:o.ShowModalDialogRejectedEventName,info:e,category:a.TelemetryCategory.CriticalError,loggers:o.ShowModalDialogRejectedLoggers})},o.ShowModalDialogSkippedNestedDialogsEventName="PBI.ShowModalDialogSkippedNestedDialogs",o.ShowModalDialogSkippedNestedDialogs=t[o.ShowModalDialogSkippedNestedDialogsEventName]=function(e){return i({name:o.ShowModalDialogSkippedNestedDialogsEventName,info:e,category:a.TelemetryCategory.CriticalError,loggers:o.ShowModalDialogSkippedNestedDialogsLoggers})},o.TriggerRefreshEventName="PBI.TriggerRefresh",o.TriggerRefresh=t[o.TriggerRefreshEventName]=function(e){return i({name:o.TriggerRefreshEventName,baseEvent:o.BaseEvent(e),info:e,loggers:o.TriggerRefreshLoggers})}})(a.telemetry||(a.telemetry={}))})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(e){!(function(){(e.common||(e.common={})).createChannelSubscriptionManager=function(n){return new t(n)};var t=(n.prototype.subscribe=function(n,t){t=this.subscribeFunction(n,t);return t&&$.isFunction(t)&&this.unsubscribeList.push(t),this},n.prototype.subscribeAsync=function(n,e){return this.subscribe(n,(function(n,t){n=e(n,t);t.promises&&n&&t.promises.push(n)}))},n.prototype.unsubscribeAll=function(){var n=-1,t=this.unsubscribeList.length;if(t){for(n=t;t;)this.unsubscribeList[--t]();this.unsubscribeList.splice(0,n)}return n},n);function n(n){this.subscribeFunction=n,this.unsubscribeList=[]}})()})(powerbi=powerbi||{}),(function(i){!(function(n){n.createEventBridge=function(){return new t};var t=(e.prototype.getChannel=function(n){return this.getOrCreateChannel(n,!0)},e.prototype.getOrCreateChannel=function(n,t){var e=this.channelMap[n];if(!e){if(!t)return;this.channelMap[n]=e={}}return $(e)},e.prototype.createChannelSubscriptionManager=function(){var e=this;return n.createChannelSubscriptionManager((function(n,t){return e.subscribeToChannel(n,t)}))},e.prototype.subscribeToChannel=function(n,t){function e(){$(i).off(n.name,null,t)}var i=this.getChannel(n.type);return e(),$(i).on(n.name,{},t),e},e.prototype.publishToChannel=function(n,t){var e=this.getOrCreateChannel(n.type,!1);e&&e.trigger(n.name,t)},e.prototype.publishToChannelAsync=function(n,t){var e=[],t=t;return t.promises=e,this.publishToChannel(n,t),t.promises=void 0,i.Promise.allSettled(e)},e);function e(){this.channelMap={}}})(i.common||(i.common={}))})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(r){var e;(function(e){e.activityId="ActivityId",e.requestId="RequestId",e.mwcRootActivityId="x-ms-root-activity-id",e.http="http",e.uploadFileSizeHeaderName="X-PowerBI-UploadFileSize",e.previousTenantIdHeaderName="X-PowerBI-User-PreviousTenantId",e.refreshAccessToken="refreshAccessToken",e.localFileSelectedEventName="localFileSelected",e.chooseLocalFileEventName="chooseLocalFile",e.localFileRemoveEventName="localFileRemove",e.liveClientIdKey="LiveClientId",e.liveLogoutUrl="https://login.live.com/oauth20_logout.srf?client_id={0}&redirect_uri={1}/providers/excel/msaRedirect?logout=1",e.loadExcelWorkbookEventName="loadExcelWorkbook",e.textInputOnBlurEventName="textInputOnBlur",e.dashboardTileRepeatFinishedEvent="dashboardTileRepeatFinished",e.azureCapacityPivot="azure",e.officeCapacityPivot="office",e.editableLabelOnBlurEventName="editableLabelOnBlur",e.defaultPortraitPrintWidth=673,e.defaultPortraitPrintHeight=860,e.defaultLandscapePrintWidth=940,e.defaultLandscapePrintHeight=578,(a=e.tileActions||(e.tileActions={})).openReportActionName="/openReport",a.openWorkbookActionName="/openWorkbook",a.openQnAActionName="/openQnA",a.openInFocusActionName="/openInFocus",a.openInsightsActionName="/openInsights",(a.custom||(a.custom={})).openUrlActionName="/openUrl",e.OverlayCloseEventName="overlay.close",e.tagName="tagName",e.myWorkspaceFolderId="me",e.RDataSourceName="R",e.onPremiseVSName="sobe_onpremisevirtualserver",e.previewHomeKey="previewHome",e.previewSettingChangedEventName="previewSettingChanged",e.HideIntroduceAppBarKey="hideIntroduceAppBar",(a=e.navigation||(e.navigation={})).stateChangeStart="$stateChangeStart",a.stateChangeSuccess="$stateChangeSuccess",a.locationChangeStart="$locationChangeStart",a.getDataDirectQueryUrlParams="server&database&user&dsid",a.spoImportUrlParams="personalUrl&name&listId&documentId&resourceId",a.getDataMashupUrlParams="paramsCode",a.getDataForceConnect="getDataForceConnect",a.bookmarkQueryParamName="bookmarkGuid",a.bookmarkUsageQueryParamName="bookmarkUsage",a.pivotParamName="pivot",a.saasMarketplaceParamName="saasMarketplace",a.selectedQueryIdParamName="selectedQueryId",a.gatewayObjectIdParamName="gatewayObjectId",a.dataSourceObjectIdParamName="dataSourceObjectId",(a=a.states||(a.states={})).appDashboardSubscription="landing.groups.group.apps.app.dashboards.dashboard.subscriptions.subscription",a.appDashboardSubscriptions="landing.groups.group.apps.app.dashboards.dashboard.subscriptions",a.appReports="landing.groups.group.apps.app.reports",a.appReport="landing.groups.group.apps.app.reports.report",a.appReportPage="landing.groups.group.apps.app.reports.report.page",a.appReportSubscription="landing.groups.group.apps.app.reports.report.page.subscription",a.appRdlReports="landing.groups.group.apps.app.rdlReports",a.appRdlReport="landing.groups.group.apps.app.rdlReports.rdlReport",a.appRdlReportSubscription="landing.groups.group.apps.app.rdlReports.rdlReport.subscription",a.appWorkbooks="landing.groups.group.apps.app.workbooks",a.appWorkbook="landing.groups.group.apps.app.workbooks.workbook",a.appInstanceReports="landing.groups.group.apps.app.instances.instance.reports",a.appInstanceReport="landing.groups.group.apps.app.instances.instance.reports.report",a.appInstanceReportPage="landing.groups.group.apps.app.instances.instance.reports.report.page",a.dashboardSubscription="landing.groups.group.dashboards.dashboard.subscriptions.subscription",a.dashboardSubscriptions="landing.groups.group.dashboards.dashboard.subscriptions",a.datasets="landing.groups.group.datasets",a.dataset="landing.groups.group.datasets.dataset",a.modeling="landing.groups.group.modeling",a.model="landing.groups.group.modeling.model",a.permissionCenter="landing.groups.group.permissionCenter",a.dashboardPermission="landing.groups.group.permissionCenter.dashboard",a.datasetPermission="landing.groups.group.permissionCenter.dataset",a.reportPermission="landing.groups.group.permissionCenter.report",a.workbookPermission="landing.groups.group.permissionCenter.workbook",a.reports="landing.groups.group.reports",a.report="landing.groups.group.reports.report",a.reportPage="landing.groups.group.reports.report.page",a.reportShare="landing.groups.group.reports.report.page.share",a.reportSubscription="landing.groups.group.reports.report.page.subscription",a.reportSubscriptions="landing.groups.group.reports.report.page.subscriptions",a.relatedContent="landing.groups.group.reports.report.page.relatedContent",a.sharedReports="landing.groups.group.sharedWithMe.reports",a.sharedReport="landing.groups.group.sharedWithMe.reports.report",a.sharedReportPage="landing.groups.group.sharedWithMe.reports.report.page",a.workbooks="landing.groups.group.workbooks",a.workbook="landing.groups.group.workbooks.workbook",e.contractRowProtocolThreshold=50,e.datasetShowDatasourceUpdatedNotification="datasetShowDatasourceUpdatedNotification",e.datasetDatasourceUpdated="datasetDatasourceUpdated",e.scopeDestroyEventName="$destroy",e.preparingPackageRefreshNotificationDuration=3e4,e.packageRefreshNotificationDuration=3e5,e.showManagePermissionEventName="showManagePermission",e.defaultPopupWindowWidth=980,e.defaultPopupWindowHeight=640,e.datasetShowAuthDialog="datasetShowAuthDialog",e.datasetShowParameterDialogAfterInvalidParameter="datasetShowParameterDialogAfterInvalidParameter",e.ContentProviderInvalidModelParameterErrorCode="ContentProvider_InvalidModelParameter",e.pinReportPageToDashboard="pinReportPageToDashboard",e.allWeekDays=127,e.maxRefreshTimeNumber=8,e.maxRefreshTimeNumberForDatasetsInCapacity=48,e.numToastLinksToShow=2,e.enterPrintModeEvent="enterPrintModeEvent",e.exitPrintModeEvent="exitPrintModeEvent",e.database="Database",e.server="Server",e.errorCode="ErrorCode",e.time="Time",e.version="Version",e.tileErrorEventName="tileError",(a=e.serverErrors||(e.serverErrors={})).packageOperationInProgress="PackageOperationInProgress",a.dataRefreshTooSoon="DataRefreshTooSoon",a.onPremiseServiceException="OnPremiseServiceException",e.cloudRLSAccessDeniedErrorCode="CloudRLSAccessDeniedErrorCode";var a=location;e.hostOrigin=a.origin||location.protocol+"//"+location.hostname,e.contentProviderStoreTileListRefreshEventName="contentProviderStoreTileListRefresh",e.contentProviderStoreConnectEventName="contentProviderStoreConnect",e.contentProviderStoreConfigurationUIVisibilityChangedEventName="contentProviderStoreConfigurationUIVisibilityChanged",e.contentProviderStoreMashupContentProviderLoadedMessage="contentProviderStoreMashupContentProviderLoadedMessage",e.contentProviderStoreCancelModalDialogMessage="contentProviderStoreCancelModalDialogMessage",e.contentProviderStoreCloseModalDialogMessage="contentProviderStoreCloseModalDialogMessage",e.contentProviderStoreGoBackModalDialogMessage="contentProviderStoreGoBackModalDialogMessage",e.contentProviderStoreGoToAppDocModalDialogMessage="contentProviderStoreGoToAppDocModalDialogMessage",e.contentProviderStoreShowLoadNotificationMessage="contentProviderStoreShowLoadNotificationMessage",e.contentProviderStoreHideLoadNotificationMessage="contentProviderStoreHideLoadNotificationMessage",e.contentProviderStoreRenderAsModalDialogMode="renderAsModalDialog",e.contentProviderStoreRenderAsFullScreenMode="renderAsFullScreen",e.contentProviderStoreTileMaxSortPriority=999,e.contentProviderStoreCustomConfigurationService="customConfigurationService",e.contentProviderStoreAuthorizationCodePostbackEventName="authorizationCodePostback",e.contentProviderStoreCustomConfigurationPostbackEventName="customConfigurationPostback",e.excelContentProviderId=6,e.pbiDesktopContentProviderId=7,e.pbiModelingServiceContentProviderId=26,e.fileUploadLimitInByte=262144e3,e.oneGBFileUploadLimitInByte=1073741824,e.retailSamplesContentProviderId=22,e.personalOneDriveContentProviderId=1001,e.oneDriveProContentProviderId=1002,e.groupOneDriveContentProviderId=1004,e.folderPreferredSharePointProviderId=1006,e.generatedSamplesContentProvidersMap={22:"Retail Sales Analysis"},e.emailsListFindUsersLimit=10,e.AdminPortalGroupGUID="PowerBIAdminGroup",e.MaxSupportedZIndexValue=2147483647,(a=e.featureSwitches||(e.featureSwitches={})).microsoftOrgAppEnabled="microsoftOrgAppEnabled",a.withInDXTFeatureSwitchEnabled="withinDXT",a.contentProviderSharePointDocumentLibrariesEnabled="sharePointDocumentLibrariesEnabled",a.vsoVnextAppEnabled="vsoVnextAppEnabled",a.sparkAppEnabled="sparkAppEnabled",a.psaPracticeManagerAppEnabled="psaPracticeManagerAppEnabled",a.anonymousEmbeddingEnabled="anonymousEmbeddingEnabled",a.psaResourceManagerAppEnabled="psaResourceManagerAppEnabled",a.psaAccountManagerAppEnabled="psaAccountManagerAppEnabled",a.azureUsageAndBillingAppEnabled="azureUsageAndBillingAppEnabled",a.bingAdsAppEnabled="bingAdsAppEnabled",a.workspacesV2GAFeatures="workspacesV2GAFeatures",e.clusterLocations={Cluster_Location_EastUS2:["wabi-us-east2","wabi-paas-1-backup-eus2","wabi-us-east2-a-backup","wabi-us-east2-b-primary","wabi-us-east2-c-primary","wabi-us-east2-b-backup"],Cluster_Location_EastUS:["wabi-us-east","wabi-us-east-a-primary","wabi-us-east-b-backup","wabi-us-east-c-backup","wabi-us-east-backup","wabi-us-east-b-primary","wabi-us-east-d-backup"],Cluster_Location_NorthCentralUS:["wabi-us-north-central","wabi-us-north-central-b-backup","wabi-us-north-central-c-primary","wabi-us-north-central-d-primary","wabi-us-north-central-e-primary","wabi-us-north-central-f-primary","wabi-us-north-central-g-primary","wabi-us-north-central-h-primary","wabi-us-north-central-backup","wabi-us-north-central-j-primary"],Cluster_Location_SouthCentralUS:["wabi-south-central-us","wabi-south-central-us-b-primary","wabi-us-south-central-backup","wabi-paas-1-scus","wabi-us-south-central-c-backup","wabi-us-south-central-d-backup","wabi-us-south-central-e-backup","wabi-us-south-central-f-backup","wabi-us-south-central-g-backup","wabi-us-south-central-h-backup","wabi-us-south-central-i-backup","wabi-us-south-central-j-backup","wabi-us-south-central-a-backup"],Cluster_Location_WestUS:["wabi-west-us","wabi-tip-west-us","df-msit-wus","wabi-us-west-a-backup","wabi-west-us-b-primary","wabi-west-us-c-primary","wabi-west-us-d-primary","wabi-us-west-b-backup"],Cluster_Location_EastAsia:["wabi-east-asia-a-primary","wabi-east-asia","wabi-east-asia-b-backup","wabi-east-asia-b-primary","wabi-east-asia-c-backup"],Cluster_Location_WestUS2:["wabi-us-west2"],Cluster_Location_NorthEurope:["wabi-north-europe","wabi-europe-north2","wabi-europe-north-b","wabi-north-europe-b-backup","wabi-north-europe-c-primary","wabi-north-europe-d-backup","wabi-north-europe-d-primary","wabi-north-europe-e-primary","wabi-north-europe-f-primary","wabi-north-europe-g-primary","wabi-north-europe-h-primary","wabi-north-europe-i-primary","wabi-north-europe-j-primary","wabi-north-europe-k-primary","wabi-north-europe-l-primary","wabi-north-europe-e-backup","wabi-north-europe-m-primary","wabi-north-europe-n-primary","wabi-north-europe-o-primary","wabi-north-europe-p-primary","wabi-north-europe-q-primary"],Cluster_Location_WestEurope:["wabi-west-europe","wabi-europe-west2","wabi-west-europe-b-primary","wabi-west-europe-c-backup","wabi-west-europe-d-primary","wabi-west-europe-d-backup","wabi-west-europe-e-backup","wabi-west-europe-f-backup","wabi-west-europe-g-backup","wabi-west-europe-h-backup","wabi-west-europe-i-backup","wabi-west-europe-j-backup","wabi-west-europe-k-backup","wabi-west-europe-l-backup","wabi-west-europe-e-primary","wabi-west-europe-m-backup","wabi-west-europe-n-backup","wabi-west-europe-o-backup","wabi-west-europe-p-backup","wabi-west-europe-q-backup"],Cluster_Location_SoutheastAsia:["wabi-south-east-asia","wabi-southeast-asia-a-backup","wabi-south-east-asia-b-primary","wabi-singapore-a-primary","wabi-singapore-a-backup","wabi-southeast-asia-b-backup"],Cluster_Location_AustraliaEast:["wabi-australia-east","wabi-australia-east-a-primary","wabi-australia-east-b-backup","wabi-australia-east-b-primary"],Cluster_Location_AustraliaSouthEast:["wabi-australia-southeast","wabi-australia-southeast-a-backup","wabi-australia-southeast-b-primary","wabi-australia-southeast-b-backup","wabi-australia-southeast-c-primary"],Cluster_Location_BrazilSouth:["wabi-brazil-south","wabi-brazil-south-b-primary","wabi-brazil-south-c-primary","wabi-brazil-south-c-backup"],Cluster_Location_BrazilSoutheast:["wabi-brazil-southeast-backup","wabi-brazil-southeast-b-backup"],Cluster_Location_CentralUSEUAP:["wabi-staging-us-east"],Cluster_Location_Staging:["wabi-staging-a7","wabi-staging"],Cluster_Location_Integration_Edog:["biazure-int-edog"],Cluster_Location_Integration_Int3:["bi-azure-int3"],Cluster_Location_CanadaCentral:["wabi-canada-central","wabi-canada-central-b-primary"],Cluster_Location_CanadaEast:["wabi-canada-east-backup","wabi-canada-east-b-backup"],Cluster_Location_JapanEast:["wabi-japan-east"],Cluster_Location_UKSouth:["wabi-uk-south","wabi-uk-south-b-primary","wabi-uk-south-c-primary"],Cluster_Location_UKWest:["wabi-uk-west-backup","wabi-uk-west-b-backup","wabi-uk-west-c-backup"],Cluster_Location_GermanyCentral:["wabi-germany-central"],Cluster_Location_GermanyNortheast:["wabi-germany-northeast"],Cluster_Location_ChinaEast:["wabi-mc-sha"],Cluster_Location_ChinaNorth:["wabi-mc-bjb"],Cluster_Location_WestIndia:["wabi-india-west","wabi-india-west-a-backup"],Cluster_Location_WestCentralUS:["df-msit-scus"],Cluster_Location_USGCCTexas:["wabi-us-gov-iowa"],Cluster_Location_USGCCVirginia:["wabi-us-gov-virginia"],Cluster_Location_USGCCHighTexas:["wabi-us-gov-tb-texas"],Cluster_Location_USDoDCentral:["wabi-us-dod-iowa"],Cluster_Location_CentralUS:["wabi-us-central-a-primary","wabi-us-central-b-backup","wabi-us-central-c-backup","wabi-us-central-backup","wabi-us-central-b-primary"],Cluster_Location_CentralIndia:["wabi-india-central-a-primary"],Cluster_Location_SouthIndia:["wabi-india-south-backup","wabi-india-south-a-backup"],Cluster_Location_KoreaCentral:["wabi-korea-central-a-primary"],Cluster_Location_KoreaSouth:["wabi-korea-south-a-backup"],Cluster_Location_FranceCentral:["wabi-france-central-a-primary"],Cluster_Location_FranceSouth:["wabi-france-south-a-backup"],Cluster_Location_ChinaEast2:["wabi-mc-east2-a-primary"],Cluster_Location_ChinaNorth2:["wabi-mc-north2-a-backup"],Cluster_Location_EastUS2EUAP:["wabi-dxt-bcdr-us-east2"],Cluster_Location_SouthAfricaNorth:["wabi-south-africa-north-a-primary"],Cluster_Location_SouthAfricaWest:["wabi-south-africa-west-a-backup"],Cluster_Location_UAENorth:["wabi-uae-north-a-primary"],Cluster_Location_UAECentral:["wabi-uae-central-a-backup"],Cluster_Location_GermanyWestCentral:["wabi-germany-west-central-primary"],Cluster_Location_GermanyNorth:["wabi-germany-north-backup"],Cluster_Location_SwitzerlandNorth:["wabi-switzerland-north-primary"],Cluster_Location_SwitzerlandWest:["wabi-switzerland-west-backup"],Cluster_Location_NorwayEast:["wabi-norway-east-primary"],Cluster_Location_NorwayWest:["wabi-norway-west-backup"],Cluster_Location_SwedenCentral:["wabi-sweden-central-primary"],Cluster_Location_SwedenSouth:["wabi-sweden-south-backup"]},e.clusterBackendUri=[{backendUri:void 0,hostNameMatch:["invalidHostName"],index:0},{backendUri:"https://wabi-us-east2-redirect.analysis.windows.net",hostNameMatch:["wabi-us-east2"],index:1},{backendUri:"https://wabi-us-east-redirect.analysis.windows.net",hostNameMatch:["wabi-us-east","wabi-staging-us-east"],index:2},{backendUri:"https://wabi-us-north-central-redirect.analysis.windows.net",hostNameMatch:["wabi-us-north-central"],index:3},{backendUri:"https://wabi-south-central-us-redirect.analysis.windows.net",hostNameMatch:["wabi-south-central-us","wabi-us-south-central-backup"],index:4},{backendUri:"https://df-msit-scus-redirect.analysis.windows.net",hostNameMatch:["df-msit-scus"],index:5},{backendUri:"https://wabi-west-us-redirect.analysis.windows.net",hostNameMatch:["wabi-west-us","wabi-tip-west-us"],index:6},{backendUri:"https://df-msit-wus-redirect.analysis.windows.net",hostNameMatch:["df-msit-wus"],index:7},{backendUri:"https://wabi-north-europe-redirect.analysis.windows.net",hostNameMatch:["wabi-north-europe","wabi-europe-north2","wabi-europe-north-b"],index:8},{backendUri:"https://wabi-west-europe-redirect.analysis.windows.net",hostNameMatch:["wabi-west-europe","wabi-europe-west2"],index:9},{backendUri:"https://wabi-south-east-asia-redirect.analysis.windows.net",hostNameMatch:["wabi-south-east-asia","wabi-east-asia"],index:10},{backendUri:"https://wabi-staging-a7-redirect.analysis.windows.net",hostNameMatch:["wabi-staging-a7"],index:11},{backendUri:"https://biazure-int-edog-redirect.analysis-df.windows.net",hostNameMatch:["biazure-int-edog","bi-azure-int3"],index:12}],e.dsrDataReaderType="dsr",(a=e.ServiceNames||(e.ServiceNames={})).cacheService="CacheService",a.StandaloneHostProgressNotificationService="StandaloneHostProgressNotificationService",(a=e.CacheServiceOperationNames||(e.CacheServiceOperationNames={})).loadItem="Load",a.saveItem="Save",(a=e.ExploreGestures||(e.ExploreGestures={})).swipeStartEvent="swipestart",a.swipeMoveEvent="swipemove",a.swipeEndEvent="swipeend",(a=e.VisualType||(e.VisualType={})).card="card",a.kpi="kpi",e.dashboardSelector=".dashboard",e.tileContainerSelector=".tileContainer",e.needStrategySwapEventName="needStrategySwap",e.PhoneVersionMessage={confirmButtonMessage:"ModalDialogButtonText_Continue",titleMessage:"Create_Mobile_Authoring",contentMessage:"Create_Mobile_Authoring_Content",hrefLink:"https://powerbi.microsoft.com/en-us/documentation/powerbi-service-create-dashboard-phone-view/",hrefLabel:"LearnMore"},e.ResetPhoneViewMessages={confirmButtonMessage:"Reset",titleMessage:"Dashboard_Authoring_Reset_Phone_View",contentMessage:"Dashboard_Authoring_Reset_Mobile_Layout_Content"},e.ResetTilesMessages={confirmButtonMessage:"Reset",titleMessage:"Dashboard_Authoring_Reset_Tiles",contentMessage:"Dashboard_Authoring_Reset_Tiles_Content"},e.UnpinAllTilesMessages={confirmButtonMessage:"Dashboard_Authoring_Unpin_All_Tiles_Confirm",titleMessage:"Dashboard_Authoring_Unpin_All_Tiles",contentMessage:"Dashboard_Authoring_Unpin_All_Tiles_Content"},e.isUsageMetricsPackage=function(e){var a=e.contentProviderId;return 103===a||102===a||e.packageType===r.common.contracts.PackageType.UsageMetricsV2},e.isScorecardPackage=function(e){return(null==e?void 0:e.packageType)===r.common.contracts.PackageType.Scorecard},e.isScorecardSourceReport=function(e){return(null==e?void 0:e.originalPackageType)===r.common.contracts.PackageType.Scorecard},e.isLegacyUsageMetricsContentProvider=function(e){return 103===e||102===e},e.isDatamartPackage=function(e){return(null==e?void 0:e.packageType)===r.common.contracts.PackageType.Datamart},e.FreeTrialPeriod=60,(a=e.invitation||(e.invitation={})).invitationCodeQueryParam="invitationCode",a.invitationCodeQueryParamV2="i",a.invitationClaimed="invitationClaimed",e.EmptyGuid="00000000-0000-0000-0000-000000000000",e.MaxInt32=2147483647})((e=r.common||(r.common={})).constants||(e.constants={}))})(powerbi=powerbi||{}),(function(e){var a;a=e.common||(e.common={}),(e=a.contracts||(a.contracts={})).freeUserServicePlans=["PowerBIServicePlan0"],e.premiumUserServicePlans=["PowerBIServicePlan1","PowerBIServicePlan2","PowerBIServicePlan3"],e.proPlusUserServicePlans=["PowerBIServicePlan3"],e.office365ServicePlans=["PowerBIServicePlan1"],e.proUserServicePlans=["PowerBIServicePlan1","PowerBIServicePlan2"],(a=e.PackageType||(e.PackageType={}))[a.Undefined=0]="Undefined",a[a.AppTemplate=1]="AppTemplate",a[a.AppInstance=2]="AppInstance",a[a.AppCopy=3]="AppCopy",a[a.UsageMetricsV2=4]="UsageMetricsV2",a[a.ProtectionMetrics=5]="ProtectionMetrics",a[a.AdminUsageMetrics=6]="AdminUsageMetrics",a[a.AdminPerformanceMetrics=7]="AdminPerformanceMetrics",a[a.Sample=8]="Sample",a[a.Scorecard=9]="Scorecard",a[a.TeamsAnalytics=10]="TeamsAnalytics",a[a.Datamart=11]="Datamart",(a=e.ContentProviderCategoryString||(e.ContentProviderCategoryString={})).None="",a.BuiltIn="BuiltIn",a.Organizational="Organizational",a.Services="Services",a.OrganizationalTemplate="OrganizationalTemplate",a.OrganizationalApp="OrganizationalApp",a.ServiceApp="ServiceApp",a.OrganizationalTemplateApp="OrganizationalTemplateApp",a.PowerBIServiceApp="PowerBIServiceApp",(a=e.ContentProviderClientCategory||(e.ContentProviderClientCategory={}))[a.Service=1]="Service",a[a.Organizational=2]="Organizational",a[a.File=3]="File",a[a.Sample=4]="Sample",a[a.Learn=5]="Learn",a[a.BigDataAndMore=6]="BigDataAndMore",a[a.Dataflows=7]="Dataflows",a[a.OrgContentPacks=8]="OrgContentPacks",a[a.Apps=9]="Apps",(a=e.ArtifactType||(e.ArtifactType={}))[a.Unknown=0]="Unknown",a[a.Dashboard=1]="Dashboard",a[a.Report=2]="Report",a[a.Model=3]="Model",a[a.Workbook=4]="Workbook",a[a.App=5]="App",a[a.RdlReport=6]="RdlReport",a[a.Dataflow=7]="Dataflow",a[a.Tile=8]="Tile",a[a.StreamingDataflow=9]="StreamingDataflow",a[a.Folder=10]="Folder",a[a.Datamart=11]="Datamart",a[a.Artifact=12]="Artifact",(a=e.FolderType||(e.FolderType={}))[a.MyFolder=0]="MyFolder",a[a.AppFolder=1]="AppFolder",a[a.AdminFolder=2]="AdminFolder",a[a.TransientFolder=1e4]="TransientFolder",(a=e.DataCacheModeType||(e.DataCacheModeType={}))[a.Import=0]="Import",a[a.DirectQuery=1]="DirectQuery",a[a.Mixed=2]="Mixed",(a=e.ContentTileType||(e.ContentTileType={}))[a.Favorite=1]="Favorite",a[a.Report=2]="Report",a[a.Dashboard=4]="Dashboard",a[a.Workbook=8]="Workbook",a[a.OrgApp=16]="OrgApp",a[a.MRU=128]="MRU",a[a.Workspace=256]="Workspace",a[a.Dataset=512]="Dataset",a[a.AppPlaceHolder=1024]="AppPlaceHolder",a[a.RdlReport=2048]="RdlReport",a[a.CdsaModel=4096]="CdsaModel",a[a.StreamingCdsaModel=8192]="StreamingCdsaModel",a[a.Scorecard=16384]="Scorecard",a[a.StreamingDataset=32768]="StreamingDataset",a[a.Datamart=65536]="Datamart",(a=e.DatasetHost||(e.DatasetHost={}))[a.Shared=0]="Shared",a[a.Dedicated=1]="Dedicated",a[a.ASAzure=2]="ASAzure",a[a.ASOnPrem=3]="ASOnPrem",(e=e.FavoriteType||(e.FavoriteType={}))[e.Dashboard=1]="Dashboard",e[e.Report=2]="Report",e[e.App=3]="App",e[e.RdlReport=4]="RdlReport",e[e.ResourcePackage=5]="ResourcePackage"})(powerbi=powerbi||{}),(function(e){var a;a=e.common||(e.common={}),(e=(a=(e=a.contracts||(a.contracts={})).gateway||(e.gateway={})).PrincipalType||(a.PrincipalType={}))[e.user=0]="user",e[e.group=1]="group",e[e.app=2]="app",(e=a.GatewayType||(a.GatewayType={}))[e.Resource=0]="Resource",e[e.Personal=1]="Personal",e[e.VirtualNetwork=2]="VirtualNetwork",(e=a.UnifiedGatewayPrincipalType||(a.UnifiedGatewayPrincipalType={})).User="User",e.Group="Group",e.App="App",e.PbiPaasWorkspace="PbiPaasWorkspace",e.PbiPaasCollection="PbiPaasCollection",e.Service="Service",(e=a.UnifiedGatewayRole||(a.UnifiedGatewayRole={})).Admin="Admin",e.ConnectionCreatorWithReshare="ConnectionCreatorWithReshare",e.ConnectionCreator="ConnectionCreator",e.ExistingConnectionsUser="ExistingConnectionsUser",(e=a.GatewayStatus||(a.GatewayStatus={}))[e.Live=0]="Live",e[e.NotInstalled=1]="NotInstalled",e[e.NotReachable=2]="NotReachable",e[e.Installed=3]="Installed",(e=a.CredentialType||(a.CredentialType={}))[e.NotSpecified=0]="NotSpecified",e[e.Windows=1]="Windows",e[e.Anonymous=2]="Anonymous",e[e.Basic=3]="Basic",e[e.Key=4]="Key",e[e.OAuth2=5]="OAuth2",e[e.EffectiveUserName=6]="EffectiveUserName",e[e.SingleSignOn=7]="SingleSignOn",e[e.WindowsWithoutImpersonation=8]="WindowsWithoutImpersonation",(e=a.PrivacyLevel||(a.PrivacyLevel={}))[e.None=0]="None",e[e.Private=1]="Private",e[e.Organizational=2]="Organizational",e[e.Public=3]="Public",(e=a.DataSourceType||(a.DataSourceType={}))[e.SqlServer=0]="SqlServer",e[e.AnalysisServices=1]="AnalysisServices",e[e.SAP=2]="SAP",e[e.File=3]="File",e[e.Folder=4]="Folder",e[e.Oracle=5]="Oracle",e[e.Teradata=6]="Teradata",e[e.SharePoint=7]="SharePoint",e[e.Web=8]="Web",e[e.OData=9]="OData",e[e.DB2=10]="DB2",e[e.MySql=11]="MySql",e[e.PostgreSql=12]="PostgreSql",e[e.Sybase=13]="Sybase",e[e.Extension=14]="Extension",e[e.SAPBW=15]="SAPBW",e[e.AzureTable=16]="AzureTable",e[e.AzureBlob=17]="AzureBlob",e[e.Informix=18]="Informix",e[e.ODBC=19]="ODBC",e[e.GoogleAnalytics=25]="GoogleAnalytics",e[e.Exchange=27]="Exchange",e[e.Facebook=28]="Facebook",e[e.HDInsight=29]="HDInsight",e[e.AzureMarketplace=30]="AzureMarketplace",e[e.ActiveDirectory=31]="ActiveDirectory",e[e.OleDb=35]="OleDb",e[e.AdoDotNet=36]="AdoDotNet",e[e.Salesforce=39]="Salesforce",e[e.SAPBWMessageServer=41]="SAPBWMessageServer",e[e.Essbase=43]="Essbase",e[e.AzureDataLakeStorage=44]="AzureDataLakeStorage",e[e.CDPA=47]="CDPA",(e=a.ConnectionStringPropertyName||(a.ConnectionStringPropertyName={}))[e.EffectiveUserName=0]="EffectiveUserName",e[e.CustomData=1]="CustomData",(a=a.DataSourceAnnotationUPNMappingAlgorithm||(a.DataSourceAnnotationUPNMappingAlgorithm={}))[a.FullStringReplacement=0]="FullStringReplacement",a[a.SubstringReplacement=1]="SubstringReplacement"})(powerbi=powerbi||{}),(function(e){var a,r,t;a=e.common||(e.common={}),r=a.contracts||(a.contracts={}),t=e.common.constants,e=r.ContentProviderClientCategory,r.contentProviderManifest=[{id:1003,providerName:"files-tutorial",displayText:"Learn about importing files",displayTextLocalizationKey:"GetData_FilesTutorial_Title",iconCSSClass:"content-provider-files-tutorial",category:0,clientCategory:e.File,configurationUIstyle:4,providerConfig:'{"FWLink":"https://go.microsoft.com/fwlink/?LinkID=613513"}',sortPriority:a.constants.contentProviderStoreTileMaxSortPriority},{id:1e3,providerName:"local-file",displayText:"Local File",displayTextLocalizationKey:"GetData_LocalFile_Title",iconCSSClass:"content-provider-local-file",category:0,clientCategory:e.File,configurationUIstyle:3,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:0},{id:1001,providerName:"onedrive-personal",displayText:"OneDrive - Personal",displayTextLocalizationKey:"GetData_OneDrivePersonal_Title",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:e.File,configurationPageUrl:"/providers/cloudfile/onedrive",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:2,authentication:{oAuth:{endpointRetrievalAPI:"/powerbi/providers/excel/authorizationEndpoint"}}},{id:1002,providerName:"onedrive-for-business",displayText:"OneDrive - Business",displayTextLocalizationKey:"GetData_OneDriveBusiness_Title",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:e.File,configurationPageUrl:"/providers/cloudfile/onedrivepro",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:1,disabledInArchivedContent:!0},{id:1004,providerName:"onedrive-for-business",displayText:"OneDrive - ",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:e.File,configurationPageUrl:"/providers/cloudfile/onedrivepro",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:1,disabledInArchivedContent:!0},{id:1005,providerName:"sharepoint-teamsites",displayText:"Sharepoint - Team Sites",displayTextLocalizationKey:"GetData_SharePoint_Title",iconCSSClass:"glyphicon sharePointIcon pbi-glyph-sharepoint",category:0,clientCategory:e.File,configurationPageUrl:"/providers/cloudfile/sharepoint",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:3,featureSwitch:a.constants.featureSwitches.contentProviderSharePointDocumentLibrariesEnabled,customConfigurationHandler:"views/contentProviderStore/customConfigHandlers/sharePointConfigHandler.html"},{id:1006,providerName:"sharepoint-folder",displayText:"SharePoint -",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:e.File,configurationPageUrl:"/providers/cloudfile/sharepoint",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:1,featureSwitch:a.constants.featureSwitches.workspacesV2GAFeatures,customConfigurationHandler:"views/contentProviderStore/customConfigHandlers/sharePointForFolderConfigHandler.html"},{id:25,providerKey:"9f29a2e5-02d7-4420-b133-d0a663befe00",providerName:"sql-server-analysis-services",displayText:"SQL Server Analysis Services",description:"GetData_SqlServerAnalysisServices",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=528956",iconCSSClass:"content-provider-sql-server-analysis-services",category:0,clientCategory:e.BigDataAndMore,configurationPageUrl:"/providers/AnalysisServer/",configurationUIstyle:1,sortPriority:2,requiresPremiumLicense:!0},{id:72,providerKey:"6F35FD83-60DA-4F78-BE43-9B6BFD881D8A",providerName:"microsoft-dynamics-nav",displayText:"Microsoft Dynamics NAV",description:"GetData_MicrosoftDynamicsNAV",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=623542",iconCSSClass:"content-provider-microsoft-dynamics-nav",smallIconCSSClass:"content-provider-microsoft-dynamics-nav-small",category:1,clientCategory:e.Service,configurationPageUrl:"/providers/mashUp/MicrosoftDynamicsNAV?contentProviderId=72",configurationUIstyle:0},{id:22,providerKey:"bb35a484-389d-4cc6-ab18-57d6eef86a23",providerName:"retail-analysis-sample",displayText:"Retail Analysis Sample",displayTextLocalizationKey:"GetData_Retail_Analysis_Sample_Title",description:"GetData_Retail_Analysis_Sample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=522048",iconCSSClass:"content-provider-retail-analysis-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"RetailSalesSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:0,providerName:"create-content-pack",displayText:"Create Content Pack",displayTextLocalizationKey:"Publish_CreateContentPack",iconCSSClass:"create-content-pack",category:2,clientCategory:e.Organizational,configurationUIstyle:5,providerConfig:'{"eventName": "openCreateContentPack"}',sortPriority:0,disableDetailPane:!0},{id:50,providerKey:"99baada2-cf09-41f2-afd9-6835059b94d3",providerName:"azure-sql-database-with-live-connect",displayText:"Azure SQL Database",description:"GetData_AzureSqlDatabaseWithLiveConnect",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=544900",iconCSSClass:"content-provider-sql-db-auditing",smallIconCSSClass:"content-provider-sql-db-auditing-small",category:0,clientCategory:e.BigDataAndMore,configurationPageUrl:"/providers/sqlazure",configurationUIstyle:0,autoRedirectUrlParams:t.navigation.getDataDirectQueryUrlParams,sortPriority:0,requiresPremiumLicense:!0,usePBIDesktop:!0},{id:51,providerKey:"9574d7ff-7b97-4917-9535-e67fd09393d2",providerName:"azure-sql-datawarehouse-live-connect",displayText:"Azure SQL Data Warehouse",description:"GetData_AzureSqlDatawarehouseLiveConnect",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=544902",iconCSSClass:"content-provider-azure-sql-datawarehouse-live-connect",smallIconCSSClass:"content-provider-azure-sql-dw-small",category:0,clientCategory:e.BigDataAndMore,configurationPageUrl:"/providers/pdw",configurationUIstyle:0,autoRedirectUrlParams:t.navigation.getDataDirectQueryUrlParams,sortPriority:1,requiresPremiumLicense:!0,usePBIDesktop:!0},{id:70,providerKey:"47024A6F-E6D5-4B93-937A-B6BA1226A223",providerName:"spark-sql-live-connect",displayText:"Spark on Azure HDInsight",description:"GetData_AzureHDInsightSparkLiveConnect",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=616055",iconCSSClass:"content-provider-spark-sql-live-connect",smallIconCSSClass:"content-provider-spark-small",category:0,clientCategory:e.BigDataAndMore,configurationPageUrl:"/providers/spark",configurationUIstyle:0,autoRedirectUrlParams:t.navigation.getDataDirectQueryUrlParams,sortPriority:3,requiresPremiumLicense:!0,featureSwitch:a.constants.featureSwitches.sparkAppEnabled,usePBIDesktop:!0},{id:43,providerKey:"8b5f82f6-9a6e-4135-92c6-f6072f111f4c",providerName:"human-resources-sample",displayText:"Human Resources Sample",displayTextLocalizationKey:"GetData_HumanResourcesSample_Title",description:"GetData_HumanResourcesSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528586",iconCSSClass:"content-provider-human-resources-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"HumanResourcesSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:44,providerKey:"7158743e-08ad-4884-9a20-4c66ef741812",providerName:"customer-profitability-sample",displayText:"Customer Profitability Sample",displayTextLocalizationKey:"GetData_CustomerProfitabilitySample_Title",description:"GetData_CustomerProfitabilitySample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528587",iconCSSClass:"content-provider-customer-profitability-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"CustomerProfitabilitySample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:45,providerKey:"bc6e5524-d894-46ef-8d0b-e99f42df8f31",providerName:"opportunity-analysis-sample",displayText:"Opportunity Analysis Sample",displayTextLocalizationKey:"GetData_OpportunityAnalysisSample_Title",description:"GetData_OpportunityAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528588",iconCSSClass:"content-provider-opportunity-analysis-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"OpportunityTrackingSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:46,providerKey:"8b4eff17-adfe-485c-b6b7-d7df36f04c24",providerName:"it-spend-analysis-sample",displayText:"IT Spend Analysis Sample",displayTextLocalizationKey:"GetData_ITSpendAnalysisSample_Title",description:"GetData_ITSpendAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528589",iconCSSClass:"content-provider-it-spend-analysis-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"ITSpendAnalysisSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:47,providerKey:"00100b6a-5aba-4de1-bf62-a3a91cdff527",providerName:"procurement-analysis-sample",displayText:"Procurement Analysis Sample",displayTextLocalizationKey:"GetData_ProcurementAnalysisSample_Title",description:"GetData_ProcurementAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528590",iconCSSClass:"content-provider-procurement-analysis-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"ProcurementAnalysisSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:48,providerKey:"e96a9f16-42da-4020-aae7-07315691b016",providerName:"sales-and-marketing-sample",displayText:"Sales and Marketing Sample",displayTextLocalizationKey:"GetData_SalesAndMarketingSample_Title",description:"GetData_SalesAndMarketingSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528591",iconCSSClass:"content-provider-sales-and-marketing-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"SalesMarketingSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:49,providerKey:"0ee5f075-5b0a-42a9-9e64-e9c5cb5e23c4",providerName:"supplier-quality-analysis-sample",displayText:"Supplier Quality Analysis Sample",displayTextLocalizationKey:"GetData_SupplierQualityAnalysisSample_Title",description:"GetData_SupplierQualityAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528585",iconCSSClass:"content-provider-supplier-quality-analysis-sample",category:0,clientCategory:e.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"SupplierQualityAnalysisSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2}]})(powerbi=powerbi||{});;
"use strict";var DropDownMenuItemType,__awaiter=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(o,i){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}},__extends=this&&this.__extends||(function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}})(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,t){for(var o=0,i=t.length,n=e.length;o<i;o++,n++)e[n]=t[o];return e};!(function(e){var t;(t=e.common||(e.common={})).createRequireConfig=function(){return{waitSeconds:9007199254740991,paths:{"angular-ui-datetimepicker":t.getFilePath("angular-ui-datetimepicker",2,!0),"d3-array":t.getFilePath("d3-array",2,!0),"d3-geo":t.getFilePath("d3-geo",2,!0),"es6-promise":t.getFilePath("es6-promise",2,!0),filesaver:t.getFilePath("filesaver",2,!0),"jquery-qrcode":t.getFilePath("jquery-qrcode",2,!0),"jquery-ui":t.getFilePath("jquery-ui",2,!0),msrcrypto:t.getFilePath("msrcrypto",2,!0),ngTagsInput:t.getFilePath("ngTagsInput",2,!0),pubnub:t.getFilePath("pubnub",2,!0),quill:t.getFilePath("quill",2,!0),resizeSensor:t.getFilePath("resizeSensor",2,!0),"powerbi-models":t.getFilePath("powerbi-models",2,!0),topojson:t.getFilePath("topojson",2,!0),cropperjs:t.getFilePath("cropper",2,!0),appcues:"https://fast.appcues.com/66759","globalize.cultures":t.getFilePath("jquery.globalize/globalize.cultures",0,!1),tileLibrary:t.getFilePath("tileLibrary",0,!0),accessibleTableVisual:t.getFilePath("accessibleTableVisual",0,!0),adminPortal:t.getFilePath("adminPortal",0,!0),basicShapeVisual:t.getFilePath("basicShapeVisual",0,!0),shapeVisual:t.getFilePath("shapeVisual",0,!0),navigatorVisuals:t.getFilePath("navigatorVisuals",0,!0),cartesianVisuals:t.getFilePath("cartesianVisuals",0,!0),capacityAdmin:t.getFilePath("capacityAdmin",0,!0),cdsaModelAuthoring:t.getFilePath("cdsaModelAuthoring",0,!0),cdsaModelActions:t.getFilePath("cdsaModelActions",0,!0),customVisualsGallery:t.getFilePath("customVisualsGallery",0,!0),dashboard:t.getFilePath("dashboard",0,!0),decompositionTreeVisual:t.getFilePath("decompositionTreeVisual",0,!0),dialogs:t.getFilePath("dialogs",0,!0),donutChartVisuals:t.getFilePath("donutChartVisuals",0,!0),embedCodes:t.getFilePath("embedCodes",0,!0),desktopDialogs:t.getFilePath("desktopDialogs",0,!0),exploreUIDialogs:t.getFilePath("exploreUIDialogs",0,!0),exploreUIShell:t.getFilePath("exploreUIShell",0,!0),funnelChartVisual:t.getFilePath("funnelChartVisual",0,!0),getData:t.getFilePath("getData",0,!0),imageVisual:t.getFilePath("imageVisual",0,!0),kpiVisual:t.getFilePath("kpiVisual",0,!0),mapVisuals:t.getFilePath("mapVisuals",0,!0),azureMapVisuals:t.getFilePath("azureMapVisuals",0,!0),mobileAuthoring:t.getFilePath("mobileAuthoring",0,!0),multiRowCardVisual:t.getFilePath("multiRowCardVisual",0,!0),odataExplore:t.getFilePath("odataExplore",0,!0),permissions:t.getFilePath("permissions",0,!0),pivotTableVisuals:t.getFilePath("pivotTableVisuals",0,!0),powerBISidePanes:t.getFilePath("powerBISidePanes",0,!0),rowLevelSecurity:t.getFilePath("rowLevelSecurity",0,!0),scriptVisual:t.getFilePath("scriptVisual",0,!0),pythonVisual:t.getFilePath("pythonVisual",0,!0),scorecardVisual:t.getFilePath("scorecardVisual",0,!0),selectDatasetDialog:t.getFilePath("selectDatasetDialog",0,!0),settings:t.getFilePath("settings",0,!0),shapeMapVisual:t.getFilePath("shapeMapVisual",0,!0),sharing:t.getFilePath("sharing",0,!0),singleValueVisuals:t.getFilePath("singleValueVisuals",0,!0),slicerVisual:t.getFilePath("slicerVisual",0,!0),sunburstVisual:t.getFilePath("sunburstVisual",0,!0),textboxVisual:t.getFilePath("textboxVisual",0,!0),treemapVisual:t.getFilePath("treemapVisual",0,!0),rdlVisual:t.getFilePath("rdlVisual",0,!0),uiComponents:t.getFilePath("uiComponents",0,!0),"powerbiportal.addons.bundle":t.getFilePath("powerbiportal.addons.bundle",0,!0),"powerbiportal.web.bundle":t.getFilePath("powerbiportal.web.bundle",0,!0)},bundles:{tileLibrary:["TileLibrary/index"],accessibleTableVisual:["AccessibleTableVisual/accessibleTable/accessibleTable"],basicShapeVisual:["BasicShapeVisual/actionButton","BasicShapeVisual/actionButtonUtils","BasicShapeVisual/basicShape","BasicShapeVisual/basicShapeUtils"],shapeVisual:["ShapeVisual/shape"],navigatorVisuals:["NavigatorVisuals/navigator"],cartesianVisuals:["CartesianVisuals/cartesianModule"],cdsaModelActions:["CdsaModelActions/services/cdsaModelActionsService"],customVisualsGallery:["CustomVisualsGallery/module","CustomVisualsGallery/services/organizationalGalleryModelFactory"],decompositionTreeVisual:["DecompositionTreeVisual/decompositionTree","DecompositionTreeVisual/decompositionTreeRenderer","DecompositionTreeVisual/decompositionTreeViewModelService"],dialogs:["PowerBIDialogs/components/createReportDialog/createReportDialogBuilder","PowerBIDialogs/components/rebindReportDialog/rebindReportDialogBuilder","PowerBIDialogs/components/errorDialog/errorDialogBuilder","PowerBIDialogs/components/refreshHistoryDialog/refreshHistoryDialogBuilder","PowerBIDialogs/components/selectivePublishWarningDialog/selectivePublishWarningDialogBuilder"],desktopDialogs:["DesktopDialogs/module"],embedCodes:["EmbedCodes/services/embedCodesService","EmbedCodes/services/embedService","EmbedCodes/proxies/embedProxy"],exploreUIShell:["ExploreUIShell/module","ExploreUIShell/services/bookmarkService","ExploreUIShell/services/bookmarkOnLoadService","ExploreUIShell/services/explorationAuthoring","ExploreUIShell/services/exportVisualDataService","ExploreUIShell/services/visualHostTooltipActionsProvider"],exploreUIDialogs:["ExploreUIDialogs/module","ExploreUIDialogs/dialogs/conditionalFormattingDialog/conditionalFormattingDialogBuilder","ExploreUIDialogs/dialogs/dataBarsDialog/dataBarsDialogBuilder"],odataExplore:["ODataFilterParser/services/odataFilterParserService"],permissions:["PermissionsUI/components/permissionCannotShareDialog/permissionCannotShareDialogBuilder"],rdlVisual:["RdlVisual/rdlVisual"],scorecardVisual:["ScorecardVisual/scorecard"],scriptVisual:["ScriptVisual/scriptVisual"],selectDatasetDialog:["SelectDatasetDialog/components/selectDatasetDialog/selectDatasetDialogBuilder"],settings:["Settings/services/previewFeatures"],shapeMapVisual:["ShapeMapVisual/shapeMap/shapeMap","ShapeMapVisual/shapeMap/shapeMapBehaviors"],singleValueVisuals:["SingleValueVisuals/animatedNumberModule","SingleValueVisuals/cardModule","SingleValueVisuals/gaugeModule"],sunburstVisual:["SunburstVisual/sunburst/sunburst","SunburstVisual/sunburst/sunburstBehaviors"],textboxVisual:["TextboxVisual/textboxModule"],treemapVisual:["TreemapVisual/treemap","TreemapVisual/treemapAnimator","TreemapVisual/treemapBehaviors","TreemapVisual/util"],tutorialResources:["tutorialResources/explorationResources"],azureMapVisuals:["AzureMapVisuals/azureMap","AzureMapVisuals/azureMapBehaviors"]},cssPaths:{"jquery-ui":t.getFilePath("jquery-ui.min",3,!1),ngTagsInput:t.getFilePath("ngTagsInput",3,!0),"quill.core":t.getFilePath("quill.core",3,!1),cropperjs:t.getFilePath("cropper",3,!1),accessibleTableVisual:t.getFilePath("accessibleTableVisual",1,!0),adminPortal:t.getFilePath("adminPortal",1,!0),azureMapVisuals:t.getFilePath("azureMapVisuals",1,!0),capacityAdmin:t.getFilePath("capacityAdmin",1,!0),cdsaModelAuthoring:t.getFilePath("cdsaModelAuthoring",1,!0),customVisualsGallery:t.getFilePath("customVisualsGallery",1,!0),dialogs:t.getFilePath("dialogs",1,!0),desktopDialogs:t.getFilePath("desktopDialogs",1,!0),embedCodes:t.getFilePath("embedCodes",1,!0),exploreUIDialogs:t.getFilePath("exploreUIDialogs",1,!0),exploreUIShell:t.getFilePath("exploreUIShell",1,!0),getData:t.getFilePath("getData",1,!0),mobileAuthoring:t.getFilePath("mobileAuthoring",1,!0),permissions:t.getFilePath("permissions",1,!0),pivotTableVisuals:t.getFilePath("pivotTableVisuals",1,!0),powerBISidePanes:t.getFilePath("powerBISidePanes",1,!0),rowLevelSecurity:t.getFilePath("rowLevelSecurity",1,!0),selectDatasetDialog:t.getFilePath("selectDatasetDialog",1,!0),settings:t.getFilePath("settings",1,!0),sharing:t.getFilePath("sharing",1,!0),scorecardVisual:t.getFilePath("scorecardVisual",1,!0),rdlVisual:t.getFilePath("rdlVisual",1,!0)}}}})(powerbi=powerbi||{}),(function(r){!(function(t){var e=jsCommon.Utility,o=r.telemetryEventFactory,i=r.telemetryBaseEventFactory,n=r.telemetry.EventFactories;e?e.generateGuid:Function.prototype;t.DashboardBITokenRefreshPromptEventName="PBI.Dashboard.BITokenRefreshPrompt",t.DashboardBITokenRefreshPrompt=n[t.DashboardBITokenRefreshPromptEventName]=function(e){return o({name:t.DashboardBITokenRefreshPromptEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardBITokenRefreshPromptLoggers})},t.DashboardFailedToRefreshTokenEventName="PBI.Dashboard.FailedToRefreshToken",t.DashboardFailedToRefreshToken=n[t.DashboardFailedToRefreshTokenEventName]=function(e){return o({name:t.DashboardFailedToRefreshTokenEventName,info:e,category:r.TelemetryCategory.CriticalError,loggers:t.DashboardFailedToRefreshTokenLoggers})},t.DashboardOpenLinkEventName="PBI.Dashboard.OpenLink",t.DashboardOpenLink=n[t.DashboardOpenLinkEventName]=function(e){return o({name:t.DashboardOpenLinkEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.DashboardOpenLinkLoggers})},t.BaseMashupContentProviderChildEventEventName="BaseMashupContentProviderChildEvent",t.BaseMashupContentProviderChildEvent=n[t.BaseMashupContentProviderChildEventEventName]=function(e){return i({info:e,baseEvent:t.Verbose(e)})},t.BaseMashupContentProviderCustomerActionEventEventName="BaseMashupContentProviderCustomerActionEvent",t.BaseMashupContentProviderCustomerActionEvent=n[t.BaseMashupContentProviderCustomerActionEventEventName]=function(e){return i({info:e,baseEvent:t.CustomerAction(e)})},t.MashUpContentProviderConnectButtonClickedEventName="PBI.MashUpContentProvider.ConnectButtonClicked",t.MashUpContentProviderConnectButtonClicked=n[t.MashUpContentProviderConnectButtonClickedEventName]=function(e){return o({name:t.MashUpContentProviderConnectButtonClickedEventName,baseEvent:t.BaseMashupContentProviderCustomerActionEvent(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.MashUpContentProviderConnectButtonClickedLoggers})},t.MashUpContentProviderOrgAppPassThroughEventName="PBI.MashUpContentProvider.OrgAppPassThrough",t.MashUpContentProviderOrgAppPassThrough=n[t.MashUpContentProviderOrgAppPassThroughEventName]=function(e){return o({name:t.MashUpContentProviderOrgAppPassThroughEventName,baseEvent:t.BaseMashupContentProviderChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderOrgAppPassThroughLoggers})},t.MashUpContentProviderPreparePackageSucceedEventName="PBI.MashUpContentProvider.PreparePackageSucceed",t.MashUpContentProviderPreparePackageSucceed=n[t.MashUpContentProviderPreparePackageSucceedEventName]=function(e){return o({name:t.MashUpContentProviderPreparePackageSucceedEventName,baseEvent:t.BaseMashupContentProviderChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderPreparePackageSucceedLoggers})},t.MashUpContentProviderGetPackageModelsEventName="PBI.MashUpContentProvider.GetPackageModels",t.MashUpContentProviderGetPackageModels=n[t.MashUpContentProviderGetPackageModelsEventName]=function(e){return o({name:t.MashUpContentProviderGetPackageModelsEventName,baseEvent:t.BaseMashupContentProviderChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderGetPackageModelsLoggers})},t.MashUpContentProviderSaveModelParametersEventName="PBI.MashUpContentProvider.SaveModelParameters",t.MashUpContentProviderSaveModelParameters=n[t.MashUpContentProviderSaveModelParametersEventName]=function(e){return o({name:t.MashUpContentProviderSaveModelParametersEventName,baseEvent:t.BaseMashupContentProviderChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderSaveModelParametersLoggers})},t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName="PBI.MashUpContentProvider.GetAggregatedDatasourcesForImport",t.MashUpContentProviderGetAggregatedDatasourcesForImport=n[t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName]=function(e){return o({name:t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName,baseEvent:t.BaseMashupContentProviderChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderGetAggregatedDatasourcesForImportLoggers})},t.MashUpContentProviderUpdateDatasourceEventName="PBI.MashUpContentProvider.UpdateDatasource",t.MashUpContentProviderUpdateDatasource=n[t.MashUpContentProviderUpdateDatasourceEventName]=function(e){return o({name:t.MashUpContentProviderUpdateDatasourceEventName,baseEvent:t.BaseMashupContentProviderChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderUpdateDatasourceLoggers})},t.MashUpContentProviderValidateParametersEventName="PBI.MashUpContentProvider.ValidateParameters",t.MashUpContentProviderValidateParameters=n[t.MashUpContentProviderValidateParametersEventName]=function(e){return o({name:t.MashUpContentProviderValidateParametersEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.MashUpContentProviderValidateParametersLoggers})},t.ContentProviderUrlParametersPassedEventName="PBI.ContentProvider.UrlParametersPassed",t.ContentProviderUrlParametersPassed=n[t.ContentProviderUrlParametersPassedEventName]=function(e){return o({name:t.ContentProviderUrlParametersPassedEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.ContentProviderUrlParametersPassedLoggers})},t.ContentProviderUrlParametersDecodingFailedEventName="PBI.ContentProvider.UrlParametersDecodingFailed",t.ContentProviderUrlParametersDecodingFailed=n[t.ContentProviderUrlParametersDecodingFailedEventName]=function(e){return o({name:t.ContentProviderUrlParametersDecodingFailedEventName,info:e,category:r.TelemetryCategory.CriticalError,loggers:t.ContentProviderUrlParametersDecodingFailedLoggers})},t.ContentProviderHttpGetContentProvidersEventName="PBI.ContentProvider.Http.GetContentProviders",t.ContentProviderHttpGetContentProviders=n[t.ContentProviderHttpGetContentProvidersEventName]=function(e){return o({name:t.ContentProviderHttpGetContentProvidersEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.ContentProviderHttpGetContentProvidersLoggers})},t.BaseDataSetChildEventEventName="BaseDataSetChildEvent",t.BaseDataSetChildEvent=n[t.BaseDataSetChildEventEventName]=function(e){return i({info:e,baseEvent:t.Verbose(e)})},t.DashboardSettingsDatasetsSaveRefreshSettingsEventName="PBI.Dashboard.SettingsDatasetsSaveRefreshSettings",t.DashboardSettingsDatasetsSaveRefreshSettings=n[t.DashboardSettingsDatasetsSaveRefreshSettingsEventName]=function(e){return o({name:t.DashboardSettingsDatasetsSaveRefreshSettingsEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardSettingsDatasetsSaveRefreshSettingsLoggers})},t.DashboardParametersDialogSaveParametersEventName="PBI.Dashboard.ParametersDialogSaveParameters",t.DashboardParametersDialogSaveParameters=n[t.DashboardParametersDialogSaveParametersEventName]=function(e){return o({name:t.DashboardParametersDialogSaveParametersEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardParametersDialogSaveParametersLoggers})},t.DashboardRefreshNowFailedToRetrieveModelEventName="PBI.Dashboard.RefreshNowFailedToRetrieveModel",t.DashboardRefreshNowFailedToRetrieveModel=n[t.DashboardRefreshNowFailedToRetrieveModelEventName]=function(e){return o({name:t.DashboardRefreshNowFailedToRetrieveModelEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardRefreshNowFailedToRetrieveModelLoggers})},t.DashboardAuthenticationDialogSaveCredentialsEventName="PBI.Dashboard.AuthenticationDialogSaveCredentials",t.DashboardAuthenticationDialogSaveCredentials=n[t.DashboardAuthenticationDialogSaveCredentialsEventName]=function(e){return o({name:t.DashboardAuthenticationDialogSaveCredentialsEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardAuthenticationDialogSaveCredentialsLoggers})},t.DashboardRetrieveGatewayEventName="PBI.Dashboard.RetrieveGateway",t.DashboardRetrieveGateway=n[t.DashboardRetrieveGatewayEventName]=function(e){return o({name:t.DashboardRetrieveGatewayEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardRetrieveGatewayLoggers})},t.DashboardPrepareRefreshNowEventName="PBI.Dashboard.PrepareRefreshNow",t.DashboardPrepareRefreshNow=n[t.DashboardPrepareRefreshNowEventName]=function(e){return o({name:t.DashboardPrepareRefreshNowEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardPrepareRefreshNowLoggers})},t.DashboardGetAggregatedDatasourcesForOneModelEventName="PBI.Dashboard.GetAggregatedDatasourcesForOneModel",t.DashboardGetAggregatedDatasourcesForOneModel=n[t.DashboardGetAggregatedDatasourcesForOneModelEventName]=function(e){return o({name:t.DashboardGetAggregatedDatasourcesForOneModelEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardGetAggregatedDatasourcesForOneModelLoggers})},t.DashboardDatasetRefreshEventName="PBI.Dashboard.DatasetRefresh",t.DashboardDatasetRefresh=n[t.DashboardDatasetRefreshEventName]=function(e){return o({name:t.DashboardDatasetRefreshEventName,baseEvent:t.BaseDataSetChildEvent(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardDatasetRefreshLoggers})},t.DashboardInitializeSettingsDatasetModelEventName="PBI.Dashboard.InitializeSettingsDatasetModel",t.DashboardInitializeSettingsDatasetModel=n[t.DashboardInitializeSettingsDatasetModelEventName]=function(e){return o({name:t.DashboardInitializeSettingsDatasetModelEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardInitializeSettingsDatasetModelLoggers})},t.DashboardGetRefreshHistoryEventName="PBI.Dashboard.GetRefreshHistory",t.DashboardGetRefreshHistory=n[t.DashboardGetRefreshHistoryEventName]=function(e){return o({name:t.DashboardGetRefreshHistoryEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardGetRefreshHistoryLoggers})},t.DashboardGetGroupIconEventName="PBI.Dashboard.GetGroupIcon",t.DashboardGetGroupIcon=n[t.DashboardGetGroupIconEventName]=function(e){return o({name:t.DashboardGetGroupIconEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardGetGroupIconLoggers})},t.DashboardRefreshAndGetUserMetadataEventName="PBI.Dashboard.RefreshAndGetUserMetadata",t.DashboardRefreshAndGetUserMetadata=n[t.DashboardRefreshAndGetUserMetadataEventName]=function(e){return o({name:t.DashboardRefreshAndGetUserMetadataEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardRefreshAndGetUserMetadataLoggers})},t.UserInfoGetSelfServiceEligibilityEventName="PBI.UserInfo.GetSelfServiceEligibility",t.UserInfoGetSelfServiceEligibility=n[t.UserInfoGetSelfServiceEligibilityEventName]=function(e){return o({name:t.UserInfoGetSelfServiceEligibilityEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.UserInfoGetSelfServiceEligibilityLoggers})},t.UserInfoGetIsModernCommerceAdminEventName="PBI.UserInfo.GetIsModernCommerceAdmin",t.UserInfoGetIsModernCommerceAdmin=n[t.UserInfoGetIsModernCommerceAdminEventName]=function(e){return o({name:t.UserInfoGetIsModernCommerceAdminEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.UserInfoGetIsModernCommerceAdminLoggers})},t.LicenseEnforcementShowFeatureDisabledDialogEventName="PBI.LicenseEnforcement.ShowFeatureDisabledDialog",t.LicenseEnforcementShowFeatureDisabledDialog=n[t.LicenseEnforcementShowFeatureDisabledDialogEventName]=function(e){return o({name:t.LicenseEnforcementShowFeatureDisabledDialogEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.LicenseEnforcementShowFeatureDisabledDialogLoggers})},t.LicenseEnforcementShowStartFreeTrialDialogEventName="PBI.LicenseEnforcement.ShowStartFreeTrialDialog",t.LicenseEnforcementShowStartFreeTrialDialog=n[t.LicenseEnforcementShowStartFreeTrialDialogEventName]=function(e){return o({name:t.LicenseEnforcementShowStartFreeTrialDialogEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.LicenseEnforcementShowStartFreeTrialDialogLoggers})},t.LicenseEnforcementShowUpgradeToProDialogEventName="PBI.LicenseEnforcement.ShowUpgradeToProDialog",t.LicenseEnforcementShowUpgradeToProDialog=n[t.LicenseEnforcementShowUpgradeToProDialogEventName]=function(e){return o({name:t.LicenseEnforcementShowUpgradeToProDialogEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.LicenseEnforcementShowUpgradeToProDialogLoggers})},t.LicenseEnforcementAccept2017proTrialEventName="PBI.LicenseEnforcement.Accept2017proTrial",t.LicenseEnforcementAccept2017proTrial=n[t.LicenseEnforcementAccept2017proTrialEventName]=function(e){return o({name:t.LicenseEnforcementAccept2017proTrialEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.LicenseEnforcementAccept2017proTrialLoggers})},t.LicenseEnforcementAutoTrialAssignmentEventName="PBI.LicenseEnforcement.AutoTrialAssignment",t.LicenseEnforcementAutoTrialAssignment=n[t.LicenseEnforcementAutoTrialAssignmentEventName]=function(e){return o({name:t.LicenseEnforcementAutoTrialAssignmentEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.LicenseEnforcementAutoTrialAssignmentLoggers})},t.LicenseEnforcementLeadsCollectionEventName="PBI.LicenseEnforcement.LeadsCollection",t.LicenseEnforcementLeadsCollection=n[t.LicenseEnforcementLeadsCollectionEventName]=function(e){return o({name:t.LicenseEnforcementLeadsCollectionEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.LicenseEnforcementLeadsCollectionLoggers})},t.TeamsLicenseEnforcementUpgradeNowClickEventName="PBI.TeamsLicenseEnforcement.UpgradeNowClick",t.TeamsLicenseEnforcementUpgradeNowClick=n[t.TeamsLicenseEnforcementUpgradeNowClickEventName]=function(e){return o({name:t.TeamsLicenseEnforcementUpgradeNowClickEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.TeamsLicenseEnforcementUpgradeNowClickLoggers})},t.TeamsLicenseEnforcementUpgradeNowAbandonEventName="PBI.TeamsLicenseEnforcement.UpgradeNowAbandon",t.TeamsLicenseEnforcementUpgradeNowAbandon=n[t.TeamsLicenseEnforcementUpgradeNowAbandonEventName]=function(e){return o({name:t.TeamsLicenseEnforcementUpgradeNowAbandonEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.TeamsLicenseEnforcementUpgradeNowAbandonLoggers})},t.DashboardAndReportsPrintEventName="PBI.DashboardAndReports.Print",t.DashboardAndReportsPrint=n[t.DashboardAndReportsPrintEventName]=function(e){return o({name:t.DashboardAndReportsPrintEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.DashboardAndReportsPrintLoggers,logExpAssignment:!0})},t.DashboardAndReportsAnalyzeInExcelEventName="PBI.DashboardAndReports.AnalyzeInExcel",t.DashboardAndReportsAnalyzeInExcel=n[t.DashboardAndReportsAnalyzeInExcelEventName]=function(e){return o({name:t.DashboardAndReportsAnalyzeInExcelEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.DashboardAndReportsAnalyzeInExcelLoggers,logExpAssignment:!0})},t.DsrDataLimitsWarningEventName="PBI.DsrDataLimitsWarning",t.DsrDataLimitsWarning=n[t.DsrDataLimitsWarningEventName]=function(e){return o({name:t.DsrDataLimitsWarningEventName,info:e,category:r.TelemetryCategory.CriticalError,loggers:t.DsrDataLimitsWarningLoggers})},t.DeprecatedNotificationToastUsageEventName="PBI.DeprecatedNotificationToastUsage",t.DeprecatedNotificationToastUsage=n[t.DeprecatedNotificationToastUsageEventName]=function(e){return o({name:t.DeprecatedNotificationToastUsageEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DeprecatedNotificationToastUsageLoggers})},t.DomainHelperGetVerifiedDomainsEventName="PBI.DomainHelper.GetVerifiedDomains",t.DomainHelperGetVerifiedDomains=n[t.DomainHelperGetVerifiedDomainsEventName]=function(e){return o({name:t.DomainHelperGetVerifiedDomainsEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.DomainHelperGetVerifiedDomainsLoggers})},t.NewerExplorationVersionEventName="PBI.NewerExplorationVersion",t.NewerExplorationVersion=n[t.NewerExplorationVersionEventName]=function(e){return o({name:t.NewerExplorationVersionEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.NewerExplorationVersionLoggers})},t.DeveloperVisualEnabledChangedEventName="PBI.DeveloperVisualEnabledChanged",t.DeveloperVisualEnabledChanged=n[t.DeveloperVisualEnabledChangedEventName]=function(e){return o({name:t.DeveloperVisualEnabledChangedEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.DeveloperVisualEnabledChangedLoggers})},t.ModuleLoadEventName="PBI.ModuleLoad",t.ModuleLoad=n[t.ModuleLoadEventName]=function(e){return o({name:t.ModuleLoadEventName,info:e,loggers:t.ModuleLoadLoggers})},t.ModuleLoadErrorEventName="PBI.ModuleLoadError",t.ModuleLoadError=n[t.ModuleLoadErrorEventName]=function(e){return o({name:t.ModuleLoadErrorEventName,baseEvent:t.ErrorWithStackTrace(e),info:e,category:r.TelemetryCategory.CriticalError,loggers:t.ModuleLoadErrorLoggers})},t.ScriptVisualFilterActionEventName="ScriptVisualFilterAction",t.ScriptVisualFilterAction=n[t.ScriptVisualFilterActionEventName]=function(e){return o({name:t.ScriptVisualFilterActionEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.ScriptVisualFilterActionLoggers})},t.EXCrossFilterScriptVisualEventName="PBI.EX.CrossFilterScriptVisual",t.EXCrossFilterScriptVisual=n[t.EXCrossFilterScriptVisualEventName]=function(e){return o({name:t.EXCrossFilterScriptVisualEventName,info:e,category:r.TelemetryCategory.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName"],loggers:t.EXCrossFilterScriptVisualLoggers})},t.EXFilterScriptVisualEventName="PBI.EX.FilterScriptVisual",t.EXFilterScriptVisual=n[t.EXFilterScriptVisualEventName]=function(e){return o({name:t.EXFilterScriptVisualEventName,info:e,category:r.TelemetryCategory.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName"],loggers:t.EXFilterScriptVisualLoggers})},t.ClusterResolvedEventName="PBI.ClusterResolved",t.ClusterResolved=n[t.ClusterResolvedEventName]=function(e){return o({name:t.ClusterResolvedEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.ClusterResolvedLoggers})},t.DashboardAndReportsAuditEventEventName="PBI.DashboardAndReports.AuditEvent",t.DashboardAndReportsAuditEvent=n[t.DashboardAndReportsAuditEventEventName]=function(e){return o({name:t.DashboardAndReportsAuditEventEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.DashboardAndReportsAuditEventLoggers})},t.DownloadReportEventName="PBI.DownloadReport",t.DownloadReport=n[t.DownloadReportEventName]=function(e){return o({name:t.DownloadReportEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.DownloadReportLoggers,logExpAssignment:!0})},t.SettingsUpdateGatewayEventName="PBI.Settings.UpdateGateway",t.SettingsUpdateGateway=n[t.SettingsUpdateGatewayEventName]=function(e){return o({name:t.SettingsUpdateGatewayEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsUpdateGatewayLoggers})},t.SettingsDeleteGatewayEventName="PBI.Settings.DeleteGateway",t.SettingsDeleteGateway=n[t.SettingsDeleteGatewayEventName]=function(e){return o({name:t.SettingsDeleteGatewayEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsDeleteGatewayLoggers})},t.SettingsCreateDataSourceEventName="PBI.Settings.CreateDataSource",t.SettingsCreateDataSource=n[t.SettingsCreateDataSourceEventName]=function(e){return o({name:t.SettingsCreateDataSourceEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsCreateDataSourceLoggers})},t.SettingsDeleteDataSourceEventName="PBI.Settings.DeleteDataSource",t.SettingsDeleteDataSource=n[t.SettingsDeleteDataSourceEventName]=function(e){return o({name:t.SettingsDeleteDataSourceEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsDeleteDataSourceLoggers})},t.SettingsBindModelToGatewayEventName="PBI.Settings.BindModelToGateway",t.SettingsBindModelToGateway=n[t.SettingsBindModelToGatewayEventName]=function(e){return o({name:t.SettingsBindModelToGatewayEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsBindModelToGatewayLoggers})},t.SettingsAddDataSourcePrincipalsEventName="PBI.Settings.AddDataSourcePrincipals",t.SettingsAddDataSourcePrincipals=n[t.SettingsAddDataSourcePrincipalsEventName]=function(e){return o({name:t.SettingsAddDataSourcePrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsAddDataSourcePrincipalsLoggers})},t.SettingsRemoveDataSourcePrincipalsEventName="PBI.Settings.RemoveDataSourcePrincipals",t.SettingsRemoveDataSourcePrincipals=n[t.SettingsRemoveDataSourcePrincipalsEventName]=function(e){return o({name:t.SettingsRemoveDataSourcePrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsRemoveDataSourcePrincipalsLoggers})},t.SettingsAddGatewayPrincipalsEventName="PBI.Settings.AddGatewayPrincipals",t.SettingsAddGatewayPrincipals=n[t.SettingsAddGatewayPrincipalsEventName]=function(e){return o({name:t.SettingsAddGatewayPrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsAddGatewayPrincipalsLoggers})},t.SettingsRemoveGatewayPrincipalsEventName="PBI.Settings.RemoveGatewayPrincipals",t.SettingsRemoveGatewayPrincipals=n[t.SettingsRemoveGatewayPrincipalsEventName]=function(e){return o({name:t.SettingsRemoveGatewayPrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsRemoveGatewayPrincipalsLoggers})},t.SettingsUpdateCredentialsEventName="PBI.Settings.UpdateCredentials",t.SettingsUpdateCredentials=n[t.SettingsUpdateCredentialsEventName]=function(e){return o({name:t.SettingsUpdateCredentialsEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsUpdateCredentialsLoggers})},t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName="PBI.Settings.OpenGatewayDatasourceUPNMappingPane",t.SettingsOpenGatewayDatasourceUPNMappingPane=n[t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName]=function(e){return o({name:t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsOpenGatewayDatasourceUPNMappingPaneLoggers})},t.SettingsUpdateGatewayDatasourceUPNMappingEventName="PBI.Settings.UpdateGatewayDatasourceUPNMapping",t.SettingsUpdateGatewayDatasourceUPNMapping=n[t.SettingsUpdateGatewayDatasourceUPNMappingEventName]=function(e){return o({name:t.SettingsUpdateGatewayDatasourceUPNMappingEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsUpdateGatewayDatasourceUPNMappingLoggers})},t.SettingsTestGatewayDatasourceUPNMappingEventName="PBI.Settings.TestGatewayDatasourceUPNMapping",t.SettingsTestGatewayDatasourceUPNMapping=n[t.SettingsTestGatewayDatasourceUPNMappingEventName]=function(e){return o({name:t.SettingsTestGatewayDatasourceUPNMappingEventName,baseEvent:t.CustomerAction(e),info:e,category:r.TelemetryCategory.CustomerAction,loggers:t.SettingsTestGatewayDatasourceUPNMappingLoggers})},t.AppJavaScriptParseEventName="PBI.App.JavaScriptParse",t.AppJavaScriptParse=n[t.AppJavaScriptParseEventName]=function(e){return o({name:t.AppJavaScriptParseEventName,baseEvent:t.TimedEvent(e),info:e,loggers:t.AppJavaScriptParseLoggers})},t.AppPreemptiveQueryDataEventName="PBI.App.PreemptiveQueryData",t.AppPreemptiveQueryData=n[t.AppPreemptiveQueryDataEventName]=function(e){return o({name:t.AppPreemptiveQueryDataEventName,baseEvent:t.BaseEvent(e),info:e,loggers:t.AppPreemptiveQueryDataLoggers})},t.GeocodingSummaryEventName="PBI.GeocodingSummary",t.GeocodingSummary=n[t.GeocodingSummaryEventName]=function(e){return o({name:t.GeocodingSummaryEventName,baseEvent:t.BaseEvent(e),info:e,loggers:t.GeocodingSummaryLoggers,logRatio:.1})},t.SyncServiceUpdateEventName="PBI.SyncServiceUpdate",t.SyncServiceUpdate=n[t.SyncServiceUpdateEventName]=function(e){return o({name:t.SyncServiceUpdateEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.SyncServiceUpdateLoggers})},t.LicenseEnforcementAccessCustomizedPropertiesEventName="PBI.LicenseEnforcement.AccessCustomizedProperties",t.LicenseEnforcementAccessCustomizedProperties=n[t.LicenseEnforcementAccessCustomizedPropertiesEventName]=function(e){return o({name:t.LicenseEnforcementAccessCustomizedPropertiesEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.LicenseEnforcementAccessCustomizedPropertiesLoggers})},t.LicenseEnforcementSelfServiceEligibilityNotLoadedEventName="PBI.LicenseEnforcement.SelfServiceEligibilityNotLoaded",t.LicenseEnforcementSelfServiceEligibilityNotLoaded=n[t.LicenseEnforcementSelfServiceEligibilityNotLoadedEventName]=function(e){return o({name:t.LicenseEnforcementSelfServiceEligibilityNotLoadedEventName,baseEvent:t.Verbose(e),info:e,category:r.TelemetryCategory.Verbose,loggers:t.LicenseEnforcementSelfServiceEligibilityNotLoadedLoggers})}})(r.telemetry||(r.telemetry={}))})(powerbi=powerbi||{}),(function(e){(function(e){e.getTelemetryCanvasLayout=function(e){switch(e){case 0:return"Master";case 1:return"PhonePortrait"}return null};var t=(o.prototype.start=function(e){this.reject(),this.event=e()},o.prototype.resolve=function(){this.event&&(this.options&&this.options.onResolve&&this.options.onResolve(this.event),this.event.resolve(),this.event=void 0)},o.prototype.reject=function(e){this.event&&(this.options&&this.options.onReject&&this.options.onReject(this.event,e),this.event.reject(e),this.event=void 0)},o);function o(e){this.options=e}e.TelemetryEventManager=t})((e=(e=e.common||(e.common={})).helpers||(e.helpers={})).TelemetryHelper||(e.TelemetryHelper={}))})(powerbi=powerbi||{}),(function(e){((e=(e=e.common||(e.common={})).helpers||(e.helpers={})).UserInfoHelper||(e.UserInfoHelper={})).getFullName=function(e,t,o){return e=_.trim(e),t=_.trim(t),_.isEmpty(e)?o||"":_.isEmpty(t)?e:e+" "+t}})(powerbi=powerbi||{}),(function(e){!(function(a){var e;function o(){}e=a.helpers||(a.helpers={}),o.popupOAuthWindow=function(e){var t=window;return window.parent!==window&&(t=window.parent),o.popUpWindow(e,t)},o.authResponse=function(e,t){var o=e,e=$("iframe[name=contentProviderDialogFrame]")[0];(o=e?e.contentWindow:o).postMessage(JSON.stringify({OAuthResponse:t}),"*")},o.popUpWindow=function(e,t){var o=Math.max(Math.min(t.screen.width,a.constants.defaultPopupWindowWidth),t.screen.width/2),i=Math.max(Math.min(t.screen.height,a.constants.defaultPopupWindowHeight),t.screen.height/2),n=(t.outerWidth-o)/2;n+=window.screenX;var r=(t.outerHeight-i)/2;return r+=t.screenY,t.name="mainWindow",t=t.open(e,"_blank","top="+r+", left="+n+", screenX="+n+", screenY="+r+", width="+o+", height="+i+", resizable=yes"),jsCommon.BrowserUtility.isInternetExplorerBrowser()&&null!=t&&(t.location.href=e),t},e.OAuthPopupWindowHelper=o})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){var o;e=(e=(e=e.common||(e.common={})).helpers||(e.helpers={})).powerBICompanionHelper||(e.powerBICompanionHelper={}),o=window,e.getDownloadLink=function(){var e=jsCommon.Utility.is64BitOperatingSystem(),t=o.clusterUri+"/powerbi/resource/powerbicompanionapp/";return t+=e?"x64":"x86"},e.getDownloadCenterLink=function(e,t){return jsCommon.Utility.is64BitOperatingSystem()?e:t}})(powerbi=powerbi||{}),(function(t){var e,o,i;function n(r,a,s){var e=this;return{loadNgModule:["pbiLazyLoad",function(n){return __awaiter(e,void 0,t.Promise,(function(){var t,o,i;return __generator(this,(function(e){switch(e.label){case 0:t=!0,o=0,e.label=1;case 1:return o<r.length?[4,n.isLoaded(r[o])]:[3,6];case 2:return e.sent()?[3,5]:(i=t)?[4,n.load({name:r[o],namespace:a[o],dependency:{javascript:s[o],css:[s[o]]}})]:[3,4];case 3:i=e.sent(),e.label=4;case 4:t=i,e.label=5;case 5:return o++,[3,1];case 6:return[2,t]}}))}))}]}}e=t.common||(t.common={}),(o=e.helpers||(e.helpers={})).LoadAdminPortal=n(["powerbi.adminPortal"],["powerbi.adminPortal"],["adminPortal"]),o.LoadCapacityAdmin=n(["powerbi.capacityAdmin"],["powerbi.capacityAdmin"],["capacityAdmin"]),o.LoadDatapoolAuthoring=n(["powerbi.cdsaModelActions","powerbi.cdsaModelAuthoring"],["powerbi.cdsaModelActions","powerbi.cdsaModelAuthoring"],["cdsaModelActions","cdsaModelAuthoring"]),o.LoadEmbedCodesAdmin=n(["powerbi.embedCodes"],["powerbi.embedCodes"],["embedCodes"]),o.LoadGetData=n(["powerbi.getData"],["powerbi.getData"],["getData"]),o.LoadPermissions=n(["powerbi.permissions"],["powerbi.permissions"],["permissions"]),o.LoadSettings=n(["powerbi.settings"],["powerbi.settings"],["settings"]),o.LoadJQueryUI=(i=e.modules.JQueryUIModule,{loadModule:["moduleLoader",function(e){return e.require(i)}]})})(powerbi=powerbi||{}),(function(e){var t,o,i,n,r;function u(e,t,o){return"#"+a(e)+a(t)+a(o)}function a(e){e=e.toString(16);return 1===e.length?"0"+e:e}function s(e,t){e=g(e);return null===e?"":t||0===t?"rgba("+e.r+","+e.g+","+e.b+","+t+")":"rgb("+e.r+","+e.g+","+e.b+")"}function l(e){return/^hsl\(\d{1,3}(,\s?\d{1,3}%){2}\)|^hsla\((\d{1,3}%?,\s?){3}(1|1.0|0|0?\.\d+)\)$/gi.test(e)}function c(e){return/^rgb\(\d{1,3}(,\s?\d{1,3}){2}\)|^rgba\((\d{1,3},\s?){3}(1|1.0|0|0?\.\d+)\)$/gi.test(e)}function d(e){return null!=e&&!!e.match(t)}function p(e){return"#FFFFFF"===e||"#FFF"===e}function m(e){return"#000000"===e||"#000"===e}function h(e,t){return e=(e=t?e.substring(1):e).replace(o,(function(e,t,o,i){return t+t+o+o+i+i})),t?"#"+e:e}function g(e){e=h(e,!1);e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function f(e){var t,o=/^rgba?\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})(,\s?(1|1.0|0)|,\s?(0?\.\d+))?\)$/i.exec(e);if(!o)return null;o[5]&&(t=parseFloat(o[5])),o[6]&&(t=parseFloat(o[6]));var i=255<(i=parseInt(o[1],10))?255:i,e=255<(e=parseInt(o[2],10))?255:e,o=parseInt(o[3],10);return{r:i,g:e,b:o=255<o?255:o,a:t}}function v(e){var t,o=/^hsla?\((\d{1,3}),\s?(\d{1,3})%,\s?(\d{1,3})%(,\s?(1|1.0|0)|,\s?(0?\.\d+))?\)$/i.exec(e);if(!o)return null;o[5]&&(t=parseFloat(o[5])),o[6]&&(t=parseFloat(o[6]));var i=parseInt(o[1],10);i%=360;e=100<(e=parseInt(o[2],10))?100:e,o=parseInt(o[3],10);return{h:i,s:e,l:o=100<o?100:o,a:t}}function y(e){function t(e){return(e/=255)<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4)}return.2126*t(e.r)+.7152*t(e.g)+.0722*t(e.b)}function b(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}e=(e=(e=e.common||(e.common={})).utils||(e.utils={})).ColorUtility||(e.ColorUtility={}),t="^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=[.6,.4,.2,.1,0],n=[-.1,-.2,-.3,-.5,-.6],r=[.6,.4,.2,-.25,-.5],e.hsvToRgb=function(e,t,o){var i,n,r,a=Math.floor(6*e),s=o*(1-t),l=o*(1-(e=6*e-a)*t),c=o*(1-(1-e)*t);switch(a%6){case 0:i=o,n=c,r=s;break;case 1:i=l,n=o,r=s;break;case 2:i=s,n=o,r=c;break;case 3:i=s,n=l,r=o;break;case 4:i=c,n=s,r=o;break;case 5:i=o,n=s,r=l}return[Math.round(255*i),Math.round(255*n),Math.round(255*r)]},e.rgbToHex=u,e.hexToRGBString=s,e.isHslOrHslaString=l,e.isRgbOrRgbaString=c,e.applyTransparency=function(e,t){if(d(e))return s(e,t);if(l(e)){var o=v(e),i=o.a||0===o.a?o.a:t;return"hsla("+o.h+","+o.s+"%,"+o.l+"%,"+i+")"}if(c(e)){e=f(e),i=e.a||0===e.a?e.a:t;return"rgba("+e.r+","+e.g+","+e.b+","+i+")"}return""},e.isHexColor=d,e.getHexWithoutPound=function(e){return d(e)?e.substr(1).toUpperCase():e},e.getShadePctSequence=function(e){return p(e)?n:m(e)?i:r},e.isWhiteHexColor=p,e.isBlackHexColor=m,e.ensureValidHex=function(e){return d(e)||d(e="#"+e)?e:null},e.convertTransparencyToOpacity=function(e){return 1-e/100},e.computeColorBrightness=function(e){return(.299*(e=g(e)).r+.587*e.g+.114*e.b)/255},e.isShortHexPattern=function(e){return e&&!!e.match("^#([A-Fa-f0-9]{3})$")},e.convertShortHexPatternToFull=h,e.convertHexToRGBComponents=g,e.parseRgbaComponents=f,e.rgbaStringsEqual=function(e,t){return e=f(e),t=f(t),e.a=void 0!==e.a?e.a:1,t.a=void 0!==t.a?t.a:1,_.isEqual(e,t)},e.parseHslaComponents=v,e.rgbToHsv=function(e,t,o){e/=255,t/=255,o/=255;var i,n=Math.max(e,t,o),r=Math.min(e,t,o),a=n,s=n-r,l=0===n?0:s/n;if(n===r)i=0;else{switch(n){case e:i=(t-o)/s+(t<o?6:0);break;case t:i=(o-e)/s+2;break;case o:i=(e-t)/s+4}i/=6}return[i,l,a]},e.tryGetColorForTargetMinContrastRatio=function(e,t,o){if(o<1||21<o)throw new Error("Invalid target contrast ratio value. It must be >= 1 and <= 21");var i=g(e),n=g(t),r=y(i),a=y(n),s=b(r,a);if(o<=s)return{hexColor:e,satisfiedRatio:!0};var l=b(1,a),e=(t=b(0,a))<=l;if(l<o&&t<o)return a<=r&&e?{hexColor:"#FFFFFF",satisfiedRatio:!1}:r<=a&&!e?{hexColor:"#000000",satisfiedRatio:!1}:{hexColor:e?"#FFFFFF":"#000000",satisfiedRatio:!1};for(var c=r<=a?o<=t:!(o<=l),d=!1;d=c?0===(i={r:Math.max(0,i.r-10),g:Math.max(0,i.g-10),b:Math.max(0,i.b-10)}).r&&0===i.g&&0===i.b:255===(i={r:Math.min(255,i.r+10),g:Math.min(255,i.g+10),b:Math.min(255,i.b+10)}).r&&255===i.g&&255===i.b,(s=(function(e,t){e=y(e),t=y(t);return b(e,t)})(i,n))<o&&!d;);return{hexColor:u(i.r,i.g,i.b),satisfiedRatio:o<=s}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).DropdownUtils||(e.DropdownUtils={})).showLegacyDropdownItems=function(e,t,o,i,n,r,a){e.showMenu({overlayName:t,menuItems:o,onItemSelected:n,overlayClass:i,onClose:a},"dropdownItemsLegacy.html",r)}})(powerbi=powerbi||{}),(function(d){!(function(e){var r=window,t=(o.create=function(e,t,o,i,n,r){return n.require({javascript:"msrcrypto"}).then((function(){return 172===t.length?new a(e,t,o,i):new l(e,t,o,i,r)}))},o.generateEntropy=function(){for(var e=[],t=0;t<48;t++)e.push(Math.floor(256*Math.random()));return e},o.prototype.arrayToBase64String=function(e){for(var t="",o=e.length,i=0;i<o;i++)t+=String.fromCharCode(e[i]);return window.btoa(t)},o.prototype.toSupportedArray=function(e){var t="undefined"!=typeof Uint8Array,o=Object.prototype.toString.call(e);switch(o=o.substring(8,o.length-1)){case"Array":return t?new Uint8Array(e):e;case"ArrayBuffer":return new Uint8Array(e);case"Uint8Array":return e;case"Uint16Array":case"Uint32Array":return new Uint8Array(e);case"String":for(var i=e.length,n=new(t?Uint8Array:Array)(i),r=0;r<i;r++)n[r]=e.charCodeAt(r);return n;default:throw new Error("toSupportedArray : unsupported data type "+o)}},o.prototype.toUTF8Array=function(e){for(var t=[],o=0;o<e.length;o++){var i=e.charCodeAt(o);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||57344<=i?t.push(224|i>>12,128|i>>6&63,128|63&i):(o++,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}var n=new Uint8Array(t.length);return n.set(t,0),n},o);function o(e,t,o){this.callback=o,this.plainTextBytes=this.toUTF8Array(e),this.publicKey=t}e.EncryptionContext=t;var n,a=(__extends(i,n=t),i.prototype.rsaEncrypt=function(){return __awaiter(this,void 0,d.Promise,(function(){var t,o=this;return __generator(this,(function(e){return t=this.toSupportedRSAPublicKey(this.publicKey),t=this.toSupportedArray(t),msrCrypto.subtle.forceSync=!0,msrCrypto.initPrng&&msrCrypto.initPrng(this.entropy),msrCrypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:{name:"sha-1"}}).oncomplete=function(e){return o.rsaPublicKeyImportComplete(e)},[2]}))}))},i.prototype.rsaPublicKeyImportComplete=function(e){this.publicKeyHandle=e.target.result,this.rsaEncryption()},i.prototype.rsaEncryption=function(){var t=this;msrCrypto.subtle.encrypt({name:"RSA-OAEP",hash:{name:"sha-1"}},this.publicKeyHandle,this.plainTextBytes.subarray(85*this.currentSegment,85*(this.currentSegment+1))).oncomplete=function(e){return t.rsaEncryptionSegmentComplete(e)}},i.prototype.rsaEncryptionSegmentComplete=function(e){this.encryptedBytes.set(new Uint8Array(e.target.result),128*this.currentSegment),this.currentSegment++,this.currentSegment<this.segments?this.rsaEncryption():this.callback(this.arrayToBase64String(this.encryptedBytes))},i.prototype.toSupportedRSAPublicKey=function(e){return'{                 "kty" : "RSA",                 "extractable" : true,                 "n" : "'+e+'",                 "e" : "AQAB"             }'},i);function i(e,t,o,i){i=n.call(this,e,t,i)||this;return i.entropy=o,i.segments=Math.ceil(i.plainTextBytes.length/85),i.currentSegment=0,i.encryptedBytes=new Uint8Array(128*i.segments),i}e.EncryptionContext1024KeyBit=a;var s,l=(__extends(c,s=t),c.prototype.rsaEncrypt=function(){return __awaiter(this,void 0,d.Promise,(function(){var t,o,i,n,r,a,s=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.executeCryptoOperation((function(){return s.crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}))];case 1:return t=e.sent(),o=this.crypto.getRandomValues(new Uint8Array(64)),[4,this.executeCryptoOperation((function(){return s.crypto.subtle.importKey("raw",o,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"])}))];case 2:return i=e.sent(),n=this.crypto.getRandomValues(new Uint8Array(16)),[4,this.executeCryptoOperation((function(){return s.crypto.subtle.encrypt({name:"AES-CBC",iv:n},t,s.plainTextBytes)}))];case 3:return a=e.sent(),[4,this.getSignedPayload(new Uint8Array(a),n,i)];case 4:return r=e.sent(),[4,this.getEncryptedKeys(t,o)];case 5:return a=e.sent(),a=a.concat(r),this.callback(a),[2]}}))}))},c.prototype.getEncryptedKeys=function(i,n){return __awaiter(this,void 0,d.Promise,(function(){var t,o;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.exportKey(i)];case 1:return t=e.sent(),o=this.getGeneratedKeyLengths(t,n),o=this.concatTypedArrays(o,this.concatTypedArrays(t,n)),[2,this.performAsyncKeyEncryption(o)]}}))}))},c.prototype.exportKey=function(i){return __awaiter(this,void 0,d.Promise,(function(){var t,o=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.executeCryptoOperation((function(){return o.crypto.subtle.exportKey("raw",i)}))];case 1:return t=e.sent(),[2,new Uint8Array(t)]}}))}))},c.prototype.getSignedPayload=function(n,r,a){return __awaiter(this,void 0,d.Promise,(function(){var t,o,i=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.concatTypedArrays(this.getEncryptionAlgorithmTypes(),r),t=this.concatTypedArrays(t,n),[4,this.executeCryptoOperation((function(){return i.crypto.subtle.sign({name:"HMAC",hash:{name:"SHA-256"}},a,t)}))];case 1:return o=e.sent(),o=this.concatTypedArrays(this.getEncryptionAlgorithmTypes(),new Uint8Array(o)),o=this.concatTypedArrays(o,r),o=this.concatTypedArrays(o,n),[2,this.arrayToBase64String(o)]}}))}))},c.prototype.getEncryptionAlgorithmTypes=function(){var e=new Uint8Array(2);return e[0]=0,e[1]=0,e},c.prototype.performAsyncKeyEncryption=function(r){return __awaiter(this,void 0,d.Promise,(function(){var t,o,i,n=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.publicKey.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),[4,this.executeCryptoOperation((function(){return n.crypto.subtle.importKey("jwk",n.getJwkFormat(t),{name:"RSA-OAEP",hash:{name:"sha-256"}},!1,["encrypt"])}))];case 1:return o=e.sent(),[4,this.executeCryptoOperation((function(){return n.crypto.subtle.encrypt({name:"RSA-OAEP",hash:{name:"sha-256"}},o,r)}))];case 2:return i=e.sent(),[2,this.arrayToBase64String(new Uint8Array(i))]}}))}))},c.prototype.concatTypedArrays=function(e,t){var o=new Uint8Array(e.byteLength+t.byteLength);return o.set(new Uint8Array(e),0),o.set(new Uint8Array(t),e.byteLength),o},c.prototype.getGeneratedKeyLengths=function(e,t){var o=new Uint8Array(2);return o[0]=this.mapGeneratedKeyLength(e),o[1]=this.mapGeneratedKeyLength(t),o},c.prototype.mapGeneratedKeyLength=function(e){switch(e.length){case 32:return 0;case 64:return 1;default:throw new Error("mapGeneratedKeyLength : unsupported key length "+e.length)}},c.prototype.executeCryptoOperation=function(e){if(this.isIEBrowser){var t=this.promiseFactory.defer();return e().oncomplete=function(e){e=e.target.result;t.resolve(e)},t.promise}return e()},c.prototype.getJwkFormat=function(e){e={kty:"RSA",e:"AQAB",n:e,alg:"RSA-OAEP-256",ext:!0};return this.isIEBrowser?this.getIECompatibleJwkFormat(e):e},c.prototype.getIECompatibleJwkFormat=function(e){return e.extractable=e.ext,delete e.ext,this.stringToBuffer(unescape(encodeURIComponent(JSON.stringify(e)))).buffer},c.prototype.stringToBuffer=function(e){for(var t=new Uint8Array(e.length),o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t},c);function c(e,t,o,i,n){i=s.call(this,e,t,i)||this;return i.isIEBrowser=!1,i.crypto=r.crypto||r.msCrypto,i.promiseFactory=n,void 0===r.crypto&&(i.isIEBrowser=!0),i}e.EncryptionContextHigherKeyBit=l})(d.common||(d.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var t;function r(){}e=e.utils||(e.utils={}),t=/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/,r.generateId=function(e,t){return""+(e||"")+r.generateUUID()+(t||"")},r.generateShortId=function(e){return(Math.random().toString(36)+"00000000000000000").slice(2,e+2)},r.generateUniqueId=function(e,t,o){for(var i,n=0;(void 0===i||e[i])&&!(1e3<++n);)i=r.generateId(t,o);return i},r.isGuid=function(e){if(_.isEmpty(e))return!1;if(36!==e.length)return!1;e=e.match(t);return!_.isEmpty(e)&&1===e.length},r.generateUUID=function(){var o=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(o+=performance.now()),"xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=o+16*Math.random()&15|0;return o>>=4,t.toString(16)}))},e.IdUtility=r})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){function t(){this.items=[],this.listeners=[]}e=e.common||(e.common={}),t.prototype.addItem=function(e){if(null!=e&&!_.includes(this.items,e)){this.items.push(e);for(var t=0,o=this.listeners;t<o.length;t++){var i=o[t];i.onAdded&&i.onAdded(e)}}},t.prototype.deleteItems=function(e){if(!e)return[];if(_.isEmpty(this.items))return[];e=_.remove(this.items,e);if(!_.isEmpty(e)){var t=this.listeners;if(!_.isEmpty(t))for(var o=0,i=e;o<i.length;o++)for(var n=i[o],r=0,a=t;r<a.length;r++){var s=a[r];s.onDeleted&&s.onDeleted(n)}}return e},t.prototype.setItems=function(e){this.items=e;for(var t=0,o=this.listeners;t<o.length;t++){var i=o[t];i.onReset&&i.onReset()}},t.prototype.subscribe=function(e){this.listeners.push(e)},t.prototype.unsubscribe=function(e){_.remove(this.listeners,e)},e.NotifyCollection=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).utils||(e.utils={})).getDsrReaderSwitches=function(e){return{dsrV2:e.dsrV2||e.dsrV2_Staging,queryCancellation:e.queryCancellation,telemetryV2:e.telemetryV2,directToMwc:e.directToMwc,scopedAggregates:e.scopedAggregates,synchronizedGroupsEnabled:e.cartesianMultiples,scopedMeasuresEnabled:e.comboMultiples,addVisualIdToQueryDataAsHttpBodyId:e.addVisualIdToQueryDataAsHttpBodyId,queryContext:e.queryContext,immediateQuery:e.immediateQuery,useLegacyQueryCache:e.useLegacyQueryCache,lruCacheEvictionPolicy:e.lruCacheEvictionPolicy}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).OverlayUtils||(e.OverlayUtils={})).getAnchorDimensions=function(e){var t=e.offset();return{left:t.left,top:t.top,width:e.outerWidth(!0),height:e.outerHeight(!0)}}})(powerbi=powerbi||{}),(function(e){function t(e){this.maxKeysCount=e,this.keys=[],this.valuesMap={}}e=e.common||(e.common={}),t.prototype.add=function(e,t){var o=this.keys,i=this.valuesMap,n=this.hasKey(e);i[e]=t,n||(o.push(e),o.length>this.maxKeysCount&&(delete i[o[0]],o.shift()))},t.prototype.get=function(e){return this.valuesMap[e]},t.prototype.hasKey=function(e){return void 0!==this.valuesMap[e]},e.RollingHashSet=t})(powerbi=powerbi||{}),(function(e){function t(e){var t,o,i;e&&(t=e.value(),e.firstChange?o=!(e.firstChange=!1):e.equal(t,e.oldValue)||(o=!1),void 0!==o&&(i=e.oldValue,e.oldValue=e.copy(t),e.onChange(t,i,o)))}function o(){this.watches={}}e=e.common||(e.common={}),o.prototype.has=function(e){return null!=this.watches[e]},o.prototype.add=function(e,t,o,i){var n;this.watches[e],i=i&&2===i.mode?(n=function(e,t){return _.isEqual(e,t)},function(e){return _.cloneDeep(e)}):i&&1===i.mode?(n=function(e,t){if(!e||!t)return e===t;var o=e.length;if(o!==t.length)return!1;for(var i=o;0<i--;)if(e[i]!==t[i])return!1;return!0},function(e){return _.clone(e)}):(n=function(e,t){return e===t},function(e){return e}),this.watches[e]={id:e,value:t,onChange:o,firstChange:!0,equal:n,copy:i}},o.prototype.remove=function(e){delete this.watches[e]},o.prototype.doCheck=function(){_.forEach(this.watches,t)},e.Watcher=o})(powerbi=powerbi||{}),(function(e){(e=(e=(e=e.common||(e.common={})).models||(e.models={})).TooltipTheme||(e.TooltipTheme={}))[e.Light=0]="Light",e[e.Dark=1]="Dark"})(powerbi=powerbi||{}),(function(e){e.ExploreExplorationCreation="Explore_ExplorationCreation",e.ExportExcelEmptyColumnName="ExportExcel_EmptyColumnName",e.ModelFailednoErrorInfo="modelFailednoErrorInfo",e.ModelSizeExceedsSharedCapacityLimit="ModelSizeExceedsSharedCapacityLimit",e.ModelWithIncrementalRefreshIsNotDownloadable="ModelWithIncrementalRefreshIsNotDownloadable",e.ModelWithPremiumFileFormatIsNotDownloadable="ServerError_PremiumFilesErrors_OperationIsNotSupportedForPremiumFilesModel",e.ModelModifiedByXmlaEndpointIsNotDownloadable="ExportData_DisabledForModelModifiedByXmlaEndpoint",e.UnsupportedModelWithRefreshPolicyInSharedCapacity="UnsupportedModelWithRefreshPolicyInSharedCapacity",e.DatasetsWithCompositeModelsNotSupported="DatasetsWithCompositeModelsNotSupported",e.PowerBIEntityNotFound="PowerBIEntityNotFound",e.PowerBINotAuthorizedException="PowerBINotAuthorizedException",e.PowerBINotLicensedException="PowerBINotLicensedException",e.RS_ErrorOpeningConnection="rsErrorOpeningConnection",e.ServicePlanDoesNotSupportGroups="ServicePlanDoesNotSupportGroups",e.TokenExpired="TokenExpired",e.UserNotLicensed="UserNotLicensed",e.NetworkConnectionIssue="NetworkConnectionIssue",e.NavigateAway="NavigateAway",e.ChangeDetectionMeasureExecutionDisabledException="ChangeDetectionMeasureExecutionDisabledException",e.UnsupportedChangeDetectionMeasureException="UnsupportedChangeDetectionMeasureException",e.FailedToAutoAssignLicense="FailedToAutoAssignLicense",e.PowerBIOperationNotSupported="PowerBIOperationNotSupported"})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.scope=e,this.services=t,this.scope.localizedExpandedTitle=this.services.localizationService.get(this.scope.expandedTitleLocalizationId),this.scope.localizedCollapsedTitle=this.services.localizationService.get(this.scope.collapsedTitleLocalizationId)}e=e.controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["localizationService"]}},e.CollapsibleSectionController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).controllers||(e.controllers={})).ConfirmationModalDialogController=function(){}})(powerbi=powerbi||{}),(function(l){var c,e,a,t,r,o,d,i,n,s;function u(e){for(var t=e.refreshConnections,o=void 0!==t?t.length:0,i=0;i<o;i++)if(t[i].onpremGatewayRequired)return!0;return!1}function p(e){var t=new RegExp("(asazure://|pbiazure://|powerbi://|link://)","i");return(void 0===e.onPremModelConnectionString||t.test(e.onPremModelConnectionString))&&e.dataCacheMode!==o.DirectQuery}function m(e){try{var t=i.getDateFromWcfJsonString(e,!0);return t}catch(e){return e.message,null}}function h(e){return _.map(e,(function(e){return r[e]}))}function g(e,t,o){var i=t.credentialDetails,i={modelId:e,datasourceId:t.dataSourceId,dataSourceObjectId:t.dataSourceObjectId,gatewayId:t.gatewayId,gatewayObjectId:t.gatewayObjectId,name:t.dataSourceName,oAuth2URL:t.oAuth2Endpoint,oAuth2Nonce:t.oAuth2Nonce,datasourceType:t.dataSourceType,credentialTypes:t.supportedAuthenticationTypes,credentialTypesNames:h(t.supportedAuthenticationTypes),connectionStringGeneralProperties:f(t.connectionDetails),onpremGatewayRequired:t.onPremGatewayRequired,singleSignOnType:t.singleSignOnType,skipTestConnection:!!i&&i.skipTestConnection,selectedCredentialType:i?i.credentialType:void 0,selectedPrivacyLevel:i?i.privacyLevel:void 0};return i.datasourceType===d.Extension&&(t=JSON.parse(t.dataSourceReference),i.dataSourceKind=t.kind),i.fullName=a.getDatasourceFullName(i,o),i.displayName=a.getDatasourceDisplayName(i,o),i}function f(e){var t=new Array;if(e){var o,i=JSON.parse(e);for(o in i){var n={name:o,value:i[o]};t.push(n)}}return t}function v(e){return e?null!=e.server?(e.database,[{name:"Server",value:e.server},{name:"Database",value:e.database}]):null!=e.path?[{name:"path",value:e.path}]:null!=e.modelId?[{name:"modelId",value:e.modelId},{name:"workspaceId",value:e.workspaceId}]:(e.extensionDataSourceKind,e.extensionDataSourcePath,[{name:"extensionDataSourceKind",value:e.extensionDataSourceKind},{name:"extensionDataSourcePath",value:e.extensionDataSourcePath}]):[]}function y(e,t){return{importAndRefreshBehavior:e.importAndRefreshBehavior,refreshEnabled:e.refreshEnabled,refreshFrequency:(function(e){switch(parseInt(e.refreshFrequency,10)){case 15:return 15;case 30:return 30;case 60:return 60;case 120:return 120;case 180:return 180}return e.isDaily?1440:10080})(e),refreshDays:w(e.weekDays),refreshTimeWindowIndex:(function(e,t){t=e?(e=e.split(":"),e=parseInt(e[0],10),0<=e&&e<24?Math.floor(e/6):(l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour"),0)):0;return t})(e.executionTime,t),refreshTimesHourly:a.getTimeProWindowIndexFromExecutionTime(e.executionTimeHourly,t),refreshTimeZoneId:e.localTimeZoneId,sendFailureEmail:!0,isRefreshable:e.isRefreshable,refreshNotificationEnabled:e.refreshNotificationEnabled,refreshEmails:{emailsList:void 0,emailValidationError:"",emailValidationWarning:""}}}function b(e,t){switch(e.datasourceType){case d.AnalysisServices:case d.Oracle:case d.SqlServer:case d.MySql:case d.PostgreSql:case d.Sybase:case d.Teradata:case d.DB2:var o=void 0,i=void 0,n=e.connectionStringGeneralProperties;if(!n)return d[e.datasourceType];for(var r=n.length,a=0;a<r;a++){var s=n[a];"database"===s.name?o=s.value:"server"===s.name&&(i=s.value)}return o||i?(o||"")+(o&&i?"-":"")+(i||""):d[e.datasourceType];case d.Folder:case d.File:var l=_.find(e.connectionStringGeneralProperties,{name:"path"});return jsCommon.Utility.extractFileNameFromPath(l.value);case d.Extension:return _.find(e.connectionStringGeneralProperties,{name:"extensionDataSourceKind"}).value;case d.AdoDotNet:var c=_.find(e.connectionStringGeneralProperties,{name:"workspaceId"}),l=_.find(e.connectionStringGeneralProperties,{name:"modelId"});return t.format("SettingsDataset_AdoDotNetText",[c.value,l.value]);case d.ActiveDirectory:case d.AzureTable:case d.AzureBlob:case d.Web:case d.OData:case d.SharePoint:case d.GoogleAnalytics:case d.Exchange:case d.Facebook:case d.HDInsight:case d.AzureMarketplace:case d.Salesforce:case d.SAPBW:case d.SAP:case d.OleDb:case d.ODBC:case d.Essbase:return d[e.datasourceType];default:return e.name}}function S(e,t){switch(+e.datasourceType){case d.Folder:case d.File:return _.find(e.connectionStringGeneralProperties,{name:"path"}).value;default:return b(e,t)}}function w(e){for(var t=new Array,o=0;o<7;o++)t[o]=1==(1&e),e>>=1;return t}function C(e){for(var t=0,o=6;0<=o;o--)t<<=1,t=!0===e[o]?1|t:t;return t}function T(e){for(var t=[],o=e.length,i=0;i<o;i++){var n=e[i],r=(n.refreshHourIndex+1)%12+12*n.refreshAmPmIndex,n=30*n.refreshMinuteIndex;t.push(r.toString()+":"+(0===n?"00":n.toString())+":00")}return JSON.stringify(t)}c=l.common||(l.common={}),e=c.helpers||(c.helpers={}),n={year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},s={year:"2-digit",month:"numeric",day:"numeric"},a=e.ModelConverterHelper||(e.ModelConverterHelper={}),t=c.contracts.ContentProviderClientCategory,r=c.contracts.gateway.CredentialType,o=c.contracts.DataCacheModeType,d=c.contracts.gateway.DataSourceType,i=jsCommon.Utility,a.onpremGatewayRequired=u,a.onpremGatewayAllowed=function(e){return u(e)||p(e)},a.canScheduleRefresh=p,a.convertRefreshTimeToJsDateTime=m,a.convertRefreshTimeToLocaleString=function(e,t,o){void 0===o&&(o=!0);try{var i=m(e);return!o||!i||2998<i.getFullYear()||i.getFullYear()<2?t.get("ManageDatasets_NextRefresh_NA"):i.toLocaleString()}catch(e){return e.message,t.get("ManageDatasets_NextRefresh_NA")}},a.getLocaleDateStringFromRefreshTime=function(e,t){try{var o=a.convertRefreshTimeToJsDateTime(e);return!o||2998<o.getFullYear()||o.getFullYear()<2?t&&t.invalidDateTimePlaceholder||"":o.toLocaleDateString(void 0,t&&t.format||s)}catch(e){return e.message,t&&t.invalidDateTimePlaceholder||""}},a.getLocaleStringFromRefreshTime=function(e,t){try{var o=a.convertRefreshTimeToJsDateTime(e);return!o||2998<o.getFullYear()||o.getFullYear()<2?t&&t.invalidDateTimePlaceholder||"":o.toLocaleString(void 0,t&&t.format||n)}catch(e){return e.message,t&&t.invalidDateTimePlaceholder||""}},a.convertDMTSDiscoverDatasourcesResponseToDatasources=function(e,t,o){for(var i=new Array,n=0,r=t;n<r.length;n++){var a=r[n],s=g(e,a,o);s.datasourceId=a.dataSourceId,s.dataSourceObjectId=a.dataSourceObjectId,s.gatewayId=a.gatewayId,s.gatewayObjectId=a.gatewayObjectId,s.testConnectionState=a.credentialDetails?c.models.TestConnectionState.NotStart:c.models.TestConnectionState.NotSpecified,s.alreadyExecutedTestConnection=!1,i.push(s)}return i},a.convertCredentialTypeToString=h,a.convertDMTSDatasourceToDatasetDatasource=g,a.convertConnectionDetailsToConnectionStringGeneralProperties=f,a.getConnectionStringGeneralProperties=v,a.convertCloudDirectQueryDatasourceToDatasetDatasource=function(e,t,o){var i=jsCommon.JsonExtensions.tryParseJSON(t.connectionDetails),n=[];return _.includes(t.supportedAuthenticationTypes,r.Basic)&&n.push(r.Basic),_.includes(t.supportedAuthenticationTypes,r.OAuth2)&&n.push(c.contracts.gateway.CredentialType.OAuth2),t.supportedAuthenticationTypes=n,(t={modelId:e,datasourceId:t.dataSourceId,dataSourceObjectId:t.dataSourceObjectId,name:c.contracts.gateway.DataSourceType[t.dataSourceType],oAuth2URL:t.oAuth2Endpoint,oAuth2Nonce:t.oAuth2Nonce,datasourceType:t.dataSourceType,credentialTypes:t.supportedAuthenticationTypes,credentialTypesNames:h(t.supportedAuthenticationTypes),connectionStringGeneralProperties:v(i),onpremGatewayRequired:!1,gatewayId:t.gatewayId,gatewayObjectId:t.gatewayObjectId,isCloudDirectQuery:!0,testConnectionErrorMessage:t.credentialDetails?null:o.get("SettingsDataset_Error_CredentialsNotFound"),testConnectionState:t.credentialDetails?c.models.TestConnectionState.Passed:c.models.TestConnectionState.Failed,alreadyExecutedTestConnection:!0,singleSignOnType:t.singleSignOnType}).fullName=a.getDatasourceFullName(t,o),t.displayName=a.getDatasourceDisplayName(t,o),t},a.getRefreshSettings=y,a.convertModelToDataset=function(e,t){var o=e.refreshSchedule,i=y(o,t);return 10080===i.refreshFrequency&&o.refreshFrequency&&o.refreshFrequency===1440..toString()&&9===e.contentProviderId&&(i.refreshFrequency=1440,i.refreshEnabled=!0,e.nextRefreshTime&&((!i.refreshTimesHourly||i.refreshTimesHourly.length<1)&&(i.refreshTimesHourly=(function(e){var t=a.convertRefreshTimeToJsDateTime(e),e=t.getMinutes(),t=t.getHours();30<e?(e=0,24<++t&&(t-=24)):e=30;return[{refreshHourIndex:(t+11)%12,refreshMinuteIndex:Math.floor(e/30),refreshAmPmIndex:Math.floor(t/12),isIncomplete:!1,isDuplicate:!1}]})(e.nextRefreshTime)),i.refreshTimeWindowIndex&&0!==i.refreshTimeWindowIndex||(i.refreshTimeWindowIndex=(function(e){var t=a.convertRefreshTimeToJsDateTime(e),e=t.getHours();30<t.getMinutes()&&24<++e&&(e-=24);return e})(e.nextRefreshTime)))),new c.models.SettingsDatasetModel(e,e.id,e.displayName,e.description,4===e.lastRefreshStatus||2===e.lastRefreshStatus,_.isEmpty(e.refreshHistories)?"":e.refreshHistories[0].friendlyErrorMessage,a.convertRefreshTimeToJsDateTime(e.nextRefreshTime).toString(),i,e.parameters,t)},a.convertSettingModelToRefreshScheduleContract=function(e,t){var o=1440===e.refreshFrequency,i=10080===e.refreshFrequency,n=null;o?n=c.constants.allWeekDays:i&&(n=C(e.refreshDays));var r=null;return o||i||(r=e.refreshFrequency.toString()),{importAndRefreshBehavior:e.importAndRefreshBehavior,refreshEnabled:e.refreshEnabled,isDaily:1440===e.refreshFrequency,refreshFrequency:r,weekDays:n,executionTime:t?(function(e){var t=new Date;t.setHours(e),t.setMinutes(0),t.setSeconds(0);e=t.toTimeString(),t=e.indexOf(" ");return e.substr(0,t)})(6*e.refreshTimeWindowIndex):null,executionTimeHourly:t?null:T(e.refreshTimesHourly),localTimeZoneId:e.refreshTimeZoneId,refreshNotificationEnabled:e.refreshNotificationEnabled,refreshContacts:e.refreshEmails.emailsList?e.refreshEmails.emailsList.inputUserList:[]}},a.convertModelsToDatasets=function(e,t){for(var o=new Array,i=0,n=e;i<n.length;i++){var r=n[i],r=a.convertModelToDataset(r,t);o.push(r)}return o},a.getDatasourceDisplayName=b,a.getDatasourceFullName=S,a.getDatasourceNames=function(e,t){if(!_.isEmpty(e))for(var o=0,i=e;o<i.length;o++){var n=i[o];n.displayName=b(n,t),n.fullName=S(n,t)}},a.getContentProviderClientCategory=function(e){if(e){if(null!=e.clientCategory)return e.clientCategory;switch(e.category){case 1:case 3:case 6:return t.Service;case 2:case 5:case 4:case 7:return t.Organizational}}},a.convertModelWeekdaysToDatasetWeekdays=w,a.convertDatasetWeekdaysToModelWeekdays=C,a.getExecutionTimesHourlyFromTimeWindowIndex=T,a.getTimeProWindowIndexFromExecutionTime=function(e,t){var o=[];if(e){try{var i=JSON.parse(e)}catch(e){return void l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat")}for(var n=i.length,r=0;r<n;r++){var a=i[r].split(":"),s=parseInt(a[0],10),a=parseInt(a[1],10);s<0||24<=s?l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour"):a<0||60<=a?l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute"):(s={refreshHourIndex:(s+11)%12,refreshMinuteIndex:Math.floor(a/30),refreshAmPmIndex:Math.floor(s/12),isIncomplete:!1,isDuplicate:!1},o.push(s))}}return o},a.getIsQnaSupported=function(e){return _.isEmpty(e.displayName)?e.qnaSupported:!0===e.qnaSupported&&(1===e.pushDataVersion||2===e.pushDataVersion||e.dataCacheMode===o.Import&&!1!==e.powerBIQnaEnabled||!!e.onPremModelConnectionString&&e.powerBIQnaEnabled||(e.dataCacheMode===o.DirectQuery||e.dataCacheMode===o.Mixed)&&e.powerBIQnaEnabled)},a.isDQOrLiveConnectToOnPremModel=function(e){return!!e&&(e.dataCacheMode===o.DirectQuery||e.dataCacheMode===o.Mixed||!_.isEmpty(e.onPremModelConnectionString))},a.hasDeletedDataSources=function(e){for(var t=0,o=e.monikers;t<o.length;t++){var i=o[t];if(_.some(i.monikerDataSources,(function(e){return null==e.dataSourceId})))return!0}return!1},a.getEffectiveDatasourcesFromDiscoverDatasourceResponse=function(e,t){for(var o=[],i=0,n=e.monikers;i<n.length;i++){var r=n[i],r=_.map(r.monikerDataSources,(function(e){return e.dataSourceObjectId}));_.every(r,(function(e){return e}))&&o.push.apply(o,r||[])}return _.filter(e.datasources,(function(e){return(e.gatewayObjectId===t||!1===e.onPremGatewayRequired)&&_.includes(o,e.dataSourceObjectId)}))}})(powerbi=powerbi||{}),(function(o){!(function(e){var i,n,r;function t(e,t,o){void 0===o&&(o=!1),this.redirectPath=e,this.appSettings=t,this.useMsPbi=o}e=e.helpers||(e.helpers={}),i=o.common.constants.myWorkspaceFolderId,n=jsCommon.StringExtensions,r=window,t.webRedirectUrlHelper=function(e){return this._webRedirectUrlHelper||(this._webRedirectUrlHelper=new t("Redirect",e)),this._webRedirectUrlHelper},t.mobileRedirectUrlHelper=function(e){return this._mobileRedirectUrlHelper||(this._mobileRedirectUrlHelper=new t("MobileRedirect.html",e)),this._mobileRedirectUrlHelper},t.prototype.getAppRedirectUrl=function(e,t,o,i){return this.getRedirectUrl({action:"OpenApp",groupObjectId:e,context:i,appId:t,ctid:o})},t.prototype.getDashboardRedirectUrl=function(e,t,o,i,n,r,a,s){return"MSTeams"!==a&&_.isEmpty(e)&&_.isEmpty(t),this.getRedirectUrl({action:"OpenDashboard",context:n,groupObjectId:e,appId:t,dashboardObjectId:o,ctid:i,tileId:r,pbi_source:a,openDashboardSource:s})},t.prototype.getReportRedirectUrl=function(e,t,o,i,n,r,a,s,l){"MSTeams"!==s&&_.isEmpty(e)&&_.isEmpty(t);l={action:1===a?"OpenRdlReport":"OpenReport",context:r,groupObjectId:e,appId:t,reportObjectId:o,ctid:n,pbi_source:s,bookmarkGuid:l};return _.isEmpty(i)||(l.reportPage=i),this.getRedirectUrl(l)},t.prototype.getDatasetRedirectUrl=function(e,t,o,i){return"MSTeams"===i||_.isEmpty(e),this.getRedirectUrl({action:"OpenDataset",context:o,groupObjectId:e,datasetObjectId:t,pbi_source:i})},t.prototype.getScorecardRedirectUrl=function(e,t,o,i,n){return this.getRedirectUrl({action:"OpenScorecard",groupObjectId:e,scorecardObjectId:t,ctid:o,context:i,pbi_source:n})},t.prototype.getWorkbookRedirectUrl=function(e,t,o,i,n){return _.isEmpty(e)&&_.isEmpty(t),this.getRedirectUrl({action:"OpenWorkbook",context:n,groupObjectId:e,appId:t,workbookUniqueId:o,ctid:i})},t.prototype.getTileRedirectUrl=function(e,t,o,i,n){return _.isEmpty(e)&&_.isEmpty(t),this.getRedirectUrl({action:"OpenTile",context:n,groupObjectId:e,appId:t,dashboardObjectId:o,tileObjectId:i})},t.prototype.getServiceAppInstallRedirectUrl=function(e,t,o,i){o={action:"InstallApp",appId:e,packageKey:t.replace("=",""),ownerId:o};_.isEmpty(i)||(o.buildVersion=i);i=(window.location.protocol+"//"+window.location.host).replace(r.baseUrl,r.feUrl);return this.getRedirectUrl(o,i)},t.prototype.getLineageViewRedirectUrl=function(e,t){return _.isEmpty(e),this.getRedirectUrl({action:"OpenLineageView",groupObjectId:e,reportObjectId:t})},t.prototype.getRedirectUrl=function(e,t){if(this.useMsPbi){var o=e.action;return e=this.removeEmptyParams(e,this.useMsPbi),n.format("{0}/{1}?{2}","mspbi://app",o,$.param(e))}e=this.removeEmptyParams(e);t=t||this.appSettings.baseUrl;return n.format("{0}/{1}?{2}",t,this.redirectPath,$.param(e))},t.prototype.removeEmptyParams=function(e,t){void 0===t&&(t=!1);var o=[];return!_.isEmpty(e.groupObjectId)&&e.groupObjectId!==i||o.push("groupObjectId"),_.isEmpty(e.appId)&&o.push("appId"),_.isEmpty(e.context)&&o.push("context"),_.isEmpty(e.reportObjectId)&&o.push("reportObjectId"),_.isEmpty(e.ctid)&&o.push("ctid"),_.isEmpty(e.openDashboardSource)&&o.push("openDashboardSource"),_.isEmpty(e.tileId)&&o.push("tileId"),_.isEmpty(e.dashboardObjectId)&&o.push("dashboardObjectId"),_.isEmpty(e.bookmarkGuid)&&o.push("bookmarkGuid"),_.isEmpty(e.pbi_source)&&o.push("pbi_source"),(_.isEmpty(e.action)||t)&&o.push("action"),e=0<o.length?_.omit(e,o):e},e.RedirectUrlHelper=t})(o.common||(o.common={}))})(powerbi=powerbi||{}),(function(e){!(function(i){var e;function t(e,t){var o=this;this.services=t,this.scope=e,this.scope.gridLayoutService=this.services.gridLayout,this.scope.$watch("gridLayoutService.strategy",(function(){o.scope.gridLayoutContainer.onGridLayoutChanged(i.models.gridLayoutConstants.changeType.refresh)}))}e=i.controllers||(i.controllers={}),t.createOptions=function(){return{additionalServices:["gridLayout"]}},e.GridLayoutController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e){var t=this;this.scope=e,this.scope.close=function(){return t.onClose()},this.scope.confirm=function(){return t.onConfirm()},this.scope.cancel=function(){return t.onCancel()}}e=e.controllers||(e.controllers={}),t.prototype.onClose=function(){this.scope.onCloseAction&&this.scope.onCloseAction()},t.prototype.onConfirm=function(){this.scope.onConfirmAction&&this.scope.onConfirmAction(),this.scope.viewModel.autoCloseDialogOnConfirmButtonSelected&&this.onClose()},t.prototype.onCancel=function(){this.scope.onCancelAction&&this.scope.onCancelAction()},e.ModalDialogController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(t){var e;function i(e,t){var o=this;this.scope=e,this.services=t,this.scope.onInternalBlur=function(){return o.onInternalBlur()},this.scope.onInternalFocus=function(){return o.onInternalFocus()},this.scope.onInternalKeyDown=function(e){return o.onInternalKeyDown(e)},this.scope.onInternalChange=function(){return o.onInternalChange()},this.scope.maxInputLength=this.scope.maxInputLength||i.defaultMaxLength,this.scope.placeholder=this.scope.placeholder||i.defaultPlaceholder,this.scope.inputValue=this.scope.inputValue||"",this.scope.forceComplete=null==this.scope.forceComplete||this.scope.forceComplete,this.scope.clearAfterComplete=null==this.scope.clearAfterComplete||this.scope.clearAfterComplete,this.scope.emitOnBlur=null==this.scope.emitOnBlur||this.scope.emitOnBlur}e=t.controllers||(t.controllers={}),i.prototype.isInputValid=function(){var e=this.scope.inputValue;return this.scope.validate?this.scope.validate(e):this.internalValidate(e)},i.prototype.onInternalFocus=function(){var e=this;this.services.timeout((function(){e.scope.isFocused=!0}))},i.prototype.onInternalBlur=function(){var e=this;this.scope.textInputStyle="",this.cancelInput?(this.scope.inputValue="",this.cancelInput=!1):this.onInternalInputComplete(),this.scope.emitOnBlur&&this.scope.$emit(t.constants.textInputOnBlurEventName),this.services.timeout((function(){e.scope.isFocused=!1}))},i.prototype.onInternalKeyDown=function(e){var t=this;switch(e.keyCode){case 13:this.services.timeout((function(){t.scope.isFocused=!1}));break;case 27:this.services.timeout((function(){t.cancelInput=!0,t.scope.isFocused=!1,t.scope.cancel&&t.scope.cancel()}))}},i.prototype.onInternalChange=function(){this.scope.textInputStyle=this.isInputValid()?i.cssActiveClass:i.cssErrorClass},i.prototype.onInternalInputComplete=function(){this.isInputValid()||this.scope.forceComplete?(this.scope.onComplete&&this.scope.onComplete(this.scope.inputValue.trim()),this.scope.textInputStyle="",this.scope.clearAfterComplete&&(this.scope.inputValue="")):this.scope.isFocused=!0},i.prototype.internalValidate=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},i.cssActiveClass="active",i.cssErrorClass="error",i.defaultMaxLength=100,i.defaultPlaceholder="",e.TextInputController=i})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){(function(i){i.Anchor="toolbar-anchor",i.AnchorSelector="["+i.Anchor+"]",i.Container="toolbar-container",i.ContainerSelector="["+i.Container+"]",i.ActiveClass="overlayActive",i.ActiveSelector="."+i.ActiveClass,i.ToolbarClass="toolbarOverlay",i.ToolbarSelector="."+i.ToolbarClass;var o={layout:"overlayedToolbar",preferHorizontalLayout:!1,theme:"darkTheme"};i.create=function(e,t,o){return new n(e,t,o)};var n=(e.prototype.setToolbar=function(e){var t,o=this.toolbar;o!==e&&(o&&o.remove(),e&&((this.toolbar=e).addClass(i.ToolbarClass),o=(t=this.options).layout,t=t.theme,this.updateTheme(void 0,t),this.updateLayout(void 0,o),this.setVisibility(this.visible),this.container.append(e)))},e.prototype.destroy=function(){var e=this.toolbar;e&&e.remove(),this.toolbar=void 0,this.visible=!1},e.prototype.updateOptions=function(e){var t=this.options;e=this.options=_.defaults({},e,this.options,o),this.updateTheme(t&&t.theme,e.theme),this.updateLayout(t&&t.layout,e.layout)},e.prototype.updateTheme=function(e,t){this.toolbar&&e!==t&&(null!=e&&this.toolbar.removeClass(e),this.toolbar.addClass(t))},e.prototype.updateLayout=function(e,t){this.toolbar&&e!==t&&("overlayedToolbar"!==t||this.anchor,i.AnchorSelector,null!=e&&(this.toolbar.removeClass(e),"overlayedToolbar"===e&&this.clearToolbarPosition()),this.toolbar.addClass(t))},e.prototype.show=function(){this.toolbar&&(this.repositionToolbar(),this.toolbar.addClass(i.ActiveClass),this.visible=!0)},e.prototype.hide=function(){this.toolbar&&(this.toolbar.removeClass(i.ActiveClass),this.visible=!1)},e.prototype.setVisibility=function(e){e?this.show():this.hide()},e.prototype.isVisible=function(){return this.visible},e.prototype.clearToolbarPosition=function(){this.toolbar&&this.toolbar.removeClass("top right bottom left")},e.prototype.repositionToolbar=function(){var e,t,o,i,n,r,a,s,l,c,d,u,p,m;"overlayedToolbar"!==this.options.layout||(e=this.toolbar)&&(this.anchor.length,t=e.outerWidth(!0),p=e.outerHeight(!0),i=(o=this.anchor.get(0).getBoundingClientRect()).left,c=o.right,u=this.container.get(0).getBoundingClientRect(),n=o.top,m=r=!(d=0),l=t+17,s=i-u.left,a=u.width-c,this.options.preferHorizontalLayout&&(l<s||l<a)?d=a<=s?i-l:c+17:(s=u.top,l=o.top-p-27,c=o.top+o.height+27,(d=i)+t>u.left+u.width&&(d=i+o.width-t,r=!1),d<0&&(d=0),(n=l)<s&&(n=c,m=!1)),(u=u.bottom)<(p=n+p+27)&&(n-=p-u),e.css({top:n,left:d}),m=(r?"left":"right")+" "+(m?"top":"bottom"),e.removeClass("top right bottom left"),e.addClass(m))},e);function e(e,t,o){this.anchor=e.closest(i.AnchorSelector),this.container=e.closest(i.ContainerSelector),this.container.length,this.updateOptions(o),this.visible=!1,t&&this.setToolbar(t)}})((e=(e=e.common||(e.common={})).controllers||(e.controllers={})).ToolbarOverlay||(e.ToolbarOverlay={}))})(powerbi=powerbi||{}),(function(t){var e;(function(c){var o,i,d,u=jsCommon.BrowserUtils,p=t.visuals.utility.StyleUtils;(e=o=c.TransformRestriction||(c.TransformRestriction={}))[e.Parent=1]="Parent",e[e.None=2]="None",e[e.Custom=3]="Custom",(e=i=c.TransformHandleDirections||(c.TransformHandleDirections={}))[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=4]="Left",e[e.Right=8]="Right",e[e.UpLeft=16]="UpLeft",e[e.UpRight=32]="UpRight",e[e.DownLeft=64]="DownLeft",e[e.DownRight=128]="DownRight",e[e.All=255]="All",(e=d=c.TransformNudgeDirection||(c.TransformNudgeDirection={}))[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right";c.SmallNudgeDistance=1,c.BigNudgeDistance=10,c.TransformElementClass="transformElement";var l="dragging",m="resizing",s="resizeHandleGroup-",n={preventDefault:"auto",minWidth:15,minHeight:15,maxWidth:1e4,maxHeight:1e4,autoScrollParent:null,inertia:!1,disableDrawing:!1},e=(a.prototype.attachKeyHandlers=function(){var l=this;this.element.keydown((function(e){var t,o=e.shiftKey,i=e.shiftKey&&e.ctrlKey;if("true"!==$(l.element).attr("drag-resize-disabled")&&(!u.isCtrlOrMeta(e)||i)){var n=l.getDimensionsFromElement(l.element,!0),r=o?c.BigNudgeDistance:c.SmallNudgeDistance;if(i){var a=function(e){return e/2===Math.round(e/2)};switch(e.keyCode){case 40:--n.height,t=d.Down,a(n.height)&&(n.y+=1);break;case 38:n.height+=1,t=d.Up,a(n.height)||--n.y;break;case 37:--n.width,t=d.Left,a(n.width)&&(n.x+=1);break;case 39:n.width+=1,t=d.Right,a(n.width)||--n.x;break;default:return}}else switch(e.which){case 40:t=d.Down,n.y+=r;break;case 38:t=d.Up,n.y-=r;break;case 37:t=d.Left,n.x-=r;break;case 39:t=d.Right,n.x+=r;break;default:return}var s=l.getRestrictionParent();s&&0!==s.length&&(i=p.getPadding(s),s=l.getDimensionsFromElement(s),n=l.restrictTo(n,s,i)),l.transformRelativeDimensionFromElement(l.element,n),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),l.notifyNudge(n,{bigNudge:o,direction:t})}}))},a.prototype.restrictTo=function(e,t,o){var i=-o.left||0,n=-o.top||0;return{x:Math.max(i,Math.min(e.x,t.width-e.width)),y:Math.max(n,Math.min(e.y,t.height-e.height)),width:Math.min(e.width,t.width+o.left+o.right),height:Math.min(e.height,t.height+o.top+o.bottom)}},a.prototype.destroy=function(){this.dragInteractable&&this.dragInteractable.unset(),this.resizeInteractable&&this.resizeInteractable.unset(),this.autoScrollParent&&this.autoScrollParent.off("scroll",this.autoScrollParentScrollHandlerFn)},a.prototype.getResizeHandleDirectionArray=function(){var e=[],t=this.options.resizeHandleDirections;return t&i.Up&&e.push("up"),t&i.Down&&e.push("down"),t&i.Left&&e.push("left"),t&i.Right&&e.push("right"),t&i.UpLeft&&e.push("up-left"),t&i.UpRight&&e.push("up-right"),t&i.DownLeft&&e.push("down-left"),t&i.DownRight&&e.push("down-right"),e},a.prototype.getRestrictionString=function(){var e;switch(this.options.restriction){case o.Parent:e="parent";break;case o.Custom:e=this.options.getCustomRestrictionSelector();break;default:o.None;e=""}return e},a.prototype.getRestrictionParent=function(){var e=this.getRestrictionString();switch(e){case"":return;case"parent":return this.element.parent();default:return this.element.parent().closest(e)}},a.prototype.getAutoScrollOptions=function(){var e=this.options.autoScrollParent;return null==e?void 0:{enabled:!0,container:e[0]}},a.prototype.updateOptions=function(e){var t=this.options||{};this.options=__assign(__assign(__assign({},n),t),e),this.options.restrictDraw&&this.options.restriction!==o.None?this.restrictionElement=this.getRestrictionParent():this.restrictionElement=void 0,this.updateHandlers()},a.prototype.updateHandlers=function(){var e,t;(this.dragInteractable||this.resizeInteractable)&&(e=this.getAutoScrollOptions(),this.dragInteractable&&(t=0===this.getRestrictionString().length?void 0:{restriction:this.getRestrictionString(),endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},this.dragInteractable.draggable({restrict:t,autoScroll:e})),this.resizeInteractable&&(t={restriction:""===this.getRestrictionString()?void 0:this.getRestrictionParent().get(0),elementRect:{top:0,left:0,bottom:1,right:1}},this.resizeInteractable.draggable({restrict:t,autoScroll:e})))},a.prototype.attachDragHandler=function(){var e,n,r,a=this,t=this.element.get(0),s=this.options.autoScrollParent,o=this.options.preventDefault;this.dragInteractable=this.ngZone.runOutsideAngular((function(){return interact(t).preventDefault(o).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({inertia:!1,onstart:function(e){return a.ngZone.run((function(){return a.onDragStart(e)}))},onmove:function(e){return a.ngZone.run((function(){return a.onDragMove(e)}))},onend:function(e){return a.ngZone.run((function(){return a.onDragEnd()}))}})})),this.element.on("pointerdown.transform",(function(){a.dragInteractable&&a.options.getDragRestriction&&(a.dragInteractable.options.drag.restrict.elementRect=a.options.getDragRestriction())})),s&&(e=jsCommon.DeferUtility.deferUntilNextFrame,r=n=0,this.autoScrollParent=s,this.autoScrollParentScrollHandlerFn=e((function(){var e=s.scrollTop(),t=s.scrollLeft(),o=t-r,i=e-n;0==o&&0==i||(i={dx:o,dy:i},a.element.hasClass(l)?a.onDragMove(i):a.element.hasClass(m)&&a.onResizeMove(i)),n=e,r=t})),s.on("scroll.transformElement",this.autoScrollParentScrollHandlerFn))},a.prototype.onDragStart=function(e){this.dragStopped=!1,u.isCtrlOrMeta(e)||e.shiftKey?this.dragStopped=!0:(this.options&&this.options.supportsPointerCapture&&a.pointerTrap.setPointerCapture&&0<e.interaction.pointerIds.length&&null!=e.interaction.pointerIds[0]&&a.pointerTrap.setPointerCapture(e.interaction.pointerIds[0]),this.dimensions=this.getDimensionsFromElement(this.element),this.prevDimensions=__assign({},this.dimensions),this.element.addClass(l),this.notifyDragStart(this.dimensions))},a.prototype.onDragMove=function(e){this.dragStopped||(this.dimensions.x+=e.dx,this.dimensions.y+=e.dy,this.draw(this.dimensions),this.notifyDragMove(this.dimensions))},a.prototype.onDragEnd=function(){this.dragStopped||(this.element.removeClass(l),this.snapToGridIfNeeded(),this.notifyDragEnd(this.dimensions))},a.prototype.attachResizeHandles=function(){for(var o,i=this,e=this.getResizeHandleDirectionArray(),t=0,n=e.length;t<n;t++){var r=$("<div></div>").addClass("resizeHandle").attr("data-direction",e[t]).appendTo(this.element);this.options.useCustomResizeHandles&&r.addClass("customHandle"),this.options.transformId&&r.addClass(s+this.options.transformId)}var a=".resizeHandle"+(this.options.transformId?"."+s+this.options.transformId:"");this.resizeInteractable=this.ngZone.runOutsideAngular((function(){return interact(a,{context:i.rawElement}).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({onstart:function(e){return i.ngZone.run((function(){return i.onResizeStart(e)}))},onmove:function(e){return i.ngZone.run((function(){o=e,i.onResizeMove(e)}))},onend:function(){return i.ngZone.run((function(){o=null,i.onResizeEnd()}))}})})),this.element.bind("keydown","keyup",(function(e){var t="keydown"===e.type;i.element.hasClass(m)&&16===e.keyCode&&o&&t!==o.shiftKey&&(o.shiftKey=t,i.onResizeMove(o))}))},a.prototype.onResizeStart=function(e){this.isResizing=!0,void 0!==this.element&&(this.preserveAspectRatio="true"===this.element.attr("preserve-aspect-ratio"));var t=e.target;this.element.addClass(m),this.dimensions=this.getDimensionsFromElement(this.element),this.prevDimensions=__assign({},this.dimensions),this.resizeStartRect={left:this.dimensions.x,top:this.dimensions.y,right:this.dimensions.x+this.dimensions.width,bottom:this.dimensions.y+this.dimensions.height,width:this.dimensions.width,height:this.dimensions.height};t=t.getAttribute("data-direction");this.resizeDirection={up:/up/.test(t),down:/down/.test(t),left:/left/.test(t),right:/right/.test(t)},this.setTransformDelta(e),this.aspectRatio=this.calculateAspectRatio(this.dimensions,this.options.aspectRatioOffset),_.extend(this.restricted,this.dimensions),this.notifyResizeStart(this.dimensions)},a.prototype.setTransformDelta=function(e){this.transformDelta.width=e.clientX-(this.resizeDirection.left?this.resizeStartRect.left:this.resizeStartRect.right),this.transformDelta.height=e.clientY-(this.resizeDirection.up?this.resizeStartRect.top:this.resizeStartRect.bottom)},a.prototype.calculateAspectRatio=function(e,t){var o=e.height,e=e.width;return t&&(o+=t.height,e+=t.width),o/e},a.prototype.onResizeMove=function(e){var t,o=this.options.aspectRatioOffset||{width:0,height:0},i=e.clientY-this.transformDelta.height,n=e.clientX-this.transformDelta.width,r=0;for(t in this.resizeDirection)r+=this.resizeDirection[t];this.resizeDirection.left&&(this.dimensions.x=n,this.dimensions.width=this.resizeStartRect.right-n),this.resizeDirection.up&&(this.dimensions.y=e.clientY,this.dimensions.height=this.resizeStartRect.bottom-i),this.resizeDirection.right&&(this.dimensions.width=n-this.resizeStartRect.left),this.resizeDirection.down&&(this.dimensions.height=i-this.resizeStartRect.top),(this.preserveAspectRatio||e.shiftKey)&&2===r?(n=void 0,n=(i=this.getRestrictionParent())&&i.length?(e=this.rawElement.getBoundingClientRect().top-i.get(0).getBoundingClientRect().top,this.resizeDirection.up?this.dimensions.height+e:i.get(0).clientHeight-e):void 0,a.fixDimensionsBasedOnAspectRatio(this.options,this.aspectRatio,n,o,this.dimensions),this.restricted.width=this.dimensions.width,this.restricted.height=this.dimensions.height):(this.restricted.width=Math.min(Math.max(this.dimensions.width,this.options.minWidth),this.options.maxWidth),this.restricted.height=Math.min(Math.max(this.dimensions.height,this.options.minHeight),this.options.maxHeight)),this.resizeDirection.left&&(this.restricted.x=this.resizeStartRect.right-this.restricted.width),this.resizeDirection.up&&(this.restricted.y=this.resizeStartRect.bottom-this.restricted.height),this.restricted.angle=p.getRotateAngleFromElement(this.element),this.draw(this.restricted),this.notifyResizeMove(this.restricted)},a.fixDimensionsBasedOnAspectRatio=function(e,t,o,i,n){void 0===o&&(o=Number.MAX_VALUE);var r=Math.min(n.width,e.maxWidth)+i.width,a=r*t;(o=Math.min(e.maxHeight,o)+i.height)<a&&(r=(a=o)/t),(r=a<e.minHeight+i.height?(a=e.minWidth+i.height)/t:r)<e.minWidth+i.width&&(a=(r=e.minWidth+i.width)*t),n.height=a-i.height,n.width=r-i.width},a.prototype.onResizeEnd=function(){this.isResizing=!1,this.element.removeClass(m),_.extend(this.dimensions,this.restricted),this.snapToGridIfNeeded(),this.notifyResizeEnd(this.dimensions)},a.prototype.getDimensionsFromElement=function(e,t){var o=this;void 0===t&&(t=!1);var i=this.getPositionFromElement(e);!t||(n=e.parents("."+c.TransformElementClass)).length&&n.each((function(e,t){t=o.getPositionFromElement($(t));i.x+=t.x,i.y+=t.y}));var n=this.getSizeFromElement(e),e=p.getRotateAngleFromElement(e);return{x:i.x,y:i.y,width:n.width,height:n.height,angle:e}},a.prototype.transformRelativeDimensionFromElement=function(e,o){var i=this,e=e.parents("."+c.TransformElementClass);e.length&&e.each((function(e,t){t=i.getPositionFromElement($(t));o.x-=t.x,o.y-=t.y}))},a.prototype.getSizeFromElement=function(e){return{width:e.width(),height:e.height()}},a.prototype.getPositionFromElement=function(e){return p.getTranslateTransformFromElement(e)},a.prototype.draw=function(e){var t,o,i,n,r,a;this.options.disableDrawing||(t=this.prevDimensions,e=e||this.dimensions,this.options.getIntermediateDimensions&&(a=this.options.getIntermediateDimensions(e)),e=_.extend({},a||e),o=this.element.get(0).style,i=e.angle,_.isEmpty(this.restrictionElement)||(n=this.getDimensionsFromElement(this.restrictionElement),e.x=Math.max(n.x,e.x),e.y=Math.max(n.y,e.y),r=Math.max(0,e.x+e.width-(n.x+n.width)),a=Math.max(0,e.y+e.height-(n.y+n.height)),this.isResizing?(e.height=e.height-a,e.width=e.width-r):(e.x=e.x-r,e.y=e.y-a,e.x,n.x,e.y,n.y)),e.x===t.x&&e.y===t.y&&e.angle===t.angle||(o.webkitTransform=o.transform="translate("+e.x+"px, "+e.y+"px)"+(i?" rotate("+i+"deg)":""),t.x=e.x,t.y=e.y,t.angle=t.angle),t.width!==e.width&&(o.width=e.width+"px",t.width=e.width),t.height!==e.height&&(o.height=e.height+"px",t.height=e.height))},a.prototype.snapToGridIfNeeded=function(){!0===this.options.snapToGrid&&this.options.gridSize&&(this.dimensions||(this.dimensions=this.getDimensionsFromElement(this.element)),this.snapToGrid(this.dimensions))},a.prototype.snapToGrid=function(e){var t=this.options.gridSize;e.x=Math.round(e.x/t.width)*t.width,e.y=Math.round(e.y/t.height)*t.height,e.width=Math.round(e.width/t.width)*t.width,e.height=Math.round(e.height/t.height)*t.height,this.draw(e)},a.prototype.notifyResizeStart=function(e){this.options&&this.options.onResizeStart&&this.options.onResizeStart(e)},a.prototype.notifyResizeMove=function(e){this.options&&this.options.onResizeMove&&this.options.onResizeMove(e)},a.prototype.notifyResizeEnd=function(e){this.options&&this.options.onResizeEnd&&this.options.onResizeEnd(e)},a.prototype.notifyDragStart=function(e){this.options&&this.options.onDragStart&&this.options.onDragStart(e)},a.prototype.notifyDragMove=function(e){this.options&&this.options.onDragMove&&this.options.onDragMove(e)},a.prototype.notifyDragEnd=function(e){this.options&&this.options.onDragEnd&&this.options.onDragEnd(e)},a.prototype.notifyNudge=function(e,t){this.options&&this.options.onNudge&&this.options.onNudge(e,t)},a);function a(e,t,o){this.ngZone=t,this.resizeHandleDirections=i.All,this.dimensions={},this.prevDimensions={},this.restricted={},this.preserveAspectRatio=!1,this.transformDelta={},window.interact&&(interact.pointerMoveTolerance(5),this.element=e,this.rawElement=this.element.get(0),this.updateOptions(o),this.snapToGridIfNeeded(),this.resizeHandleDirections=(this.options&&this.options.resizeHandleDirections?this.options:this).resizeHandleDirections,this.element&&0<this.element.length&&(this.element.addClass(c.TransformElementClass),this.attachDragHandler(),this.attachResizeHandles(),this.updateHandlers(),this.attachKeyHandlers()),a.pointerTrap||(a.pointerTrap=$('<div id="transformPointerTrap" style="position: absolute; width: 1px; height: 1px; top: 0; left: 0"></div>').appendTo("body").get(0)))}c.TransformElement=e})((e=t.common||(t.common={})).controllers||(e.controllers={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).ApplyStyle=function(){this.restrict="A",this.link=function(e,t,o){var i=e.$eval(o.applyStyle);i&&(t.on("$destroy",(function(){return i.removeElement(t)})),i.addElement(t),i.apply(t))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).AutoSelect=function(e){var o=this;this.$timeout=e,this.restrict="A",this.link=function(e,t){o.$timeout((function(){(t.is("input[type=text], textarea")?t:t.find("input[type=text], textarea").first()).select()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).BindTextAndTooltip=function(){this.restrict="A",this.replace=!1,this.link=function(e,t,o){var i=e.$watch(o.bindTextAndTooltip,(function(e){t.text(e||"").attr("title",e||"")}));e.$on("$destroy",(function(){i()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).ClearOnEscape=function(){this.restrict="A",this.require="ngModel",this.link=function(t,e,o,i){e.on("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),t.$apply((function(){i.$setViewValue(""),i.$render()})))}))}}})(powerbi=powerbi||{}),(function(n){var r;((r=n.common||(n.common={})).directives||(r.directives={})).ClickTelemetry=function(e){var i=this;this.restrict="A",this.link=function(e,o,t){o.on(jsCommon.DOMConstants.mouseClickEventName,(function(e){var t;o.prop(r.constants.tagName).toLowerCase()===jsCommon.DOMConstants.Anchor&&(t=o.attr(jsCommon.DOMConstants.hrefAttribute),jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(t)||i.telemetryService.logEvent(n.telemetry.DashboardOpenLink,{url:t}))}))},this.telemetryService=e}})(powerbi=powerbi||{}),(function(e){var t;((t=e.common||(e.common={})).directives||(t.directives={})).CollapsibleSection=function(){this.restrict="E",this.transclude=!0,this.replace=!0,this.templateUrl="views/collapsibleSectionView.html",this.scope={expandedTitleLocalizationId:"@expandedTitleLocalizationId",collapsedTitleLocalizationId:"@collapsedTitleLocalizationId"},this.link=function(o,e,t){o.$watch((function(){return e.is(":visible")}),(function(e,t){!1===e&&(o.isCollapsibleSectionExpanded=!1)}),!0)},this.controller=t.createController(t.controllers.CollapsibleSectionController)}})(powerbi=powerbi||{}),(function(e){var t;((t=e.common||(e.common={})).directives||(t.directives={})).ConfirmationModalDialog=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/confirmationModalDialog.html",this.controller=t.createController(t.controllers.ConfirmationModalDialogController)}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).CustomClick=function(e){var r=this;this.restrict="A",this.link=function(i,e,n){e.on("click",(function(){var e=r.$parse(n.singleClick),t=i.$eval(n.singleClickDisabled),o=n.singleClickTimeout?i.$eval(n.singleClickTimeout):300;t||(void 0!==r.clickTimeout?(clearTimeout(r.clickTimeout),r.clickTimeout=void 0):r.clickTimeout=jsCommon.Zone.setTimeout((function(){e(i),r.clickTimeout=void 0}),o))}))},this.$parse=e}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).DialogConfirmContent=function(){this.restrict="E",this.templateUrl="views/dialogConfirmContent.html",this.replace=!0,this.scope={viewModel:"="}}})(powerbi=powerbi||{}),(function(e){((e=(e=e.common||(e.common={})).directives||(e.directives={})).DirectiveUtils||(e.DirectiveUtils={})).initWhenReady=function(e,t,o,i,n){var r;t[o]!==i?(r=t.$observe(o,(function(e){e===i&&(n(),r())})),e.$on("$destroy",(function(){return r()}))):n()}})(powerbi=powerbi||{}),(function(e){var s,l,c,d;function t(e,t){var a=this;this.restrict="A",this.link=function(o,i,n){var r,e,t;_.isEmpty(n.drag)||(e={start:function(e,t){a.dragDataService.setDragElement(i),n.dragContext?a.dragDataService.setDragContext(o.$eval(n.dragContext)):a.dragDataService.setDragContext(null),t.helper.css(s.widthProperty,i.width()),i.addClass(d)},drag:function(e,t){r&&(a.$interval.cancel(r),r=void 0);var o=i.data[c.DragScrollHandler];o&&(r=a.$interval(o,50,0,!1))},stop:function(e,t){r&&(a.$interval.cancel(r),r=void 0),i.removeClass(d)},helper:function(){return l.prepareDragHelper(i)},scroll:!1,refreshPositions:!0,appendTo:l.getElementToAppendDragHelper(i),distance:4},(t=o.$eval(n.dragConfig))&&_.isNumber(t.distance)&&(e.distance=t.distance),i.draggable(e),n.dragDisabled&&o.$watch((function(){return!!o.$eval(n.dragDisabled)}),(function(e){i.draggable({disabled:e})})),o.$on("$destroy",(function(){return i.draggable({disabled:!0}).draggable("destroy")})))},this.$interval=e,this.dragDataService=t}e=(e=e.common||(e.common={})).directives||(e.directives={}),s=jsCommon.CssConstants,l=jsCommon.DragDropUtils,c=jsCommon.DragDropDataKeys,d="draggable-root-dragging",e.Drag=t})(powerbi=powerbi||{}),(function(e){var n,l;function c(e,t){e.stop(!0,!0).animate({scrollLeft:e.scrollLeft()+t},100)}function d(e,t){e.stop(!0,!0).animate({scrollTop:e.scrollTop()+t},100)}e=(e=e.common||(e.common={})).directives||(e.directives={}),n=jsCommon.DragDropDataKeys,l=10,e.DragScroll=function(e){var i=this;this.restrict="A",this.link=function(e,o,t){o.droppable({over:function(e,t){t.draggable.data[n.DragScrollHandler]=function(){!(function(e,t,o,i){{var n,r,a,s;e&&0<e.length&&t&&0<t.length&&(n=t.offset(),r=e.width(),a=e.height(),s=t.width(),e=t.height(),(function(e){return e[0].scrollHeight>e.height()})(t)&&(i-a/2<n.top?d(t,-1*l):i+a/2>n.top+e&&d(t,l)),(function(e){return e[0].scrollWidth>e.width()})(t)&&(o-r/2<n.left?c(t,-1*l):o+r/2>n.left+s&&c(t,l)))}})(i.dragDataService.getDragElement(),o,t.helper.offset().left,t.helper.offset().top)}},out:function(e,t){return t.draggable.removeData(n.DragScrollHandler)},drop:function(e,t){return t.draggable.removeData(n.DragScrollHandler)}})},this.dragDataService=e}})(powerbi=powerbi||{}),(function(e){!(function(e){var c,d,u,s;function t(e,t,o){var d=this;this.ngParseService=e,this.ngTimeOutService=t,this.timeoutService=o,this.restrict="A",this.link=function(i,e,n){function r(){return n.dropContainerId?$("#"+n.dropContainerId):e}var a=n.dropWatchConfig&&i.$eval(n.dropWatchConfig),s=n.dropAction?d.ngParseService(n.dropAction):void 0,l=n.dropHandler?d.ngParseService(n.dropHandler):void 0,c=!1;d.timeoutService.setTimeout().promise.then((function(){var t,o;c||(t=i.$eval(n.drop),d.initializeDropElement(i,r,s,l,t),a&&(o=!0,i.$watch((function(){return i.$eval(n.drop)}),(function(e){o?o=!1:e!==t&&(t=e,d.initializeDropElement(i,r,s,l,t))}))))})),i.$on("$destroy",(function(){c=!0;var e=r();e.droppable&&e.droppable({disabled:!0}).droppable("destroy")}))},this.postponeCleanup=!1,this.highlightedItems=[]}e=e.directives||(e.directives={}),c=jsCommon.DragDropUtils,d=jsCommon.DragDropDataKeys,u=c.DragoverClass,s=jsCommon.HighlightClasses,t.prototype.initializeDropElement=function(i,e,n,r,t){var a,o,s=this,l=e();_.isEmpty(l),l.droppable&&(l.droppable({disabled:!0}).droppable("destroy"),t&&(a=function(e){return s.mouseMove(e,l,i,n)},o=t.accept.split(/\s/),l.droppable({accept:function(e){return c.isValidDropLocation(e,o)},hoverClass:u,greedy:!1!==t.greedy,tolerance:"pointer",activate:function(e,t){t.draggable.data[d.DropEventHandled]=!1,t.draggable.data[d.DropTarget]=void 0},drop:function(t,o){var e;s.deferredPromise&&(s.timeoutPromise&&(s.ngTimeOutService.cancel(s.timeoutPromise),s.timeoutPromise=void 0),s.deferredPromise=void 0),s.clearHighlighting(),r&&(e=c.getDropPosition(t,l),n?n(i,{dropPosition:e}).then((function(e){0!==e&&r(i,{event:t,ui:o,dropAction:e})})).finally((function(){o.helper.off("mousemove",a)})):r(i,{event:t,ui:o,dropAction:void 0}))},over:function(e,t){s.clearHighlighting(),n&&(s.postponeCleanup=!0,a(e),s.timeoutPromise=s.ngTimeOutService((function(){return s.postponeCleanup=!1}),0,!1),t.helper.on("mousemove",a))},out:function(e,t){n&&(s.deferredPromise&&(s.timeoutPromise&&(s.ngTimeOutService.cancel(s.timeoutPromise),s.timeoutPromise=void 0),s.postponeCleanup=!1,s.deferredPromise=void 0),t.helper.off("mousemove",a),s.postponeCleanup||s.clearHighlighting())}})))},t.prototype.mouseMove=function(e,o,t,i){var n=this,e=c.getDropPosition(e,o),r=o.prev(),a=o.next();i&&(this.timeoutPromise&&this.ngTimeOutService.cancel(this.timeoutPromise),this.deferredPromise=i(t,{dropPosition:e}),this.deferredPromise.then((function(e){if(n.deferredPromise){var t=n.highlightedItems;switch(e){case 0:o.hasClass(s.None.class)||(n.clearHighlighting(),o.addClass(s.None.class),t.push(o));break;case 2:o.hasClass(s.Prepend.class)||(n.clearHighlighting(),o.addClass(s.Prepend.class),r.addClass(s.Append.class),t.push(o),t.push(r));break;case 3:o.hasClass(s.Append.class)||(n.clearHighlighting(),o.addClass(s.Append.class),a.addClass(s.Prepend.class),t.push(o),t.push(a));break;case 1:o.hasClass(s.Replace.class)||(n.clearHighlighting(),o.addClass(s.Replace.class),t.push(o));break;default:n.clearHighlighting()}}})).finally((function(){n.deferredPromise=void 0})))},t.prototype.clearHighlighting=function(){for(var e=0,t=this.highlightedItems;e<t.length;e++)t[e].removeClass(s.Append.class).removeClass(s.None.class).removeClass(s.Prepend.class).removeClass(s.Replace.class);_.remove(this.highlightedItems)},e.Drop=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){e[e.Item=0]="Item",e[e.Title=1]="Title",e[e.Separator=2]="Separator",e[e.Flyout=3]="Flyout",e[e.CustomComponent=4]="CustomComponent"})(DropDownMenuItemType=DropDownMenuItemType||{});var Horizontal="horizontal";!(function(e){var t;t=e.common||(e.common={}),(function(){(t.directives||(t.directives={})).DropdownMenu=function(){this.restrict="A",this.replace=!1,this.scope={dropdownItems:"=",dropdownClass:"@",dropdownDarkTheme:"=",dropdownFollowMousePosition:"=?",dropdownOnItemSelected:"&",dropdownPrepareItemsBeforeShow:"&?",dropdownOrientation:"=?",dropdownOnLeftClick:"=?",dropdownOnRightClick:"=?",dropdownBlockClick:"=?",dropdownSeparatorClass:"@"},this.link=function(e,t,o){e.dropdownClass=o.dropdownMenuClass,e.dropdownSeparatorClass=o.dropdownSeparatorClass,angular.isUndefined(o.dropdownBlockClick)&&(e.dropdownBlockClick=!1)},this.controller=t.createController(e)};var r="dropDownMenu",e=(n.createOptions=function(){return{additionalServices:["$element","dropdownMenuService"]}},n.prototype.attachEvents=function(){var t=this;(this.element||this.services.$element).off("."+r);var e=[];void 0!==this.scope.dropdownOnLeftClick&&!this.scope.dropdownOnLeftClick||e.push(jsCommon.DOMConstants.mouseClickEventName),this.scope.dropdownOnRightClick&&e.push(jsCommon.DOMConstants.contextmenuEventName);for(var o=0,i=e;o<i.length;o++){var n=i[o]+"."+r;this.scope.dropdownFollowMousePosition?(this.element=null,this.services.$element.on(n,(function(e){e.preventDefault(),e.stopPropagation();e={x:e.clientX,y:e.clientY};t.toggleMenu(null,e)}))):this.element.on(n,(function(e){return t.toggleMenu(e)}))}},n.prototype.dispose=function(){this.menuElement&&this.menuElement.remove()},n.prototype.destroyMenuElement=function(){this.innerScope&&this.innerScope.$destroy(),this.menuElement=void 0},n.prototype.hideAndDestroyMenu=function(e){this.services.dropdownMenuService.hideMenu()},n.prototype.toggleMenu=function(e,t){var o=this;e&&(e.preventDefault(),e.stopPropagation()),this.menuElement&&this.services.dropdownMenuService.isOpen||this.tryCompileMenuElement(),this.services.timeout((function(){o.menuElement&&(o.element||t)&&o.services.dropdownMenuService.toggleActive(o.menuElement,o.element,t,e,o.scope.dropdownOrientation===Horizontal)}))},n.prototype.showMenu=function(e,t){var o=this;e&&(e.preventDefault(),e.stopPropagation());var i=!0;this.menuElement||(i=this.tryCompileMenuElement()),this.services.timeout((function(){i&&(o.element||t)&&o.services.dropdownMenuService.showMenu(o.menuElement,o.element,t,e,o.scope.dropdownOrientation===Horizontal)}))},n.prototype.hideMenu=function(e,t){var o=this;e&&(e.preventDefault(),e.stopPropagation()),(this.element||t)&&this.services.timeout((function(){o.services.dropdownMenuService.hideMenu()}))},n.prototype.select=function(e){this.services.dropdownMenuService.hideMenu(),this.scope.dropdownOnItemSelected({selected:e})},n.prototype.tryCompileMenuElement=function(){var e,o=this;if(this.touchendWasHandled=!1,angular.isDefined(this.scope.dropdownPrepareItemsBeforeShow)&&(e=this.scope.dropdownPrepareItemsBeforeShow(),angular.isDefined(e)&&(this.scope.dropdownItems=e)),!this.scope.dropdownItems||0===this.scope.dropdownItems.length)return!1;var t=angular.element(n.template).data("$dropdownMenuController",this);function i(e,t,o){var i,n=e.length,n=((t+o)%n+n)%n,e=$(e[n]).children();return e&&0<e.length&&null!==(i=e[0])&&void 0!==i&&i.focus(),n}return this.innerScope=this.scope.$new(),this.scope.$apply((function(){return o.menuElement=o.scope.menuElement=o.services.compile(t)(o.innerScope)})),this.menuElement.on("remove",(function(){return o.destroyMenuElement()})),this.menuElement.on("touchend",(function(t){var e;o.touchendWasHandled||(e=_.find(o.scope.dropdownItems,(function(e){return e.text===t.target.textContent})))&&(t.preventDefault(),o.touchendWasHandled=!0,o.select(e))})),this.menuElement.on(jsCommon.DOMConstants.keyDownEventName+"."+r,(function(e){var t=o.menuElement.children();t&&0<t.length&&(40===e.keyCode?o.index=i(t,o.index,1):38===e.keyCode&&(o.index=i(t,o.index,-1)))})),!0},n.template="\n    <ul class='angular-dropdown {{dropdownClass}}' ng-class='{dark: dropdownDarkTheme === true, themeableElement: true}' role='menu' focus-trap focus-on-escape=\"dispose()\">\n        <li data-automation-type=\"dropdown-item\" ng-repeat='item in dropdownItems' class='dropdown-item' ng-click='select(item); $event.stopPropagation();' role='presentation'>\n            <a ng-if='::item.type === 0 && item.href' role=\"menuitem\" class='dropdown-action {{::item.containerClass}}' ng-href='{{::item.href}}' target='{{::item.hrefTarget ? item.hrefTarget : \"_blank\" }}'>\n                <i class='dropdown-icon {{::item.iconClass }}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <i ng-if='::item.hasGlyph' class='glyphicon {{::item.itemClass}} glyph'></i>\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </a>\n            <button ng-if='::item.type === 0 && !item.href' role=\"menuitem\" class='dropdown-action {{::item.containerClass}}'>\n                <i class='dropdown-icon {{::item.iconClass }}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}'>\n                    <i ng-if='::item.hasGlyph' class='glyphicon {{::item.itemClass}} glyph'></i>\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </button>\n            <span ng-if='::item.type === 1' class='{{::item.containerClass}}'>\n                <i class='dropdown-icon {{::item.iconClass}}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-attr-title='{{::item.descriptionTitle}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </span>\n            <span ng-if='::item.type === 2' class='dropdown-separator {{dropdownSeparatorClass}}'></span>\n        </li>\n    </ul>\n    <div ng-show='::dropdownBlockClick' class='dropdown-block-click'></div>\n",n);function n(e,t){var o=this;this.index=0,this.scope=e,this.element=t.$element,this.services=t,e.$on("$destroy",(function(){return o.dispose()})),this.scope.select=function(e){return o.select(e)},this.scope.dispose=function(){return o.hideAndDestroyMenu(o.services.dropdownMenuService)},e.$on("dropdownExpand",(function(e,t){e.defaultPrevented||(e.preventDefault(),o.toggleMenu(null,t))})),e.$watchGroup(["dropdownOnLeftClick","dropdownOnRightClick"],(function(){o.attachEvents()})),this.attachEvents()}})()})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).DropdownMenuItems=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/dropdownMenuItems.html",this.scope={dropdownItems:"=",dropdownClass:"@",dropdownDarkTheme:"=",dropdownOnItemSelected:"&",dropdownOrientation:"=?",dropdownSeparatorClass:"@"}}})(powerbi=powerbi||{}),(function(e){var a;((a=e.common||(e.common={})).directives||(a.directives={})).DropdownOverlay=function(e,t){var r=this;this.$parse=t,this.restrict="E",this.replace=!0,this.transclude=!0,this.template='<div class="dropdownOverlay" ng-transclude></div>',this.link=function(e,t,o){var i=o.dropdownOverlayClass;i&&(t.removeClass("dropdownOverlay"),t.addClass(i)),r.overlayService.register(t);var n,o=o.onClose;o&&(n=r.$parse(o),t.on(a.constants.OverlayCloseEventName,(function(){t.off(a.constants.OverlayCloseEventName),e.$applyAsync((function(){n(e)}))}))),e.$on("$destroy",(function(){return r.overlayService.unregister(t)}))},this.overlayService=e}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).DropdownOverlayInvoke=function(e){var c=this;this.clickAction="click",this.restrict="A",this.link=function(o,i,e){var n=e.preferLeft,r=e.horizontal,a=e.needBlur,s=e.disableAnimation,l=e.dropdownOverlayInvoke;i.on(c.clickAction,(function(e){var t=c.overlayService.getOverlayElement(l);t.length,o.$applyAsync((function(){c.overlayService.toggleDropdown(e,{anchorElement:i,element:t,preferLeft:"true"===n,horizontal:"true"===r,blurNeeded:"true"===a,disableAnimation:s})}))}))},this.overlayService=e}})(powerbi=powerbi||{}),(function(e){var s;((s=e.common||(e.common={})).directives||(s.directives={})).GridLayout=function(){this.controller=s.createController(s.controllers.GridLayoutController),this.compile=function(){return{pre:function(e,t,o){var i=angular.element('<div class="gridPlaceHolder"><div class="placeholderInner"></div></div>'),n=new s.models.GridLayoutContainer(e.gridLayoutService,t,e),r=n.gridPlaceHolder,a=new s.helpers.GridLayoutItemRenderer(r,i.get(0));r.render=function(){a.render()},t.addClass("gridLayoutContainer"),t.prepend(i),(e.gridLayoutContainer=n).notifyGridItemsChangedHandler=e.gridLayoutChangeHandler}}}}})(powerbi=powerbi||{}),(function(i){!(function(u){var e,p,m,t;function o(e){var d=this;this.ngZone=e,this.restrict="A",this.link=function(o,i,e){var t,n=i.closest(m.dashboardSelector),r=o.$eval(e.gridLayoutContainer),a=o.$eval(e.viewModel),s=r.gridLayoutService,l=new u.models.GridLayoutItem(a,s,r),c=new u.helpers.GridLayoutItemRenderer(l,i.get(0));d.isInAuthoringMode=o.$eval(e.inEditMobileLayoutMode),d.strategy=s.strategy,i.addClass("gridLayoutItem"),l.render=function(){c.render()},r.addGridLayoutItem(l),s.strategy.willOverrideDisplayPosition||r.gravityEnabled||(l.calculateLayout(),l.applyLayout(u.models.gridLayoutConstants.changeType.refresh)),window.setTimeout((function(){t=new u.controllers.TransformElement(i,d.ngZone,{onDragStart:function(e){l.onDragStart()},onDragMove:function(e){d.trackParentSize(i,!1),l.onDragMove(e)},onDragEnd:function(e){d.setParentHeight(r),l.onDragEnd()},onResizeStart:function(e){l.onResizeStart();var t=o.gridLayoutCallbacks&&o.gridLayoutCallbacks.onResize;t&&t()},onResizeMove:function(e){d.trackParentSize(i,!0),l.onResizeMove(e)},onResizeEnd:function(e){d.setParentHeight(r),l.onResizeEnd()},restriction:d.getRestrictionType(),resizeHandleDirections:u.controllers.TransformHandleDirections.DownRight,minWidth:r.gridLayoutService.strategy.gridMinWidthOnResize,minHeight:r.gridLayoutService.strategy.gridMinHeightOnResize,maxWidth:r.gridLayoutService.strategy.gridMaxWidthOnResize,maxHeight:r.gridLayoutService.strategy.gridMaxHeightOnResize,inertia:!1,autoScrollParent:n,disableDrawing:!0,useCustomResizeHandles:!0,supportsPointerCapture:!0}),d.setParentHeight(r)})),i.keydown((function(e){var t=e.shiftKey&&e.ctrlKey;"true"===i.attr("drag-resize-disabled")||p.isCtrlOrMeta(e)&&!t||(t?d.keyboardResize(l,r,i,o,e.keyCode):d.keyboardMove(l,r,i,e.keyCode))})),o.$on("$destroy",(function(){l.remove(),t&&(t.destroy(),t=null),d.setParentHeight(r,l)}))}}e=u.directives||(u.directives={}),p=jsCommon.BrowserUtils,m=i.common.constants,t=u.controllers.TransformRestriction,o.prototype.trackParentSize=function(e,t){var o;this.preventHeightTracking()||(this.strategy,o=e.parent(),e=e.position().top+e.outerHeight()+this.strategy.gridItemSpacing,t&&e>=o.height()&&o.height(e+this.strategy.gridHeight))},o.prototype.setParentHeight=function(e,t){if(!this.preventHeightTracking()){this.strategy;for(var o=e.element,i=0,n=0,r=e.gridLayoutItems;n<r.length;n++){var a=r[n],a=a.top+a.height;i<a&&(i=a)}t&&(i-=t.height),i=this.calculateGridHeight(i),o.height(i)}},o.prototype.calculateGridHeight=function(e){var t=this.strategy.gridHeight;return Math.ceil(e/t)*t+this.strategy.gridItemSpacing/2},o.prototype.getRestrictionType=function(){return this.preventHeightTracking()?t.None:t.Parent},o.prototype.preventHeightTracking=function(){return!this.isInAuthoringMode},o.prototype.keyboardMove=function(e,t,o,i){var n=e.getLayoutPosition();switch(i){case 40:n.y+=1;break;case 38:--n.y;break;case 37:--n.x;break;case 39:n.x+=1;break;default:return}n.y<0||n.x<0||(e.onDragStart(),this.trackParentSize(o,!1),this.setParentHeight(t),e.onDragEnd(),this.keepTileInView(o))},o.prototype.keyboardResize=function(e,t,o,i,n){var r={width:e.width,height:e.height};switch(n){case 40:r.height+=u.GridLayoutConstants.defaultGridHeight;break;case 38:r.height-=u.GridLayoutConstants.defaultGridHeight;break;case 37:r.width-=u.GridLayoutConstants.defaultGridWidth;break;case 39:r.width+=u.GridLayoutConstants.defaultGridWidth;break;default:return}r.width<u.GridLayoutConstants.defaultGridWidth||r.height<u.GridLayoutConstants.defaultGridHeight||(e.onResizeStart(),(i=i.gridLayoutCallbacks&&i.gridLayoutCallbacks.onResize)&&i(),this.trackParentSize(o,!0),e.onResizeMove(r),this.setParentHeight(t),e.onResizeEnd(),this.keepTileInView(o))},o.prototype.keepTileInView=function(e){e.get(0).scrollIntoView({behavior:"smooth",block:"end",inline:"end"})},e.GridLayoutItem=o})(i.common||(i.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).HighlightString=function(e){var r=this;this.highlightService=e,this.restrict="A",this.scope={highlightString:"=",searchString:"="},this.link=function(e,i,n){e.$watchGroup(["highlightString","searchString","highlightTag"],(function(e){var t=e[0],o=e[1],e=n.highlightTag;t&&o?i.html(r.highlightService.highlight(t,o,e)):i.text(t)}))}}})(powerbi=powerbi||{}),(function(e){var i;((i=e.common||(e.common={})).directives||(i.directives={})).InlineMessage=function(){this.restrict="E",this.transclude=!0,this.replace=!0,this.templateUrl="views/inlineMessageView.html",this.scope={useErrorIcon:"=?",useErrorBackground:"=?",traceDetails:"=?",displayIcon:"=?"},this.link=function(e,t,o){e.displayIcon||(void 0===e.useErrorIcon&&void 0!==o.useErrorIcon?e.displayIcon=i.models.InlineMessageIcon.Error:e.displayIcon=i.models.InlineMessageIcon.Info),void 0===e.useErrorBackground&&void 0!==o.useErrorBackground&&(e.useErrorBackground=!0)}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).InlineNameValuePairs=function(){this.restrict="E",this.transclude=!0,this.replace=!0,this.templateUrl="views/inlineNameValuePairsView.html",this.scope={mode:"=",showTitle:"=",detailExpand:"=",nameValuePairs:"="}}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){var l=this;this.restrict="A",this.link=function(e,t,o){var i,n,r=o.inViewportOffset||"100%",a=o.inViewportContext,s=t.closest(a);a&&0===s.length?e.$evalAsync(o.inViewport):(n=function(e){e.target===t.get(0)&&i.context.refresh()},r={element:t.get(0),handler:function(){e.$evalAsync(o.inViewport),i.destroy(),t.off("transitionend",n)},offset:r},0<s.length&&(r.context=s.get(0)),i=new Waypoint(r),t.on("transitionend",n),l.attachResizeHandler())}}e=e.directives||(e.directives={}),t.getRefreshAllHandler=function(){return _.debounce(Waypoint.refreshAll,250)},t.prototype.attachResizeHandler=function(){t.staticResizeHandlerAttached||($(window).resize(t.getRefreshAllHandler()),t.staticResizeHandlerAttached=!0)},e.InViewport=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).LoadNotification=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/loadNotificationView.html",this.scope={message:"=",hide:"="},this.link=function(e,t){e.$watch("hide",(function(){e.hide?t.hide():t.show()}))}}})(powerbi=powerbi||{}),(function(e){!(function(e){var s;function t(e){var r=this;this.restrict="A",this.link=function(o,i,n){var e=n.localize;r.replaceText(i,n,o,e),n.dynamicLocalizeUpdate&&o.$watch((function(){return n.localize}),(function(e,t){e!==t&&r.replaceText(i,n,o,e)}))},this.localizationService=e}e=e.directives||(e.directives={}),s=jsCommon.StringExtensions,t.prototype.replaceText=function(i,e,t,o){if(""!==o){var n=this.localizationService.getOptional(o);if(void 0===n){var r=t.$eval(o);if(s.isNullOrUndefinedOrWhiteSpaceString(r))return;n=this.localizationService.get(r)}var a,r="localizeFragments"in e,e="localizeFragmentsAsync"in e;r||e?(n=n||"",a=function(){for(;0<n.length;){var e,t=n.search(new RegExp("\\{[0-9]+\\}","gm")),o=n.indexOf("}",t);-1===t?(i.append(n),n=""):0===t?(e=parseInt(n.substring(t+1,o),10),n=n.substring(o+1),(e=i.children("[fragment-index="+e+"]")).length,i.append(e)):(i.append(n.substring(0,t)),n=n.substring(t))}},e?t.$evalAsync((function(){a()})):a()):i.text(n||"")}},e.Localize=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){function t(e){var o=this;this.restrict="A",this.link=function(e,t,i){var n;n=o.localizationService,e.$watch(i.localizeAttr,(function(e){for(var t in e){var o=n.get(e[t]);i.$set(t,o||"")}}))},this.localizationService=e}((e=e.common||(e.common={})).directives||(e.directives={})).LocalizeAttr=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).LocalizeTooltip=function(e){var r=this;this.restrict="A",this.link=function(e,o,i){var t=i.localizeTooltip||i.localize||"";function n(e,t,o){""!==t&&(t=o.get(t),e.attr("title",t||""),void 0!==i.useTooltipAsAriaLabel&&e.attr("aria-label",t||""))}void 0!==i.dynamicTooltipUpdate&&e.$watch((function(){return i.localizeTooltip}),(function(e,t){e!==t&&n(o,e,r.localizationService)})),n(o,t,r.localizationService)},this.localizationService=e}})(powerbi=powerbi||{}),(function(e){var t;function o(){this.restrict="E",this.templateUrl="views/modalDialog.html",this.transclude=!0,this.replace=!0,this.scope={viewModel:"=",onCloseAction:"&",onConfirmAction:"&",onCancelAction:"&"},this.link=function(e,t,o){o=o.confirmButtonText||"OK";e.confirmButtonText=o,t.appendTo($("body"))},this.controller=t.createController(t.controllers.ModalDialogController)}((t=e.common||(e.common={})).directives||(t.directives={})).ModalDialog=o})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).ModalOverlay=function(){this.restrict="E",this.templateUrl="views/modalOverlay.html",this.transclude=!0,this.replace=!0}})(powerbi=powerbi||{}),(function(e){function t(){this.restrict="A",this.replace=!1,this.link=function(e,t,o){e.$watch(o.ngBindAttr,(function(e){for(var t in e)o.$set(t,e[t])}))}}((e=e.common||(e.common={})).directives||(e.directives={})).NgBindAttr=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).NgOnSelect=function(e){var n=this;this.restrict="A",this.replace=!1,this.link=function(o,e,i){e.on(jsCommon.DOMConstants.selectEventName,(function(e){var t=n.$parse(i.ngOnSelect);t&&o.$applyAsync((function(){t(o,{$event:e})}))}))},this.$parse=e}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).NgRepeatFinishEvent=function(e){var n=this;this.restrict="A",this.link=function(e,t,o){o.ngIf;var i=o.ngRepeatFinishEvent;!0===e.$last&&n.$timeout((function(){e.$emit(i)}))},this.$timeout=e}})(powerbi=powerbi||{}),(function(e){(e.common||(e.common={})).initializeNgRightClick=function(){e.define("PowerBICommon/directives/ngRightClick",(function(e){var t;return o.prototype.setLongTapHandler=function(e){var i,n,r,a,s,l=!1,c=!1,d=e.get(0);d.addEventListener("touchstart",(function(e){clearTimeout(i),1===e.touches.length&&(l=!1,a=e.target,r=d.getBoundingClientRect(),c=!1,s=e.touches[0],n={x:s.clientX,y:s.clientY},i=setTimeout((function(){l||(c=!0)}),350))}),{passive:!0}),d.addEventListener("touchmove",(function(e){1===e.touches.length?n={x:e.touches[0].clientX,y:e.touches[0].clientY}:clearTimeout(i)}),{passive:!0}),d.addEventListener("touchend",(function(e){var t,o;l=!0,c&&(t=Math.abs(n.x-s.clientX)+Math.abs(n.y-s.clientY),o=d.getBoundingClientRect(),o=Math.abs(r.left-o.left)+Math.abs(r.top-o.top),t<10&&o<10&&((o=document.createEvent("MouseEvents")).initMouseEvent("contextmenu",!0,e.cancelable,e.view,0,s.screenX,s.screenY,s.clientX,s.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),a.dispatchEvent(o))),clearTimeout(i)})),["touchcancel","touchleave"].forEach((function(e){d.addEventListener(e,(function(e){l=!0,clearTimeout(i)}))}))},(t=o).ng=["$parse"],t;function o(e){var r=this;this.$parse=e,this.restrict="A",this.replace=!1,this.link=function(i,e,n){e.on(jsCommon.DOMConstants.contextmenuEventName,(function(t){var o=r.$parse(n.ngRightClick);o&&i.$apply((function(){var e;0===t.pageX&&0===t.pageY&&t.currentTarget&&(e=t.currentTarget.getBoundingClientRect(),t.pageX=e.left+e.width/2,t.pageY=e.top+e.height/2),t.preventDefault(),t.stopPropagation&&t.stopPropagation(),o(i,{$event:t})}))})),jsCommon.BrowserUtils.isIOSWebView()&&r.setLongTapHandler(e)}}}))}})(powerbi=powerbi||{}),(function(e){(function(e){var l=0;function t(){return l++}e.NextResizeSensorId=t;var o=(i.isResizeSensorScrollEvent=function(e){return e&&$(e.target).parent().hasClass("ResizeSensor")},i.prototype.initialize=function(i,o,e){var n,r,a,s=this.$parse(e.onResize);s&&(a=function(e){var t=e.width,o=e.height;t===n&&o===r||(n=t,r=o,i.onResizeViewport=e,s(i,e))},this.moduleLoader.require({javascript:"resizeSensor"}).then((function(e){var t=l++;e.create(o[0],t,a),i.$on("$destroy",(function(){e.destroy(t)}))})))},i);function i(e,t){var i=this;this.restrict="A",this.link=function(e,t,o){e.$evalAsync((function(){i.initialize(e,t,o)}))},this.$parse=e,this.moduleLoader=t}e.OnResize=o})((e=e.common||(e.common={})).directives||(e.directives={}))})(powerbi=powerbi||{}),(function(t){!(function(e){var d;function u(e,t,o){var n=this;this.$compile=e,this.pbiLazyLoadService=t,this.moduleLoader=o,this.restrict="A",this.compile=function(e,t){var i=e[0].innerHTML;return e.html(""),{post:function(e,t,o){return n.postLink(e,t,o,i)}}}}e=e.directives||(e.directives={}),d=jsCommon.Trace,u.prototype.postLink=function(a,s,l,c){return __awaiter(this,void 0,t.Promise,(function(){var t,o,i,n,r;return __generator(this,(function(e){switch(e.label){case 0:t=a.$eval(l.pbiLazyLoadContents),o=this.$compile(u.SpinnerHtml)(a),s.append(o),i=!1,n=a.$on("$destroy",(function(){return i=!0})),e.label=1;case 1:return e.trys.push([1,6,7,8]),this.isModuleDependency(t)?[4,this.moduleLoader.require(t)]:[3,3];case 2:return e.sent(),[3,5];case 3:return[4,this.pbiLazyLoadService.load(t)];case 4:e.sent(),e.label=5;case 5:return i||(o.remove(),s.append(c),this.$compile(s.contents())(a)),[3,8];case 6:return r=e.sent(),r=r&&r.message||r,d.error(r),[3,8];case 7:return n(),[7];case 8:return[2]}}))}))},u.prototype.isModuleDependency=function(e){return null!=e.javascript},u.SpinnerHtml="<spinner [size]=\"'large'\" [position]=\"'centered'\"></spinner>",e.PbiLazyLoadContents=u})(t.common||(t.common={}))})(powerbi=powerbi||{}),(function(e){(e=e.common||(e.common={})).PbiTableUpdateFilterEventName="PbiTableUpdateFilter",e.pbiTableStyles=["pbiTable"]})(powerbi=powerbi||{}),(function(e){!(function(r){var e;function t(e,t,o,i){var n=this;this.$rootScope=e,this.$compile=t,this.$filterService=o,this.localizationService=i,this.restrict="A",this.scope={pbiTableConfig:"=",allSelected:"=?",allSelectedClicked:"&?"},this.compile=function(e,t){var o=e.find("td[header]"),i=e.find("td[localized-header]");return(0<o.length||0<i.length)&&(e=e.find("td:not([checkbox])"),n.headers=[],e.each((function(e,t){var o=$(t),t=new r.models.PbiTableHeader;t.header=o.attr("header"),t.localizedHeader=o.attr("localized-header"),t.sortBy=o.attr("sort-by"),n.headers.push(t)}))),{post:function(t,e,o){var i;e.addClass(r.pbiTableStyles.join(" ")),t.pbiTableConfig&&t.pbiTableConfig.hideHeader||_.isEmpty(n.headers)||(n.evaluateHeaders(t),t.headers=n.headers,i=n.compilePbiTableHeader(t),e.prepend(i)),t.pbiTableConfig&&(t.pbiTableConfig.filteredData=t.pbiTableConfig.data,t.orderBy=function(e){return n.orderBy(t,e)}),n.$rootScope.$on(r.PbiTableUpdateFilterEventName,(function(){return n.filter(t)}))}}},this.$rootScope=e,this.$compile=t,this.$filterService=o,this.localizationService=i}e=r.directives||(r.directives={}),t.prototype.compilePbiTableHeader=function(e){return this.$compile('<thead>\n            <tr>\n                <th ng-if="allSelectedClicked">\n                    <pbi-checkbox ng-model="allSelected.value" label="SelectAll" ng-change="allSelectedClicked()"></pbi-checkbox>\n                </th>\n                <th ng-repeat="header in headers track by $index"\n                    ng-class="{sortable: header.sortBy,\n                               orderByThis: header.sortBy && predicate == header.sortBy,\n                               desc: header.sortBy && predicate == header.sortBy && reverse}"\n                    ng-click="orderBy(header)">\n                    <span ng-bind="::header.displayName"></span>\n                    <i class="sort glyphicon glyph-mini" \n                       ng-class="{\'pbi-glyph-chevronupmedium\': !reverse, \'pbi-glyph-chevrondownmedium\': reverse}"><i></i>\n                </th>\n            </tr>\n        </thead>')(e)},t.prototype.evaluateHeaders=function(e){for(var t=0,o=this.headers;t<o.length;t++){var i=o[t];i.header?i.displayName=e.$eval(i.header):i.localizedHeader&&(i.displayName=this.localizationService.get(i.localizedHeader))}},t.prototype.orderBy=function(e,t){var o;t.sortBy&&e.pbiTableConfig&&(o=e.pbiTableConfig.filteredData,e.predicate=t.sortBy,e.reverse=!e.reverse,e.pbiTableConfig.filteredData=this.$filterService("orderBy")(o,t.sortBy,e.reverse))},t.prototype.filter=function(e){e.pbiTableConfig&&(e.pbiTableConfig.filteredData=this.$filterService("filter")(e.pbiTableConfig.data,e.pbiTableConfig.shouldDisplayData))},e.PbiTable=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).PbiTableHeader=function(){}})(powerbi=powerbi||{}),(function(e){!(function(e){function i(){this.restrict="E",this.replace=!0,this.transclude=!0,this.templateUrl="views/popupContainer.html",this.scope={parent:"=?",containerSelector:"<?",close:"&"},this.link=function(a,s,e){void 0!==e.bindParentWidth&&(e=a.parent||s.parent(),s.css({width:e.css("width")})),s.on("pointerdown",(function(e){e.stopPropagation()})),i.registerOutsideClickHandler(s,a),a.$evalAsync((function(){var e=a.parent||s.parent(),t=s.outerHeight();r=a.containerSelector?(n=s.parents(a.containerSelector)).offset().top+n.outerHeight():$(window).height();var o=t+s.offset().top>r,i=e.get(0).getBoundingClientRect(),n=i.top,r=i.left,e=e.parents('[style*="transform:"]:first');0<e.length&&(n-=(e=e.get(0).getBoundingClientRect()).top,r-=e.left),o?s.css({top:n-t,left:r}):s.css({top:n+i.height,left:r})}))}}e=e.directives||(e.directives={}),i.registerOutsideClickHandler=function(t,o){$(window).one("pointerdown",(function(e){e&&(0<$(e.target).closest(".popup-container-toggle").length?i.registerOutsideClickHandler(t,o):(o.close(),o.$applyAsync()))}))},e.PopupContainer=i})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){function t(){this.restrict="A",this.link=function(i,n,e){var r,o,a,s,l=angular.element('<div class="pane-splitter"></div>');n.append(l);function t(e){var t,o;"true"!==e?(n.css("width",d+"px"),l.hide()):(o=$(document).find("#"+h),t=0===n.width(),e=void 0===i.currentWidth||t?u:i.currentWidth,0<(r=o.width())&&g&&(1===(t=$(o).find("."+g)).length&&(a=t.width(),r-a<e&&(0<(o=r-e-v)&&t.css("width",o+"px")))),i.currentWidth=e,n.css("width",e+"px"),l.show())}function c(e){e.preventDefault(),e=$(document).find("#"+h),r=e.width(),o=n.offset().left+("left"!==f?n.width():0),g?1===(e=$(e).find("."+g)).length&&(a=e.width()):a=void 0,s=!0,$(document).on("mouseup",y),$(document).on("mousemove",b)}var d=parseInt(e.resizableCollapsedWidth,10),u=parseInt(e.resizableDefaultWidth,10),p=parseInt(e.resizableMinWidth,10),m=parseInt(e.resizableMaxWidth,10),h=e.resizableContainerid,g=e.resizableSibling,f=e.resizableSide,v=parseInt(l.css("width"),10),y=function(e){s&&(e.preventDefault(),s=!1,$(document).off("mousemove",b),$(document).off("mousedown",y))},b=function(e){var t;s&&(t=r,a&&(t=t-a-v),m&&(t=Math.min(m,t)),e=("left"!==f?1:-1)*e.clientX,t<(e=o-e)&&(e=t),i.currentWidth=e=e<p?p:e,n.css("width",e+"px"))};t(e.resizableExpanded),e.$observe("resizableExpanded",t),l.on("mousedown",c),i.$on("$destroy",(function(){l.off("mousedown",c)}))}}((e=e.common||(e.common={})).directives||(e.directives={})).Resizable=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).SearchBox=function(e){var n=this;this.localizationService=e,this.restrict="E",this.replace=!0,this.templateUrl="views/searchBox.html",this.scope={filter:"=",onChange:"&?",onBlur:"&?",shouldFocus:"<?",showclearbutton:"<?",arialabel:"@?",arialabelledby:"@?",ariadescribedby:"@?",ariarequired:"<?",arialive:"@?",bordercolor:"<?"},this.link=function(e,t,o){e.$watch("filter",(function(){e.onChange&&e.onChange()})),e.$watch("bordercolor",(function(){i.attr("style","border-color: "+e.bordercolor)})),e.placeholderText=n.localizationService.get(o.placeholder||"SearchBox_Text"),e.arialabel||(e.arialabel=n.localizationService.get("SearchBox_Text")),e.clearFilterInput=function(){return e.filter=""};var i=t.find("input");e.ariadescribedby&&i.attr("aria-describedby",e.ariadescribedby),e.arialabel&&i.attr("aria-label",e.arialabel),e.arialabelledby&&i.attr("aria-labelledby",e.arialabelledby),e.ariarequired&&i.attr("aria-required",e.ariarequired),e.arialive&&i.attr("aria-live",e.arialive)}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).Select=function(){this.restrict="E",this.require="?ngModel",this.scope=!1,this.link=function(e,t,o,i){i&&t.bind("keyup",(function(e){38!==e.keyCode&&40!==e.keyCode||t.triggerHandler("change")}))}}})(powerbi=powerbi||{}),(function(e){!(function(e){function u(e){var d=this;this.$timeout=e,this.restrict="E",this.require="ngModel",this.scope={options:"<",selectClass:"@",labelId:"<?",isDisabled:"<?",newPaneColors:"<"},this.templateUrl="views/selectMenu.html",this.link=function(o,e,t,i){u.ensureWidgetRegistered();var n=[],r=e.find("select"),a=!1,s=!1,l=o.newPaneColors?"newPaneColors":"",l=r.customSelectMenu({change:function(e,t){o.selectValue=t.item.value,i.$setViewValue(t.item.value),c()},position:{my:"left top",at:"left bottom",collision:"flip"},open:function(){a=!0},close:function(){s?(s=!1,r.customSelectMenu("open")):a=!1},labelById:o.labelId}).customSelectMenu("menuWidget").addClass("selectmenu themeableElement "+l);e[0].addEventListener("keydown",(function(e){a||(13===e.keyCode?(r.customSelectMenu("open"),s=!0):38!==e.keyCode&&40!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode||r.customSelectMenu("open"))}),!0),e[0].addEventListener("keydown",(function(e){!a&&38!==e.keyCode&&40!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&27!==e.keyCode||e.stopPropagation()}),!1),o.selectClass&&l.addClass(o.selectClass),i.$render=function(){o.selectValue=i.$viewValue,c()},o.$watch("options",(function(e,t){c()}),!0),o.$watch("isDisabled",(function(e,t){e&&r&&r.customSelectMenu?r.customSelectMenu("disable"):r.customSelectMenu("enable"),c()}),!0);var c=function(){n.push(d.$timeout((function(){r&&r.customSelectMenu&&r.val(o.selectValue).customSelectMenu("refresh")}),0))};o.$on("$destroy",(function(){angular.forEach(n,(function(e){d.$timeout.cancel(e)}))}))}}e=e.directives||(e.directives={}),u.ensureWidgetRegistered=function(){var e=$;e&&e.custom&&e.custom.customSelectMenu||(e={_renderItem:function(e,t){return $("<li>",{title:t.label}).append($("<div>",{text:t.label})).appendTo(e)}},$.widget("custom.customSelectMenu",$.ui.selectmenu,e))},e.SelectMenu=u})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){var t;((t=e.common||(e.common={})).directives||(t.directives={})).TextInput=function(){this.restrict="E",this.templateUrl="views/textInput.html",this.replace=!1,this.scope={clearAfterComplete:"=?",emitOnBlur:"=?",isFocused:"=?",cancel:"&?",forceComplete:"=?",inputValue:"=?",maxInputLength:"=?",onComplete:"=?",placeholder:"=?",validate:"=?"},this.controller=t.createController(t.controllers.TextInputController),this.link=function(e,t,o){var i=t.find("input");e.$watch((function(){return e.isFocused}),(function(e,t){!0!==e||i.is(":focus")?!1===e&&i.is(":focus")&&setTimeout((function(){i.blur()}),0):setTimeout((function(){i.focus()}),0)}))}}})(powerbi=powerbi||{}),(function(e){var r;(function(e){var t,o=jsCommon.DOMConstants;(t=e.TooltipAnchorElementType||(e.TooltipAnchorElementType={}))[t.Sibling=0]="Sibling",t[t.Ancestor=1]="Ancestor",t[t.Descendant=2]="Descendant",e.Tooltip=function(){this.restrict="A",this.controller=r.createController(i)};var i=(n.createOptions=function(){return{additionalServices:["$element","tooltipService","localizationService","$attrs"]}},n.prototype.showTooltipInternal=function(e){var t,o=this.element.attr("tooltip-config");o=_.isEmpty(o)?(t=this.element.attr("aria-label"),{tooltipArrowVerticalPosition:r.ArrowVerticalPosition.bottom,tooltipTitle:t,tooltipShowOnFocus:!0}):this.scope.$eval(o),this.isVisible=!0,this.services.tooltipService.showTooltip(o,e,this.element)},n.prototype.hideTooltipInternal=function(e){this.isVisible=!1,this.services.tooltipService.hideTooltip(e)},n.prototype.onDestroy=function(){this.isVisible&&this.services.tooltipService.hideTooltip(),this.services.$element.off(o.mouseMoveEventName,this.showTooltip),this.services.$element.off(o.mouseLeaveEventName,this.hideTooltip),this.services.$element.off(o.focusInEventName,this.showTooltip),this.services.$element.off(o.focusOutEventName,this.hideTooltip)},n);function n(e,t){this.services=t,this.scope=e,this.element=this.services.$element,this.showTooltip=$.proxy(this.showTooltipInternal,this),this.hideTooltip=$.proxy(this.hideTooltipInternal,this),this.services.$element.on(o.mouseMoveEventName,this.showTooltip),this.services.$element.on(o.mouseLeaveEventName,this.hideTooltip),this.services.$element.on(o.focusInEventName,this.showTooltip),this.services.$element.on(o.focusOutEventName,this.hideTooltip)}})((r=e.common||(e.common={})).directives||(r.directives={}))})(powerbi=powerbi||{}),(function(e){function t(){this.restrict="A",this.link=function(i,n,e){var r,o,a=!1,t=angular.element('<div class="pane-vertical-splitter"></div>');n.append(t);var s=parseInt(e.vResizableCollapsedHeight,10),l=parseInt(e.vResizableDefaultHeight,10),c=!(null==e.vResizableDefaultHeight.match(/\d+%/g)),d=parseInt(e.vResizableMinHeight||0,10),u=parseInt(e.vResizableMaxHeight,10),p=e.vResizableContainerId,m=parseInt(e.vResizableOtherSiblingsHeight||0,10),h=e.vResizableOnResizeCallback?i[e.vResizableOnResizeCallback]:void 0,g="false"!==e.vResizableFromTop&&!1!==e.vResizableFromTop;g?t.css("top",0):t.css("bottom",0);var f=function(){return $(document).find("#"+p).height()},v=function(e){r=f();var t=i.currentHeight;a&&void 0!==t?e&&(t=Math.floor(r*o)):t=c?Math.floor(r/100*l):l;e=u?Math.min(r-m,u):r-m,t=Math.max(d,Math.min(e,t));i.currentHeight=t,n.css("height",t+"px")};v(e.vResizableExpanded),e.$observe("vResizableExpanded",(function(e){"true"!==e?(n.css("height",s+"px"),t.hide()):(v(!1),t.show())})),e.$observe("vResizableContainerResize",(function(){v(!0)}));var y=interact(t[0]).styleCursor(!1).draggable({inertia:!1,onstart:function(e){r=f()},onmove:function(e){var t=r-m;u&&(t=Math.min(u,t));var o=n.height()+(g?-e.dy:e.dy);(o=t<o?t:o)<d&&(o=d),a=!0,i.$applyAsync((function(e){e.currentHeight=o,n.css("height",o+"px")}))},onend:function(e){o=i.currentHeight/f(),h&&h(i.currentHeight)}});i.$on("$destroy",(function(){y.unset()}))}}((e=e.common||(e.common={})).directives||(e.directives={})).VResizable=t})(powerbi=powerbi||{}),(function(e){!(function(e){function i(e,t){this.changingCSSClass="changing",this.prevWidth=0,this.prevHeight=0,this.prevLeft=0,this.prevTop=0,this.previsChanging=!1,this.prevIsVisible=!0,this.appliedClass="",this.titleClass="",this.gridLayoutItem=e,this.element=t}e=e.helpers||(e.helpers={}),i.prototype.render=function(){var e=this.gridLayoutItem,t=this.element,o=this.element.style;e.left===this.prevLeft&&e.top===this.prevTop||(o.webkitTransform=o.transform="translate("+e.left+"px, "+e.top+"px)",this.prevTop=e.top,this.prevLeft=e.left);var i=!1;e.width!==this.prevWidth&&(o.width=e.width+"px",this.prevWidth=e.width,i=!0),e.height!==this.prevHeight&&(o.height=e.height+"px",this.prevHeight=e.height,i=!0),i&&(this.calculateMenuSize(e.width,e.height),this.calculateTitleSize(e.width)),e.isChanging!==this.previsChanging&&(e.isChanging?t.classList.add(this.changingCSSClass):t.classList.remove(this.changingCSSClass),this.previsChanging=e.isChanging),e.isVisible!==this.prevIsVisible&&(e.isVisible?o.display="block":o.display="none",this.prevIsVisible=e.isVisible),e.isChanging||this.addDataAttributes(t,e)},i.prototype.addDataAttributes=function(e,t){try{var o,i=t.gridItem;i&&(o=t.getLayoutPosition(),e.setAttribute("data-id",i.id.toString()),e.setAttribute("data-row",o.y.toString()),e.setAttribute("data-col",o.x.toString()),e.setAttribute("data-sizex",o.width.toString()),e.setAttribute("data-sizey",o.height.toString()))}catch(e){}},i.prototype.updateTileClasses=function(e,t){return t===e?t:(_.isEmpty(t)||this.element.classList.remove(t),_.isEmpty(e)||this.element.classList.add(e),e)},i.prototype.calculateMenuSize=function(e,t){var o=this.appliedClass;t<=i.smallestTileHeight?o=i.smallestTileHeightStr:e<=i.smallerTileWidth||t<=i.smallestTileHeight?o=i.smallerTileWidthStr:i.largerTileWidth<=e?o=i.largerTileWidthStr:i.smallerTileWidth<e&&e<i.largerTileWidth&&(o=""),this.appliedClass=this.updateTileClasses(o,this.appliedClass)},i.prototype.calculateTitleSize=function(e){this.titleClass=this.updateTileClasses(e<=i.smallTitleWidth?i.smallTitleWidthStr:i.largeTitleWidthStr,this.titleClass)},i.smallerTileWidthStr="smallerTileWidth",i.largerTileWidthStr="largerTileWidth",i.smallestTileHeightStr="smallestTileHeight",i.smallestTileHeight=180,i.smallerTileWidth=260,i.largerTileWidth=780,i.smallTitleWidthStr="smallTitleWidth",i.largeTitleWidthStr="largeTitleWidth",i.smallTitleWidth=160,e.GridLayoutItemRenderer=i})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(i){var n,e;n=i.common||(i.common={}),((e=n.helpers||(n.helpers={})).ImportHelper||(e.ImportHelper={})).continueWithImportFlow=function(e,t,o){o=JSON.stringify(o),null!=e.parent&&(e.parent.postMessage(o,i.common.constants.hostOrigin),t&&(t={message:n.constants.contentProviderStoreCloseModalDialogMessage},e.parent.postMessage(JSON.stringify(t),i.common.constants.hostOrigin)))}})(powerbi=powerbi||{}),(function(e){((e=(e=e.common||(e.common={})).helpers||(e.helpers={})).powerBIExcelHelper||(e.powerBIExcelHelper={})).getDownloadLink=function(){return"https://go.microsoft.com/fwlink/?LinkID=521962"}})(powerbi=powerbi||{}),(function(n){var e;function o(e,t,o,i){try{return n.ServiceErrorHelper.getErrorDetails(i,e,t,o)}catch(e){return}}(e=(e=n.helpers||(n.helpers={})).PowerBIServiceExceptionErrorHelper||(e.PowerBIServiceExceptionErrorHelper={})).generateErrorMessage=function(e,t){if(e&&e["pbi.error"]){e=e["pbi.error"];if(e)return o(e.code,e.parameters,e.details,t)}},e.generateErrorMessageFromServiceError=function(e,t){if(e&&e.errorCode)return o(e.errorCode,e.parameters,e.errorDetails,t)},e.GetErrorDetailsFromServiceError=function(e,t,o){var i=new n.ServiceErrorToClientError(e);if(i.requestId=t,e)return i.getDetails(o)},e.GetErrorDetailsFromClientError=function(e,t){if(e)return e.getDetails(t)}})(powerbi=powerbi||{}),(function(e){(e=e.models||(e.models={})).contentProviderHelpLink={13:"https://go.microsoft.com/fwlink/?LinkId=546971",19:"https://go.microsoft.com/fwlink/?LinkID=528958",10:"https://go.microsoft.com/fwlink/?LinkID=528796",30:"https://go.microsoft.com/fwlink/?LinkId=613552",23:"https://go.microsoft.com/fwlink/?LinkID=528959",16:"https://go.microsoft.com/fwlink/?LinkID=528957",17:"https://go.microsoft.com/fwlink/?LinkID=528797",20:"https://go.microsoft.com/fwlink/?LinkId=613120",9:"https://go.microsoft.com/fwlink/?LinkID=528963",26:"https://go.microsoft.com/fwlink/?LinkID=528960",42:"https://go.microsoft.com/fwlink/?LinkId=536680",41:"https://go.microsoft.com/fwlink/?LinkId=613402",52:"https://go.microsoft.com/fwlink/?LinkId=615189",14:"https://go.microsoft.com/fwlink/?LinkId=544911",38:"https://go.microsoft.com/fwlink/?LinkID=615577",18:"https://go.microsoft.com/fwlink/?LinkId=533295",24:"https://go.microsoft.com/fwlink/?LinkID=528961"},e.contentProviderFallbackLink="https://go.microsoft.com/fwlink/?LinkId=532757",e.directQueryDisabledHelpLink="https://go.microsoft.com/fwlink/?linkid=2179788",e.excelWorkbookUploadFailedHelpLink="https://go.microsoft.com/fwlink/?LinkId=525916",e.excelWorkbookUploadFailedDefaultHelpLink="https://go.microsoft.com/fwlink/?LinkId=823121",e.excelWorkbookUploadFailedDataGatewayExceptionHelpLink="https://go.microsoft.com/fwlink/?LinkId=786855",e.excelWorkbookUploadFailedExceedsMaxSizeExceptionHelpLink="https://go.microsoft.com/fwlink/?LinkId=823122",e.learnMoreAboutEnterpriseGatewaysHelpLink="https://go.microsoft.com/fwlink/?LinkId=627094",e.EsriLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkID=825665"})(powerbi=powerbi||{}),(function(e){(e.common||(e.common={})).angularInjectorController="$$$angularInjectorController"})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){this.css={},this.elems=[]}e=e.models||(e.models={}),t.prototype.addAttributes=function(e){for(var t in e)this.css[t]=e[t]},t.prototype.element=function(e){this.elems=[e]},t.prototype.addElement=function(e){this.elems.push(e)},t.prototype.removeElement=function(e){_.pull(this.elems,e)},t.prototype.position=function(e){var t=this.css;t.WebkitTransform=t.transform="translate("+e.x+"px, "+e.y+"px)"},t.prototype.viewport=function(e){var t=this.css;t.height=e.height,t.width=e.width},t.prototype.zIndex=function(e){this.css.zIndex=e},t.prototype.rotate=function(e){var t;e&&((t=this.css).WebkitTransform=t.transform+=" rotate("+e+"deg)")},t.prototype.apply=function(e){if(e)e.css(this.css);else for(var t=0,o=this.elems;t<o.length;t++)o[t].css(this.css)},t.prototype.getCss=function(){return this.css},e.ApplyStyle=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).AuthDialogModel=function(){this.showAuthDialog=!1,this.showModalDialog=!1,this.showSpinner=!1,this.selectedAuthenticationIndex=0,this.showError=!1,this.showDetailsMessage=!1,this.updatePackage=!1,this.allowSingleSignOn=!1,this.showSingleSignOn=!1,this.isSingleSignOnEnabled=!1,this.skipTestConnectionOption=!1,this.showTemplateAppsUI=!1,this.sendCancelMessage=!1,this.showBackButton=!1,this.disableAuthSelection=!1,this.disablePrivacySelection=!1}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).CollapsiblePaneModel=function(){this.expandedWidth=0}})(powerbi=powerbi||{}),(function(e){var t;t=e.common||(e.common={}),(t=(e=t.models||(t.models={})).ContextMenuItemMetadataType||(e.ContextMenuItemMetadataType={}))[t.Text=0]="Text",t[t.Image=1]="Image",t[t.Link=2]="Link",t[t.Action=3]="Action",t[t.Status=4]="Status",(e=e.ContextMenuItemMetadataStatus||(e.ContextMenuItemMetadataStatus={}))[e.Error=0]="Error",e[e.Success=1]="Success",e[e.Unknown=2]="Unknown"})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).DataClassification=function(){this.id=0,this.default=!1,this.showTag=!0}})(powerbi=powerbi||{}),(function(e){!(function(o){var e;function t(e,t){void 0===t&&(t=512),this.displayWidth=e=void 0===e?320:e,this.displayHeight=t,this.resizeBuffer=10,this.isLayoutLocked=!1,this.willOverrideDisplayPosition=!1,this.isDynamic=!0,this.gridWidth=o.GridLayoutConstants.dynamicGridWidth+2*o.GridLayoutConstants.dynamicGridItemSpacing,this.gridHeight=o.GridLayoutConstants.dynamicGridHeight+2*o.GridLayoutConstants.dynamicGridItemSpacing,this.gridItemSpacing=2*o.GridLayoutConstants.dynamicGridItemSpacing,this.gridMinWidthOnResize=this.gridWidth-this.resizeBuffer,this.gridMinHeightOnResize=this.gridHeight-this.resizeBuffer,this.gridMaxWidthOnResize=this.gridWidth*o.GridLayoutConstants.dynamicMaxGridWidthUnits,this.gridMaxHeightOnResize=this.gridHeight*o.GridLayoutConstants.dynamicMaxGridHeigthUnits}e=o.models||(o.models={}),t.prototype.calculateDisplayPositions=function(e){for(var t=0,o=e;t<o.length;t++)o[t].clearOverrides();this.scale=this.displayWidth/320;var i={transform:"scale("+this.scale+")",width:this.displayWidth/this.scale+"px",height:this.displayHeight/this.scale+"px",left:0};_.isEmpty(e)||((e=_.head(e).gridLayoutContainer.element.parent()).removeAttr("style"),e.css(i))},t.prototype.calculateDisplaySize=function(e){},e.DynamicLayoutStrategy=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){this.layoutPosition={height:0,width:0}}e=e.models||(e.models={}),t.prototype.calculateLayout=function(e){},t.prototype.applyLayout=function(e){},t.prototype.applyLayoutSize=function(e,t,o){},t.prototype.applyChanges=function(){},t.prototype.buildLayoutDescriptor=function(){return null},t.prototype.tryPopulateLayoutPositionValues=function(){return!1},e.PlaceHolderGridItem=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){(function(e){e.gridDefaultCols=5,e.notifyGridItemsChangedDelay=1e3,e.maxCoordinateRow=100,e.easeInColDelay=80,e.easeInRowDeplay=300;var t=7,o=7;e.getGridMaxColSpan=function(){return t},e.setGridMaxColSpan=function(e){t=e},e.getGridMaxRowSpan=function(){return o};var i=!(e.setGridMaxRowSpan=function(e){o=e});e.getMaintainAspectRatio=function(){return i},e.setMaintainAspectRatio=function(e){i=e},(e=e.changeType||(e.changeType={}))[e.drag=0]="drag",e[e.resizing=1]="resizing",e[e.resized=2]="resized",e[e.refresh=3]="refresh"})((e=(e=e.common||(e.common={})).models||(e.models={})).gridLayoutConstants||(e.gridLayoutConstants={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var g,r;function t(e,t,o){var i=this;this.defferedOnGridLayoutChanged=r.deferUntilNextFrame((function(e){return i.onGridLayoutChanged(e)})),this.delayedNotifyGridItemsChanged=_.debounce((function(){return i.notifyGridItemsChanged()}),g.gridLayoutConstants.notifyGridItemsChangedDelay),this.layoutChangedPromise=null,this.isLayoutUpdateLocked=!1,this.gridLayoutItems=[];var n=new g.PlaceHolderGridItem;this.gridPlaceHolder=new g.GridLayoutItem(n,e,null),this.gridPlaceHolder.isVisible=!1,this.gridLayoutService=e,this.gridLayoutScope=o,this._gravityEnabled=this.isGravityEnabled(),this.element=t}g=e.models||(e.models={}),r=jsCommon.DeferUtility,t.prototype.isGravityEnabled=function(){return this.gridLayoutScope&&this.gridLayoutScope.viewModel&&this.gridLayoutScope.viewModel.gravityEnabled||0!==this.gridLayoutService.displayLayout},Object.defineProperty(t.prototype,"gravityEnabled",{get:function(){return this._gravityEnabled},enumerable:!1,configurable:!0}),t.prototype.addGridLayoutItem=function(e){var t=this;e.layoutChangeHandler=this.defferedOnGridLayoutChanged,e.removeHandler=function(e){return t.onGridLayoutItemRemove(e)},this.gridLayoutItems.push(e),this.defferedOnGridLayoutChanged(g.gridLayoutConstants.changeType.refresh)},t.prototype.onGridLayoutItemRemove=function(e){e=this.gridLayoutItems.indexOf(e);0<=e&&this.gridLayoutItems.splice(e,1),this.defferedOnGridLayoutChanged(g.gridLayoutConstants.changeType.refresh)},t.prototype.onGridLayoutChanged=function(e){this._gravityEnabled=this.isGravityEnabled();var t=this.calculateLayout(e);this.applyLayout(e),e!==g.gridLayoutConstants.changeType.drag&&e!==g.gridLayoutConstants.changeType.resizing&&e!==g.gridLayoutConstants.changeType.resized||this.setLayoutUpdateLock(!0),t||(this.finalizeGridLayout(),this.delayedNotifyGridItemsChanged())},t.prototype.finalizeGridLayout=function(){for(var e=0,t=this.gridLayoutItems;e<t.length;e++){var o=t[e];o.rowBeforeMove=o.getLayoutPosition().y}},t.prototype.notifyGridItemsChanged=function(){var e=this,t=this.getChangedGridItemsDescriptors();0<t.length&&!this.layoutChangedPromise&&(this.layoutChangedPromise=this.notifyGridItemsChangedHandler(t),this.layoutChangedPromise?(this.changedLayoutDescriptors=t,this.setLayoutUpdateLock(!0),this.layoutChangedPromise.then((function(){return e.layoutChangeDone(!0)}),(function(){return e.layoutChangeDone(!1)}))):this.layoutChangeDone(!1))},t.prototype.layoutChangeDone=function(e){this.layoutChangedPromise=null,this.setLayoutUpdateLock(!1),e&&(this.resetChangedGridItemsDescriptors(this.changedLayoutDescriptors),this.notifyGridItemsChanged())},t.prototype.calculateLayout=function(e){if(0!==this.gridLayoutItems.length){var t=this.gridLayoutItems,i=0<_.filter(t,(function(e){return e.isChanging})).length,o=[],n=g.gridLayoutConstants.gridDefaultCols;this.containerHeight=this.containerWidth=0;var r,a=this.popNewGridLayoutItems(t);t.sort((function(e,t){return e.getLayoutPosition().x-t.getLayoutPosition().x})),0<t.length&&(r=t[t.length-1].getLayoutPosition(),n=Math.max(Math.ceil(r.x+r.width-1),g.gridLayoutConstants.gridDefaultCols));for(var s=0;s<=n;++s)o.push(1);t.sort((function(e,t){var o=(i&&!e.isChanging?e.rowBeforeMove:e.getLayoutPosition().y)-(i&&!t.isChanging?t.rowBeforeMove:t.getLayoutPosition().y);if(0==o){if(e.isChanging)return-1;if(t.isChanging)return 1}return o}));for(var l=0,c=t;l<c.length;l++)(p=c[l]).isChanging?(this.clipGridItemShape(this.gridPlaceHolder,p),this.calculatePosition(this.gridPlaceHolder,o,!0,e,i),this.gridPlaceHolder.calculateLayout()):(this.clipGridItemShape(p,p),this.calculatePosition(p,o,!1,e,i));for(var d=0,u=a;d<u.length;d++){var p=u[d];this.clipGridItemShape(p,p),this.calculateDefaultPosition(p,o),this.gridLayoutItems.push(p)}this.gridLayoutService.strategy.calculateDisplayPositions(t);for(var m=0,h=t;m<h.length;m++)(p=h[m]).calculateLayout(),this.updateContainerSize(p);return this.gridPlaceHolder.isVisible=i}},t.prototype.applyLayout=function(e){for(var t=0,o=this.gridLayoutItems;t<o.length;t++)o[t].applyLayout(e,this.gridLayoutService.skipVisualManualUpdate);this.gridPlaceHolder.applyLayout(e)},t.prototype.updateContainerSize=function(e){var t=e.top+e.height,e=e.left+e.width;t>this.containerHeight&&(this.containerHeight=t),e>this.containerWidth&&(this.containerWidth=e)},t.prototype.calculatePosition=function(e,t,o,i,n){for(var r=e.getLayoutPosition(),a=g.gridLayoutConstants.maxCoordinateRow,s=1,l=r.x,c=r.x+r.width;l<c;++l){var d=t[l];s<d&&(s=d)}var u=r.y;n&&!o&&(u=e.rowBeforeMove),this._gravityEnabled?(r.y=s,s+=r.height):(r.y=u<s||a<u?s:Math.round(u),s=r.y+r.height),!(o&&i===g.gridLayoutConstants.changeType.resizing||i===g.gridLayoutConstants.changeType.resized)||s<(u=Math.round(u)+r.height)&&(s=u);for(l=r.x,c=r.x+r.width;l<c;++l)t[l]=s},t.prototype.calculateDefaultPosition=function(e,t){for(var o=e.getLayoutPosition(),i=1,n=Number.MAX_VALUE,r=1,a=Math.max(g.gridLayoutConstants.gridDefaultCols,o.width)-o.width+1;r<=a;++r){for(var s=0,l=r,c=r+o.width;l<c;++l)t[l]>s&&(s=t[l]);s<n&&(n=s,i=r)}o.x=i,o.y=n,n+=o.height;for(r=o.x,a=o.x+o.width;r<a;++r)t[r]=n},t.prototype.clipGridItemShape=function(e,t){var o=t.getLayoutPosition(),i=e.getLayoutPosition(),t=g.gridLayoutConstants.getGridMaxColSpan(),e=g.gridLayoutConstants.getGridMaxRowSpan();i.y=o.y,i.x=Math.round(o.x),i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),(!i.x||i.x<1)&&(i.x=1),(!i.width||i.width<1)&&(i.width=1),(!i.height||i.height<1)&&(i.height=1),i.width>t&&(i.width=t),i.height>e&&(i.height=e)},t.prototype.popNewGridLayoutItems=function(e){for(var t=[],o=e.length-1;0<=o;--o){var i,n=e[o];n.isChanging||((i=n.getLayoutPosition()).y||i.x||(e.splice(o,1),t.unshift(n)))}return t},t.prototype.getChangedGridItemsDescriptors=function(){for(var e=[],t=0,o=this.gridLayoutItems;t<o.length;t++){var i=o[t].getLayoutDescriptor();i&&e.push(i)}return e},t.prototype.resetChangedGridItemsDescriptors=function(e){for(var t={},o=0,i=this.gridLayoutItems;o<i.length;o++)t[(n=i[o]).gridItem.id]=n;for(var n,r=0,a=e;r<a.length;r++)(n=t[a[r].id])&&n.resetLayoutDescriptor()},t.prototype.setLayoutUpdateLock=function(e){if(this.isLayoutUpdateLocked!==e){this.isLayoutUpdateLocked=e;for(var t=0,o=this.gridLayoutItems;t<o.length;t++)o[t].isLayoutUpdateLocked=e}},g.GridLayoutContainer=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var o;function t(e,t,o){this.activeLayout=t.displayLayout,this.isChanging=!1,this.isVisible=!0,this.isLayoutUpdateLocked=!1,this.gridLayoutService=t,this.gridLayoutContainer=o,((this.gridItem=e).gridLayoutContext=this).gridItem.tryPopulateLayoutPositionValues(),this.resetLayoutDescriptor()}o=e.models||(e.models={}),Object.defineProperty(t.prototype,"displayCol",{get:function(){return this.overrideCol||this.getLayoutPosition().x},set:function(e){this.overrideCol=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayRow",{get:function(){return this.overrideRow||this.getLayoutPosition().y},set:function(e){this.overrideRow=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displaySize",{get:function(){return this.overrideSize||{colSpan:this.getLayoutPosition().width,rowSpan:this.getLayoutPosition().height}},set:function(e){this.overrideSize=e},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.removeHandler(this),this.gridItem.gridLayoutContext=null},t.prototype.calculateLayout=function(){this.gridLayoutService.strategy.calculateDisplaySize(this),this.left=(this.displayCol-1)*this.gridLayoutService.strategy.gridWidth,this.top=(this.displayRow-1)*this.gridLayoutService.strategy.gridHeight,this.width=this.displaySize.colSpan*this.gridLayoutService.strategy.gridWidth,this.height=this.displaySize.rowSpan*this.gridLayoutService.strategy.gridHeight;var e=this.gridLayoutService.strategy.gridItemSpacing,e={width:this.width-e,height:this.height-e};this.gridItem.calculateLayout(e)},t.prototype.applyLayout=function(e,t){this.gridItem.applyLayoutSize(this.displaySize,e,t),this.render()},t.prototype.clearOverrides=function(){this.overrideCol=void 0,this.overrideRow=void 0,this.overrideSize=void 0},t.prototype.onDragStart=function(){this.isChanging=!0},t.prototype.onDragMove=function(e){var t=this.getLayoutPosition();t.x=1+e.x/this.gridLayoutService.strategy.gridWidth,t.y=1+e.y/this.gridLayoutService.strategy.gridHeight,this.layoutChangeHandler(o.gridLayoutConstants.changeType.drag)},t.prototype.onDragEnd=function(){this.isChanging=!1,this.layoutChangeHandler(o.gridLayoutConstants.changeType.drag)},t.prototype.onResizeStart=function(){this.isChanging=!0},t.prototype.onResizeMove=function(e){var t=this.getLayoutPosition();t.width=e.width/this.gridLayoutService.strategy.gridWidth,t.height=e.height/this.gridLayoutService.strategy.gridHeight,this.layoutChangeHandler(o.gridLayoutConstants.changeType.resizing)},t.prototype.onResizeEnd=function(){this.isChanging=!1,this.layoutChangeHandler(o.gridLayoutConstants.changeType.resized)},t.prototype.getLayoutDescriptor=function(){var e=this.gridItem;try{if(!this.isChanging&&0<e.id&&this.isLayoutPositionChanged())return e.buildLayoutDescriptor()}catch(e){}return null},t.prototype.isLayoutPositionChanged=function(){var e=this.getLayoutPosition();return e.y!==this.prevY||e.x!==this.prevX||e.width!==this.prevWidth||e.height!==this.prevHeight},t.prototype.resetLayoutDescriptor=function(){var e=this.gridItem;e&&(this.resetPrevValues(),e.applyChanges())},t.prototype.resetPrevValues=function(){var e=this.getLayoutPosition();this.prevX=e.x,this.prevY=e.y,this.prevWidth=e.width,this.prevHeight=e.height,this.rowBeforeMove=this.prevY},t.prototype.getLayoutPosition=function(){return this.gridItem.layoutPosition},t.prototype.getActiveLayout=function(){return this.activeLayout},t.prototype.setActiveLayout=function(e){this.activeLayout=e,this.gridItem.tryPopulateLayoutPositionValues()&&this.onLayoutInvalidated()},t.prototype.onLayoutInvalidated=function(){this.isLayoutUpdateLocked||(this.resetPrevValues(),this.layoutChangeHandler(o.gridLayoutConstants.changeType.refresh))},t.prototype.getGridHeight=function(){return this.gridLayoutContainer.element.height()},t.prototype.getGridWidth=function(){return this.gridLayoutContainer.element.width()},t.prototype.forceApplyCurrentChanges=function(){this.layoutChangeHandler(o.gridLayoutConstants.changeType.refresh)},o.GridLayoutItem=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var t;function o(){this.resizeBuffer=10,this.isLayoutLocked=!1,this.willOverrideDisplayPosition=!1,this.gridWidth=e.GridLayoutConstants.defaultGridWidth,this.gridHeight=e.GridLayoutConstants.defaultGridHeight,this.gridItemSpacing=e.GridLayoutConstants.defaultGridItemSpacing,this.gridMinWidthOnResize=this.gridWidth-this.resizeBuffer,this.gridMinHeightOnResize=this.gridHeight-this.resizeBuffer,this.gridMaxWidthOnResize=this.gridWidth*t.gridLayoutConstants.getGridMaxColSpan(),this.gridMaxHeightOnResize=this.gridHeight*t.gridLayoutConstants.getGridMaxColSpan(),this.isDynamic=!1}t=e.models||(e.models={}),o.prototype.calculateDisplayPositions=function(e){for(var t=0,o=e;t<o.length;t++)o[t].clearOverrides()},o.prototype.calculateDisplaySize=function(e){},t.DefaultGridLayoutStrategy=o})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){(e=(e=(e=e.common||(e.common={})).models||(e.models={})).InlineMessageIcon||(e.InlineMessageIcon={}))[e.Info=0]="Info",e[e.Error=1]="Error",e[e.Warning=2]="Warning"})(powerbi=powerbi||{}),(function(e){(function(e){var o=(t.Confirm="confirm",t.Prompt="prompt",t.Custom="custom",t);function t(){}e.DialogType=o;var s=(i.Normal="normal",i.Elevated="elevated",i);function i(){}e.ButtonImportance=s;var n=function(e,t){void 0===t&&(t=""),this.title=e=void 0===e?"":e,this.message=t,this.dialogType=o.Confirm};e.ConfirmDialogContentModel=n;n=function(e,t,o,i,n,r,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),this.localizationService=i,this.isConfirmButtonDisabled=e,this.confirmButtonText=t,this.autoCloseDialogOnConfirmButtonSelected=o,this.cancelButtonText=this.localizationService.get("ModalDialog_Cancel"),this.contentFilledDialog=n,this.hideActionsButtons=r,this.hideCancelButton=a,this.confirmButtonImportance=s.Normal,this.cancelButtonImportance=s.Normal};e.ModalDialogModel=n})((e=e.common||(e.common={})).models||(e.models={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).Resource=function(e){this.isSelected=!1,this.isEnabled=!0,this.isUsedByContentPack=!1,this.countOfLinkedAncestorsSelected=0,this.resourceType=e}})(powerbi=powerbi||{}),(function(e){!(function(e){var t,o,i,n;function r(e){var t=o.call(this)||this;return t.contract=e,t.isRefreshInProgress=!1,t.uniqueId=r.getUniqueId(e.id,e.packageId),t.categories=0,t}t=e.models||(e.models={}),i=e.contracts.ContentTileType,n=e.helpers.ModelConverterHelper,o=t.Resource,__extends(r,o),r.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&null!=(e=this.getPermissionsCallback())?e:this.contract&&this.contract.permissions},Object.defineProperty(r.prototype,"hasError",{get:function(){return this.contract&&(2===this.packagePublishStatus||4===this.packagePublishStatus||2===this.contract.lastRefreshStatus||4===this.contract.lastRefreshStatus)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastRefreshTimeInLocaleString",{get:function(){var e=this.getLastRefreshTime();if(e)return e.toLocaleString()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastRefreshEpochTime",{get:function(){var e=this.getLastRefreshTime();if(e)return e.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentTileType",{get:function(){return i.Dataset},enumerable:!1,configurable:!0}),r.prototype.isRefreshDisabledDueToInactivity=function(){var e=this.contract&&this.contract.refreshSchedule;return e&&1===e.refreshDisabledReason},r.getUniqueId=function(e,t){return i.Dataset+"_"+e+"_"+t},r.prototype.getLastRefreshTime=function(){var e=this.contract,e=e.onPremModelConnectionString?e.lastTimeAModelChangeWasDetectedInTheCluster:e.lastRefreshTime;return n.convertRefreshTimeToJsDateTime(e)},t.Model=r})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var t,o,i;function n(e){var t=o.call(this)||this;return t.permissions=e.permissions,t.modelType=e.modelType,t.uniqueId=i.CdsaModel+"_"+e.id,t.objectId=e.objectId,t.ownerUser=e.ownerUser,t.state=e.state,t}t=e.models||(e.models={}),i=e.contracts.ContentTileType,o=t.Resource,__extends(n,o),n.prototype.getPermissions=function(){return this.permissions},Object.defineProperty(n.prototype,"contentTileType",{get:function(){return i.CdsaModel},enumerable:!1,configurable:!0}),t.CdsaContentTile=n})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var n;function r(e,t,o){var i=n.call(this,t)||this;return i.uniqueId=r.getUniqueId(t,e,o),i}e=e.models||(e.models={}),n=e.Resource,__extends(r,n),r.getUniqueId=function(e,t,o){return e+"_"+t+"_"+o},e.ReportResource=r})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(a){!(function(e){var o,t,i,n;function r(e){var t=o.call(this,void 0===e?0:e.id,0,void 0===e?0:e.packageId)||this;return t.contract=e,t.isRefreshInProgress=!1,t.reportType=t.contract&&1===t.contract.reportType?1:0,t.contentTileType=1===t.reportType?i.ContentTileType.RdlReport:i.ContentTileType.Report,t}e=e.models||(e.models={}),i=a.common.contracts,n=jsCommon.EnumExtensions,o=e.ReportResource,__extends(r,o),r.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&null!=(e=this.getPermissionsCallback())?e:this.contract&&this.contract.permissions},Object.defineProperty(r.prototype,"canWrite",{get:function(){return n.hasFlag(this.getPermissions(),t.Write)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canCopy",{get:function(){return n.hasFlag(this.getPermissions(),t.CopyOnWrite)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canExplore",{get:function(){return n.hasFlag(this.getPermissions(),t.Explore)},enumerable:!1,configurable:!0}),e.Report=r,(e=t=e.ReportPermissions||(e.ReportPermissions={}))[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.ReShare=4]="ReShare",e[e.Explore=8]="Explore",e[e.CopyOnWrite=17]="CopyOnWrite",e[e.ReadWrite=3]="ReadWrite",e[e.ReadReshare=5]="ReadReshare",e[e.Personalized=11]="Personalized",e[e.All=7]="All"})(a.common||(a.common={}))})(powerbi=powerbi||{}),(function(e){var l;(function(t){var o=l.contracts.DataCacheModeType,i=l.contracts.gateway.DataSourceType;(n=t.TestConnectionState||(t.TestConnectionState={}))[n.NotSpecified=0]="NotSpecified",n[n.NotStart=1]="NotStart",n[n.Progressing=2]="Progressing",n[n.Failed=3]="Failed",n[n.Passed=4]="Passed";var d=(Object.defineProperty(e.prototype,"showWeekDays",{get:function(){return 10080===this.refreshSettings.refreshFrequency},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showRefreshTimeInfo",{get:function(){var e=this.refreshSettings.refreshFrequency;return 1440===e||10080===e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshFrequencyString",{get:function(){return this.refreshSettings.refreshFrequency.toString()},set:function(e){this.refreshSettings.refreshFrequency=parseInt(e,10)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weekdayKeys",{get:function(){return a.weekdayKeys()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTimeWindows",{get:function(){return a.refreshTimeWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTimeHourWindows",{get:function(){return a.refreshTimeHourWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTimeMinuteWindows",{get:function(){return a.refreshTimeMinuteWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTimeAmPmWindows",{get:function(){return a.refreshTimeAmPmWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTimeZones",{get:function(){return a.refreshTimeZones(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTimeZonesViewModel",{get:function(){return a.refreshTimeZonesViewModel(this.localizationService)},enumerable:!1,configurable:!0}),e);function e(e,t){this.localizationService=t,this.refreshSettings=e,this.refreshSectionExpand=!1}t.RefreshSettingsModel=d;var n=(Object.defineProperty(r.prototype,"takeoverStatusText",{get:function(){return this.lastTakeoverUPN?this.getTakeoverStatusTextForUser(this.lastTakeoverUPN):this.lastTakeoverEmailAddress?this.getTakeoverStatusTextForUser(this.lastTakeoverEmailAddress):this.lastTakeoverText?this.localizationService.format("SettingsDataset_TakeOverStatusText_Before",[this.lastTakeoverText]):this.localizationService.get("SettingsDataset_TakeOverStatusTextNullUser_Before")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"takeoverButtonText",{get:function(){return this.takenOver?this.localizationService.get("SettingsDataset_TakeOverButton_CancelTakeOver"):this.localizationService.get("SettingsDataset_TakeOverButton_TakeOver")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasDatasourceWithWrongCredentials",{get:function(){return this.datasources&&_.some(this.datasources,(function(e){return!e.isCloudDirectQuery&&e.testConnectionState!==t.TestConnectionState.Passed}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"showSkipTestConnectionWarning",{get:function(){return _.some(this.datasources,(function(e){return!0===e.skipTestConnection}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasDirectQueryDatasourceWithMissingCredentials",{get:function(){return this.datasources&&_.some(this.datasources,(function(e){return e.isCloudDirectQuery&&e.testConnectionState===t.TestConnectionState.Failed}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasRDataSource",{get:function(){return this.datasources&&_.some(this.datasources,(function(e){return e.datasourceType===i.Extension&&(e.name===l.constants.RDataSourceName||e.fullName===l.constants.RDataSourceName)}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isPlainDirectQueryOrOnPremModel",{get:function(){return r.isPlainDirectQueryOrOnPremModel(this.contract)},enumerable:!1,configurable:!0}),r.isPlainDirectQueryOrOnPremModel=function(e){return e.dataCacheMode===o.DirectQuery||!_.isEmpty(e.onPremModelConnectionString)},r.prototype.getTakeoverStatusTextForUser=function(e){return this.takenOver?this.localizationService.format("SettingsDataset_TakeOverStatusText_After",['<a href=mailto:"'+e+'">'+e+"</a>"]):this.localizationService.format("SettingsDataset_TakeOverStatusText_Before",['<a href=mailto:"'+e+'">'+e+"</a>"])},r);function r(e,t,o,i,n,r,a,s,l,c){this.localizationService=c,this.contract=e,this.modelId=t,this.name=o,this.description=i,this.lastRefreshFailed=n,this.lastRefreshFailedMessage=r,this.nextRefresh=a,this.refreshSettingsModel=new d(s,c),this.parameters=l,this.takenOver=!1,this.isDirty=!1,this.areDatasourcesDirty=!1,this.isQnaDirty=!1,this.paSupported=null==e?void 0:e.paSupported,this.paEnabled=null==e?void 0:e.paEnabled,this.paSettings=null==e?void 0:e.paSettings}t.SettingsDatasetModel=n;var a=(s.weekdayKeys=function(){return["SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Sunday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Monday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Tuesday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Wednesday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Thursday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Friday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Saturday"]},s.refreshTimeWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_TimeWindow_1"),e.get("SettingsDataset_ScheduleRefresh_TimeWindow_2"),e.get("SettingsDataset_ScheduleRefresh_TimeWindow_3"),e.get("SettingsDataset_ScheduleRefresh_TimeWindow_4")]},s.refreshTimeHourWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_1"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_2"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_3"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_4"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_5"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_6"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_7"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_8"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_9"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_10"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_11"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_12")]},s.refreshTimeMinuteWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_TimeMinuteWindos_00"),e.get("SettingsDataset_ScheduleRefresh_TimeMinuteWindos_30")]},s.refreshTimeAmPmWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_AmPmWindows_Am"),e.get("SettingsDataset_ScheduleRefresh_AmPmWindows_Pm")]},s.refreshTimeZones=function(e){return{"Dateline Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Dateline_Standard_Time"),"UTC-11":e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_11"),"Hawaiian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Hawaiian_Standard_Time"),"Alaskan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Alaskan_Standard_Time"),"Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time"),"Pacific Standard Time (Mexico)":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time_Mexico"),"Mountain Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time"),"Mountain Standard Time (Mexico)":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time_Mexico"),"US Mountain Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_US_Mountain_Standard_Time"),"Canada Central Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Canada_Central_Standard_Time"),"Central America Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_America_Standard_Time"),"Central Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time"),"Central Standard Time (Mexico)":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time_Mexico"),"Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Eastern_Standard_Time"),"SA Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Pacific_Standard_Time"),"US Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_US_Eastern_Standard_Time"),"Venezuela Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Venezuela_Standard_Time"),"Atlantic Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Atlantic_Standard_Time"),"Central Brazilian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Brazilian_Standard_Time"),"Pacific SA Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_SA_Standard_Time"),"SA Western Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Western_Standard_Time"),"Paraguay Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Paraguay_Standard_Time"),"Newfoundland Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Newfoundland_Standard_Time"),"E. South America Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_South_America_Standard_Time"),"Greenland Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Greenland_Standard_Time"),"Montevideo Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Montevideo_Standard_Time"),"SA Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Eastern_Standard_Time"),"Argentina Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Argentina_Standard_Time"),"Mid-Atlantic Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mid_Atlantic_Standard_Time"),"UTC-02":e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_2"),"Azores Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Azores_Standard_Time"),"Cabo Verde Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Cabo_Verde_Standard_Time"),"GMT Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_GMT_Standard_Time"),"Greenwich Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Greenwich_Standard_Time"),"Morocco Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Morocco_Standard_Time"),UTC:e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC"),"Central Europe Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Europe_Standard_Time"),"Central European Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_European_Standard_Time"),"Romance Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Romance_Standard_Time"),"W. Central Africa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_W_Central_Africa_Standard_Time"),"W. Europe Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_W_Europe_Standard_Time"),"Namibia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Namibia_Standard_Time"),"E. Europe Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_Europe_Standard_Time"),"Egypt Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Egypt_Standard_Time"),"FLE Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_FLE_Standard_Time"),"GTB Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_GTB_Standard_Time"),"Israel Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Israel_Standard_Time"),"Jordan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Jordan_Standard_Time"),"Middle East Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Middle_East_Standard_Time"),"South Africa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_South_Africa_Standard_Time"),"Syria Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Syria_Standard_Time"),"Turkey Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Turkey_Standard_Time"),"Arab Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Arab_Standard_Time"),"Arabic Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Arabic_Standard_Time"),"E. Africa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_Africa_Standard_Time"),"Kaliningrad Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Kaliningrad_Standard_Time"),"Iran Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Iran_Standard_Time"),"Russian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Russian_Standard_Time"),"Arabian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Arabian_Standard_Time"),"Azerbaijan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Azerbaijan_Standard_Time"),"Caucasus Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Caucasus_Standard_Time"),"Georgian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Georgian_Standard_Time"),"Mauritius Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mauritius_Standard_Time"),"Afghanistan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Afghanistan_Standard_Time"),"West Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_West_Asia_Standard_Time"),"Pakistan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pakistan_Standard_Time"),"India Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_India_Standard_Time"),"Sri Lanka Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Sri_Lanka_Standard_Time"),"Nepal Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Nepal_Standard_Time"),"Ekaterinburg Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Ekaterinburg_Standard_Time"),"Central Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Asia_Standard_Time"),"Bangladesh Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Bangladesh_Standard_Time"),"Myanmar Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Myanmar_Standard_Time"),"N. Central Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_N_Central_Asia_Standard_Time"),"SE Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SE_Asia_Standard_Time"),"North Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_North_Asia_Standard_Time"),"China Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_China_Standard_Time"),"Singapore Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Singapore_Standard_Tim"),"Taipei Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Taipei_Standard_Time"),"W. Australia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_W_Australia_Standard_Time"),"Ulaanbaatar Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Ulaanbaatar_Standard_Time"),"North Asia East Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_North_Asia_East_Standard_Time"),"Korea Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Korea_Standard_Time"),"Tokyo Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Tokyo_Standard_Time"),"AUS Central Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_AUS_Central_Standard_Time"),"Cen. Australia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Cen_Australia_Standard_Time"),"Yakutsk Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Yakutsk_Standard_Time"),"AUS Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_AUS_Eastern_Standard_Time"),"E. Australia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_Australia_Standard_Time"),"Tasmania Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Tasmania_Standard_Time"),"West Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_West_Pacific_Standard_Time"),"Vladivostok Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Vladivostok_Standard_Time"),"Central Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Pacific_Standard_Time"),"Magadan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Magadan_Standard_Time"),"Fiji Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Fiji_Standard_Time"),"New Zealand Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_New_Zealand_Standard_Time"),"UTC+12":e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Plus_12"),"Tonga Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Tonga_Standard_Time"),"Samoa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Samoa_Standard_Time")}},s.refreshTimeZonesViewModel=function(e){var o=[];return _.forOwn(this.refreshTimeZones(e),(function(e,t){o.push({key:t,value:e})})),o},s);function s(){}t.RefreshStaticConstants=a})((l=e.common||(e.common={})).models||(l.models={}))})(powerbi=powerbi||{}),(function(e){((e=(e=e.common||(e.common={})).models||(e.models={})).SettingsViewModelFactory||(e.SettingsViewModelFactory={})).createSupportedLanguagesModel=function(){return[{name:"العَرَبِية",code:"ar",lcid:"1025"},{name:"Basque",code:"eu",lcid:"1069"},{name:"Български",code:"bg",lcid:"1026"},{name:"català",code:"ca",lcid:"1027"},{name:"中文(简体)",code:"zh-Hans",lcid:"2052"},{name:"中文(繁體)",code:"zh-Hant",lcid:"1028"},{name:"hrvatski",code:"hr",lcid:"1050"},{name:"čeština",code:"cs",lcid:"1029"},{name:"dansk",code:"da",lcid:"1030"},{name:"Nederlands",code:"nl",lcid:"1043"},{name:"English",code:"en-US",lcid:"1033"},{name:"eesti",code:"et",lcid:"1061"},{name:"suomi",code:"fi",lcid:"1035"},{name:"français",code:"fr",lcid:"1036"},{name:"galego",code:"gl",lcid:"1110"},{name:"Deutsch",code:"de",lcid:"1031"},{name:"Ελληνικά",code:"el",lcid:"1032"},{name:"עברית",code:"he",lcid:"1037"},{name:"हिंदी",code:"hi",lcid:"1081"},{name:"magyar",code:"hu",lcid:"1038"},{name:"Bahasa Indonesia",code:"id",lcid:"1057"},{name:"italiano",code:"it",lcid:"1040"},{name:"日本語",code:"ja",lcid:"1041"},{name:"Қазақ",code:"kk",lcid:"1087"},{name:"한국어",code:"ko",lcid:"1042"},{name:"latviešu",code:"lv",lcid:"1062"},{name:"lietuvių",code:"lt",lcid:"1063"},{name:"Bahasa Melayu",code:"ms",lcid:"1086"},{name:"norsk (bokmål)",code:"no",lcid:"1044"},{name:"Polski",code:"pl",lcid:"1045"},{name:"Português (Brasil)",code:"pt-BR",lcid:"1046"},{name:"Português (Portugal)",code:"pt-PT",lcid:"2070"},{name:"română",code:"ro",lcid:"1048"},{name:"Русский",code:"ru",lcid:"1049"},{name:"српски",code:"sr-Cyrl",lcid:"3098"},{name:"srpski",code:"sr-Latn",lcid:"2074"},{name:"slovenčina",code:"sk",lcid:"1051"},{name:"slovenski",code:"sl",lcid:"1060"},{name:"español",code:"es",lcid:"1034"},{name:"svenska",code:"sv",lcid:"1053"},{name:"ไทย",code:"th",lcid:"1054"},{name:"Türkçe",code:"tr",lcid:"1055"},{name:"українська",code:"uk",lcid:"1058"},{name:"Tiếng Việt",code:"vi",lcid:"1066"}]}})(powerbi=powerbi||{}),(function(t){var e;(e=t.common||(t.common={})).PowerBIErrorHeader="x-powerbi-error-info",e.PowerBIErrorDetailsHeader="x-powerbi-error-details",(e.HttpRequestConfig||(e.HttpRequestConfig={})).create=function(e,t,o,i){return t={method:e,url:t},void 0!==i&&(t.data=i),angular.extend(t,o)},e.getHttpService=function(){return t.ensurePowerbiCommon().httpService},e.setHttpService=function(e){t.ensurePowerbiCommon().httpService=e}})(powerbi=powerbi||{}),(function(t){!(function(){(t.common||(t.common={})).createDatasetsService=function(e,t){return new o(e,t)};var o=(e.prototype.discoverDatasourceForImport=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"DiscoverDatasourceForImport");return o.retryCount=0,this.httpService.post("metadata/datamovement/datasources/discoverForImport/"+e,t,o)},e.prototype.takeoverDatasource=function(e,t){t=this.httpService.powerbiRequestOptions(t,"DiscoverDatasource");return this.httpService.post("metadata/datamovement/models/"+e+"/takeover",null,t)},e.prototype.updateModelParameters=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"UpdateModelParameters");return this.httpService.post("powerbi/metadata/models/"+e+"/parameters",t,o)},e.prototype.updateModelOnPremisesGatewayOverride=function(e,t){var o=this.httpService.powerbiRequestOptions();return this.httpService.post("powerbi/metadata/models/"+e+"/onpremisesgatewayoverride",t,o)},e.prototype.displayOopsErrorAndEndTelemetry=function(e,t,o,i,n){n.reject(),t.error(this.localizationService.get(o),o,{requestId:i.requestId,statusCode:i.status.toString()})},e.prototype.testPackageCredentials=function(e,t){t=this.httpService.powerbiRequestOptions(t,"TestPackageConnection");return this.httpService.get("powerbi/content/packagecredentials/"+e+"/",t)},e.prototype.updatePackageCredentials=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"UpdatePackageCredential");return o.retryCount=0,this.httpService.put("powerbi/content/packagecredentials/"+e+"/?code="+t,"",o)},e.prototype.updatePackageRefreshEnabled=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"UpdatePackageRefreshEnabled");return o.retryCount=0,this.httpService.put("powerbi/metadata/packages/"+e+"/refreshEnabled",t,o)},e.prototype.getQueryParameters=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetQueryParameters");return this.httpService.get("V1.0/myorg/datasets/"+e+"/parameters",t)},e.prototype.updateQueryParameters=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"UpdateQueryParameters");return this.httpService.post("V1.0/myorg/datasets/"+e+"/Default.UpdateParameters",t,o)},e);function e(e,t){this.httpService=e,this.localizationService=t}})()})(powerbi=powerbi||{});var StringExtensions=jsCommon.StringExtensions,Trace=jsCommon.Trace;!(function(e){function t(e,t){this.promiseFactory=e,this.httpService=t,this.isEnabled=!0,this.requestDeferred=this.promiseFactory.defer(),this.requestDeferred.resolve(null),this.longPollInitialized=!1,this.lastLongPollCancelled=!1,this.lastLongPollTimedOut=!1,this.retryCount=0}e=e.common||(e.common={}),t.prototype.startMonitoring=function(e){var t=this;void 0===e&&(e=0),this.longPollInitialized||(this.longPollInitialized=!0,this.isEnabled=!0,this.requestDelay&&clearTimeout(this.requestDelay),this.requestDelay=setTimeout((function(){t.sendLongPollRequest()}),e))},t.prototype.setLongPollInitialized=function(e){this.longPollInitialized=e},t.prototype.cancelCurrentRequest=function(){this.lastLongPollCancelled=!0,this.requestDeferred.resolve(null),this.longPollInitialized=!1,this.requestDelay&&clearTimeout(this.requestDelay)},t.prototype.pause=function(){this.paused=!0,this.cancelCurrentRequest()},t.prototype.resume=function(){this.paused=!1,this.startMonitoring()},t.prototype.trySendRequest=function(e){var t=this.requestOptions,o=t.headers.Authorization,i=!1;if(i=o?1<(o=o.split(" ")).length&&!StringExtensions.isNullOrUndefinedOrWhiteSpaceString(o[1]):i)return this.httpService.post(this.getEndpointUrl(),{request:e},t);Trace.warning("Auth token not available, avoiding powerbi/refresh/subscribe request")},Object.defineProperty(t.prototype,"requestHeader",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longPollDurationInMs",{get:function(){return 6e4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestOptions",{get:function(){var e=this,t=this.requestDeferred;this.lastLongPollTimedOut=!1,this.lastLongPollCancelled=!1,setTimeout((function(){e.lastLongPollTimedOut=!0,t.resolve(null)}),this.longPollDurationInMs);var o=this.httpService.powerbiRequestOptions(null,null,this.requestHeader,!0);return o.retryCount=0,o.timeout=t.promise,o.silentlyFailOnExpiry=!0,o},enumerable:!1,configurable:!0}),t.prototype.sendLongPollRequest=function(){var e,t=this;this.paused||this.isEnabled&&(this.requestDeferred=this.promiseFactory.defer(),(e=this.getRequest())?(e=this.trySendRequest(e))&&e.then((function(e){t.retryCount=0,t.requestDeferred.resolve(null),t.processResponse(e.data),t.sendLongPollRequest()}),(function(e){t.requestDeferred.resolve(null),t.lastLongPollTimedOut?(t.retryCount=0,t.sendLongPollRequest()):t.lastLongPollCancelled?t.retryCount=0:t.retryCount<3?(t.retryCount++,t.sendLongPollRequest()):(t.processError(e&&e.error),t.suspend())})):this.reset())},t.prototype.suspend=function(){var t=this,o=this.promiseFactory.defer();o.promise.then((function(){t.cancelCurrentRequest(),t.startMonitoring()}));var i=function(e){e&&(t.httpService.unregisterResponseCallback(i),o.resolve(null))};this.httpService.registerResponseCallback(i),setTimeout((function(){o.resolve(null)}),12e4)},t.prototype.reset=function(){this.longPollInitialized=!1,this.lastLongPollTimedOut=!1,this.lastLongPollCancelled=!1},e.LongPollServiceBase=t})(powerbi=powerbi||{}),(function(n){var e;(function(e){var t=(o.prototype.getMashUpProviderPackageModels=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetMashUpProviderPackageModels");return this.httpService.get(this.urlPathPrefix+e.toString()+"/models",t)},o.prototype.updateMashUpProviderPackageModelParameters=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"UpdateMashUpProviderPackageModelParameters");return this.httpService.post(this.urlPathPrefix+e.toString()+"/parameters",t,o)},o);function o(e,t){this.urlPathPrefix=e,this.httpService=t}e.MashUpProviderProxyImpl=t;i.prototype.getMashUpProviderPackageModels=function(e,t){return n.common.mashupProviderService.getMashUpProviderPackageModels(e,t)},i.prototype.updateMashUpProviderPackageModelParameters=function(e,t,o){return n.common.mashupProviderService.updateMashUpProviderPackageModelParameters(e,t,o)},t=i;function i(){}e.MashUpProviderProxyUsingService=t})((e=n.common||(n.common={})).proxies||(e.proxies={}))})(powerbi=powerbi||{}),(function(e){var i;i=e.common||(e.common={}),(e=i.mashupProviderService||(i.mashupProviderService={})).getMashUpProviderPackageModels=function(e,t){return t=i.getHttpService().powerbiRequestOptions(t,"GetMashUpProviderPackageModels"),i.getHttpService().get("powerbi/providers/mashup/provider/"+e.toString()+"/models",t)},e.updateMashUpProviderPackageModelParameters=function(e,t,o){return o=i.getHttpService().powerbiRequestOptions(o,"UpdateMashUpProviderPackageModelParameters"),i.getHttpService().post("powerbi/providers/mashup/provider/"+e.toString()+"/parameters",t,o)}})(powerbi=powerbi||{}),(function(e){(e=(e=e.common||(e.common={})).events||(e.events={})).viewInsightInFocusEventName="viewInsightInFocus",e.visualContainerResizeStart={type:2,name:"visualContainerResizeStart"},e.visualContainerResizeEnd={type:2,name:"visualContainerResizeEnd"},e.visualContainerInteraction={type:2,name:"visualContainerInteraction"},e.canvasItemContainerShowHover={type:2,name:"canvasItemContainerShowHover"},e.canvasItemContainerHideHover={type:2,name:"canvasItemContainerHideHover"},e.liveReportTileReady={type:2,name:"liveReportTileReady"},e.printSectionReady={type:2,name:"printSectionReady"},e.printStarting={type:3,name:"printStarting"},e.printFinished={type:3,name:"printFinished"},e.loadPowerViewReport={type:4,name:"loadPowerViewReport"},e.explorationUnloaded={type:4,name:"explorationUnloaded"},e.informationProtectionLoaded={type:4,name:"informationProtectionLoaded"},e.printModeChanged={type:4,name:"printModeChanged"},e.reportRefreshStateChanged={name:"reportRefreshStateChanged",type:4},e.activeExplorationChanged={name:"activeExplorationChanged",type:4},e.tileVisualLoadedChanged={name:"tileVisualLoadedChanged",type:4},e.scrollToSelectedTile={type:4,name:"scrollToSelectedTile"}})(powerbi=powerbi||{}),(function(e){var t,o;t=e.common||(e.common={}),o=jsCommon.FreezeUtility,e={UnknownError:{messageId:"ErrorMessage_FailedToStorePackage",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedDefaultHelpLink},ExcelWorkbookHasNoDataException:{messageId:"ErrorMessage_FailedToStorePackageExcel",titleId:"ErrorTitle_FailedToStorePackageExcel",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedHelpLink},StreamIsNotAZipFileException:{messageId:"ErrorMessage_FailedToOpenExcelFile",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedDefaultHelpLink},ExcelProviderNoConnectorAssociatedWithModelException:{messageId:"ErrorMessage_NoConnectorAssociatedWithModel",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedDataGatewayExceptionHelpLink},RequestedViewWorkbookExceedsMaximiumSizeException:{messageId:"UploadExcel_UploadLimit_ViewExcelMode",titleId:"UploadExcel_UploadLimit_ViewExcelMode_Title",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedExceedsMaxSizeExceptionHelpLink,messageIdOverride:{featureSwitch:"oneGBUploadFileSizeEnabled",messageId:"UploadExcel_UploadLimit_ViewExcelMode_OneGB"}}},t.KnownContentProviderErrors={},Object.defineProperty(t.KnownContentProviderErrors,t.constants.excelContentProviderId.toString(10),{configurable:!0,enumerable:!0,writable:!1,value:e}),Object.defineProperty(t.KnownContentProviderErrors,t.constants.pbiDesktopContentProviderId.toString(10),{configurable:!0,enumerable:!0,writable:!1,value:{IncrementalRefreshOnlySupportedInPremium:{messageId:"ErrorMessage_IncrementalRefreshOnlySupportedInPremium",titleId:"PremiumRequired_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=869752"},DatasetsWithAggregationsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithAggregations",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithCompositeModelsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithManyToManyRelationshipsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithMixedSourcePartitionsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithDualModePartitionsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"}}}),o.deepFreeze(t.KnownContentProviderErrors),t.contentProviderDefaultErrorType="FailedToStorePackage"})(powerbi=powerbi||{}),(function(e){!(function(e){var n=jsCommon.QueryStringUtil;e.createActiveFolderIdService=function(e){return new t(e)};var t=(Object.defineProperty(o.prototype,"activeFolderObjectId",{get:function(){return this._activeFolderObjectId},set:function(e){this._activeFolderObjectId=e,this.initialFolderIdReadyDeferred.resolve(null)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"folderSharePoint",{get:function(){return this._folderSharePoint},set:function(e){this._folderSharePoint=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"folderPermission",{get:function(){return this._folderPermission},set:function(e){this._folderPermission=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isReadOnly",{get:function(){return this._isReadOnly},set:function(e){this._isReadOnly=e,this.initialFolderPermissionReadyDeferred.resolve(null)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"headerActiveFolderObjectId",{get:function(){return this.isInFolder?this.activeFolderObjectId:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isActiveFolderWSv2",{get:function(){return!!this.activeFolderNumericId},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeFolderNumericId",{get:function(){return this.activeFolderObjectId&&this.folderObjectIdToNumericIdMapping[this.activeFolderObjectId]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isInFolder",{get:function(){return this.activeFolderObjectId&&this.activeFolderObjectId!==e.constants.myWorkspaceFolderId},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"myWorkspaceFolderId",{get:function(){return e.constants.myWorkspaceFolderId},enumerable:!1,configurable:!0}),o.prototype.isWorkspaceUnknownOrAFolder=function(e){return!(!e||!this.folderObjectIdToNumericIdMapping[e])},o.prototype.appendFolderToQueryStringIfExists=function(e){var t,o=e,i=this.folderObjectIdToNumericIdMapping[this._activeFolderObjectId];return i&&((t={}).folderId=i.toString(),o=n.addOrUpdateQueryStringToUrl(e,t)),o},o.prototype.isInIframe=function(){return jsCommon.iFrameUtility.isHostedInIFrame()&&!jsCommon.iFrameUtility.isHostedInCrossDomainIFrame()},o);function o(e){this.initialFolderIdReadyDeferred=e.defer(),this.initialFolderIdReadyPromise=this.initialFolderIdReadyDeferred.promise,this.initialFolderPermissionReadyDeferred=e.defer(),this.initialFolderPermissionReadyPromise=this.initialFolderPermissionReadyDeferred.promise,this.isInIframe()?(e=window.top.powerbi.common.activeFolderIdService,this.activeFolderObjectId=e.activeFolderObjectId,this.folderObjectIdToNumericIdMapping=e.folderObjectIdToNumericIdMapping):this.folderObjectIdToNumericIdMapping={}}e.ActiveFolderIdService=t,e.createHostActiveFolderIdService=function(e){return new r(e)};var i,r=(i=e.ActiveFolderIdService,__extends(a,i),a);function a(e){e=i.call(this,e)||this;return e.activeFolderObjectId=void 0,e.isReadOnly=!1,e}e.HostActiveFolderIdService=r})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){function t(e,t){this.promiseFactory=e,this.httpService=t}e=e.common||(e.common={}),t.prototype.getClusterUrl=function(){var t=this,o=this.promiseFactory.defer();return this.clusterUrl?o.resolve(this.clusterUrl):this.httpService.get("metadata/cluster",this.httpService.powerbiRequestOptions(null,null,{dismissGroupObjectId:!0})).then((function(e){t.clusterUrl=e.data,o.resolve(t.clusterUrl)}),(function(e){o.reject({error:e.error,requestId:e.requestId})})),o.promise},e.CommonClusterResolverService=t})(powerbi=powerbi||{}),(function(e){!(function(o){o.createDataClassificationService=function(e){return new t(e)};var t=(e.prototype.isEnabledAsync=function(){return this.getDataClassificationsAsync().then((function(e){return 0<e.length}))},e.prototype.getDataClassificationsAsync=function(){if(this.loadDataClassificationPromise)return this.loadDataClassificationPromise;var t=this.promiseFactory.defer();this.loadDataClassificationPromise=t.promise;var e=o.getHttpService().powerbiRequestOptions();return o.getHttpService().get("/metadata/dataclassifications",e).then((function(e){t.resolve(e.data)}),(function(){t.reject()})),this.loadDataClassificationPromise},e);function e(e){this.promiseFactory=e}o.DataClassificationService=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(o){!(function(){(o.common||(o.common={})).createDragDataService=function(){return new e};var e=(t.prototype.setDragElement=function(e){this.dragElement=e},t.prototype.setDragContext=function(e){this.dragContext=e},t.prototype.setDragOffset=function(e){this.dragOffset=e},t.prototype.getDragElement=function(){return this.dragElement},t.prototype.getDragContext=function(){return this.dragContext},t.prototype.getDragOffset=function(){return this.dragOffset},t);function t(){}})()})(powerbi=powerbi||{}),(function(n){!(function(){(n.common||(n.common={})).createDropdownMenuService=function(e,t,o){return new i(e,t,o)};var i=(o.prototype.showMenu=function(e,t,o,i,n){this.prepareMenuItem(e,t,o,i,n),this.showMenuCore(),i&&i.stopPropagation()},o.prototype.toggleActive=function(e,t,o,i,n){this.prepareMenuItem(e,t,o,i,n),this.isActive(e)?this.hideMenu():this.showMenuCore(),i&&i.stopPropagation()},o.prototype.hideMenu=function(){this.currentDropdownElement&&this.isActive(this.currentDropdownElement)&&(this.isOpen=!1,this.currentDropdownElement.removeClass(o.dropDownActiveClass),this.currentDropdownElement.remove(),this.currentDropdownElement=null,$(window).off(jsCommon.DOMConstants.mouseDownEventName,this.clickHandler))},o.prototype.showMenuCore=function(){var t=this;this.isOpen=!0,this.currentDropdownElement&&(this.clickHandler=function(e){return t.mouseDownHideDialog(e)},$(window).on(jsCommon.DOMConstants.mouseDownEventName,this.clickHandler),this.currentDropdownElement.addClass(o.dropDownActiveClass))},o.prototype.prepareMenuItem=function(e,t,o,i,n){var r,a;if(this.currentDropdownElement&&((r=this.currentDropdownElement).is(e)||(r.remove(),this.currentDropdownElement=null,this.currentAnchorElement=null)),this.currentDropdownElement||(this.currentDropdownElement=e,this.currentAnchorElement=t,this.currentDropdownElement.appendTo("body")),o)l=o.y,s=o.x,c=a=0;else{if(!t)return;l=t.offset().top,s=t.offset().left,a=t.outerWidth(!0),c=t.height()}this.rtl&&this.rtl.isRtlLayout&&(s=this.windowMetrics.windowWidth-(s+a));var t=n?s+a:s,s=e.outerWidth(!0),t=s+t>$(window).width()?t+a-s:t,l=n?l:l+c,c=e.outerHeight(!0),l=c+l>$(window).height()?l-c:l;e.filter("ul").css({position:"absolute",zIndex:1e3,top:l,left:this.rtl&&this.rtl.isRtlLayout?null:Math.ceil(t),right:this.rtl&&this.rtl.isRtlLayout?Math.floor(t):null,opacity:1})},o.prototype.mouseDownHideDialog=function(e){this.currentDropdownElement&&this.isActive(this.currentDropdownElement)&&this.outOfBoundsClickHandler(e)&&(this.currentDropdownElement.remove(),this.isOpen=!1)},o.prototype.outOfBoundsClickHandler=function(e){var t=e.pageX,e=e.pageY;return!(this.currentAnchorElement&&this.currentDropdownElement&&this.isActive(this.currentDropdownElement)&&!this.isOutOfBounds(this.currentAnchorElement,t,e))&&(this.currentDropdownElement&&this.isActive(this.currentDropdownElement)?this.isOutOfBounds(this.currentDropdownElement,t,e):void 0)},o.prototype.isOutOfBounds=function(e,t,o){var i=e.offset(),n=i.left,r=i.top,i=n+e.outerWidth(),e=r+e.outerHeight();return t<n||i<t||o<r||e<o},o.prototype.isActive=function(e){return e.hasClass(o.dropDownActiveClass)},o.dropDownActiveClass="active",o);function o(e,t,o){var i=this;this.rtl=t,this.windowMetrics=o,$(window).on("resize",(function(){return i.hideMenu()})),e.createChannelSubscriptionManager().subscribe(n.common.events.explorationUnloaded,(function(){return i.hideMenu()}))}})()})(powerbi=powerbi||{}),(function(e){!(function(l){var c=jsCommon.FocusGroupNavigation;l.createDropdownService=function(e,t,o,i,n,r){return new a(e,t,o,i,n,r)};var s=(e.prototype.pin=function(){this.cancelHideTimeout(),this.pinned=!0},e.prototype.unpin=function(){this.pinned=!1},e.prototype.isPinned=function(){return this.pinned},e.prototype.hide=function(e){var t=this;this.cancelHideTimeout();e=void 0!==e?e:this.hideDelay;0===e?this.hideDropdown():this.hideTimeout=setTimeout((function(){t.hideDropdown()}),e)},e.prototype.hideDropdown=function(){this.pinned||this.dropdownService.hide(this.registeredDropdown)},e.prototype.show=function(){this.cancelHideTimeout()},e.prototype.cancelHideTimeout=function(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=void 0)},e.prototype.onMouseEnter=function(){this.cancelHideTimeout()},e.prototype.onMouseLeave=function(){this.hide()},e);function e(e,t,o,i,n){var r=this;void 0===n&&(n=0),this.registeredDropdown=e,this.overlayOptions=t,this.dropdownService=o,this.hideDelay=n,i&&(this.registeredDropdown.template.on("mouseenter",(function(){r.onMouseEnter()})),this.registeredDropdown.template.on("mouseleave",(function(){r.onMouseLeave()})),this.registeredDropdown.template.on("click",(function(){r.pin()})))}l.RegisteredDropdownContext=s,l.TemplatePath_ContextMenu="contextMenu.html";var p,d,t,a=(o.prototype.showContextMenu=function(e,t,o,i,n,r,a,s){e&&!_.isEmpty(e.items)&&(a=new d.ContextMenu(this.createServices(),l.TemplatePath_ContextMenu,e,o,!0,i,n,r,a,s&&s.backgroundStyle,s&&s.foregroundStyle,s&&s.anchorElement),this.registerDropdown(a),this.showDropdown(a,s=s||{position:t,hideExistingOverlays:!0,showInsideVisibleArea:!0}))},o.prototype.showMenu=function(e,t,o,i,n,r,a){a=p.compileAndBindDropdown(this.createServices(),t,e,i,a),r=new s(a,o,this,n,r);return this.registerDropdown(r.registeredDropdown),this.showDropdown(r.registeredDropdown,r.overlayOptions),this.promiseFactory.resolve(r)},o.prototype.hide=function(e){this.unregisterDropdown(e)},o.prototype.hideAll=function(e){for(this.overlayService.hideAllDropdowns(!0,void 0,e=void 0===e?!0:e);!_.isEmpty(this.registeredDropdowns);)this.unregisterDropdown(this.registeredDropdowns[0])},o.prototype.isDropdownRegistered=function(e){return this.promiseFactory.resolve(_.some(this.registeredDropdowns,e))},o.prototype.showDropdown=function(e,t){var o=this;this.$timeout((function(){_.includes(o.registeredDropdowns,e)&&o.overlayService.showOverlay(e.template,t)}),0,!1)},o.prototype.unregisterDropdown=function(e){_.pull(this.registeredDropdowns,e),e.template.off(l.constants.OverlayCloseEventName),e.scope.$destroy(),this.overlayService.unregister(e.template),e.parentExpandedMenuItem&&e.parentExpandedMenuItem.expanded&&(e.parentExpandedMenuItem.expanded=!1)},o.prototype.registerDropdown=function(e){var t=this;e.parentExpandedMenuItem&&(e.parentExpandedMenuItem.expanded=!0),this.registeredDropdowns.push(e),e.template.on(l.constants.OverlayCloseEventName,(function(){return t.unregisterDropdown(e)})),this.overlayService.isRegistered(e.template)||this.overlayService.register(e.template)},o.prototype.createServices=function(){var o=this;return{$rootScope:this.$rootScope,$compile:this.$compile,$templateCache:this.$templateCache,registeredDropdowns:this.registeredDropdowns,hideAll:function(){return o.hideAll()},show:function(e,t){return o.showDropdown(e,t)},unregister:function(e){return o.unregisterDropdown(e)},register:function(e){return o.registerDropdown(e)}}},o);function o(e,t,o,i,n,r){this.$rootScope=e,this.$templateCache=t,this.$compile=o,this.overlayService=i,this.$timeout=n,this.promiseFactory=r,this.registeredDropdowns=[]}function u(t,e,o,i,n,r,a,s,l,c,d,u){this.services=t;s={model:o,darkTheme:r,verticalScrollbar:s,themeableElement:l,backgroundStyle:c,foregroundStyle:d,menuClick:function(e){t.hideAll(),i(e)}};n&&(s.menuItemEnter=this.onMenuItemEntered.bind(this,e,r,l,c,d,u));s=p.compileAndBindDropdown(t,e,s);this.scope=s.scope,this.template=s.template,a&&this.template.attr("id",a)}(p||(p={})).compileAndBindDropdown=function(e,t,o,i,n){var r=n,r=(n||e.$rootScope).$new(!0);_.assign(r,o);var a,t=e.$templateCache.get("views/dropdowns/"+t);return i&&(a={transcludeControllers:((a={}).$$angularInjector={instance:i},a)}),{scope:r,template:e.$compile(t)(r,void 0,a)}},t=d=d||{},u.prototype.onMenuItemEntered=function(e,t,o,i,n,r,a,s){var l=_.last(this.services.registeredDropdowns);l&&l.parent&&(this.services.unregister(l),l=_.last(this.services.registeredDropdowns)),l&&a.children&&((r=new u(this.services,e,{items:a.children},l.scope.menuClick,!1,t,void 0,!0,o,i,n,r)).parentExpandedMenuItem=a,this.services.register(r),r.parent=l,l=c.getFirstFocusableParent(s.target),s=$(s.currentTarget),this.services.show(r,{anchorElement:s,returnFocusToElement:l?$(l):void 0,hideExistingOverlays:!1,horizontal:!0,showInsideVisibleArea:!0,showOutsideAnchorElement:!0}))},t.ContextMenu=u})(e.common||(e.common={}))})(powerbi=powerbi||{});var powerbi,iFrameUtility=jsCommon.iFrameUtility;!(function(o){!(function(e){e.createContentProviderConfigHandlerService=function(e){return(e=iFrameUtility.isHostedInCrossDomainIFrame()?e.self:e.parent)[o.common.constants.contentProviderStoreCustomConfigurationService]||(e[o.common.constants.contentProviderStoreCustomConfigurationService]=new t,e[o.common.constants.contentProviderStoreCustomConfigurationService])};var t=function(){};e.ContentProviderConfigHandlerService=t})(o.common||(o.common={}))})(powerbi=powerbi||{}),(function(e){var t;function o(e){this._id=e+o._lastId++,this._frames=t.styleService.createStyleFrames("cls-"+this._id)}t=e.common||(e.common={}),Object.defineProperty(o.prototype,"frames",{get:function(){return this._frames},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"className",{get:function(){return this._frames.getClassName()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"style",{get:function(){return this._frames.style},set:function(e){this._frames.style=e},enumerable:!1,configurable:!0}),o.prototype.addFrame=function(e){this._frames.addFrame(e)},o.prototype.addFrameFromDefinition=function(e,t){e.style&&this._frames.addFrameFromDefinition(e,t)},o.prototype.ensureInitialFrame=function(){return this._frames.ensureInitialFrame(),this},o.prototype.startAnimationWithDefinition=function(e,t){e.style&&(this._frames.addFrameFromDefinition(e,t),this.startAnimationIfNeeded())},o.prototype.updateClassIfNeeded=function(){this._frames.style&&t.styleService.appendClassRule(this.className,this._frames.style)},o.prototype.startAnimationIfNeeded=function(){var e;this._frames.canAnimate()&&this._frames.style&&((e=angular.element(document.getElementsByClassName(this.className)))||alert("element not found in startAnimationIfNeeded "),e.length&&t.styleService.startAnimation(e,this._frames))},o._lastId=0,t.ElementStyleDefinition=o})(powerbi=powerbi||{}),(function(e){var t,o;function i(){return{rowSpan:o.gridItemSmallLandscapeRowSpan,colSpan:o.gridItemSmallLandscapeColSpan}}function n(){return{rowSpan:o.gridItemMediumLandscapeRowSpan,colSpan:o.gridItemMediumLandscapeColSpan}}function r(){return{rowSpan:o.gridItemLargeLandscapeRowSpan,colSpan:o.gridItemLargeLandscapeColSpan}}t=e.common||(e.common={}),(o=t.GridLayoutConstants||(t.GridLayoutConstants={})).defaultGridWidth=260,o.defaultGridHeight=180,o.defaultGridItemSpacing=10,o.defaultGridItemHeaderHeight=50,o.dynamicGridWidth=44,o.dynamicGridHeight=50,o.dynamicGridItemSpacing=4,o.dynamicMaxGridWidthUnits=6,o.dynamicMaxGridHeigthUnits=7,o.gridItemSmallLandscapeRowSpan=1,o.gridItemSmallLandscapeColSpan=1,o.gridItemMediumLandscapeRowSpan=2*o.gridItemSmallLandscapeRowSpan,o.gridItemMediumLandscapeColSpan=2*o.gridItemSmallLandscapeColSpan,o.gridItemLargeLandscapeRowSpan=3*o.gridItemSmallLandscapeRowSpan,o.gridItemLargeLandscapeColSpan=3*o.gridItemSmallLandscapeColSpan,o.getSmallLandscapeGridItem=i,o.getMediumLandscapeGridItem=n,o.getLargeLandscapeGridItem=r,o.getDefaultGridItemViewport=function(e){return{height:e.rowSpan*o.defaultGridHeight-o.defaultGridItemSpacing,width:e.colSpan*o.defaultGridWidth-o.defaultGridItemSpacing}},o.getDefaultColSpanFromWidth=function(e){return Math.ceil((e+o.defaultGridItemSpacing)/o.defaultGridWidth)},o.getDefaultRowSpanFromHeight=function(e){return Math.ceil((e+o.defaultGridItemSpacing+o.defaultGridItemHeaderHeight)/o.defaultGridHeight)},o.gridItemSizes=[i(),n(),r()],o.gridItemSizeCount=o.gridItemSizes.length,o.resizeBuffer=20,t.createGridLayoutService=function(){return{strategy:new t.models.DefaultGridLayoutStrategy,displayLayout:0,skipVisualManualUpdate:!1,setViewport:_.noop,resetZoom:_.noop,setStrategy:_.noop}}})(powerbi=powerbi||{}),(function(e){var t;function o(){}e=e.common||(e.common={}),t=window.chromiumBridge,o.prototype.invoke=function(e){t&&t.call(e.operationName)},e.ChromiumHostInvokerService=o})(powerbi=powerbi||{}),(function(e){function t(){}e=e.common||(e.common={}),t.prototype.invoke=function(e){},e.VoidHostInvokerService=t})(powerbi=powerbi||{}),(function(e){!(function(o){var i;o.setHostServiceSink=function(e){i=e},o.onHostMessageSuccess=function(e,t){i.onSuccess(e,t)},o.onHostMessageFailure=function(e,t){i.onFailure(e,t)};var e=(t.prototype.invoke=function(e,t,o){var i=this.promiseFactory.defer(),o={serviceName:e,operationName:t,invocationId:jsCommon.Utility.generateGuid(),oneWay:!1,arguments:o,secret:this.secret};return this.deferredMap[o.invocationId]=i,this.hostInvokerService.invoke(o),i.promise},t.prototype.invokeAndForget=function(e,t,o){o={serviceName:e,operationName:t,invocationId:jsCommon.Utility.generateGuid(),oneWay:!0,arguments:o,secret:this.secret};this.hostInvokerService.invoke(o)},t.prototype.onSuccess=function(t,e){if(t in this.deferredMap){var o=void 0;if(angular.isDefined(e))try{o=JSON.parse(e)}catch(e){return void this.onFailure(t,"JSON parse error")}e=this.deferredMap[t];delete this.deferredMap[t],e.resolve(o)}},t.prototype.onFailure=function(e,t){var o;e in this.deferredMap&&(o=this.deferredMap[e],delete this.deferredMap[e],o.reject(t))},t);function t(e,t){this.promiseFactory=e,this.hostInvokerService=t,this.deferredMap={},this.secret=o.sessionStorageService.getData("SecureMobileWebViewSecret")||void 0}o.HostService=e})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(t){var r;(e=(e=r=t.constants||(t.constants={})).HostType||(e.HostType={})).hostTypeQueryParamKey="hostType",e.none="none",e.localBrowser="localbrowser",e.phantomJs="phantomjs",e.chromium="chromium";var e=(o.prototype.getHostType=function(){return this.hostType},o.prototype.hasHostType=function(){return this.hostType!==t.HostType.None},o.prototype.isPhantomJs=function(){return this.hostType===t.HostType.PhantomJs},o.prototype.isChromium=function(){return this.hostType===t.HostType.Chromium},o.prototype.getHostTypeNameOrDefault=function(){for(var e=window.location.search.substr(1).split("&"),t=0,o=e.length;t<o;++t){var i=e[t].split("="),n=decodeURIComponent(i[0]);if(n===r.HostType.hostTypeQueryParamKey)return decodeURIComponent(i[1])}return r.HostType.none},o.prototype.convertHostTypeNameToHostType=function(e){switch(e.toLowerCase()){case r.HostType.phantomJs:return t.HostType.PhantomJs;case r.HostType.chromium:return t.HostType.Chromium;default:return t.HostType.None}},o);function o(e){this.hostTypeName=e||this.getHostTypeNameOrDefault(),this.hostType=this.convertHostTypeNameToHostType(this.hostTypeName)}t.HostTypeResolutionService=e})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){(e=(e=e.common||(e.common={})).HostType||(e.HostType={}))[e.None=0]="None",e[e.PhantomJs=1]="PhantomJs",e[e.Chromium=2]="Chromium"})(powerbi=powerbi||{}),(function(o){!(function(){(o.common||(o.common={})).createLastFocusedElementService=function(){return new e};var e=(t.prototype.setLastFocusedElement=function(e){this.lastFocusedElement=e},t.prototype.returnFocus=function(){var e;this.lastFocusedElement&&((e=angular.element(this.lastFocusedElement))&&e.focus(),this.lastFocusedElement=null)},t);function t(){}})()})(powerbi=powerbi||{}),define("PowerBICommon/services/loadProgressNotificationService",["require","exports"],(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t,o,i,n,r){return void 0===o&&(o=_.noop),new s(e,t,o,i,n=void 0===n?a:n,r=void 0===r?!1:r)};var a=1e3,s=(o.prototype.beginLoad=function(){this.counter++},o.prototype.endLoad=function(){var e=this;this.trackableHost&&!this.shouldTrackProgress&&0<this.counter&&(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress()),(this.shouldTrackProgress||0<this.counter)&&this.ngZone.runOutsideAngular((function(){e.$timeout((function(){e.counter--,0===e.counter&&e.shouldTrackProgress&&e.ngZone.run((function(){return e.invokeCompletionCallback()}))}),e.decrementDelayInMilliseconds,!1)}))},o.prototype.reset=function(){this.trackableHost?(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress(),this.shouldTrackProgress||this.invokeCompletionCallback()):this.shouldTrackProgress=!1},o.prototype.cancelTracking=function(){this.cancelFn()},o.prototype.register=function(e){var t=this,o={};return this.trackableHost=e,this.registerTrackableHostContext=o,function(){t.registerTrackableHostContext===o?(t.trackableHost=void 0,t.registerTrackableHostContext=void 0):t.registerTrackableHostContext}},o.prototype.invokeCompletionCallback=function(){this.completionFn()},o);function o(e,t,o,i,n,r){void 0===n&&(n=a),void 0===r&&(r=!1),this.$timeout=e,this.completionFn=t,this.cancelFn=o,this.ngZone=i,this.decrementDelayInMilliseconds=n,this.ignoreShouldTrackLoadProgressCheck=r,this.counter=0,this.reset()}})),(function(t){var e;(e=t.common||(t.common={})).getLocalize=function(){return t.ensurePowerbiCommon().localize},e.setLocalize=function(e){t.ensurePowerbiCommon().localize=e},e.getCultureInfo=function(){return t.ensurePowerbiCommon().cultureInfo},e.setCultureInfo=function(e){t.ensurePowerbiCommon().cultureInfo=e},e.getUnmappedCultureInfo=function(){return t.ensurePowerbiCommon().unmappedCultureInfo},e.setUnmappedCultureInfo=function(e){t.ensurePowerbiCommon().unmappedCultureInfo=e},e.getFormattingLocale=function(){return t.ensurePowerbiCommon().formattingLocale},e.setFormattingLocale=function(e){t.ensurePowerbiCommon().formattingLocale=e},e.getLocalizedStrings=function(){return t.ensurePowerbiCommon().localizedStrings},e.setLocalizedStrings=function(e){t.ensurePowerbiCommon().localizedStrings=e}})(powerbi=powerbi||{}),(function(t){!(function(){(t.common||(t.common={})).createExternalUrlService=function(){return new e};var e=function(){this.bingGeocodingUrl="https://dev.virtualearth.net/REST/v1/Locations",this.bingSpatialDataUrl="https://platform.bing.com/geo/spatial/v1/public/Geodata",this.bingMapControlUrl="https://www.bing.com/api/maps/mapcontrol"}})()})(powerbi=powerbi||{}),(function(d){!(function(e){var t=d.visuals.services.BingMapsGeocoder,s=d.visuals.MapUtil.latLongIsInvalid;e.createGeocoder=function(e,t,o,i){return new n(e,t,new a(o),i)};var r,l,n=(__extends(o,r=t),o.prototype.bingGeocodingUrl=function(){return this.externalUrlService.bingGeocodingUrl},o.prototype.bingSpatialDataUrl=function(){return this.externalUrlService.bingSpatialDataUrl},o.prototype.bingGeocodingLogger=function(){return this.logger},o);function o(e,t,o,i){var n=r.call(this,(function(){return n.batchGeocoding}),(function(){return i.getBypassGeocodingCache()}))||this;return n.externalUrlService=e,n.logger=o,n.batchGeocoding=!1,t.getFeatureSwitches().then((function(e){return n.batchGeocoding=e.useBatchGeocoding})),n}(t=l=l||{}).FromCache="cache",t.Boundary="shape",t.Batch="batch",t.Query="q",t.AddressLine="addr",t.AdminDistrict="admin",t.CountryRegion="country",t.Locality="locality",t.PostalCode="postal",t.Error="error",t.Empty="empty",t.Multi="multi",t.InvalidLatLong="invalidlatlong",t.EmptyPrimitives="noshapes",t.MultiPrimitives="multishapes",t.UpHierarchy="uphier",t.HighConfidence="high",t.MediumConfidence="medium",t.LowConfidence="low",t.NoConfidence="noconfidence",t.AmbiguousMatch="ambig",t.GoodMatch="good",t.NoMatchCode="nomatchcode";var i=2e3;e.getLoggingBatchDelay=function(){return i},e.setLoggingBatchDelay=function(e){i=e};var a=(c.prototype.log=function(e){var o=this,e=e.join(",");this.pending[e]=(this.pending[e]||0)+1,this.timeout||(this.timeout=setTimeout((function(){o.timeout=void 0;var e,t=o.pending;for(e in o.pending={},t)o.telemetryService.logEvent(d.telemetry.GeocodingSummary,{factors:e,count:t[e]})}),i))},c.prototype.doSafely=function(e){try{e()}catch(e){this.telemetryService.logEvent(d.telemetry.HandledException,{stack:e&&e.stack||"",message:e&&e.message||"error while geocoding logging"})}},c.prototype.logGeocodeBoundaryImmediate=function(e,t){var o=this;this.doSafely((function(){var e=[l.FromCache,l.Boundary];o.log(e)}))},c.prototype.logGeocodeImmediate=function(t,e){var o=this;this.doSafely((function(){var e=[l.FromCache];o.addGeocodeQueryFactors(t,e),o.log(e)}))},c.prototype.logGeocodeBoundaryResult=function(o,i,n,r){var a=this;this.doSafely((function(){var e,t=[l.Boundary];r&&t.push(l.Batch),n.error&&"Geocode result is empty."!==n.error.message&&t.push(l.Error),o.entityType&&t.push("et="+o.entityType),i&&i.d&&!_.isEmpty(i.d.results)?(1<i.d.results.length&&t.push(l.Multi),e=i.d.results[0].Primitives,_.isEmpty(e)?t.push(l.EmptyPrimitives):1<e.length&&t.push(l.MultiPrimitives)):t.push(l.Empty),a.log(t)}))},c.prototype.logGeocodeResult=function(o,i,n,r){var a=this;this.doSafely((function(){var e,t=[];r&&t.push(l.Batch),n.error&&"Geocode result is empty."!==n.error.message&&t.push(l.Error),n&&n.coordinates&&s(n.coordinates,!0)&&t.push(l.InvalidLatLong),a.addGeocodeQueryFactors(o,t),!i||_.isEmpty(i.resourceSets)||_.isEmpty(i.resourceSets[0].resources)?t.push(l.Empty):(1<i.resourceSets[0].resources.length&&t.push(l.Multi),_.some(i.resourceSets[0].resources,(function(e){return _.some(e.matchCodes,(function(e){return"UpHierarchy"===e}))}))&&t.push(l.UpHierarchy),(e=a.findMatchedLocation(i.resourceSets[0].resources,n))&&(e.confidence?"High"===e.confidence?t.push(l.HighConfidence):"Medium"===e.confidence?t.push(l.MediumConfidence):"Low"===e.confidence&&t.push(l.LowConfidence):t.push(l.NoConfidence),_.isEmpty(e.matchCodes)?t.push(l.NoMatchCode):(-1!==_.indexOf(e.matchCodes,"Ambiguous")&&t.push(l.AmbiguousMatch),-1!==_.indexOf(e.matchCodes,"Good")&&t.push(l.GoodMatch)))),a.log(t)}))},c.prototype.findMatchedLocation=function(e,t){if(t.coordinates&&t.coordinates.latitude&&t.coordinates.longitude)for(var o=0,i=e;o<i.length;o++){var n=i[o];if(n.point&&n.point.coordinates&&2<=n.point.coordinates.length&&t.coordinates.latitude===n.point.coordinates[0]&&t.coordinates.longitude===n.point.coordinates[1])return n}},c.prototype.addGeocodeQueryFactors=function(e,t){e=e.getEntity();e&&(e.Query&&t.push(l.Query),(e=e.Address)&&(e.AddressLine&&t.push(l.AddressLine),e.AdminDistrict&&t.push(l.AdminDistrict),e.CountryRegion&&t.push(l.CountryRegion),e.Locality&&t.push(l.Locality),e.PostalCode&&t.push(l.PostalCode)))},c);function c(e){this.telemetryService=e,this.pending={}}e.GeocodingLogger=a})(d.common||(d.common={}))})(powerbi=powerbi||{}),(function(e){var t,i;t=e.common||(e.common={}),i=e.visuals.MapUtil.MapControlFactory,t.createMapControlFactory=function(e,t,o){return new i(e,t,o.bingMapControlUrl)}})(powerbi=powerbi||{}),(function(o){!(function(){(o.common||(o.common={})).createNotificationToastService=function(e){return new t(e)};var t=(e.prototype.addNotificationFilter=function(e){this.logDeprecatedUsage("addNotificationFilter")},e.prototype.notify=function(e){return this.logDeprecatedUsage("notify",e.message||e.title),e.id=jsCommon.Utility.generateGuid(),e.id},e.prototype.hide=function(e){this.logDeprecatedUsage("hide")},e.prototype.hideAll=function(e){this.logDeprecatedUsage("hideAll")},e.prototype.hideCurrentNotification=function(){this.logDeprecatedUsage("hideCurrentNotification")},e.prototype.logDeprecatedUsage=function(e,t){this.telemetryService.logEvent(o.telemetry.DeprecatedNotificationToastUsage,{functionName:e,notificationData:t=void 0===t?"":t})},e);function e(e){this.telemetryService=e,this.telemetryService.logEvent(o.telemetry.DeprecatedNotificationToastUsage,{functionName:"constructor",notificationData:""})}})()})(powerbi=powerbi||{}),(function(e){!(function(o){var r=jsCommon.DOMConstants,a=o.OverlayUtils;o.createOverlayService=function(e,t,o,i){return new n(e,t,o,i)};var s="overlayActive",i="overlay",n=(e.prototype.onDestroy=function(){$(this.$window).off(r.mouseDownEventName+".overlayService"),$(this.$window).off("resize.overlayService")},e.prototype.register=function(e,t){this.dropdowns.push({element:e}),e.addClass(i).appendTo(t||this.root)},e.prototype.unregister=function(t){_.remove(this.dropdowns,(function(e){return e.element.is(t)})),t.removeClass(i).removeClass(s).remove()},e.prototype.isRegistered=function(t){return _.some(this.dropdowns,(function(e){return e.element.is(t)}))},e.prototype.mouseClickHideDialog=function(t,e){var o=this;_.some(this.dropdowns,(function(e){return e.element.hasClass(s)&&!o.outOfBoundsClickHandler(t,e.element)}))||this.hideAllDropdowns(!0)},e.prototype.showOverlay=function(t,o){var i=this;Number(!(!o.anchorElement&&!o.anchorDimensions)),Number(!!o.position),t.length,o.hideExistingOverlays&&this.hideAllDropdownsExcept(!0,t),t.addClass(s),t.attr("aria-modal","false"),t.attr("role","dialog"),o.anchorElement||o.anchorDimensions?(o.blurNeeded&&this.registerBlurHandler(o.anchorElement,o.disableAnimation),e=o.anchorDimensions||a.getAnchorDimensions(o.anchorElement),this.repositionDropdownWithAnchorCoordinates(t,e,!!o.preferLeft,o.horizontal,o.showOutsideAnchorElement,o.showIndicator,o.scale)):o.position&&o.showInsideVisibleArea?this.repositionDropdownWithAnchorCoordinates(t,{left:o.position.x,top:o.position.y,width:0,height:0},!!o.preferLeft,!1,o.showOutsideAnchorElement,o.showIndicator,o.scale):o.position&&this.repositionDropdown(t,o.position);var n,e=_.filter(this.dropdowns,(function(e){return e.element.is(t)}));_.isEmpty(e)||((n=e[0]).escHandler=function(e){i.keyPress(e,n,o.anchorElement)},(e=n.element.get(0))&&e.addEventListener("keydown",n.escHandler),n.isModal=o.isModal,n.returnFocusToElement=o.returnFocusToElement),this.registerScrollHandler(),jsCommon.FocusManager.focusChildInGroup(t.get(0))},e.prototype.registerScrollHandler=function(){var e=this;setTimeout((function(){return e.registerScrollHandlerCore()}))},e.prototype.registerScrollHandlerCore=function(){var t=this;this.scrollEventListener||(this.scrollEventListener=function(e){o.directives.OnResize.isResizeSensorScrollEvent(e)||$(e.target).parents().addBack().hasClass(s)||t.hideAllDropdowns()},document.addEventListener("scroll",this.scrollEventListener,!0))},e.prototype.unregisterScrollHandler=function(){document.removeEventListener("scroll",this.scrollEventListener,!0),this.scrollEventListener=void 0},e.prototype.keyPress=function(e,t,o){e.skipOverlayServiceEscHandler||27!==e.keyCode||(o&&o.focus(),this.hideDropdown(t,!0),e.stopPropagation())},e.prototype.registerBlurHandler=function(t,o){var i=this;t.on("focusout.overlay",(function(e){t.off("focusout.overlay"),setTimeout((function(){return i.hideAllDropdowns(!!o)}))}))},e.prototype.toggleDropdown=function(e,t){var o=t.element;_.isString(o)&&(o=this.getOverlayElement(o)),t.blurNeeded&&this.registerBlurHandler(t.anchorElement,t.disableAnimation);for(var i=0,n=this.dropdowns;i<n.length;i++){var r=n[i];r.element.is(o)||this.hideDropdown(r,!0)}this.repositionDropdownWithAnchorCoordinates(o,a.getAnchorDimensions(t.anchorElement),t.preferLeft,t.horizontal,!1,!1),o.toggleClass(s),this.registerScrollHandler(),e&&e.stopPropagation()},e.prototype.getOverlayElement=function(e,t){e=this.getOverlaySelector(e);return t?t.siblings(e):$(e)},e.prototype.getOverlaySelector=function(e){return'[dropdown-overlay-name="'+e+'"]'},e.prototype.outOfBoundsClickHandler=function(e,t){return!$(e.target).parents().addBack().hasClass(s)},e.prototype.repositionDropdownWithAnchorCoordinates=function(e,t,o,i,n,r,a){var s,l,c,d,u,p,m=this.$window.width(),h=this.$window.height(),g=e.find(".explorationAppBarMenu"),f=(g.length?g:e).outerWidth(!0),v=(g.length?g:e).outerHeight(!0),y=null==a?f:f*a,b=null==a?v:v*a,S=r?16:0,g=r?Math.floor(Math.sqrt(S*S+S*S)/2):0;i?(i=d=c=void 0,c=t.top,d=t.left,C=(p=h<b+c-S)?c+t.height-v+S:c-S,l=this.rtl&&this.rtl.isRtlLayout?(s=!(u=(i=d)-y-g<0),u?i+g:i-f-g):(s=u=m<y+(i=d+t.width)+g)?i-f-g:i+g,n&&d<=l+f&&l<i&&(l=d-f)):(d=void 0,C=(p=h<b+(c=t.top+t.height)-S)?c-v+S:c-S,(l=o||this.rtl&&this.rtl.isRtlLayout?(s=!(u=(d=t.left+t.width)-f-g<0),u?d-t.width+g:d-f-g):(s=u=m<f+(d=t.left)+g)?d+t.width-f-g:d+g)<0&&(l=d)),C<0&&(C=10);var w,C={x:Math.ceil(l),y:C};r&&((w=t.top-C.y-S/2)<0?w+=S:w>e.height()-S&&(w-=S),w={top:w},C.x>=t.left?w.left=-8:w.right=-8),this.repositionDropdown(e,C,w,a,s,p)},e.prototype.repositionDropdown=function(e,t,o,i,n,r){var a;o&&(a="top: "+o.top+"px",o=o.left?"left: "+o.left+"px":"right: "+o.right+"px",e.append($.parseHTML('<div class="indicator" style="'+("position: absolute;transform: rotate(45deg);height: 16px;width: 16px;"+a+";"+o+";")+'"></div>')));t={top:t.y,left:t.x};void 0!==i&&(t.transform="scale("+i+")",t["transform-origin"]=(n?"right":"left")+" "+(r?"bottom":"top")),e.css(t)},e.prototype.hideAllDropdowns=function(e,t,o){var i;t||(i=_.find(this.dropdowns,(function(e){return e.isModal}))),this.hideAllDropdownsExcept(e,i&&i.element)},e.prototype.hideAllDropdownsExcept=function(e,t){for(var o=[],i=0,n=this.dropdowns;i<n.length;i++){var r=n[i];r&&!r.element.is(t)&&r.element.hasClass(s)&&(this.hideDropdown(r,e),o.push(r))}this.removeAllFromRegister(o)},e.prototype.hideDropdown=function(e,t){var o,i=this;e.escHandler&&((o=e.element.get(0))&&o.removeEventListener("keydown",e.escHandler),e.escHandler=null),e.returnFocusToElement&&e.returnFocusToElement.focus(),t?this.hideOverlay(e):e.element.animate({opacity:0},250,(function(){return i.hideOverlay(e)})),this.unregisterScrollHandler(),this.removeSingleFromRegister(e)},e.prototype.removeSingleFromRegister=function(e){e.element.trigger(o.constants.OverlayCloseEventName)},e.prototype.removeAllFromRegister=function(e){_.forEach(e,(function(e){return e.element.trigger(o.constants.OverlayCloseEventName)}))},e.prototype.hideOverlay=function(e){e.element.removeClass(s).removeAttr("style")},e);function e(e,t,o,i){var n=this;this.root=o,this.rtl=i,this.dropdowns=[],this.$window=$(e).on(r.mouseDownEventName+".overlayService",(function(e){return n.mouseClickHideDialog(e,n.dropdowns)})).on("resize.overlayService",(function(){return n.hideAllDropdowns()})),this.root=o||$("body")}})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).perfMarkers||(e.perfMarkers={})).getJsParseTimes=function(e){var t,o=[];for(t in e){var i=e[t];i.start&&i.end&&o.push({start:new Date(i.start).toISOString(),end:new Date(i.end).toISOString(),startEval:i.startEval?new Date(i.startEval).toISOString():void 0,endEval:i.endEval?new Date(i.endEval).toISOString():void 0,fileName:t})}return o}})(powerbi=powerbi||{}),(function(e){!(function(e){e.createPopupWindowService=function(e){return new o(e)};var t,o=(i.prototype.open=function(e,t,o){var i=(this.windowService.outerWidth-(t=void 0===t?600:t))/2;i+=this.windowService.screenX;var n=(this.windowService.outerHeight-(o=void 0===o?480:o))/2;return n+=this.windowService.screenY,this.windowService.open("/popupserverredirect?url="+encodeURIComponent(e),"_blank","top="+n+", left="+i+", screenX="+i+", screenY="+n+", width="+t+", height="+o+", resizable=yes")},i);function i(e){this.windowService=e}e.setPopupWindowService=function(e){t=e},e.getPopupWindowService=function(){return t}})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(o){!(function(){(o.common||(o.common={})).createPromiseFactory=function(e){return new t(e)};var t=(e.prototype.defer=function(e){return e?new o.PbiDeferred:this.q.defer()},e.prototype.reject=function(e,t){return(t?o.PbiPromise:this.q).reject(e)},e.prototype.resolve=function(e){var t=this.defer();return t.resolve(e),t.promise},e.prototype.all=function(e,t){return(t?o.PbiPromise:this.q).all(e)},e.prototype.allSettled=function(e){var o=this.defer(),i=e.length;if(0<i)for(var n=0,r=[],t=0;t<i;t++)!(function(t){e[t].then((function(e){r[t]={value:e,type:0}})).catch((function(e){r[t]={value:e,type:1}})).finally((function(){++n===i&&o.resolve(r)}))})(t);else o.resolve([]);return o.promise},e.prototype.when=function(e){return this.q.when(e)},e);function e(e){this.q=e}})()})(powerbi=powerbi||{}),(function(e){!(function(a){a.createScopedMixinProvider=function(e,t,o,i){return new n(e,t,o,i)};var n=(e.prototype.get=function(e){var t=this.instances[e];if(void 0!==t)return t;for(var o=[],i=0,n=this.factories[e]||[];i<n.length;i++){var r=n[i];o.push(this.instantiateMixin(r))}return t=new a.MixinProvider(o),this.instances[e]=t},e.prototype.instantiateMixin=function(e){var t=e.ng,o=!_.isEmpty(t),i=e.scoped,n=!_.isEmpty(i),r={};if(o)for(var a=this.$injector,s=0,l=t;s<l.length;s++){var c=void 0,c="$scope"===(d=l[s])?this.$scope:a.get(d);r[d]=c}if(n)for(var d,u=this.scopedProvider,p=this.$scope,m=0,h=i;m<h.length;m++)r[d=h[m]]=u.get(d,p);return e.fn(r)},e);function e(e,t,o,i){this.$injector=e,this.$scope=t,this.scopedProvider=o,this.factories=i,this.instances=[]}})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(n){!(function(){(n.common||(n.common={})).createScopedProvider=function(e){return new t(e)};var t=(i.prototype.register=function(e,t,o){var i;return o?((i=this.serviceFactoriesByInstance[o]||{})[e]=t,this.serviceFactoriesByInstance[o]=i):this.defaultServiceFactories[e]=t,this},i.prototype.attachTo=function(e,t){t&&(e[i.InstanceNameProperty]=t);t=new o(this.injector,this.getFactories(t),e);return e[i.getInstanceName(e)]=t},i.prototype.find=function(e){var t=e;do{var o=t[i.getInstanceName(t)];if(o)return o}while(t=t.$parent)},i.prototype.getFactories=function(e){var t=this.serviceFactoriesByInstance[e];if(!t)return this.defaultServiceFactories;var o,i=__assign({},this.defaultServiceFactories);for(o in t)i[o]=t[o];return i},i.getInstanceName=function(e){e=e[i.InstanceNameProperty];return e||i.DefaultInstanceName},i.DefaultInstanceName="scopedInstances",i.InstanceNameProperty="instanceProperty",i);function i(e){this.injector=e,this.defaultServiceFactories={},this.serviceFactoriesByInstance={}}var o=(e.prototype.get=function(e,t){if(t=t||this.scope,"$scope"===e)return t;var o=this.instances[e];if(void 0!==o)return o;var i=this.factories[e],n=[],r=i.services;if(r)for(var a=this.injector,s=0,l=r.length;s<l;s++)n.push(a.get(r[s],e));var c=i.scopedServices;if(c)for(s=0,l=c.length;s<l;s++){var d=c[s],d=this.get(d,t);n.push(d)}return i.scopedProviderInstance&&n.push(this),this.instances[e]=o=i.fn.apply(i,n),o},e.prototype.register=function(e,t){this.instances[t]=e},e);function e(e,t,o){this.injector=e,this.factories=t,this.scope=o,this.instances={}}})()})(powerbi=powerbi||{}),(function(e){!(function(t){t.SCOPED_ROOT_INJECTOR_NAME="$$modernScopedRootInjector",t.createScopedRootRegistrar=function(e,t){return new i(e,t)},t.ScopedRootRegistrarMixinFactory={ng:["$scope","scopedRootRegistrar"],scoped:[],fn:function(e){return new o(e)}};var o=(e.prototype.update=function(){},e.prototype.destroy=function(){this.services.scopedRootRegistrar.removeScope(this.services.$scope)},e);function e(e){(this.services=e).scopedRootRegistrar.addScope(e.$scope)}var i=(n.prototype.addScope=function(e){e=this.scopedProvider.find(e).scope[t.SCOPED_ROOT_INJECTOR_NAME];this.modernScopedRootRegistrar.addScopedRoot(e)},n.prototype.removeScope=function(e){e=this.scopedProvider.find(e).scope[t.SCOPED_ROOT_INJECTOR_NAME];this.modernScopedRootRegistrar.removeScopedRoot(e)},n.prototype.getTheScopedService=function(e){var t=this.modernScopedRootRegistrar.getTheScopedService("$scope");if(t){t=this.scopedProvider.find(t);if(t)return t.get(e)}},n.prototype.sendChannelEvent=function(e,t){return this.modernScopedRootRegistrar.sendChannelEvent(e,t)},n);function n(e,t){this.modernScopedRootRegistrar=e,this.scopedProvider=t}})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(o){!(function(){(o.common||(o.common={})).createScopeEventSubscriptionManager=function(e){return new t(e)};var t=(e.prototype.subscribe=function(e,t){t=this.scope.$on(e,t);return t&&this.unsubscribeList.push(t),this},e.prototype.unsubscribeAll=function(){for(var e=this.unsubscribeList.length-1;0<=e;--e)this.unsubscribeList[e]();this.unsubscribeList=[]},e);function e(e){this.scope=e,this.unsubscribeList=[]}})()})(powerbi=powerbi||{}),(function(e){var v;function t(m){var h=["$scope","$rootScope","$timeout","$compile","scopedProvider","applicationOptions"],g=h.length,f=m.createOptions&&m.createOptions();return f&&f.additionalServices&&h.push.apply(h,f.additionalServices),h.push((function(e,t,o,i,n,r){var a={rootScope:t,timeout:o,compile:i};if(f){i=f.additionalServices;if(i){i.length;for(var s=g,l=h.length-1;s<l;s++)a[h[s]]=arguments[s]}f.scopedServiceRoot&&n.attachTo(e,f.scopedProviderInstanceName);var c=f.scopedDependencies;if(c){var d=n.find(e);if(d)for(s=0,l=c.length;s<l;s++){var u=c[s];a[u]=d.get(u,e)}}v.HostModalDialogServices.validateHostModalDialogServices(e,i,c)}var p=new m(e,a);return r&&r.logToConsole,p.onDestroy&&e.$on("$destroy",(function(){return p.onDestroy()})),p})),h}(v=e.common||(e.common={})).createController=t,v.createScopedRootController=t})(powerbi=powerbi||{}),(function(e){function t(){}e=e.common||(e.common={}),t.prototype.getData=function(e){try{if(sessionStorage)return JSON.parse(sessionStorage[e])}catch(e){return null}return null},t.prototype.setData=function(e,t){try{sessionStorage&&(sessionStorage[e]=JSON.stringify(t))}catch(e){}},e.sessionStorageService=new t})(powerbi=powerbi||{}),(function(e){!(function(e){var i;function r(e,t){return{value:e,unit:void 0!==t?t:i.pixel}}(o=i=e.MeasurementUnit||(e.MeasurementUnit={}))[o.percentage=0]="percentage",o[o.inch=1]="inch",o[o.centimeter=2]="centimeter",o[o.millimeter=3]="millimeter",o[o.em=4]="em",o[o.ex=5]="ex",o[o.point=6]="point",o[o.pica=7]="pica",o[o.pixel=8]="pixel",e.makeLayoutUnit=r,e.BoxShadowUnit=function(){};var t,o,a=function(){};(o=t=e.DisplayValue||(e.DisplayValue={}))[o.inline=0]="inline",o[o.block=1]="block",o[o.flex=2]="flex",o[o.inlineBlock=3]="inlineBlock",o[o.inlineFlex=4]="inlineFlex",o[o.inlineTable=5]="inlineTable",o[o.listItem=6]="listItem",o[o.runIn=7]="runIn",o[o.table=8]="table",o[o.tableCaption=9]="tableCaption",o[o.tableColumnGroup=10]="tableColumnGroup",o[o.tableHeaderGroup=11]="tableHeaderGroup",o[o.tableFooterGroup=12]="tableFooterGroup",o[o.tableRowGroup=13]="tableRowGroup",o[o.tableCell=14]="tableCell",o[o.tableColumn=15]="tableColumn",o[o.tableRow=16]="tableRow",o[o.none=17]="none",o[o.initial=18]="initial",o[o.inherit=19]="inherit",(o=e.ExtendedTransition||(e.ExtendedTransition={}))[o.slideLeftBigIn=0]="slideLeftBigIn",o[o.slideLeftBigOut=1]="slideLeftBigOut",o[o.slideRightBigIn=2]="slideRightBigIn",o[o.slideRightBigOut=3]="slideRightBigOut";var n=(s.prototype.ensureInitialFrame=function(){0<this.frames.length||!this.style||this.frames.push({style:this.style,duration:0})},s.prototype.addFrame=function(e){var t=this.frames,o=(0<t.length?t[t.length-1]:this).style;l.areStylesEqual(o,e.style)||(t.push(e),null==this.style&&(this.style=e.style))},s.prototype.addFrameFromDefinition=function(e,t){e.style&&this.addFrame({style:e.style,duration:t});for(var o=e.frames,i=o.frames.length,n=1;n<i;n++)this.addFrame(o[n])},s.prototype.canAnimate=function(){return 0<this.frames.length},s.prototype.getFrames=function(){return this.frames},s.prototype.getClassName=function(){return this.className},s.prototype.keepFinalStyle=function(){0!==this.frames.length&&(this.style=this.frames[this.frames.length-1].style,this.frames=[])},s);function s(e){this.frames=[],this.style=null,this.className=e}var l=(c.prototype.createEmpty=function(){return new a},c.prototype.createPoint=function(e,t){var o=new a;return o.top=r(e||0),o.left=r(t||0),o.position="absolute",o},c.prototype.createBox=function(e,t,o,i){var n=new a;return n.top=r(e||0),n.left=r(t||0),n.width=i||0,n.height=o||0,n.position="absolute",n.overflow="hidden",n.whiteSpace="normal",n.tableLayout="fixed",n},c.prototype.createViewport=function(e){var t=new a;return t.width=e.width,t.height=e.height,t},c.prototype.createTruncateBox=function(e,t,o,i,n,r){i=this.createBox(e,t,o,i);return i.whiteSpace="nowrap",i.overflow="hidden",i.textOverflow="ellipsis",n&&(i.fontSize=n),r&&(i.color=r),i},c.prototype.createTranslateTransform=function(e,t,o,i){var n=new a;return n.transformTranslate={x:e,y:t,z:o,unit:i||"%"},n},c.prototype.createRotateTransform=function(e,t,o){var i=new a;return i.transformRotate={x:t,y:o,z:e},i},c.prototype.createStyleFrames=function(e){return new n(e)},c.prototype.appendClassRule=function(e,t){var o=this.classMap[e],i="."+e;if(o){if(c.areStylesEqual(o,t))return;for(var n=this.styleSheet.cssRules,r=n.length,a=0;a<r;a++){var s=n[a];if(s.selectorText===i)return this.classMap[e]=t,void(s.style.cssText=this.stringify(t))}}this.classMap[e]=t;o=i+"{"+this.stringify(t)+"}";this.styleSheet.insertRule(o,0)},c.prototype.startAnimation=function(e,t){var t=t,o=t.getFrames(),i=o.length;if(0!==i){t.keepFinalStyle();var n=e;n=e.animate({});for(var r=0;r<i;r++)var a=o[r],s=c.convertToJQueryAnimateStyle(a.style),n=n.animate(s,{duration:1e3*a.duration,easing:"ease-out"})}},c.areStylesEqual=function(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom&&e.height===t.height&&e.width===t.width&&e.marginTop===t.marginTop&&e.marginLeft===t.marginLeft&&e.fontSize===t.fontSize&&e.position===t.position&&e.overflow===t.overflow&&e.display===t.display&&e.verticalAlign===t.verticalAlign&&e.backgroundColor===t.backgroundColor&&e.backgroundImage===t.backgroundImage&&e.opacity===t.opacity&&e.color===t.color&&e.whiteSpace===t.whiteSpace&&e.tableLayout===t.tableLayout&&e.textAlign===t.textAlign&&e.textOverflow===t.textOverflow&&c.areTranslateRotateEqual(e,t)&&c.areTranslateTransformEqual(e,t)&&c.areBoxShadowStyleEqual(e,t)},c.areTranslateRotateEqual=function(e,t){if(e===t)return!0;e=e.transformRotate,t=t.transformRotate;return e&&t&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.unit===t.unit},c.areTranslateTransformEqual=function(e,t){if(e===t)return!0;e=e.transformTranslate,t=t.transformTranslate;return e&&t&&e.x===t.x&&e.y===t.y&&e.unit===t.unit},c.areBoxShadowStyleEqual=function(e,t){if(e===t)return!0;e=e.boxShadow,t=t.boxShadow;return e&&t&&e.hShadow===t.hShadow&&e.vShadow===t.vShadow&&e.blur===t.blur&&e.spread===t.spread&&e.color===t.color&&e.unit===t.unit&&e.inset===t.inset},c.convertToJQueryAnimateStyle=function(e){var t,o={};return void 0!==e.top&&(o.top=c.convertLayoutUnit(e.top)),void 0!==e.left&&(o.left=c.convertLayoutUnit(e.left)),void 0!==e.right&&(o.right=c.convertLayoutUnit(e.right)),void 0!==e.bottom&&(o.bottom=c.convertLayoutUnit(e.bottom)),void 0!==e.height&&(o.height=c.convertUnit(e.height)),void 0!==e.width&&(o.width=c.convertUnit(e.width)),void 0!==e.marginTop&&(o.marginTop=c.convertUnit(e.marginTop)),void 0!==e.marginLeft&&(o.marginLeft=c.convertUnit(e.marginLeft)),void 0!==e.fontSize&&(o.fontSize=c.convertUnit(e.fontSize)),void 0!==e.backgroundColor&&(o.backgroundColor=e.backgroundColor),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.color&&(o.color=e.color),void 0!==e.display&&(o.display=c.stringifyDisplayValue(e.display)),void 0!==e.transformRotate&&(t=e.transformRotate,o.rotateX=t.x||0,o.rotateY=t.y||0,o.rotateZ=t.z||0),void 0!==e.transformTranslate&&(e=e.transformTranslate,o.translateX=(e.x||0)+(e.x?e.unit:""),o.translateY=(e.y||0)+(e.y?e.unit:""),o.translateZ=(e.z||0)+(e.z?e.unit:"")),o},c.prototype.stringify=function(e){return c.stringifyLayoutUnit(e.top,"top")+c.stringifyLayoutUnit(e.left,"left")+c.stringifyLayoutUnit(e.right,"right")+c.stringifyLayoutUnit(e.bottom,"bottom")+c.stringifyUnit(e.height,"height")+c.stringifyUnit(e.width,"width")+c.stringifyUnit(e.marginTop,"margin-top")+c.stringifyUnit(e.marginLeft,"margin-left")+c.stringifyUnit(e.fontSize,"font-size")+c.stringifyProp(e.position,"position")+c.stringifyProp(e.overflow,"overflow")+c.stringifyProp(c.stringifyDisplayValue(e.display),"display")+c.stringifyProp(e.verticalAlign,"vertical-align")+c.stringifyProp(e.backgroundColor,"background-color")+c.stringifyProp(e.backgroundImage,"background-image")+c.stringifyProp(e.opacity,"opacity")+c.stringifyProp(e.color,"color")+c.stringifyProp(e.whiteSpace,"white-space")+c.stringifyProp(e.tableLayout,"table-layout")+c.stringifyProp(e.textAlign,"text-align")+c.stringifyProp(e.textOverflow,"text-overflow")+c.stringifyProp(c.stringifyBoxShadow(e.boxShadow),"box-shadow")+c.stringifyProp(c.stringifyTranslate(e.transformTranslate),"transform",!0)+c.stringifyProp(c.stringifyRotate(e.transformRotate),"transform",!0)},c.stringifyTranslate=function(e){if(null==e)return null;var t=e.unit;return"translateX("+(e.x||0)+(e.x?t:"")+") translateY("+(e.y||0)+(e.y?t:"")+")"},c.stringifyRotate=function(e){return null==e?null:"rotateX("+(e.x||0)+"deg) rotateY("+(e.y||0)+"deg) rotateZ("+(e.z||0)+"deg)"},c.stringifyBoxShadow=function(e){if(null==e)return null;var t=e.unit?e.unit+" ":"px ";return e.hShadow+t+(e.vShadow+t)+(e.blur?e.blur+t:"")+(e.spread?e.spread+t:"")+(e.color?e.color+" ":"")+(e.inset?"inset":"")},c.stringifyDisplayValue=function(e){switch(e){case t.inline:return"inline";case t.block:return"block";case t.flex:return"flex";case t.inlineBlock:return"inline-block";case t.inlineFlex:return"inline-flex";case t.inlineTable:return"inline-table";case t.listItem:return"list-item";case t.runIn:return"run-in";case t.table:return"table";case t.tableCaption:return"table-caption";case t.tableColumnGroup:return"table-column-group";case t.tableHeaderGroup:return"table-header-group";case t.tableFooterGroup:return"table-footer-group";case t.tableRowGroup:return"table-row-group";case t.tableCell:return"table-cell";case t.tableColumn:return"table-column";case t.tableRow:return"table-row";case t.none:return"none";case t.initial:return"initial";default:return"inherit"}},c.stringifyProp=function(e,t,o){return null==e?"":(t=c.isWebkit&&o?"-webkit-"+t:t)+":"+e+";"},c.stringifyUnit=function(e,t){return null==e?"":t+":"+c.convertUnit(e)+";"},c.stringifyLayoutUnit=function(e,t){return null==e?"":t+":"+c.convertLayoutUnit(e)+";"},c.convertUnit=function(e){return e+"px"},c.convertLayoutUnit=function(e){var t=e.value.toString(),o="";switch(e.unit){case i.percentage:o="%";break;case i.inch:o="in";break;case i.centimeter:o="cm";break;case i.millimeter:o="mm";break;case i.em:o="em";break;case i.ex:o="ex";break;case i.point:o="pt";break;case i.pica:o="pc";break;default:o="px"}return t+o},c.prototype.getDeviceViewport=function(){return{width:window.outerWidth,height:0}},c);function c(){this.classMap={};var e=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(e),this.styleSheet=document.styleSheets[document.styleSheets.length-1],c.isWebkit="WebkitAppearance"in document.documentElement.style}e.styleService=new l})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){e.createTelemetryServiceFromNamespace=function(e,t,o){return window.powerbi.createTelemetryService(e,t,o)},e.createUserActivityContextServiceFromNamespace=function(){return window.powerbi.createUserActivityContextService()},e.createTelemetryHostServiceFromNamespace=function(){return window.powerbi.createTelemetryHostService()},e.createTelemetryOptionsFromNamespace=function(){return window.powerbi.createTelemetryOptions()}})(powerbi=powerbi||{}),(function(e){var t,o,m,h;function g(e,t){return null==e?!t:"string"==typeof e&&o.isFullHexString(e)}t=e.common||(e.common={}),o=jsCommon.Color,m=e.visuals.DefaultColorManager,h=jsCommon.JsonExtensions,t.validateCustomThemeColor=g,t.parseCustomVisualTheme=function(e,t){var o=["background","foreground","accent","tableAccent","foreground","foregroundLight","foregroundDark","foregroundNeutralLight","foregroundNeutralDark","foregroundNeutralSecondary","foregroundNeutralSecondaryAlt","foregroundNeutralSecondaryAlt2","foregroundNeutralTertiary","foregroundNeutralTertiaryAlt","foregroundSelected","foregroundButton","background","backgroundLight","backgroundNeutral","backgroundDark","hyperlink","visitedHyperlink","shapeStroke","disabledText","mapPushpin","good","neutral","bad","maximum","center","minimum","null","firstLevelElements","secondLevelElements","thirdLevelElements","fourthLevelElements","secondaryBackground"],i=["title","label","callout","header","largeTitle","dataTitle","boldLabel","largeLabel","largeLightLabel","lightLabel","semiboldLabel","smallLabel","smallLightLabel","smallDataLabel"],n=["name","dataColors","textClasses","visualStyles","isHighContrast","icons"].concat(o,i,t=void 0===t?[]:t);try{var r=h.tryParseJSON(e);if(_.isObject(r)&&!_.isArray(r)){var a=r.name;if(!a||!_.isString(a))throw new Error("Theme name missing");var s=r.dataColors;if(null!=s&&(!_.isArray(s)||_.some(s,(function(e){return!g(e,!0)}))))throw new Error("Invalid theme data colors");for(var l=0,c=o;l<c.length;l++)if(!g(r[p=c[l]],!1))throw new Error("Invalid theme data color");for(p in r)if(-1===n.indexOf(p))throw new Error("Invalid theme field: "+p);var d,u=r.textClasses;if(!_.isEmpty(u))for(var p in u)if(-1===i.indexOf(p))throw new Error("Invalid theme text class: "+p);return _.isEmpty(r.dataColors)||(d=m.getDefaultColors(),r.dataColors.length<d.length&&(r.dataColors=r.dataColors.concat(d.slice(r.dataColors.length).map((function(e){return e.value}))))),r}}catch(e){}}})(powerbi=powerbi||{}),(function(e){!(function(a){a.TimeoutServiceSmallDelayThreshold=100,a.TimeoutServiceSmallDelayQuantum=5,a.TimeoutServiceLargeDelayQuantum=50,a.createTimeoutService=function(e){return new t(e)};var t=(e.prototype.setTimeout=function(e,t){void 0===e&&(e=0);var o=this.promiseFactory.defer(t=void 0===t?!1:t),t=a.TimeoutServiceLargeDelayQuantum,i=this.queueDictionaryForBigDelays;e<=a.TimeoutServiceSmallDelayThreshold&&(t=a.TimeoutServiceSmallDelayQuantum,i=this.queueDictionaryForSmallDelays);var n=-1===e?-1:e?Math.ceil((Date.now()+e)/t):0,r=i[n];return r||(r=i[n]=[],t=function(){delete i[n],_.forEach(r,(function(e){return e.resolve(null)}))},-1===e?Zone.root.scheduleMicroTask("TimeoutService.scheduleMicroTask",t):window.setTimeout(t,e)),r.push(o),o},e);function e(e){this.promiseFactory=e,this.queueDictionaryForBigDelays={},this.queueDictionaryForSmallDelays={}}a.TimeoutService=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(t){!(function(u){var l,i,e=jsCommon.CssConstants.createClassAndSelector,p=t.common.directives.TooltipAnchorElementType,n=t.visuals.TooltipCommon,m=u.models.TooltipTheme,h=jsCommon.DOMConstants,r=e("themeableElement");u.createTooltipService=function(e,t,o){return new a(e,t,o)},(e=l=u.ArrowPosition||(u.ArrowPosition={}))[e.arrowTopLeft=0]="arrowTopLeft",e[e.arrowTopMiddle=1]="arrowTopMiddle",e[e.arrowTopRight=2]="arrowTopRight",e[e.arrowBottomLeft=3]="arrowBottomLeft",e[e.arrowBottomRight=4]="arrowBottomRight",e[e.arrowBottomMiddle=5]="arrowBottomMiddle",e[e.arrowSideMiddle=6]="arrowSideMiddle",(e=i=u.ArrowVerticalPosition||(u.ArrowVerticalPosition={}))[e.top=0]="top",e[e.bottom=1]="bottom";var a=(g.prototype.showTooltip=function(e,t,o){var i=this,n=this.createTooltipOptions(e,t,o);if(n&&n.anchorElement&&(n.delay=n.delay||g.defaultDisplayDelay,n.arrowPosition=void 0!==n.arrowPosition?n.arrowPosition:l.arrowBottomRight,this.hideDelay=n.hideDelay||0,!this.isTooltipVisible())){if(n.showTooltipEvent){t=n.showTooltipEvent.originalEvent||n.showTooltipEvent;if(this.showTooltipTimeoutId&&(this.previousMouseX===t.pageX||this.previousMouseY===t.pageY))return this.previousMouseX=t.pageX,void(this.previousMouseY=t.pageY);this.previousMouseX=t.pageX,this.previousMouseY=t.pageY}this.showTooltipTimeoutId&&window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=window.setTimeout((function(){var e;document.body.contains(o.get(0))&&(i.tooltipElement||(i.tooltipElement=$(g.htmlTemplate).addClass(r.class),i.tooltipTitleElement=i.tooltipElement.find(".title"),i.tooltipDescriptionElement=i.tooltipElement.find(".description"),i.tooltipElement.hover((function(){return i.isHovering=!0}),(function(){i.isHovering=!1,i.hideTooltip()}))),i.customClass=n.customClass,i.tooltipTitleElement.text(n.title),i.tooltipDescriptionElement.text(n.description),n.hyperlinkElement&&i.tooltipDescriptionElement.append(n.hyperlinkElement),null!=(e=i.getElementOffset(n.anchorElement,n.arrowPosition)).top&&e.top<g.minimalTopOffest&&(n.arrowPosition=i.flipTooltipBelow(n.arrowPosition)),i.tooltipElement.addClass(l[n.arrowPosition]).addClass(n.customClass).appendTo("body"),i.updateTooltipPosition(n.anchorElement,n.arrowPosition),i.tooltipElement.addClass(g.tooltipActiveClass),i.showTooltipTimeoutId=null)}),n.delay)}},g.prototype.hideTooltip=function(e){var t=this;e&&(e.preventDefault(),e.stopPropagation()),this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=null);function o(){t.tooltipElement.removeClass(g.tooltipActiveClass).removeClass(t.arrowPositionClassSet).removeClass(t.customClass),t.tooltipTitleElement.empty(),t.tooltipDescriptionElement.empty(),t.tooltipElement.detach()}var i;this.tooltipElement&&e&&e.type===h.focusOutEventName?o():this.tooltipElement&&!this.isHovering&&(i=setTimeout((function(){t.isHovering||(o(),clearTimeout(i))}),this.hideDelay))},g.prototype.createTooltipOptions=function(e,t,o){if(!e.tooltipDisable&&(e.tooltipShowOnFocus||t.type!==h.focusInEventName)&&(!1!==e.tooltipShowOnHover||t.type!==h.mouseMoveEventName&&t.type!==h.pointerMoveEventName)){var i=e.tooltipLocalizeTitle;_.isEmpty(i)||(s=this.localizationService.get(i));var n=e.tooltipLocalizeDescription;_.isEmpty(n)||(l=this.localizationService.get(n));i=s||e.tooltipTitle,n=l||e.tooltipDescription;if(null!=i||null!=n){var r,a=e.tooltipAnchorElementSelector,s=e.tooltipAnchorElementType;if(a)switch(s){case p.Sibling:r=o.siblings(a);break;case p.Ancestor:r=o.closest(a);break;case p.Descendant:r=o.find(a);break;default:r=$(a)}r&&0!==r.length||(r=o);var l=e.tooltipArrowPosition;null==l&&null!=e.tooltipArrowVerticalPosition&&(d=r.offset(),l=u.TooltipService.getBestFitArrowPosition(d,e.tooltipArrowVerticalPosition,g.flipTooltipVerticallyMarginPx));s=e.tooltipDelay;null==s&&e.tooltipShowOnFocus&&(s=u.TooltipService.defaultFocusDisplayDelay);var c,d=e.tooltipTheme||m.Light,d=u.models.TooltipTheme[d].toLowerCase();return e.isTooltipForModalDialog&&(d+=" modal-tooltip"),e.tooltipHyperlinkText&&e.tooltipHyperlinkUrl&&(c=$("<span> </span><a target='_blank' href='"+e.tooltipHyperlinkUrl+"'>"+e.tooltipHyperlinkText+"</a>")),{anchorElement:r,showTooltipEvent:t,title:i,description:n,delay:s,hideDelay:e.tooltipHideDelay||0,arrowPosition:l,customClass:d,hyperlinkElement:c}}}},g.prototype.isTooltipVisible=function(){return this.tooltipElement&&this.tooltipElement.hasClass(g.tooltipActiveClass)&&this.tooltipElement.is(":visible")},g.prototype.updateTooltipPosition=function(e,t){t=this.getElementOffset(e,t);this.tooltipElement.css({left:this.rtl&&this.rtl.isRtlLayout?null:t.left,right:this.rtl&&this.rtl.isRtlLayout?t.left:null,top:t.top})},g.prototype.getArrowPositionClassSet=function(){var e,t="";for(e in l)isNaN(e)&&(t=t+" "+e);return t},g.prototype.getElementOffset=function(e,t){var o=this.tooltipElement.outerWidth(),i=this.tooltipElement.outerHeight(),n=e.width(),r=e.height(),a=e.offset(),s=g.arrowOffset;switch(this.rtl&&this.rtl.isRtlLayout&&(a.left=this.windowMetrics.windowWidth-(a.left+n)),t){case l.arrowTopLeft:return{left:a.left+n/2-s.x,top:a.top+r+s.y};case l.arrowTopMiddle:return{left:a.left+(n-o)/2,top:a.top+r+s.y};case l.arrowTopRight:return{left:a.left+n/2-o+s.x,top:a.top+r+s.y};case l.arrowBottomLeft:return{left:a.left+n/2-s.x,top:a.top-i-s.y};case l.arrowBottomRight:return{left:a.left+n/2-o+s.x,top:a.top-i-s.y};case l.arrowBottomMiddle:return{left:a.left+(n-o)/2,top:a.top-i-s.y};case l.arrowSideMiddle:return{left:a.left+n,top:a.top}}},g.prototype.flipTooltipBelow=function(e){switch(e){case l.arrowBottomLeft:return l.arrowTopLeft;case l.arrowBottomRight:return l.arrowTopRight}return e},g.getBestFitArrowPosition=function(e,t,o){e="height"in e?e:"x"in e?{top:e.y,left:e.x,height:0,width:0}:__assign(__assign({},e),{height:0,width:0});null!=o&&e.top<=o&&(t=i.top);e=n.getClickedScreenArea(e,{width:window.innerWidth,height:window.innerHeight});return 0===e||3===e?t===i.top?l.arrowTopLeft:l.arrowBottomLeft:t===i.top?l.arrowTopRight:l.arrowBottomRight},g.defaultDisplayDelay=1e3,g.defaultFocusDisplayDelay=500,g.flipTooltipVerticallyMarginPx=70,g.tooltipActiveClass="active",g.htmlTemplate="<div class='tooltip'><div class='title'></div><div class='description'></div></div>",g.arrowOffset={x:20,y:12},g.minimalTopOffest=40,g);function g(e,t,o){this.rtl=e,this.windowMetrics=t,this.localizationService=o,this.hideDelay=0,this.isHovering=!1,this.arrowPositionClassSet=this.getArrowPositionClassSet()}u.TooltipService=a})(t.common||(t.common={}))})(powerbi=powerbi||{}),(function(e){!(function(i){i.createUpload=function(e,t){return new o(e,t)};var o=(e.prototype.post=function(e,t,o){o=i.HttpRequestConfig.create("POST",e,o,null);return o.file=t,this.worker.request(o,this.upload)},e.prototype.put=function(e,t,o){o=i.HttpRequestConfig.create("PUT",e,o,null);return o.file=t,this.worker.request(o,this.upload)},e);function e(o,e){this.upload=function(e){var t=o.get("$upload");return t.upload(e)},this.worker=e}})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(c){var n;(function(a){var i=jsCommon.BrowserUtils,l=c.common.constants;a.printMedia="print",a.setPrintMedia=function(e){a.printMedia=e};var e=(t.getPrintTargetViewPort=function(e){var t={width:n.constants.defaultPortraitPrintWidth,height:n.constants.defaultPortraitPrintHeight},o=e.width();return e.height()<o&&(t.width=n.constants.defaultLandscapePrintWidth,t.height=n.constants.defaultLandscapePrintHeight),i.isChrome()&&(e=e.parent(),t.width=e.width(),t.height=e.height()),t},t.calculateScaleFactor=function(e,t,o){var i=t.width/e.width,e=t.height/e.height;return o?Math.max(i,e):Math.min(i,e)},t.prototype.getStyleString=function(e){for(var t=Object.keys(e),o="",i=0,n=t.length;i<n;i++)var r=t[i],o=o+r+":"+e[r]+";";return o},t.prototype.onInit=function(o,i,n,r,a,e,t){var s=this;e||(this.globalSubscriptionManager=t.createChannelSubscriptionManager().subscribe(c.common.events.printModeChanged,(function(e,t){t===l.enterPrintModeEvent?s.insertPrintStylingInDOM(o,i,n,r,a):t===l.exitPrintModeEvent&&s.removePrintStylingFromDOM(o)})))},t.prototype.onDestroy=function(e,t){t||(this.domLayoutChangedDeregister&&this.domLayoutChangedDeregister(),this.onExitPrintModeDeregister&&this.onExitPrintModeDeregister(),this.globalSubscriptionManager.unsubscribeAll()),this.removePrintStylingFromDOM(e,!0)},t.prototype.insertPrintStylingInDOM=function(e,t,o,i,n){if(null!=o){var r=window.location.pathname.toLowerCase(),r="/export/report"===r||"/reportembedexporthost"===r;if(!1===n.featureSwitches.printingEnabled&&!r)return this.printDisabledElement||(i=i.get("PrintingIsDisabledForThisTenantMessage"),i=$("<div>").addClass("errorTitle").text(i),i=$("<div>").attr("id","printDisabledOverlay").append(i),this.printDisabledElement=i,$("body").append(this.printDisabledElement)),void e.hide();this.printStyleElement||(this.printStyleElement=$("<style></style>").attr("type","text/css").attr("media",a.printMedia),$("body").append(this.printStyleElement));e=t(e),e=this.getStyleString(e);this.printStyleElement.get(0).sheet.insertRule("."+o+" { "+e+" }")}},t.prototype.removePrintStylingFromDOM=function(e,t){if(void 0===t&&(t=!1),this.printDisabledElement&&(this.printDisabledElement.remove(),this.printDisabledElement=void 0,e.show()),this.printStyleElement)if(t)this.printStyleElement.remove(),this.printStyleElement=void 0;else for(var o=this.printStyleElement.get(0).sheet,i=o.cssRules.length;i--;)o.removeRule(i)},t);function t(){}a.ContainerPrinterHelper=e})((n=c.common||(c.common={})).helpers||(n.helpers={}))})(powerbi=powerbi||{}),(function(e){var t,i;function o(e,t,o){var a=this;this.featureSwitchService=e,this.localizationService=t,this.globalEventBridge=o,this.restrict="A",this.link=function(e,t,o){var i=e.$eval(o.calculatePrintStyles),n=e.$eval(o.disablePrint);a.helper.onInit(t,i,o.printContainerSelector,a.localizationService,a.featureSwitchService,n,a.globalEventBridge);var r=e.$on("$destroy",(function(){a.helper.onDestroy(t,!!n),r()}))},this.helper=new i}t=(t=e.common||(e.common={})).directives||(t.directives={}),i=e.common.helpers.ContainerPrinterHelper,t.ContainerPrinter=o})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).CustomModalDialog=function(e){this.restrict="E",this.templateUrl="views/customModalDialog.html",this.replace=!0,this.scope={message:"="},this.scope=e}})(powerbi=powerbi||{}),(function(e){(function(e){var i=jsCommon.FocusManagerFocusOnEventName,t=function(e){var r=this;this.$parse=e,this.restrict="A",this.replace=!1,this.scope=!1,this.compileBase=function(e,i,t,o){var n=r.$parse(o[e]);return function(t,e){e.on(i,(function(e){t.$eval((function(){return n(t,{$event:e})})),e.isDefaultPrevented()||t.$digest()}));var o=t.$on("$destroy",(function(){e.off(i),o()}))}}};e.FastEvent=t;var n,o=(__extends(r,n=t),r);function r(){var o=null!==n&&n.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastClick","click",e,t)},o}e.FastClick=o;var a,o=(__extends(s,a=t),s);function s(){var o=null!==a&&a.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastMousedown","mousedown",e,t)},o}e.FastMousedown=o;var l,o=(__extends(c,l=t),c);function c(){var o=null!==l&&l.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastMouseup","mouseup",e,t)},o}e.FastMouseup=o;var d,o=(__extends(u,d=t),u);function u(){var o=null!==d&&d.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastKeydown","keydown",e,t)},o}e.FastKeydown=o;var p,o=(__extends(m,p=t),m);function m(){var o=null!==p&&p.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastKeyup","keyup",e,t)},o}e.FastKeyup=o;var h,o=(__extends(g,h=t),g);function g(){var o=null!==h&&h.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastMouseenter","mouseenter",e,t)},o}e.FastMouseenter=o;var f,o=(__extends(v,f=t),v);function v(){var o=null!==f&&f.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastTouchmove","touchmove",e,t)},o}e.FastTouchmove=o;var y,o=(__extends(b,y=t),b);function b(){var o=null!==y&&y.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastTouchend","touchend",e,t)},o}e.FastTouchend=o;var S,t=(__extends(w,S=t),w);function w(){var o=null!==S&&S.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastFocus",i,e,t)},o}e.FastFocus=t})((e=e.common||(e.common={})).directives||(e.directives={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).FeatureSwitch=function(e){var r=this;this.asyncFeatureSwitchService=e,this.restrict="A",this.priority=599,this.terminal=!0,this.multiElement=!0,this.transclude="element",this.link=function(e,i,n,t,o){o((function(t,o){r.asyncFeatureSwitchService.getFeatureSwitches().then((function(e){e[n.featureSwitch]?i.after(t):(t.remove(),o&&o.$destroy())}))}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).FeatureSwitchClass=function(e){var t=this;this.asyncFeatureSwitchService=e,this.restrict="A",this.link=function(e,n,r){t.asyncFeatureSwitchService.getFeatureSwitches().then((function(e){r.featureSwitchClass;for(var t=0,o=_.map(r.featureSwitchClass.split(","),(function(e){return e.trim()}));t<o.length;t++){var i=o[t];e[i]&&n.addClass(i)}}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).FeatureSwitchNot=function(e){var r=this;this.asyncFeatureSwitchService=e,this.restrict="A",this.priority=599,this.terminal=!0,this.multiElement=!0,this.transclude="element",this.link=function(e,i,n,t,o){o((function(t,o){r.asyncFeatureSwitchService.getFeatureSwitches().then((function(e){e[n.featureSwitchNot]?(t.remove(),o&&o.$destroy()):i.after(t)}))}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).OptionsModalDialog=function(e){this.restrict="E",this.templateUrl="views/optionsModalDialog.html",this.replace=!0,this.scope={message:"=",selected:0,options:[]},this.scope=e}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).SelectPristineOnFocus=function(){this.restrict="A",this.link=function(e,t,o){function i(e){t.hasClass("ng-pristine")&&t.select()}t.on(jsCommon.DOMConstants.focusEventName,null,i),e.$on("$destroy",(function(){t.off(jsCommon.DOMConstants.focusEventName,i)}))}}})(powerbi=powerbi||{}),(function(e){var n,r;function t(){}n=e.common||(e.common={}),r=window,t.getClusterIndexForClusterUri=function(){for(var e=0;e<n.constants.clusterBackendUri.length;e++)for(var t=0,o=n.constants.clusterBackendUri[e].hostNameMatch;t<o.length;t++){var i=o[t];if(0<=r.clusterUri.toLocaleLowerCase().indexOf(i))return e}},n.ClusterLocationHelper=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).htmlTemplate||(e.htmlTemplate={})).put=function(e){e.put("components/dropDownList/dropDownList.html",'<ng-transclude><ng-repeat ng-repeat="menuItem in $ctrl.model.items"><drop-down-list-item model="menuItem" foreground-style="::$ctrl.foregroundStyle" list-pos="$ctrl.getItemPositionByIndex($index)" list-size="$ctrl.menuItemItems.length"></drop-down-list-item></ng-repeat></ng-transclude>'),e.put("components/dropDownListItem/dropDownListItem.html",'<ng-transclude><ng-switch on="$ctrl.model.type"><div tabindex="0" class="label" ng-attr-role="{{::$ctrl.getRoleForMenuItem()}}" aria-setsize="{{$ctrl.listSize}}" aria-posinset="{{$ctrl.listPos+1}}" aria-expanded="{{$ctrl.model.expanded ? true : false}}" aria-labelledby="{{$ctrl.contextMenuLabelId}}" aria-checked="{{($ctrl.model.checked || $ctrl.model.selected) ? true : false}}" aria-disabled="{{$ctrl.model.disabled ? true : false}}" aria-haspopup="{{$ctrl.model.children ? true : false}}" ng-switch-when="0" ng-class="{\'checked\': $ctrl.model.checked, \'hasChildren\': $ctrl.model.children, \'hasIcon\': $ctrl.hasIcon, \'selected\': $ctrl.model.selected, \'expanded\': $ctrl.model.expanded }" ng-disabled="::$ctrl.model.disabled" ng-attr-title="{{::$ctrl.model.tooltip || $ctrl.model.text}}" accessible-click="$ctrl.onAccessibleClick($event)" apply-style="::$ctrl.foregroundStyle"><svg-use-symbol sheet="exploreCanvasIcons" ng-if="$ctrl.model.checked" symbol-id="contextMenuCheckArrow"></svg-use-symbol><i ng-if="$ctrl.model.showIcon && !$ctrl.model.customIcon" class=\'dropdown-icon {{ $ctrl.model.icon }}\'></i> <span ng-if="$ctrl.model.showIcon && $ctrl.model.customIcon"><img class="itemIcon" ng-src="{{$ctrl.model.customIcon}}"/></span><h6 id="{{$ctrl.contextMenuLabelId}}" ng-bind="::$ctrl.model.text" class="itemLabel trimmedTextWithEllipsis"></h6></div><hr role="separator" ng-switch-when="1"/><h1 ng-switch-when="2" aria-label="{{$ctrl.model.text}}" ng-bind="::$ctrl.model.text"></h1></ng-switch></ng-transclude>'),e.put("components/editableLabel/editableLabel.html",'<div class="editableLabel" ng-class="{ active: $ctrl.isEditing, error: !$ctrl.isValid }" ng-switch="$ctrl.inputType"><div class="textLabel" ng-class="$ctrl.textLabelClasses" ng-style="$ctrl.textLabelStyles" ng-show="!$ctrl.isEditing" ng-click="$ctrl.disableClick || $ctrl.setEditableState(true)" ng-bind-html="$ctrl.displayContent" ng-attr-title="{{ $ctrl.customTooltip ? undefined : $ctrl.displayName }}"></div><textarea ng-switch-when="textarea" class="textInput" ng-if="$ctrl.isEditing" spellcheck="false" maxlength="{{::$ctrl.maxInputLength}}" ng-blur="$ctrl.onInternalBlur()" ng-readonly="$ctrl.readonly" ng-model="$ctrl.internalDisplayName" fast-keydown="$ctrl.onInternalKeyDown($event)" fast-keyup="$ctrl.onInternalKeyUp($event)"></textarea> <input ng-switch-default class="textInput" type="text" ng-if="$ctrl.isEditing" ng-style="{\'width\': $ctrl.textInputWidth}" spellcheck="false" maxlength="{{::$ctrl.maxInputLength}}" ng-blur="$ctrl.onInternalBlur()" ng-readonly="$ctrl.readonly" ng-model="$ctrl.internalDisplayName" fast-keydown="$ctrl.onInternalKeyDown($event)" fast-keyup="$ctrl.onInternalKeyUp($event)"></input></div>'),e.put("components/emailsList/emailsList.html",'<div class="emailsList" id="emailsList" pbi-lazy-load-contents="$ctrl.moduleConfig"><tags-input ng-model="$ctrl.viewModel.inputUserList" tag-class="{invalid: $tag.isInvalid}" placeholder="{{ ::$ctrl.getInputPlaceholder() }}" max-tags="$ctrl.maxTags" spellcheck="false" replace-spaces-with-dashes="false" add-on-paste="true" paste-split-pattern=",|;" min-length="1" display-property="displayName" key-property="objectId" on-tag-adding="$ctrl.isValidUser($tag, $ctrl.checkValidOrgUser)" on-invalid-tag="$ctrl.showInvalidUserError($tag)" on-tag-added="$ctrl.setDirty();$ctrl.onTagAddedWithoutError($tag)" on-tag-removed="$ctrl.setDirty();$ctrl.onTagRemoved({$tag: $tag})" template="components/emailsList/emailsListTag.html" arialabel="{{ ::$ctrl.getInputPlaceholder() }}" arialabelledby="{{$ctrl.arialabelledby}}" ariadescribedby="{{$ctrl.ariadescribedby}}" ariarequired="$ctrl.ariarequired" ariaowns="emailsList"><auto-complete source="$ctrl.findUsers($query)" debounce-delay="200" min-length="1" onclick="event.stopPropagation();" add-on-blur="false" load-on-empty="true" template="components/emailsList/emailsListAutoComplete.html"></auto-complete><div class="autoCompleteSpinner" ng-if="$ctrl.areUsersLoading() || $ctrl.isFindingUsers"><spinner></spinner></div></tags-input><div class="errorMessageContainer" ng-if="$ctrl.viewModel.hasValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="errorMessage" ng-bind="$ctrl.viewModel.errorMessage" role="alert"></span></div></div>'),e.put("components/emailsList/emailsListAutoComplete.html",'<span aria-live="polite"><span class="displayName" highlight-string="data.displayName" search-string="data.searchString" highlight-tag="em" ng-attr-aria-label="{{data.displayName}}"></span><span class="userPrincipalName" highlight-string="data.userAdditionalDetailsForAutoComplete" search-string="data.searchString" highlight-tag="em" ng-attr-aria-label="{{data.userAdditionalDetailsForAutoComplete}}"></span></span>'),e.put("components/emailsList/emailsListTag.html",'<span class="displayName" ng-bind="::data.displayName" ng-attr-title="{{::data.userPrincipalName || data.displayName}}"></span><a class="removeBtn" ng-click="$removeTag()" role="button"><i class="glyphicon pbi-glyph-cancel" localize-tooltip="Delete"></i></a>'),e.put("components/iconSelector/iconSelector.html",'<section class="iconSelectorIcon {{::$ctrl.getIconStaticClass(icon)}}" ng-class="{\'active\': $ctrl.isSelected(icon)}" ng-style="::{\'color\': icon.color, \'background-color\': icon.backgroundColor}" ng-repeat="icon in ::$ctrl.icons" ng-click="$ctrl.onIconSelected(icon)" bind-aria-label-and-tooltip="$ctrl.getThemeColorLocalizedNames($index + 1, icon.backgroundColor)" tabindex="0"><pbi-icon name="{{::icon.iconName}}" size="{{::$ctrl.getIconSize(icon)}}" ng-if="::!!icon.iconName"></pbi-icon><span ng-if="::!icon.iconName"></span></section>'),e.put("components/lazyIcon/lazyIcon.html",'<img ng-if="$ctrl.src" ng-src="{{$ctrl.src}}"/><pbi-icon ng-if="!$ctrl.src" name="{{$ctrl.placeholder}}" size="{{$ctrl.placeholderSize}}"></pbi-icon>'),e.put("components/modalDialog/dialogFrame/dialogFrame.html",'<div role="dialog" class="container themeableElement" tabindex="-1" ng-keydown="$ctrl.onKeydown($event)"><div class="frameDragHandle"></div><div class="frame"><header id="messageDialogHeader" class="dialogHeader" ng-transclude="dialogHeader"></header><main class="dialogBody" ng-transclude="dialogBody"></main><section class="dialogFooter" ng-transclude="dialogFooter"></section></div><pbi-button kind="icon" icon-name="cancel" icon-size="mini" labelless="true" no-label aria-label="Close" role="button" tabindex="0" class="closeIcon" ng-click="$ctrl.onCloseButtonClick()" ng-keydown="$ctrl.onCloseButtonKeydown($event)" ng-if="::$ctrl.isDismissable()"></pbi-button></div>'),e.put("components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialog.html",'<dialog-frame><dialog-header><span localize="$ctrl.titleText"></span></dialog-header><dialog-body><article localize="$ctrl.message"></article><a class="learnMoreLink" ng-if="::$ctrl.learnMoreUrl" target=\'_blank\' ng-href="{{::$ctrl.learnMoreUrl}}" localize="LearnMore"></a></dialog-body><dialog-footer> <button autofocus type="submit" ng-click="$ctrl.close()" class="primary" localize="PBI_Button_Label_Close"></button></dialog-footer></dialog-frame>'),e.put("components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialogDefinition.html",'<feature-not-supported-dialog title-text="::titleText" message="::message" learn-more-url="::learnMoreUrl"></feature-not-supported-dialog>'),e.put("components/modalDialog/hostDialogContainer/hostDialogContainer.html","<ng-transclude></ng-transclude>"),e.put("components/modalDialog/messageDialog/messageDialog.html",'<dialog-frame><dialog-header ng-if="::!!$ctrl.config.titleText"><span ng-bind="::$ctrl.config.titleText"></span></dialog-header><dialog-body><p ng-bind="::$ctrl.config.messageText"></p><section ng-if="::$ctrl.config.additionalMessageTexts"><p ng-repeat="message in ::$ctrl.config.additionalMessageTexts" ng-bind="::message"></p></section></dialog-body><dialog-footer> <button autofocus type="submit" ng-click="$ctrl.ok()" class="primary" ng-if="::$ctrl.config.okButtonText" ng-bind="::$ctrl.config.okButtonText"></button> <button class="cancelBtn" ng-click="$ctrl.cancel()" ng-if="::$ctrl.config.cancelButtonText" ng-bind="::$ctrl.config.cancelButtonText"></button></dialog-footer></dialog-frame>'),e.put("components/modalDialog/messageDialog/messageDialogDefinition.html",'<message-dialog config="config"></message-dialog>'),e.put("components/shareAccess/shareAccess.html",'<pbi-radio-group no-label ng-model="$ctrl.isSharedWithOrg" ng-change="$ctrl.selectionChanged()"><pbi-radio class="entireOrganizationRadio" label="TenantSetting_ApplyTo_EntireOrganization" ng-value="true"></pbi-radio><pbi-radio class="specificUsersRadio" label="TenantSetting_ApplyTo_SpecificUsers" ng-value="false"></pbi-radio></pbi-radio-group><div class="emailListContainer" ng-if="!$ctrl.isSharedWithOrg"><emails-list view-model="$ctrl.emails" allow-security-groups="true" allow-object-ids="true" allow-unified-groups="true"></emails-list></div>'),e.put("views/collapsibleSectionView.html",'<div class="collapsibleSectionControl" ng-class="{isExpanded: isCollapsibleSectionExpanded === true}"><div class="sectionTitle"><span class="collapseToggleContainer" ng-click="isCollapsibleSectionExpanded = !isCollapsibleSectionExpanded"><i class="glyphicon pbi-glyph-caretright collapseToggle"></i> <span>{{isCollapsibleSectionExpanded ? localizedExpandedTitle : localizedCollapsedTitle}}</span></span></div><div class="content" ng-show="isCollapsibleSectionExpanded" ng-transclude></div></div>'),e.put("views/confirmationModalDialog.html",'<div><div class="title" ng-if="viewModel.title">{{::viewModel.title}}</div><div class="message" ng-if="viewModel.message">{{::viewModel.message}}</div></div>'),e.put("views/customModalDialog.html",'<div class="customModalDialog"><div class="dialogMessage" ng-bind="::message"></div></div>'),e.put("views/dialogConfirmContent.html",'<div class="content"><div class="title">{{viewModel.title}}</div><div class="message" ng-if="viewModel.message">{{viewModel.message}}</div></div>'),e.put("views/dropdownMenu.html","<ul class='angular-dropdown' ng-class='{dropdownMenuClass: true, dark: dropdownDarkTheme === true}'><li ng-repeat='item in dropdownMenu' class='dropdown-item' dropdown-item-label='labelField' dropdown-item-description='descriptionField' dropdown-item-class='classField' dropdown-menu-item='item'></li></ul>"),e.put("views/dropdownMenuItems.html",'<ul class="clickable-menu-items {{dropdownClass}}" focus-trap role="menu" ng-class="{dark: dropdownDarkTheme === true}"><li ng-repeat="item in dropdownItems" class="dropdown-item {{item.dropdownItemClass}}" ng-click="dropdownOnItemSelected({ selected: item }); $event.stopPropagation();" ng-class="{selectedItem: item.checked}"> <button ng-if="::item.type === 0 && !item.href" class="{{::item.containerClass}}" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}" role="menuitem"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-if="::item.description">{{::item.description}}</div></div></button><a ng-if="::item.type === 0 && item.href" class="{{::item.containerClass}}" role="menuitem" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}" ng-href="{{::item.href}}" ng-attr-target="{{::item.hrefTarget ? item.hrefTarget : \'_blank\' }}"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-if="::item.description">{{::item.description}}</div></div></a><span ng-if="::item.type === 1" class="{{::item.containerClass}}" tabindex="0" role="heading" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-attr-title="{{::item.descriptionTitle}}" ng-if="::item.description">{{::item.description}}</div></div></span><span ng-if="::item.type === 2" class="dropdown-separator"></span></li></ul>'),e.put("views/dropdowns/contextMenu.html",'<dropdown-overlay focus-nav-mode="Group" keyboard-shortcuts="" dropdown-overlay-class="default-contextmenu dropdownOverlay" ng-class="::{dark: darkTheme === true, verticalScrollbar: verticalScrollbar === true, themeableElement: themeableElement === true, fluentTheme: fluentTheme === true}" apply-style="::backgroundStyle"><drop-down-list role="menu" data-automation-type="dropdownOverlayList" model="::model" foreground-style="::foregroundStyle" on-item-selected="menuClick(key)" on-item-enter="menuItemEnter(menuitem, $event)"></drop-down-list></dropdown-overlay>'),e.put("views/dropdowns/dropdownItemsLegacy.html",'<dropdown-overlay dropdown-overlay-name="{{overlayName}}" dropdown-overlay-class="angular-dropdown {{overlayClass}} override-box-shadow" on-close="onClose()"><dropdown-menu-items dropdown-items="menuItems" dropdown-class="active {{overlayClass}}" dropdown-on-item-selected="onItemSelected(selected)"></dropdown-menu-items></dropdown-overlay>'),e.put("views/inlineMessageView.html",'<div class="inlineWarning" ng-class="{errorBackground: useErrorBackground}"><div class="message" ng-init="detailExpand=false"><span ng-switch="displayIcon"><span ng-switch-when="0" class="glyphicon glyph-small" ng-class="\'pbi-glyph-info\'"></span><span ng-switch-when="1" class="glyphicon glyph-small" ng-class="\'pbi-glyph-error\'"></span><span ng-switch-when="2" class="glyphicon glyph-small" ng-class="\'pbi-glyph-warning\'"></span></span><span ng-transclude></span><span ng-if="traceDetails!=null"><span class="detailsExpander" ng-click="detailExpand=!detailExpand" ng-switch="detailExpand"><a href=\'\' localize="Generic_ShowDetails" ng-switch-when="false"></a><a href=\'\' localize="SettingsDataset_HideDetails" ng-switch-when="true"></a></span><span ng-show="detailExpand"><table class="warningDetails"><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_ActivityIdText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.activityId"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_RequestIdText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.requestId"></td></tr><tr ng-if="traceDetails.clusterUri"><td class="warningDetailName"><span localize="AdditionalErrorInfo_ClusterUriText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.clusterUri"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_ErrorCodeText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.errorCode"></td></tr><tr ng-if="traceDetails.error"><td class="warningDetailName"><span localize="AdditionalErrorInfo_ErrorText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.error"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_TimestampText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.time"></td></tr><tr><td class="warningDetailName"><span localize="PowerBI_Build_Version_Text"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.version"></td></tr><tr><td class="warningDetailName"><span localize="PowerBI_Client_Version_Text"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.clientVersion"></td></tr></table><table ng-if="traceDetails.details && traceDetails.details.length > 0" class="warningErrorDetails"><tr ng-repeat="errorDetail in traceDetails.details"><td class="warningErrorDetailName"><span ng-bind="errorDetail.key"></span>:</td><td class="warningDetailValue" ng-bind="errorDetail.value"></td></tr></table></span><div ng-if="traceDetails.linkText" class="warningTroubleshootLink"><a href=\'{{traceDetails.link}}\' target="_blank" ng-bind="traceDetails.linkText"></a></div></span></div></div>'),e.put("views/inlineNameValuePairsView.html",'<div class="inlineWarning"><div class="message"><span ng-if="showTitle" ng-class="mode==\'info\'?\'pbi-glyph-info\':\'pbi-glyph-error\'" class="glyphicon glyph-small"></span><span ng-transclude></span><span ng-if="nameValuePairs!=null"><span class="detailsExpander" ng-click="detailExpand=!detailExpand" ng-switch="detailExpand" ng-show="showTitle"><a href=\'\' localize="Generic_ShowDetails" ng-switch-when="false"></a><a href=\'\' localize="SettingsDataset_HideDetails" ng-switch-when="true"></a></span><table class="warningDetails" ng-show="detailExpand"><tr ng-repeat="pair in nameValuePairs"><td class="warningDetailName"><span ng-bind="::pair.Name"></span>:</td><td class="warningDetailValue"><span ng-bind="::pair.Value"></span></td></tr></table></span></div></div>'),e.put("views/loadNotificationView.html",'<div class="loading-modalContainer"><div class="content"><div class="information"><spinner [size]="\'large\'"></spinner><span class="message" ng-bind="message"></span></div></div></div>'),e.put("views/modalDialog.html",'<div class="modal"><div class="overlay"></div><form class="dialog" role="dialog" focus-trap><div ng-transclude ng-class="{\'dialog-content-filled\': viewModel.contentFilledDialog, \'dialog-content\': !viewModel.contentFilledDialog}"></div><div class="actions" ng-if="!viewModel.hideActionsButtons"> <button class="confirm biButton primary" ng-class="{\'elevated\': viewModel.confirmButtonImportance === \'elevated\', \'normal\': viewModel.confirmButtonImportance === \'normal\' }" ng-click="confirm()" ng-disabled="viewModel.isConfirmButtonDisabled" type="submit">{{viewModel.confirmButtonText}}</button> <button class="cancel biButton" ng-if="!viewModel.hideCancelButton" ng-class="{\'elevated\': viewModel.cancelButtonImportance === \'elevated\', \'normal\': viewModel.cancelButtonImportance === \'normal\' }" ng-click="cancel()" formnovalidate>{{viewModel.cancelButtonText}}</button></div> <button class="closeBtn pbi-glyph-exit glyphicon glyph-small" ng-click="cancel()" aria-label="Close" formnovalidate></button></form></div>'),e.put("views/modalOverlay.html",'<div class="modal"><div class="overlay"></div></div>'),e.put("views/optionsModalDialog.html",'<div class="customModalDialog"><div class="dialogMessage" ng-bind="::message"></div><div><ul><li ng-repeat="val in options"><div class="pbi-input"> <input type="radio" name="option" ng-model="$parent.selected" ng-value="$index"> <label class="form-label">{{val}}</label></div></li></ul></div></div>'),e.put("views/popupContainer.html",'<div class="popup-container"><ng-transclude></ng-transclude></div>'),e.put("views/searchBox.html",'<div class="searchBox"><i class="glyphicon pbi-glyph-search"></i> <input type="text" ng-class="{\'inputWithClearButton addPadding\': showclearbutton && filter}" clear-on-escape ng-model="filter" ng-model-options="{debounce: 300}" ng-blur="onBlur({$event: $event})" placeholder="{{::placeholderText}}" ondrop="return false;" focus-on="shouldFocus" maxlength="200" role="search"/><i ng-if="showclearbutton && filter" class="delete glyphicon pbi-glyph-close glyph-micro" ng-click="clearFilterInput()" ng-keyup="$event.keyCode == 13 && clearFilterInput()" tabindex="0"></i></div>'),e.put("views/selectMenu.html",'<select ng-model="selectValue" aria-labelledby="{{labelId}}" class="select-element" ng-disabled="isDisabled"><option ng-repeat="option in options track by $index" value="{{option.value}}" ng-selected="{{selectValue === option.value}}" ng-bind="option.displayName"></option></select>'),e.put("views/textInput.html",'<input class="inputText" ng-class="textInputStyle" type="text" ng-focus="onInternalFocus()" ng-blur="onInternalBlur()" ng-keydown="onInternalKeyDown($event)" ng-model="inputValue" ng-change="onInternalChange()" maxlength="{{::maxInputLength}}" placeholder="{{::placeholder}}" spellcheck="false" ng-trim="false"/>'),e.put("views/toggleSwitch.html",'<div class="toggle-switch" role="switch" aria-checked="{{!!toggleValue}}" tabindex="{{isDisabled ? -1 : 0}}" ng-keydown="!isDisabled && handleToggleEvent($event)" ng-focus="handleToggleFocus($event)" aria-labelledby="{{::labelId}}" aria-disabled="{{isDisabled}}"> <input type="checkbox" name="toggle-switch" class="toggle-switch-checkbox" id="{{::$id}}" ng-model="toggleValue"/><label class="toggle-switch-label" for="{{::$id}}" ng-switch="!!toggleValue"><span ng-if="!warningMessage" ng-switch-when="true" class="toggle-switch-text trimmedTextWithEllipsis" localize="ToggleSwitchOn"></span><pbi-icon role="tooltip" aria-hidden="!warningMessage" aria-label="warningMessage.detail" ng-if="warningMessage" ng-switch-when="true" class="warning" name="warning" size="small" tooltip tooltip-config="getTooltipConfig()"></pbi-icon><span ng-switch-when="false" class="toggle-switch-text trimmedTextWithEllipsis" localize="ToggleSwitchOff"></span><span class="toggle-switch-inner"></span></label></div>')}})(powerbi=powerbi||{}),(function(h){!(function(l){var e=h.common.htmlTemplate.put,m={1:[],2:[],4:[]};l.initializeNgRightClick(),l.registerPBICommonBuildingBlocksForHost=function(e){var t=[{name:"ApplyStyle",blockType:1,consumerHostFlags:25995,factory:h.common.directives.ApplyStyle},{name:"AutoSelect",dependencies:["$timeout"],blockType:1,consumerHostFlags:1032,factory:h.common.directives.AutoSelect},{name:"ClearOnEscape",blockType:1,consumerHostFlags:26379,factory:h.common.directives.ClearOnEscape},{name:"ClickTelemetry",dependencies:["telemetryService"],blockType:1,consumerHostFlags:1037,factory:h.common.directives.ClickTelemetry},{name:"CollapsibleSection",blockType:1,consumerHostFlags:1037,factory:h.common.directives.CollapsibleSection},{name:"ConfirmationModalDialog",blockType:1,consumerHostFlags:1160,factory:h.common.directives.ConfirmationModalDialog},{name:"ContainerPrinter",dependencies:["featureSwitchService","localizationService","globalEventBridge"],blockType:1,consumerHostFlags:8203,factory:h.common.directives.ContainerPrinter},{name:"CustomModalDialog",blockType:1,consumerHostFlags:25610,factory:h.common.directives.CustomModalDialog},{name:"CustomClick",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.CustomClick},{name:"BindAriaLabelAndTooltip",blockType:1,consumerHostFlags:1677,factory:h.common.directives.BindAriaLabelAndTooltip},{name:"BindTextAndTooltip",blockType:1,consumerHostFlags:1165,factory:h.common.directives.BindTextAndTooltip},{name:"DialogConfirmContent",blockType:1,consumerHostFlags:26047,factory:h.common.directives.DialogConfirmContent},{name:"DialogFrame",dependencies:["modalDialogService"],blockType:2,consumerHostFlags:32767,factory:h.common.components.DialogFrame},{name:"Drag",dependencies:["$interval","dragDataService"],blockType:1,consumerHostFlags:26123,factory:h.common.directives.Drag},{name:"DragScroll",dependencies:["dragDataService"],blockType:1,consumerHostFlags:26123,factory:h.common.directives.DragScroll},{name:"Drop",dependencies:["$parse","$timeout","timeoutService"],blockType:1,consumerHostFlags:26123,factory:h.common.directives.Drop},{name:"DropDownList",blockType:2,consumerHostFlags:26379,factory:h.common.components.DropDownList},{name:"DropDownListItem",blockType:2,consumerHostFlags:26379,factory:h.common.components.DropDownListItem},{name:"DropdownOverlay",dependencies:["overlayService","$parse"],blockType:1,consumerHostFlags:26379,factory:h.common.directives.DropdownOverlay},{name:"DropdownOverlayInvoke",dependencies:["overlayService"],blockType:1,consumerHostFlags:25867,factory:h.common.directives.DropdownOverlayInvoke},{name:"DropdownMenu",blockType:1,consumerHostFlags:25883,factory:h.common.directives.DropdownMenu},{name:"DropdownMenuItems",blockType:1,consumerHostFlags:26047,factory:h.common.directives.DropdownMenuItems},{name:"EditableLabel",blockType:2,consumerHostFlags:26379,factory:h.common.components.EditableLabel},{name:"EmailsList",blockType:2,consumerHostFlags:1032,factory:h.common.components.EmailsList},{name:"FastClick",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastClick},{name:"FastFocus",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastFocus},{name:"FastKeydown",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastKeydown},{name:"FastKeyup",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastKeyup},{name:"FastMousedown",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastMousedown},{name:"FastMouseenter",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastMouseenter},{name:"FastMouseup",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastMouseup},{name:"FastTouchmove",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastTouchmove},{name:"FastTouchend",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FastTouchend},{name:"FeatureNotSupportedDialog",dependencies:["modalDialogService"],blockType:2,consumerHostFlags:32767,factory:h.common.components.FeatureNotSupportedDialog},{name:"FeatureSwitch",dependencies:["asyncFeatureSwitchService"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FeatureSwitch},{name:"FeatureSwitchClass",dependencies:["asyncFeatureSwitchService"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FeatureSwitchClass},{name:"FeatureSwitchNot",dependencies:["asyncFeatureSwitchService"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.FeatureSwitchNot},{name:"HostDialogContainer",blockType:2,consumerHostFlags:32767,factory:h.common.components.HostDialogContainer},{name:"HighlightString",dependencies:["highlight"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.HighlightString},{name:"IconSelector",blockType:2,consumerHostFlags:1032,factory:h.common.components.IconSelector},{name:"InlineMessage",blockType:1,consumerHostFlags:1036,factory:h.common.directives.InlineMessage},{name:"InlineNameValuePairs",blockType:1,consumerHostFlags:1036,factory:h.common.directives.InlineNameValuePairs},{name:"InViewport",blockType:1,consumerHostFlags:25995,factory:h.common.directives.InViewport},{name:"LegacyScopedRoot",blockType:2,consumerHostFlags:32767,factory:h.common.components.LegacyScopedRoot},{name:"Localize",dependencies:["localizationService"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.Localize},{name:"LocalizeAttr",dependencies:["localizationService"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.LocalizeAttr},{name:"LocalizeTooltip",dependencies:["localizationService"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.LocalizeTooltip},{name:"MessageDialog",blockType:2,consumerHostFlags:9738,factory:h.common.components.MessageDialog},{name:"ModalDialog",blockType:1,consumerHostFlags:26047,factory:h.common.directives.ModalDialog},{name:"ModalOverlay",blockType:1,consumerHostFlags:4,factory:h.common.directives.ModalOverlay},{name:"NgBindAttr",blockType:1,consumerHostFlags:32767,factory:h.common.directives.NgBindAttr},{name:"NgOnSelect",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.NgOnSelect},{name:"NgRightClick",syncModule:"PowerBICommon/directives/ngRightClick",blockType:1,consumerHostFlags:32767,excludedConsumerHostFlags:2},{name:"NgRepeatFinishEvent",dependencies:["$timeout"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.NgRepeatFinishEvent},{name:"NgScrollbars",dependencies:["$timeout"],blockType:1,consumerHostFlags:26379,factory:h.common.directives.NgScrollbars},{name:"OnResize",dependencies:["$parse","moduleLoader"],blockType:1,consumerHostFlags:26507,factory:h.common.directives.OnResize},{name:"OptionsModalDialog",blockType:1,consumerHostFlags:32767,factory:h.common.directives.OptionsModalDialog},{name:"PbiLazyLoadContents",dependencies:["$compile","pbiLazyLoad","moduleLoader"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.PbiLazyLoadContents},{name:"PbiTable",dependencies:["$rootScope","$compile","$filter","localizationService"],blockType:1,consumerHostFlags:1544,factory:h.common.directives.PbiTable},{name:"PopupContainer",blockType:1,consumerHostFlags:9739,factory:h.common.directives.PopupContainer},{name:"Resizable",blockType:1,consumerHostFlags:25995,factory:h.common.directives.Resizable},{name:"SearchBox",dependencies:["localizationService"],blockType:1,consumerHostFlags:26379,factory:h.common.directives.SearchBox},{name:"Select",blockType:1,consumerHostFlags:32767,factory:h.common.directives.Select},{name:"SelectMenu",dependencies:["$timeout"],blockType:1,consumerHostFlags:32767,factory:h.common.directives.SelectMenu},{name:"SelectPristineOnFocus",blockType:1,consumerHostFlags:1032,factory:h.common.directives.SelectPristineOnFocus},{name:"ShareAccess",blockType:2,consumerHostFlags:1032,factory:h.common.components.ShareAccess},{name:"TextInput",blockType:1,consumerHostFlags:1032,factory:h.common.directives.TextInput},{name:"GridLayout",blockType:1,consumerHostFlags:1192,factory:h.common.directives.GridLayout},{name:"GridLayoutItem",dependencies:["ngZone"],blockType:1,consumerHostFlags:1192,factory:h.common.directives.GridLayoutItem},{name:"LazyIcon",blockType:2,consumerHostFlags:1192,factory:h.common.components.LazyIcon},{name:"Tooltip",blockType:1,consumerHostFlags:26507,factory:h.common.directives.Tooltip},{name:"TriggeredRecompile",blockType:2,consumerHostFlags:32767,factory:h.common.components.TriggeredRecompile},{name:"LoadNotification",blockType:1,consumerHostFlags:25883,factory:h.common.directives.LoadNotification},{name:"VResizable",blockType:1,consumerHostFlags:25995,factory:h.common.directives.VResizable}];n(e,h.a11y.PbiA11yBaseBlockDefinitions,{directivesTarget:"powerbi.a11y"}),n(e,t,{directivesTarget:"powerbi.common.directives",componentsTarget:"powerbi.common.components"})},angular.module("powerbi.common",[]),angular.module("powerbi.common.directives",[]),angular.module("powerbi.common.components",[]),angular.module("powerbi.common.controllers",[]);var t,o=["powerbi.common.directives","powerbi.common.components","powerbi.common.controllers","stylelibrary","oc.lazyLoad","powerbi.a11y"];function i(){r||(angular.module("powerbi.common",o).config(["$compileProvider",function(e){e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}]).config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]).factory("promiseFactory",["$q","$exceptionHandler",function(e,t){e=l.createPromiseFactory(e);return h.Promise.init(e,t,!0),e}]).factory("pbiTimeout",["$rootScope",function(t){return h.createPbiTimeout((function(e){return t.$evalAsync(e)}))}]).factory("scopedProvider",["$injector",function(e){return l.createScopedProvider(e)}]).factory("scopedRootRegistrar",["modernScopedRootRegistrar","scopedProvider",function(e,t){return l.createScopedRootRegistrar(e,t)}]).provider("lazy",(function(){var i=this;return this.factories={},this.$get=["$injector","moduleLoader","promiseFactory",function(e,t,o){return l.createLazyInjector(t,o,e,i.factories)}],this})).factory("lazyScopedFactories",["scopedProvider",function(e){var r={};return e.register("lazyScoped",{services:["$injector","moduleLoader","promiseFactory"],scopedServices:["$scope"],scopedProviderInstance:!0,fn:function(e,t,o,i,n){return l.createScopedLazyProvider(t,e,n,i,o,r)}}),r}]).provider("mixins",(function(){var t=this;return this.factories={},this.$get=["$injector",function(e){return l.createMixinsProvider(e,t.factories)}],this})).factory("mixinScopedFactories",[function(){return{}}]).factory("hostTypeResolutionService",[function(){return new l.HostTypeResolutionService}]).factory("hostInvokerService",["hostTypeResolutionService","$window","$http",function(e,t,o){return new(e.getHostType()!==l.HostType.Chromium?l.VoidHostInvokerService:l.ChromiumHostInvokerService)}]).factory("hostService",["promiseFactory","hostInvokerService",function(e,t){t=new l.HostService(e,t);return l.setHostServiceSink(t),t}]).factory("lastFocusedElementService",(function(){return l.createLastFocusedElementService()})).factory("dropdownMenuService",["rtl","windowMetrics","globalEventBridge",function(e,t,o){return l.createDropdownMenuService(o,e,t)}]).factory("dropdown",["$rootScope","$templateCache","$compile","overlayService","$timeout","promiseFactory",function(e,t,o,i,n,r){return l.createDropdownService(e,t,o,i,n,r)}]).factory("gridLayout",(function(){return l.createGridLayoutService()})).factory("contentProviderConfigHandler",["$window",function(e){return l.createContentProviderConfigHandlerService(e)}]).provider("pbiLazyLoad",l.services.PbiLazyLoadProvider).factory("dataClassificationService",["promiseFactory",function(e){return l.createDataClassificationService(e)}]).provider("telemetryService",(function(){return this.$get=["modernTelemetryService",function(e){var t,o=window;try{if(o!==o.parent)for(var i=0;o&&(null!=o.opener||o!==o.parent)&&null==t&&i<5;)t=(o=o.opener||o.parent).powerbi&&o.powerbi.common&&o.parentTelemetryService,i++;if(t)return t}catch(e){}return t=e,jsCommon.Trace.resetListeners(),jsCommon.Trace.addListener(t),l.parentTelemetryService=t}],this})).factory("datasetsService",["httpService","localizationService",function(e,t){return l.createDatasetsService(e,t)}]).factory("activeFolderIdLegacy",["promiseFactory",function(e){return l.createActiveFolderIdService(e)}]).factory("notificationToast",["telemetryService",function(e){return l.createNotificationToastService(e)}]).factory("modalDialogService",["$compile","pbiLazyLoad","promiseFactory","$templateCache","$timeout","$rootScope","telemetryService","moduleLoader",function(e,t,o,i,n,r,a,s){return l.createModalDialogService(e,t,o,i,n,r,a,s)}]).factory("embedModeService",(function(){return null})).factory("upload",["$injector","httpRequestWorker",function(e,t){return l.createUpload(e,t)}]).run(["ngZone",function(e){jsCommon.Zone.initialize(e)}]).run(["pbiTimeout",function(e){h.PbiPromise.init(e,!1)}]).run(["activeFolderId",function(e){h.ensurePowerbiCommon().activeFolderIdService=e}]).run(["$templateCache",e]),r=!0)}function n(e,t,o){for(var i,n,r,a,s,l,c=0,d=t;c<d.length;c++){var u=d[c],p=u.consumerHostFlags;null==p&&(p=32767),null!=u.excludedConsumerHostFlags&&(p&=~u.excludedConsumerHostFlags),(p&e)===e&&(i=u.name,n=u.blockType,r=u.factory,a=u.syncModule,s=o,l=u.dependencies,u=p=void 0,p=_.camelCase(i),u=m[n],h.contract.checkValue(u,"Attempt to register unknown base block type"),_.includes(u,p)||(2===n?(function(e,t,o,i,n){n=t||(o?h.requireSync(o):n[e]);e=_.camelCase(e),angular.module(i).component(e,n)})(i,r,a,s.componentsTarget,s.componentsMap):1===n?(function(e,t,o,i,n,r){var a;t?(a=t).ng&&(i=a.ng):o?(a=h.requireSync(o),i=a.ng):a=r[e];e=_.camelCase(e),i=i||[];i.push((function(){for(var e=[],t=0,o=arguments.length;t<o;t++)e.push(arguments[t]);return new(Function.prototype.bind.apply(a,[null].concat(e)))})),angular.module(n).directive(e,i)})(i,r,a,l,s.directivesTarget,s.directivesMap):4===n&&(function(e,t,o,i,n){n=t||(o?h.requireSync(o):n[e]);e=_.camelCase(e),angular.module(i).filter(e,n)})(i,r,a,s.filtersTarget,s.filtersMap),u.push(p)))}}l.initializeAngularModule=i,l.registerBuildingBlocksForHost=n,l.containsDirective=function(e){return _.includes(m[1],_.camelCase(e))},l.setErrorService=function(e){t=e};var r=!(l.getErrorService=function(){return t});i()})(h.common||(h.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.services=e,this.itemPicker=t}e=e.controllers||(e.controllers={}),t.prototype.closePopup=function(){this.itemPicker.isPickerOpen=!1,this.onClose&&this.onClose()},t.prototype.togglePickerState=function(){this.itemPicker.isPickerOpen?this.closePopup():this.itemPicker.isPickerOpen=!0},t.prototype.togglePicker=function(e){this.itemPicker.buttonElement||(this.itemPicker.buttonElement=this.services.$element.find(this.itemPicker.getButtonSelector())),this.itemPicker.onToggle(),e||(this.itemPicker.isWheelOpen=!1),this.services.itemPicker.setCurrentInstance(this.itemPicker)},t.prototype.onItemPickerKeyDown=function(e){this.closePopupContainer(e),e&&e.shiftKey&&9===e.keyCode&&this.setToPreviousFocus(e,this.previousRecentPosition)},t.prototype.onItemKeyDown=function(e,t,o,i){e&&e.keyCode&&(t={columnIndex:o,rowIndex:t,recent:i},27!==e.keyCode?9!==e.keyCode?this.shiftItemFocus({direction:e.keyCode,itemPosition:t}):e.shiftKey?i?this.itemPicker.isNoItemSupported?(this.services.$element.find(".no-fill-container").eq(0).focus(),e.preventDefault()):(this.setToPreviousFocus(e,this.previousPosition),this.previousRecentPosition=t):(this.previousPosition=t,this.services.$element.find(".colorpicker-revert").eq(0).focus(),e.preventDefault()):i?this.previousRecentPosition=t:(this.previousPosition=t,this.itemPicker.isNoItemSupported||this.setToPreviousFocus(e,this.previousRecentPosition)):this.closePopupContainer(e))},t.prototype.onNoPickKeyDown=function(e){9===e.keyCode&&(e.shiftKey?this.setToPreviousFocus(e,this.previousPosition):this.setToPreviousFocus(e,this.previousRecentPosition)),27===e.keyCode&&this.closePopupContainer(e)},t.prototype.onRevertToDefaultKeyDown=function(e){this.closePopupContainer(e),e.shiftKey||9!==e.keyCode||this.setToPreviousFocus(e,this.previousPosition)},t.prototype.setToPreviousFocus=function(e,t){t&&(this.setFocus(t),e.preventDefault())},t.prototype.closePopupContainer=function(e){e&&27===e.keyCode&&(this.closePopup(),e.stopPropagation())},t.prototype.shiftItemFocus=function(e){var t,o;e.itemPosition.recent?t=this.getNextIndex(this.itemPicker.getRecentItemCount(),e.itemPosition.columnIndex,e.direction):38===e.direction||40===e.direction?(t=e.itemPosition.columnIndex,o=this.getNextIndex(this.itemPicker.getColumnItemCount(t),e.itemPosition.rowIndex,e.direction)):37!==e.direction&&39!==e.direction||(t=this.getNextIndex(this.itemPicker.getRowItemCount(e.itemPosition.rowIndex),e.itemPosition.columnIndex,e.direction),o=e.itemPosition.rowIndex),this.setFocus({columnIndex:t,rowIndex:o,recent:e.itemPosition.recent})},t.prototype.getNextIndex=function(e,t,o){return 39===o||40===o?t=e<=++t?0:t:37!==o&&38!==o||(t=--t<0?e-1:t),t},t.prototype.setFocus=function(e){this.itemPicker.getElementFromPosition(e).focus()},e.ItemPickerHandler=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){var t;function o(e,t){this.services=t}e=e.controllers||(e.controllers={}),t=jsCommon.FocusManager,o.createOptions=function(){return{additionalServices:["$element"]}},o.prototype.$onChange=function(){this.setNumberOfItems()},o.prototype.getItemPositionByIndex=function(e){return _.indexOf(this.menuItemItems,this.model.items[e])},o.prototype.$onInit=function(){this.unregister=t.getInstance().register(this.services.$element.get(0)),this.setNumberOfItems()},o.prototype.$onDestroy=function(){this.unregister&&this.unregister()},o.prototype.onMenuItemSelected=function(e){1!==e.type&&!e.disabled&&null!=e.key&&_.isEmpty(e.children)&&this.onItemSelected({key:e.key})},o.prototype.onMenuItemEnter=function(e,t){this.onItemEnter({menuitem:e,$event:t})},o.prototype.setNumberOfItems=function(){this.menuItemItems=[],_.isEmpty(this.model)||(this.menuItemItems=_.filter(this.model.items,(function(e){return 0===e.type})))},e.DropDownListController=o})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){var t;((t=e.common||(e.common={})).components||(t.components={})).DropDownList={templateUrl:"components/dropDownList/dropDownList.html",bindings:{model:"<",foregroundStyle:"<",onItemSelected:"&",onItemEnter:"&"},transclude:!0,controller:e.common.createController(t.controllers.DropDownListController)}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.services=t,this.contextMenuLabelId=_.uniqueId("contextmenu-label-text")}e=e.controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["$element","$window"]}},t.prototype.$onInit=function(){var t=this;this.services.$element.mouseenter((function(e){return t.onEnter(e)}))},t.prototype.onAccessibleClick=function(e){this.model.href&&this.services.$window.open(this.model.href,"_blank"),this.model.children?e.keyCode!==$.ui.keyCode.ENTER&&e.keyCode!==$.ui.keyCode.SPACE||this.onEnter(e):this.onClick()},Object.defineProperty(t.prototype,"hasIcon",{get:function(){return this.model.showIcon&&(!!this.model.icon||!!this.model.customIcon)},enumerable:!1,configurable:!0}),t.prototype.getRoleForMenuItem=function(){return void 0===this.model.checked?"menuitem":"menuitemcheckbox"},t.prototype.onClick=function(){this.dropDownListCtrl.onMenuItemSelected(this.model)},t.prototype.onEnter=function(e){this.dropDownListCtrl.onMenuItemEnter(this.model,e)},e.DropDownListItemController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).DropDownListItem={templateUrl:"components/dropDownListItem/dropDownListItem.html",bindings:{model:"<",foregroundStyle:"<",listPos:"<",listSize:"<"},transclude:!0,require:{dropDownListCtrl:"^?dropDownList"},controller:e.createController(e.controllers.DropDownListItemController)}})(powerbi=powerbi||{}),(function(i){!(function(e){var t;function o(e,t){this.scope=e,this.services=t,this.element=t.$element,this.isEditing=!1,this.isValid=!0}t=e.controllers||(e.controllers={}),o.createOptions=function(){return{additionalServices:["$element","highlight"]}},o.prototype.$onInit=function(){this.inputMatchLabelWidth=null==this.inputMatchLabelWidth||this.inputMatchLabelWidth,this.maxInputLength=null==this.maxInputLength?100:this.maxInputLength,this.textLabel=this.element.find(".textLabel"),this.updateText(this.displayName,this.searchString),this.internalDisplayName=this.displayName},o.prototype.$onChanges=function(e){e.editable&&!e.editable.isFirstChange()&&this.disableClick&&this.setEditableState(e.editable.currentValue),e.displayName&&(this.internalDisplayName=e.displayName.currentValue),(e.displayName&&!e.displayName.isFirstChange()||e.searchString&&!e.searchString.isFirstChange())&&this.updateText(this.displayName,this.searchString)},o.prototype.updateText=function(e,t){this.displayContent=e&&t?this.services.highlight.highlight(e,t):jsCommon.StringExtensions.encodeHtml(e)},o.prototype.onInternalKeyUp=function(e){e.stopPropagation(),this.isValid=!this.validate||this.validate(this.displayName)},o.prototype.onInternalBlur=function(){!this.cancelInput&&this.onBlur&&this.onBlur({newName:this.internalDisplayName}),this.cancelInput=!1,this.isValid=!0,this.scope.$emit(e.constants.editableLabelOnBlurEventName),this.disableClick||this.setEditableState(!1)},o.prototype.onInternalKeyDown=function(e){if(e.stopPropagation(),this.inputTextbox)switch(e.keyCode){case 13:("textarea"!==this.inputType||e.ctrlKey)&&(this.inputTextbox.blur(),e.preventDefault());break;case 27:this.cancelInput=!0,this.cancel&&this.cancel(),this.inputTextbox.blur(),e.preventDefault()}},o.prototype.setEditableState=function(e){var t=this;(this.isEditing=e)&&(this.inputMatchLabelWidth&&(this.textInputWidth=i.TextMeasurementService.getDivElementWidth(this.textLabel)),this.services.timeout((function(){t.inputTextbox=t.element.find(".textInput"),t.inputTextbox.focus().select(),t.onEditStart&&t.onEditStart()}),0))},t.EditableLabelController=o})(i.common||(i.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).EditableLabel={templateUrl:"components/editableLabel/editableLabel.html",bindings:{displayName:"<",disableClick:"<?",editable:"<?",searchString:"<?",readonly:"<?",inputType:"<?",maxInputLength:"<?",customTooltip:"<?",inputMatchLabelWidth:"<?",onBlur:"&?",onEditStart:"&?",cancel:"&?",validate:"=?",textLabelClasses:"<?",textLabelStyles:"<?"},controller:e.createController(e.controllers.EditableLabelController)}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).EmailsListModel=function(){this.inputUserList=[],this.validEmailsList=[],this.validObjectIds=[],this.hasValidationError=!1,this.isDirty=!1}})(powerbi=powerbi||{}),(function(e){var r;(function(s){var e="([!#$%&'*+/=?^{|}~\\w\\-\\.\\u00c0-\\uffff]{1,64}@[\\w\\-\\.\\u00c0-\\uffff]{1,253}\\.\\w{1,63})",l=new RegExp("^"+e+"$");s.ObjectIdRegExp=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/,s.MaxAllowedEmailAddresses=500,s.EmailValidator=new RegExp("^("+e+"|([^;,]*)<"+e+">)$");t.createOptions=function(){return{additionalServices:["localizationService","promiseFactory","$element","userDirectoryHttpService"]}},t.emailsToUsers=function(e){for(var t=[],o=0,i=e;o<i.length;o++){var n=i[o],r=$.trim(n),n="";r&&(l.test(r)&&(n=r),t.push({displayName:r,userPrincipalName:n,objectId:n,objectType:1,isSecurityGroup:!1}))}return t},t.prototype.$onInit=function(){var t=this,e="ngTagsInput";this.moduleConfig={name:e,dependency:{javascript:e,css:[e]}};var o=this.services.$element;o.keyup((function(e){8===e.keyCode&&""===o.find("input.input").val()&&t.clearInvalidUserError()})),this.initializeViewModel(this.viewModel)},t.prototype.getInputPlaceholder=function(){var e=this.services.localizationService;return _.isEmpty(this.placeholder)?this.blockUsers?e.get("SecurityGroupsListPlaceholder"):e.get("EmailsListPlaceholder"):e.get(this.placeholder)},t.prototype.validationTrigger=function(){var e=[],t=this.resetViewModel(),o=t.inputUserList;t.inputUserList=[];for(var i=0,n=o;i<n.length;i++){var r=n[i];this.isValidUser(r)?(t.inputUserList.push(r),this.allowObjectIds&&s.ObjectIdRegExp.test(r.objectId)?t.validObjectIds.push(r.objectId):l.test(r.userPrincipalName)&&t.validEmailsList.push(r.userPrincipalName)):e.push(r.userPrincipalName||r.objectId||r.displayName)}var a=this.services.localizationService,o=a.get("PowerBI_ListDelimiter");return 0<e.length?(e=_.uniq(e),t.errorMessage=this.blockUsers?a.format("EmailsList_WrongSecurityGroups",[e.join(o)]):a.format("EmailsList_WrongEmailAddresses",[e.join(o)])):0===t.inputUserList.length?t.errorMessage=this.blockUsers?a.get("EmailsList_NoSecurityGroupSpecified"):a.get("EmailsList_NoEmailAddressSpecified"):t.inputUserList.length>=s.MaxAllowedEmailAddresses&&(t.errorMessage=this.blockUsers?a.format("EmailsList_SecurityGroupExceeded",[s.MaxAllowedEmailAddresses.toString()]):a.format("EmailsList_EmailAddressExceeded",[s.MaxAllowedEmailAddresses.toString()])),t.hasValidationError=""!==t.errorMessage,!this.viewModel.hasValidationError},t.prototype.areUsersLoading=function(){return null!=this.findUsersPromise},t.prototype.setDirty=function(){this.viewModel.isDirty=!0},t.prototype.showInvalidUserError=function(e){var t=this.viewModel,o=this.services.localizationService,e=e.userPrincipalName||e.displayName;t.hasValidationError=!0,t.errorMessage=this.blockUsers?o.format("EmailsList_WrongSecurityGroups",[e]):o.format("EmailsList_WrongEmailAddresses",[e])},t.prototype.isValidUser=function(e,t){if(void 0===t&&(t=!1),e.objectId&&this.allowObjectIds&&s.ObjectIdRegExp.test(e.objectId)&&!this.isUserRepeated(e)&&this.isValidObjectType(e))return!0;if(e.userPrincipalName){if(e.userPrincipalName=_.trim(e.userPrincipalName),!l.test(e.userPrincipalName))return!1;t&&this.findUserObjectIds(e)}else{if(!(!e.objectId||this.allowObjectIds&&s.ObjectIdRegExp.test(e.objectId)))return!1;e.displayName=_.trim(e.displayName);var o=e.displayName.match(s.EmailValidator);if(!o)return!1;var i=o[2],n=o[3],o=o[4];i?(e.displayName=i,e.userPrincipalName=i,e.objectId=i,e.objectType=3):o&&(e.displayName=n,e.userPrincipalName=o,e.objectId=o,e.objectType=3),t&&this.findUserObjectIds(e)}return!this.isUserRepeated(e)&&this.isValidObjectType(e)},t.prototype.findUsers=function(e){var o=this,i=_.trim(e),t=this.services.promiseFactory.defer();if(!i)return t.resolve([]),t.promise;var n=this.allowSecurityGroups||this.allowUnifiedGroups||this.allowEmailEnabledSecurityGroups?this.blockUsers?2:3:1,e=!!this.includeGuests;return this.findUsersPromise=this.services.userDirectoryHttpService.findUsers(i,n,r.constants.emailsListFindUsersLimit,e).toPromise(),this.findUsersPromise.then((function(e){e.data?(e=_.reduce(e.data,(function(e,t){return o.isValidObjectType(t)&&(t.aadAppId?t.userAdditionalDetailsForAutoComplete="AppID: "+t.aadAppId:t.userAdditionalDetailsForAutoComplete=t.userPrincipalName,t.searchString=i,t.displayName&&t.searchString&&t.displayName.toLocaleLowerCase()===t.searchString.toLocaleLowerCase()?e.splice(0,0,t):e.push(t)),e}),[]),t.resolve(e)):t.reject(),o.findUsersPromise=null}),(function(){t.reject(),o.findUsersPromise=null})),t.promise},t.prototype.onTagAddedWithoutError=function(e){this.viewModel.hasValidationError&&this.clearInvalidUserError(),this.onTagAdded&&this.onTagAdded({$tag:e})},t.prototype.clearInvalidUserError=function(){var e=this.viewModel;e.hasValidationError=!1,e.errorMessage=""},t.prototype.resetViewModel=function(){var e=this.viewModel;return e.validEmailsList=[],e.validObjectIds=[],this.clearInvalidUserError(),e},t.prototype.initializeViewModel=function(e){var t=this;e&&(e.validationTrigger=function(){return t.validationTrigger()})},t.prototype.isUserRepeated=function(t){var e=_.filter(this.viewModel.inputUserList,(function(e){return e.userPrincipalName&&e.userPrincipalName===t.userPrincipalName||e.objectId&&e.objectId===t.objectId}));return!_.isEmpty(e)},t.prototype.isValidObjectType=function(e){return 2===e.objectType?e.isSecurityGroup?this.allowSecurityGroups||this.allowEmailEnabledSecurityGroups&&3===e.groupType:2===e.groupType?this.allowDistributionLists:this.allowUnifiedGroups:1===e.objectType&&e.aadAppId?this.allowServicePrincipals:(1===e.objectType||3===e.objectType)&&!this.blockUsers},t.prototype.findUserObjectIds=function(i){var n=this;this.findingUsers.push({name:i.userPrincipalName,status:!0}),this.isFindingUsers=!0,this.findUsers(i.userPrincipalName).then((function(e){var t,o;0===e.length?(o=_.findIndex(n.findingUsers,(function(e){return e.name===i.userPrincipalName})),n.findingUsers[o].status=!1,n.isFindingUsers=_.some(n.findingUsers,(function(e){return!0===e.status})),n.showInvalidUserError(i)):1===e.length&&(t=_.findIndex(n.viewModel.inputUserList,(function(e){return e.userPrincipalName===i.userPrincipalName})),n.viewModel.inputUserList[t].objectId=e[0].objectId,n.viewModel.inputUserList[t].objectType=e[0].objectType,o=_.findIndex(n.findingUsers,(function(e){return e.name===i.userPrincipalName})),n.findingUsers[o].status=!1,n.isFindingUsers=_.some(n.findingUsers,(function(e){return!0===e.status})),n.isFindingUsers||(n.findingUsers=[]))}))},e=t;function t(e,t){this.services=t,this.isUserExisting=!0,this.checkValidOrgUser=!1,this.isFindingUsers=!1,this.findingUsers=[]}s.EmailsListController=e})((r=e.common||(e.common={})).controllers||(r.controllers={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).EmailsList={templateUrl:"components/emailsList/emailsList.html",bindings:{viewModel:"<",onTagAdded:"&?",onTagRemoved:"&?",allowDistributionLists:"<?",allowUnifiedGroups:"<?",allowEmailEnabledSecurityGroups:"<?",allowSecurityGroups:"<?",allowServicePrincipals:"<?",allowObjectIds:"<?",blockUsers:"<?",includeGuests:"<?",placeholder:"<?",maxTags:"<?",arialabel:"@?",arialabelledby:"@?",ariadescribedby:"@?",ariarequired:"<?",checkValidOrgUser:"<?",isFindingUsers:"=?"},controller:e.createController(e.controllers.EmailsListController)}})(powerbi=powerbi||{}),(function(e){(e=(e=(e=e.common||(e.common={})).viewModels||(e.viewModels={})).IconSize||(e.IconSize={}))[e.Micro=0]="Micro",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large"})(powerbi=powerbi||{}),(function(e){!(function(t){var e,o,i;function n(e,t){this.services=t}e=t.controllers||(t.controllers={}),o=jsCommon.EnumExtensions,i=jsCommon.StringExtensions,n.createOptions=function(){return{additionalServices:["localizationService"]}},n.prototype.onIconSelected=function(e){this.config,this.config.onIconSelected(e)},n.prototype.getIconSize=function(e){return null==e.size?"medium":o.toString(t.viewModels.IconSize,e.size).toLocaleLowerCase()},n.prototype.getIconStaticClass=function(e){return _.isEmpty(e.cssClass)?this.getIconSize(e):i.format("{0} {1}",e.cssClass,this.getIconSize(e))},n.prototype.isSelected=function(e){return this.config,this.config.isIconSelected(e)},n.prototype.getThemeColorLocalizedNames=function(e,t){return this.services.localizationService.format("ColorPicker_ThemeColors_Series",[t,e])},e.IconSelectorController=n})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).IconSelector={templateUrl:"components/iconSelector/iconSelector.html",bindings:{config:"<",icons:"<"},controller:e.createController(e.controllers.IconSelectorController)}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).LazyIcon={templateUrl:"components/lazyIcon/lazyIcon.html",bindings:{src:"<",placeholder:"<",placeholderSize:"<"}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).LegacyScopedRoot={transclude:!0,template:"<ng-transclude></ng-transclude>",controller:["scopedProvider","$scope","$element",function(e,t,o){o=o.attr("scoped-provider-instance-name"),e.attachTo(t,o)}]}})(powerbi=powerbi||{}),(function(e){!(function(e){var i,o;function t(e,t){this.services=t,this.unregister=i.getInstance().register(this.services.$element.get(0)),this.focusFinder=new o}e=e.controllers||(e.controllers={}),i=jsCommon.FocusManager,o=jsCommon.DomOrderFocusFinder,t.createOptions=function(){return{additionalServices:["modalDialogService","$element"]}},t.prototype.$postLink=function(){this.setFocus()},t.prototype.$onDestroy=function(){this.unregister&&this.unregister()},t.prototype.setFocus=function(){var t=this,o=setInterval((function(){var e;t.services.$element.is(":visible")&&(clearInterval(o),(e=t.focusFinder.findNext(t.services.$element.get(0),!0,!0))&&i.focus(e))}),100)},t.prototype.onKeydown=function(e){27===e.which&&this.onCloseButtonClick()},t.prototype.onCloseButtonKeydown=function(e){13!==e.which&&32!==e.which||this.onCloseButtonClick()},t.prototype.onCloseButtonClick=function(){this.isDismissable()&&(this.onCloseClick?this.onCloseClick():this.services.modalDialogService.close())},t.prototype.isDismissable=function(){return!1!==this.dismissable},e.DialogFrameController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).DialogFrame={controller:e.createController(e.controllers.DialogFrameController),templateUrl:"components/modalDialog/dialogFrame/dialogFrame.html",bindings:{onCloseClick:"&?",dismissable:"<?"},transclude:{dialogHeader:"dialogHeader",dialogBody:"dialogBody",dialogFooter:"dialogFooter"}}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.services=t}e=e.controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["modalDialogService"]}},t.prototype.close=function(){this.services.modalDialogService.close()},e.FeatureNotSupportedDialogController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).FeatureNotSupportedDialog={controller:e.createController(e.controllers.FeatureNotSupportedDialogController),templateUrl:"components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialog.html",bindings:{message:"<",titleText:"<",learnMoreUrl:"<?"}}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e){this.modalDialogService=e}e=e.dialogs||(e.dialogs={}),t.prototype.show=function(e,t,o){return this.modalDialogService.showHostModalDialog({bindings:{titleText:e,message:t,learnMoreUrl:o},definitionTemplateCachePath:"components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialogDefinition.html",dialogName:"FeatureNotSupported"})},e.FeatureNotSupportedDialogBuilder=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){}e=e.controllers||(e.controllers={}),t.createOptions=function(){return{scopedProviderInstanceName:"HostDialog"}},e.HostDialogController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).HostDialogContainer={templateUrl:"components/modalDialog/hostDialogContainer/hostDialogContainer.html",bindings:{},transclude:!0,controller:e.createScopedRootController(e.controllers.HostDialogController)}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.services=t}e=e.controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["localizationService","modalDialogService"]}},t.prototype.$onInit=function(){var t=this;this.config.messageText=this.services.localizationService.getOptional(this.config.messageText)||this.config.messageText,this.config.cancelButtonText=this.services.localizationService.getOptional(this.config.cancelButtonText)||this.config.cancelButtonText,this.config.okButtonText=this.services.localizationService.getOptional(this.config.okButtonText)||this.config.okButtonText,this.config.titleText=this.services.localizationService.getOptional(this.config.titleText)||this.config.titleText,_.isEmpty(this.config.additionalMessageTexts)||(this.config.additionalMessageTexts=_.map(this.config.additionalMessageTexts,(function(e){return t.services.localizationService.getOptional(e)||e})))},t.prototype.ok=function(){this.services.modalDialogService.close(0)},t.prototype.cancel=function(){this.services.modalDialogService.close(1)},e.MessageDialogController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).MessageDialog={templateUrl:"components/modalDialog/messageDialog/messageDialog.html",bindings:{config:"<"},controller:e.createController(e.controllers.MessageDialogController)}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e){this.modalDialogService=e}e=e.dialog||(e.dialog={}),t.prototype.show=function(e,t){return this.modalDialogService.showHostModalDialog({dialogName:e,definitionTemplateCachePath:"components/modalDialog/messageDialog/messageDialogDefinition.html",bindings:{config:t}})},e.MessageDialogBuilder=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e){var o=this;this.restrict="E",this.replace=!0,this.transclude=!0,this.scope={ngScrollbarsConfig:"<"},this.template='<div class="scrollbar-inner" drag-scroll ng-transclude></div>',this.link=function(e,t){jsCommon.Zone.runOutsideAngular((function(){o.$timeout((function(){t.scrollbar(e.ngScrollbarsConfig)})),e.$on("$destroy",(function(){t.scrollbar("destroy")}))}))},this.$timeout=e}e=e.directives||(e.directives={}),t.scrollVertical=function(e,t){var o,i,n;e&&t&&(o=$(e),i=$(t),n=o.scrollTop(),e=o.offset(),(t=i.offset()).top<e.top?o.scrollTop(n-(e.top-t.top)):t.top+i.height()>e.top+o.height()&&o.scrollTop(n+t.top+i.height()-e.top-o.height()))},e.NgScrollbars=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(i){!(function(e){var o;function t(){}e=e.controllers||(e.controllers={}),o=i.common.models.EmailsListModel,t.prototype.$onInit=function(){var e=this;this.cacheEmailsIfNeeded(),this.ngModel.$render=function(){return e.cacheEmailsIfNeeded()}},Object.defineProperty(t.prototype,"isSharedWithOrg",{get:function(){return"all"===this.getModel().sharedWith},set:function(e){var t=this.getModel();e?(this.cacheEmailsIfNeeded(),t.sharedWith="all"):t.sharedWith=this.emails||new o},enumerable:!1,configurable:!0}),t.prototype.getModel=function(){return this.ngModel.$viewValue},t.prototype.cacheEmailsIfNeeded=function(){var e=this.getModel().sharedWith;e instanceof o&&(this.emails=e)},e.ShareAccessController=t})(i.common||(i.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).ShareAccess={controller:e.createController(e.controllers.ShareAccessController),templateUrl:"components/shareAccess/shareAccess.html",require:{ngModel:"ngModel"}}})(powerbi=powerbi||{}),(function(e){!(function(e){function t(e,t){this.scope=e,this.services=t}e=e.controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["$element","$attrs","$transclude"]}},t.prototype.transcludeContent=function(){var o=this;this.services.$element.empty(),this.transcludedScope&&this.transcludedScope.$destroy(),this.services.$transclude((function(e,t){o.services.$element.append(e),o.transcludedScope=t}))},t.prototype.$onInit=function(){var o=this,e=this.services.$attrs.trigger;this.scope.$parent.$watch(e,(function(e,t){e!==t&&o.transcludeContent()})),this.transcludeContent()},e.TriggeredRecompileController=t})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).TriggeredRecompile={transclude:!0,controller:e.createController(e.controllers.TriggeredRecompileController)}})(powerbi=powerbi||{}),(function(d){var u,p,m;u=d.common||(d.common={}),p=window,m=jsCommon.QueryStringUtil,u.getFilePath=function(e,t,o,i){void 0===o&&(o=!0);var n,r,a=d.getBuild(),s="";switch(o&&(s=m.getQueryStringValue("unmin")?"":".min"),t){case 0:n="scripts",r=".js";break;case 1:n="styles",r=".css";break;case 2:n="externals",r=".js";break;case 3:n="externals",r=".css"}var l=[a];if("True"===p.useCDN&&p.hashMappings){var c=void 0,c=(i?[i,n,""+e+s+r]:[n,""+e+s+r]).join("/"),o=u.createRtl();!o.isRtlLayout||1!==t&&3!==t||(c=-1<c.indexOf(".min")?c.replace(".min.css",".rtl.min.css"):c.replace(".css",".rtl.css"));a=p.hashMappings[c];if(a||!o.isRtlLayout||1!==t&&3!==t||(c=c.replace(".rtl.min.css",".min.rtl.css"),a=p.hashMappings[c]),a)return[l=p.cdnUrl,a.substring(0,a.indexOf(r))].join("/")}return i&&l.push(i),__spreadArray(__spreadArray([],l||[]),[n,""+e+s]).join("/")}})(powerbi=powerbi||{}),(function(n){var e;(function(e){var t=n.common.controllers.TransformElement;e.TransformSelector="transform";var o=(i.createOptions=function(){return{additionalServices:["$element","ngZone","platformCapabilities"]}},i.prototype.$postLink=function(){this.position&&this.updatePosition(this.position),this.attachHandlers&&this.updateTransformElement()},i.prototype.$onDestroy=function(){this.transformElement&&this.transformElement.destroy()},i.prototype.$onChanges=function(e){var t,o,i=!1;e.autoScrollSelector&&(o=(t=e.autoScrollSelector).currentValue,t.previousValue&&(this.autoScrollElement=void 0),o&&(this.autoScrollElement=$(this.services.$element).closest(o),this.autoScrollElement),i=!e.autoScrollSelector.isFirstChange()),e.attachHandlers&&e.attachHandlers.currentValue&&!e.attachHandlers.isFirstChange()&&(i=!0),e.position&&!e.position.isFirstChange()&&this.updatePosition(e.position.currentValue),e.transformOptions&&!e.transformOptions.isFirstChange()&&(i=!0),this.attachHandlers&&i&&this.updateTransformElement()},i.prototype.updateTransformElement=function(){var e=__assign(__assign({},this.transformOptions),{supportsPointerCapture:this.services.platformCapabilities.supportsPointerCapture,restrictDraw:this.restrictDraw});this.autoScrollElement&&(e.autoScrollParent=this.autoScrollElement),this.transformElement?this.transformElement.updateOptions(e):this.transformElement=new t(this.services.$element,this.services.ngZone,e)},i.prototype.updatePosition=function(e){var t=[];e.angle&&t.push("rotate("+e.angle+"deg)"),t.push("translate("+e.x+"px, "+e.y+"px)"),this.services.$element.height(e.height).width(e.width).css("transform",t.join(" ")).zIndex(e.z)},i);function i(e,t){this.services=t}e.TransformController=o})((e=n.common||(n.common={})).components||(e.components={}))})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).BindAriaLabelAndTooltip=function(){this.restrict="A",this.replace=!1,this.link=function(e,t,o){var i=e.$watch(o.bindAriaLabelAndTooltip,(function(e){t.attr("aria-label",e||"").attr("title",e||"")}));e.$on("$destroy",(function(){i()}))}}})(powerbi=powerbi||{}),(function(i){(i.common||(i.common={})).createDataReaderProvider=function(e,t,o){return i.data.createDataReaderProvider(i.data.createDataReaderFactory(e,t),o)}})(powerbi=powerbi||{}),(function(e){!(function(e){var a=(t.prototype.update=function(e){for(var t=0,o=this.mixins;t<o.length;t++)o[t].update(e)},t.prototype.destroy=function(){for(var e=0,t=this.mixins;e<t.length;e++){var o=t[e];o.destroy&&o.destroy()}},t);function t(e){this.mixins=e}e.MixinProvider=a,e.createMixinsProvider=function(e,t){return new o(e,t)};var o=(i.prototype.get=function(e){var t=this.instances[e];if(void 0!==t)return t;for(var o=[],i=0,n=this.factories[e]||[];i<n.length;i++){var r=n[i];o.push(this.instantiateMixin(r))}return t=new a(o),this.instances[e]=t},i.prototype.instantiateMixin=function(e){var t=e.ng,o={};if(!_.isEmpty(t))for(var i=this.$injector,n=0,r=t;n<r.length;n++){var a=r[n],s=i.get(a);o[a]=s}return e.fn(o)},i);function i(e,t){this.$injector=e,this.factories=t,this.instances=[]}})(e.common||(e.common={}))})(powerbi=powerbi||{}),(function(t){!(function(){(t.common||(t.common={})).createOptionsDialogBuilder=function(e,t,o){return new i(e,t,o)};var i=(e.prototype.show=function(e,t,o,i,n,r,a){var s=this.rootScope.$new(!0);if(_.isEmpty(i))return this.promiseFactory.resolve(s);null==a||a>i.length?s.selected=0:s.selected=a,s.options=_.map(i,(function(e){return e.name}));r=[new InJs.ModalDialogAction(n,function(){var e=i[s.selected].action;s.closeDialog(),setTimeout((function(){return e()}))}),new InJs.ModalDialogAction(r,function(){s.closeDialog()})];return this.modalDialogService.showLegacyWebModalDialog({dialogName:e,isDismissable:!0,scope:s,template:"<options-modal-dialog></options-modal-dialog>",dialogActions:r,containerCssClass:o,htmlMessageText:t})},e);function e(e,t,o){this.modalDialogService=e,this.rootScope=t,this.promiseFactory=o}})()})(powerbi=powerbi||{}),(function(e){var t;function o(){return e.ensurePowerbiCommon().isCurrentContextRtl}(t=e.common||(e.common={})).getIsCurrentContextRtl=o,t.createRtl=function(){return{isRtlLayout:"True"===o()}}})(powerbi=powerbi||{}),(function(o){!(function(P){var e=o.PbiPromise;P.createScopedLazyProvider=function(e,t,o,i,n,r){var a=new s(e,t,o,i,n,r,{});return function(e){return a.get(e)}};var s=(t.prototype.get=function(E){return __awaiter(this,void 0,e,(function(){var t,o,i,n,r,a,s,l,c,d,u,p,m,h,g,f,v,y,b,S,w,C,T,D=this;return __generator(this,(function(e){switch(e.label){case 0:if((a=P.LazyScopedInterop.isInteropServiceName(E,P.LazyScopedInterop.ModernToLegacy))&&(E=P.LazyScopedInterop.getInteropServiceName(E,P.LazyScopedInterop.ModernToLegacy)),void 0!==(t=this.instances[E]))return[2,t.promise];if(t=this.instances[E]=this.promiseFactory.defer(!0),o=this.factories[E])return[3,5];if(a)return[3,4];if(!(i=this.scoped.get("lazyScopedProviderModern")))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,i.get(P.LazyScopedInterop.makeInteropServiceName(E,P.LazyScopedInterop.LegacyToModern))];case 2:return(s=e.sent())?(t.resolve(s),[2,s]):[3,4];case 3:return e.sent(),[3,4];case 4:return t.reject(),[2,t.promise];case 5:if(n=o.ng,r=_.size(n),a=o.scoped,s=_.size(a),b=o.scopedModular,S=_.size(b),l=new Array(r+s+S),c=0,r)for(d=this.$inj,u=0,p=n;u<p.length;u++)y=p[u],m=void 0,m="$scope"===y?this.$scope:d.get(y,E),l[c++]=m;if(s)for(h=this.scoped,g=this.$scope,f=0,v=a;f<v.length;f++)y=v[f],l[c++]=h.get(y,g);if(!S)return[3,9];S=_.map(b,(function(e){return D.get(e)})),b=0,S=S,e.label=6;case 6:return b<S.length?(T=S[b],w=l,C=c++,[4,T]):[3,9];case 7:w[C]=e.sent(),e.label=8;case 8:return b++,[3,6];case 9:return[4,this.loader.require(o.source)];case 10:return T=e.sent(),t.resolve(o.fn.apply(o,__spreadArray([T],l||[]))),[2,t.promise]}}))}))},t);function t(e,t,o,i,n,r,a){this.loader=e,this.$inj=t,this.scoped=o,this.$scope=i,this.promiseFactory=n,this.factories=r,this.instances=a}})(o.common||(o.common={}))})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(e){((e=(e=e.a11y||(e.a11y={})).util||(e.util={})).FocusUtility||(e.FocusUtility={})).isFocusInTree=function(e){var t=$(document.activeElement);return t.is(e)||0<t.closest(e).length}})(powerbi=powerbi||{}),(function(e){var i;e=(e=e.a11y||(e.a11y={})).directives||(e.directives={}),i=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],e.AccessibleClick=function(e){var n=this;this.$parse=e,this.retrict="A",this.scope=!1,this.compile=function(e,t){var r=n.$parse(t.accessibleClick);return function(t,n){n.on("click",(function(e){t.$apply((function(){return r(t,{$event:e})}))})),_.includes(i,n[0].nodeName)||n.on("keydown",(function(e){32!==e.keyCode&&13!==e.keyCode||!n.is(document.activeElement)||(e.preventDefault(),t.$apply((function(){return r(t,{$event:e})})))}))}}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).AlertOnEnter=function(e){var i=this;this.focusTracker=e,this.retrict="A",this.link=function(e,t,n){var n=n.alertOnEnter,r=i.focusTracker.announceOnFocusTransition(n,t.get(0),"inward","assertive",!1);e.$on("$destroy",(function(){r.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).AlertOnExit=function(e){var i=this;this.focusTracker=e,this.retrict="A",this.link=function(e,t,n){var n=n.alertOnExit,r=i.focusTracker.announceOnFocusTransition(n,t.get(0),"outward","assertive",!1);e.$on("$destroy",(function(){r.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).FocusOn=function(){this.restrict="A",this.link=function(e,n,t){var r=e.$watch(t.focusOn,(function(e,t){void 0!==e&&setTimeout((function(){jsCommon.FocusManager.focus(n[0])}),0)}));e.$on("$destroy",(function(){r()}))}}})(powerbi=powerbi||{}),(function(e){!(function(e){var s;function t(e,t){var o=this;this.$parse=e,this.focusTrapService=t,this.restrict="A",this.link=function(t,e,n){var r=e;r.$$trapDestroyed=!1,n.focusOnEscape&&(r.$$escapeHandler=o.$parse(n.focusOnEscape),r.$$keydownHandler=function(e){return o.handleKeyEvent(e,t,r)},r.on(s.keyDownEventName,r.$$keydownHandler));var i=t.$watch((function(){return _.some(e.find(":tabbable"))}),(function(e,t){!0===e&&(o.focusTrapService.registerFocusTrap(r),i())}));r.on("$destroy",(function(){return o.destroy(r)}))}}e=e.directives||(e.directives={}),s=jsCommon.DOMConstants,t.prototype.destroy=function(e){e.$$trapDestroyed||(e.$$keydownHandler&&e.off(s.keyDownEventName,e.$$keydownHandler),this.focusTrapService.unregisterFocusTrap(e),e.$$trapDestroyed=!0)},t.prototype.handleKeyEvent=function(e,t,n){27===e.keyCode&&(n.$$escapeHandler&&t.$evalAsync(n.$$escapeHandler),this.destroy(n))},e.FocusTrap=t})(e.a11y||(e.a11y={}))})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).KeyboardShortcuts=function(e){var o=this;this.shortcutsService=e,this.restrict="A",this.link=function(e,t,n){var r=jsCommon.FocusManager.setFocusOnPreviousElementOnDestroy(t,!0,!0);t.on("$destroy",(function(){return r()}));var i=o.shortcutsService.createElementShortcut(n.keyboardShortcuts,t.get(0));i&&(o.shortcutsService.registerShortcut(i),e.$on("$destroy",(function(){return o.shortcutsService.unregisterShortcut(i)})))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).OnFocusEnter=function(e,t){var o=this;this.$parse=e,this.focusTracker=t,this.retrict="A",this.link=function(e,t,n){var r=o.$parse(n.onFocusEnter),i=o.focusTracker.onFocusTransition(t.get(0),"inward").subscribe((function(){return e.evalAsync(r)}));e.$on("$destroy",(function(){i.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).OnFocusExit=function(e,t){var o=this;this.$parse=e,this.focusTracker=t,this.retrict="A",this.link=function(e,t,n){var r=o.$parse(n.onFocusExit),i=o.focusTracker.onFocusTransition(t.get(0),"outward").subscribe((function(){return e.evalAsync(r)}));e.$on("$destroy",(function(){i.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).PbiAutoFocus=function(e){var o=this;this.$timeout=e,this.restrict="A",this.link=function(e,r,t){var i=e.$watch((function(){return r.is(":tabbable")||0<r.find(":tabbable").length}),(function(e,t){var n;!0===e&&((n=(r.is(":tabbable")?r:r.find(":tabbable")).get(0))&&o.$timeout((function(){return n.focus()})),i())}))}}})(powerbi=powerbi||{}),(function(e){var t;t=e.a11y||(e.a11y={}),angular.module("powerbi.a11y",[]),t.PbiA11yBaseBlockDefinitions=[{name:"AccessibleClick",dependencies:["$parse"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.AccessibleClick},{name:"FocusOn",blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.FocusOn},{name:"FocusTrap",dependencies:["$parse","focusTrapService"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.FocusTrap},{name:"PbiAutoFocus",dependencies:["$timeout"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.PbiAutoFocus},{name:"AlertOnEnter",dependencies:["focusTracker"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.AlertOnEnter},{name:"AlertOnExit",dependencies:["focusTracker"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.AlertOnExit},{name:"OnFocusEnter",dependencies:["$parse","focusTracker"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.OnFocusEnter},{name:"OnFocusExit",dependencies:["$parse","focusTracker"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.OnFocusExit},{name:"KeyboardShortcuts",dependencies:["shortcutsService"],blockType:1,consumerHostFlags:32767,factory:e.a11y.directives.KeyboardShortcuts}]})(powerbi=powerbi||{});;
"use strict";var powerbi,__awaiter=this&&this.__awaiter||function(e,n,s,l){return new(s=s||Promise)(function(i,t){function o(e){try{r(l.next(e))}catch(e){t(e)}}function a(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,a)}r((l=l.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(i,o){var a,r,n,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,r&&(n=2&t[0]?r.return:t[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,t[1])).done)return n;switch(r=0,(t=n?[2&t[0],n.value]:t)[0]){case 0:case 1:n=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(n=0<(n=s.trys).length&&n[n.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!n||t[1]>n[0]&&t[1]<n[3])){s.label=t[1];break}if(6===t[0]&&s.label<n[1]){s.label=n[1],n=t;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(t);break}n[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(i,s)}catch(e){t=[6,e],r=0}finally{a=n=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}};!(function(e){((e=e.connectivity||(e.connectivity={})).htmlTemplate||(e.htmlTemplate={})).put=function(e){e.put("components/authenticationDialog/authenticationDialog.html",'<modal-dialog class="authDialog" auth-dialog="$ctrl.viewModel" view-model="$ctrl.dialogModel" ng-if="$ctrl.viewModel.showModalDialog && !$ctrl.viewModel.showPlainUI" on-confirm-action="$ctrl.confirmDialog()" on-cancel-action="$ctrl.closeDialog()" on-close-action="$ctrl.closeDialog()"><label class="dialogTitle trimmedTextWithEllipsis" ng-bind="$ctrl.viewModel.dialogTitle" title="{{$ctrl.viewModel.dialogTitle}}"></label><authentication-dialog-body view-model="$ctrl.dialogBodyModel"></authentication-dialog-body></modal-dialog><div ng-if="$ctrl.viewModel.showModalDialog && $ctrl.viewModel.showPlainUI" class="authDialog plain"><authentication-dialog-body view-model="$ctrl.dialogBodyModel"></authentication-dialog-body><section ng-if="($ctrl.viewModel.learnMoreUrl && !$ctrl.viewModel.showTemplateAppsUI)" class="learnMoreLink"><label localize="GetData_NeedHelpConnecting"></label><a ng-href="{{$ctrl.viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></section><section ng-class="$ctrl.viewModel.showTemplateAppsUI ? \'template-app-mode-footer\' : \'action\'"><div class="go-to-app-doc" ng-if="($ctrl.viewModel.learnMoreUrl && $ctrl.viewModel.showTemplateAppsUI)"><a href="{{$ctrl.viewModel.learnMoreUrl}}" target="_blank" localize="GoToTheAppDoc" ng-click="$ctrl.sendNavigateToDocEvent()"></a><i class="glyphicon glyph-mini pbi-glyph-uprightarrow"></i></div><div ng-class="{\'template-app-mode-buttons-section\': $ctrl.viewModel.showTemplateAppsUI}"> <button ng-if="::$ctrl.viewModel.showBackButton" ng-click="$ctrl.goBack()" localize="Generic_Back" class="pbi-modern-button secondaryBtn back"></button> <button ng-click="$ctrl.confirmDialog()" ng-disabled="$ctrl.viewModel.isAuthenticating" class="pbi-modern-button primaryBtn sign-in">{{$ctrl.confirmDialogButtonText}}</button> <button ng-click="$ctrl.cancelDialog()" localize="Cancel_ButtonText" class="pbi-modern-button secondaryBtn cancelBtn cancel"></button></div></section></div>'),e.put("components/authenticationDialogBody/authenticationDialogBody.html",'<inline-name-value-pairs name-value-pairs="$ctrl.viewModel.errorDetails()" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="$ctrl.viewModel.authDialogModel.showError && !$ctrl.viewModel.authDialogModel.showTemplateAppsUI"><label ng-bind="$ctrl.viewModel.errorMessage()"></label></inline-name-value-pairs><section class="authForm" ng-class="::{\'template-apps-mode\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}" ng-style="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI ? {\'height\': $ctrl.calculateFormHeight() + \'px\'} : {}"><inline-name-value-pairs name-value-pairs="$ctrl.viewModel.errorDetails()" show-title="true" detail-expand="false" class="expandableBlockWarning inline-warning" ng-show="$ctrl.viewModel.authDialogModel.showError && $ctrl.viewModel.authDialogModel.showTemplateAppsUI"><label ng-bind="$ctrl.viewModel.errorMessage()"></label></inline-name-value-pairs><inline-message use-error-icon class="warning" ng-show="$ctrl.viewModel.showOAuthError()"><span ng-bind="$ctrl.viewModel.oAuthErrorMessage()"></span></inline-message><div class="proxyModelInfo" ng-if="::$ctrl.isProxyModel()"><label localize="AuthDialog_ProxyModelsText"></label><a href="https://go.microsoft.com/fwlink/?linkid=861818" localize="Generic_LearnMore" target="_blank"></a></div><section ng-class="::{\'template-apps-banner\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}"><section class="fields"><h2 ng-if="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI"> {{::$ctrl.viewModel.authDialogModel.connectingToLabelText}}</h2><section class="disabledField" ng-repeat="property in $ctrl.viewModel.authDialogModel.datasource.connectionStringGeneralProperties"> <span>{{property.name}}</span> <input type="text" class="textBox" value="{{property.value}}" aria-label="{{property.name}}" tabindex="-1" ng-disabled="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI"/></section></section><section ng-if="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI" class="illustration-section"> <img class="illustration" src="{{$ctrl.templateAppImgUrl}}"></section></section><div ng-class="::{\'scrollable\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}"><section class="group" ng-if="$ctrl.viewModel.authDialogModel.datasource.credentialTypesNames"><label id="authLabel" localize="AuthDialog_FieldName_Authentication"></label><div class="select-box"> <select ng-class="::{\'template-apps-select\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}" ng-model="$ctrl.viewModel.authDialogModel.selectedAuthenticationIndex" ng-change="$ctrl.customizeAuthDialog()" aria-labelledby="authLabel" ng-options="$ctrl.viewModel.authDialogModel.datasource.credentialTypesNames.indexOf(credentialType) as credentialType for credentialType in $ctrl.viewModel.authDialogModel.datasource.credentialTypesNames" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner || $ctrl.disableAuthSelection"></select> <button ng-if="$ctrl.disableAuthSelection" ng-click="$ctrl.enableAuthSelection()" localize-attr="{\'aria-label\': \'AuthDialog_Edit_Auth_AltText\'}" class="glyphicon pbi-glyph glyph-small edit-toggle pbi-glyph-edit" localize-tooltip="AuthDialog_Edit_Auth_Tooltip"></button></div></section><section class="editableField1" ng-if="$ctrl.viewModel.authDialogModel.showEditableField1"> <span>{{$ctrl.viewModel.authDialogModel.editableField1Label}}</span> <input type="text" class="textBox" aria-label="{{viewModel.editableField1Label}}" value="{{$ctrl.viewModel.authDialogModel.editableField1Value}}" ng-model="$ctrl.viewModel.authDialogModel.editableField1Value" ng-change="$ctrl.dismissSpinnerError()" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner" focus-on="true" required/></section><section class="editableField2" ng-if="$ctrl.viewModel.authDialogModel.showEditableField2"> <span>{{$ctrl.viewModel.authDialogModel.editableField2Label}}</span> <input type="password" class="textBox" aria-label="{{viewModel.editableField2Label}}" value="{{$ctrl.viewModel.authDialogModel.editableField2Value}}" ng-model="$ctrl.viewModel.authDialogModel.editableField2Value" ng-change="$ctrl.dismissSpinnerError()" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner" required/></section><section class="privacyLevelField group" ng-if="!$ctrl.isRDLReport() && $ctrl.viewModel.authDialogModel.privacyLevelOptions"><label id="privacylevellabel" localize="AuthDialog_FieldName_PrivacyLevel"></label><a ng-if="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI" class="learn-more-link" target="_blank" href="https://go.microsoft.com/fwlink/?linkid=2137668" localize="LearnMore"></a><div class="select-box"> <select ng-class="::{\'template-apps-select\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}" ng-model="$ctrl.viewModel.authDialogModel.selectedPrivacyLevelIndex" ng-change="$ctrl.customizeAuthDialog()" aria-labelledby="privacylevellabel" ng-options="$ctrl.viewModel.authDialogModel.privacyLevelOptions.indexOf(privacyLevel) as privacyLevel for privacyLevel in $ctrl.viewModel.authDialogModel.privacyLevelOptions" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner || $ctrl.viewModel.authDialogModel.disablePrivacySelection"></select> <button ng-if="$ctrl.viewModel.authDialogModel.disablePrivacySelection" localize-attr="{\'aria-label\': \'AuthDialog_Edit_Privacy_AltText\'}" ng-click="$ctrl.enablePrivacySelection()" class="glyphicon pbi-glyph glyph-small edit-toggle pbi-glyph-edit pbi-focus-outline" localize-tooltip="AuthDialog_Edit_Privacy_Tooltip"></button></div></section><section class="singleSignOnSettingCheckBox" ng-if="$ctrl.viewModel.authDialogModel.showSingleSignOn"><pbi-checkbox id="singleSignOnForCloudDQ" ng-model="$ctrl.viewModel.authDialogModel.isSingleSignOnEnabled" no-label></pbi-checkbox><div><label localize="AuthDialog_Checkbox_SingleSignOnText" for="singleSignOnForCloudDQ_pbi"></label><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=861818" localize="LearnMore"></a></div></section><div class="waitingMessageWhenApplyOAuthCredential" ng-if="$ctrl.viewModel.authDialogModel.showWaitingMessageForOAuth"></div><div class="detailsMessage" ng-if="$ctrl.viewModel.authDialogModel.showDetailsMessage"> <span>{{$ctrl.viewModel.authDialogModel.detailsMessage}}</span></div><div class="singleSignOnSettingCheckBox" ng-if="$ctrl.viewModel.authDialogModel.skipTestConnectionOption"><pbi-checkbox id="skipTestConnection" ng-model="$ctrl.viewModel.authDialogModel.skipTestConnection" label="AuthDialog_Checkbox_SkipTestConnection"></pbi-checkbox></div></div><spinner class="signInSpinner" ng-show="$ctrl.viewModel.authDialogModel.showSpinner"></spinner></section>'),e.put("views/authDialogBodyView.html",'<div><inline-name-value-pairs name-value-pairs="errorDetails" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showError"><span ng-bind="errorMessage"></span></inline-name-value-pairs><div class="authForm"><inline-message use-error-icon class="warning" ng-show="showOAuthError"><span ng-bind="oAuthErrorMessage"></span></inline-message><inline-message use-error-icon class="inlineWarning" ng-show="showOAuthNotSupported"><span localize="OAuth_Not_Supported_Error"></span></inline-message><div class="disabledField" ng-repeat="property in viewModel.datasource.connectionStringGeneralProperties"> <label>{{property.name}}</label> <input type="text" aria-label="{{property.name}}" class="textBox" value="{{property.value}}"/></div><div class="group" ng-if="viewModel.datasource.credentialTypesNames"><label id="authlabel" localize="AuthDialog_FieldName_Authentication"></label> <select ng-model="viewModel.selectedAuthenticationIndex" ng-change="customizeAuthDialog()" aria-labelledby="authlabel" ng-options="viewModel.datasource.credentialTypesNames.indexOf(credentialType) as credentialType for credentialType in viewModel.datasource.credentialTypesNames" ng-disabled="viewModel.showSpinner"></select></div><div class="editableField1" ng-if="viewModel.showEditableField1"> <span>{{viewModel.editableField1Label}}</span> <input type="text" class="textBox" aria-label="{{viewModel.editableField1Label}}" value="{{viewModel.editableField1Value}}" ng-model="viewModel.editableField1Value" ng-change="dismissSpinnerError()" ng-disabled="viewModel.showSpinner" focus-on="true" required/></div><div class="editableField2" ng-if="viewModel.showEditableField2"> <span>{{viewModel.editableField2Label}}</span> <input type="password" class="textBox" aria-label="{{viewModel.editableField2Label}}" value="{{viewModel.editableField2Value}}" ng-model="viewModel.editableField2Value" ng-change="dismissSpinnerError()" ng-disabled="viewModel.showSpinner" required/></div><div class="privacyLevelField group" ng-if="viewModel.privacyLevelOptions"><label id="privacylevellabel" localize="AuthDialog_FieldName_PrivacyLevel"></label> <select ng-model="viewModel.selectedPrivacyLevelIndex" ng-change="customizeAuthDialog()" aria-labelledby="privacylevellabel" ng-options="viewModel.privacyLevelOptions.indexOf(privacyLevel) as privacyLevel for privacyLevel in viewModel.privacyLevelOptions" ng-disabled="viewModel.showSpinner"></select></div><div class="singleSignOnSettingCheckBox" ng-if="viewModel.showSingleSignOn"> <input id="singleSignOnForCloudDQ" type="checkbox" ng-model="viewModel.isSingleSignOnEnabled"/><label localize="AuthDialog_Checkbox_SingleSignOnText" for="singleSignOnForCloudDQ"></label><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=861818" localize="LearnMore"></a></div><div class="waitingMessageWhenApplyOAuthCredential" ng-if="viewModel.showWaitingMessageForOAuth"></div><div class="detailsMessage" ng-if="viewModel.showDetailsMessage"> <span>{{viewModel.detailsMessage}}</span></div><div class="singleSignOnSettingCheckBox" ng-if="viewModel.skipTestConnectionOption"> <input id="skipTestConnection" type="checkbox" ng-model="viewModel.skipTestConnection"/><label localize="AuthDialog_Checkbox_SkipTestConnection" for="skipTestConnection"></label></div><spinner class="signInSpinner" ng-show="viewModel.showSpinner"></spinner></div></div>'),e.put("views/authDialogView.html",'<div><modal-dialog class="authDialog" auth-dialog="viewModel" view-model="dialogModel" ng-if="viewModel.showModalDialog && !viewModel.showPlainUI" on-confirm-action="confirmDialog()" on-cancel-action="cancelDialog()" on-close-action="closeDialog()"><div class="title trimmedTextWithEllipsis"><span ng-bind="viewModel.dialogTitle" title="{{::viewModel.dialogTitle}}"></span></div><div class="auth-form-scrollable-region" ng-include="\'views/authDialogBodyView.html\'"></div></modal-dialog><div ng-if="viewModel.showModalDialog && viewModel.showPlainUI" class="authDialog plain"><div ng-include="\'views/authDialogBodyView.html\'" class="authDialogContent"></div><div ng-if="viewModel.learnMoreUrl" class="learnMoreLink"><span localize="GetData_NeedHelpConnecting"></span><a ng-href="{{::viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></div><div class="action"> <button ng-click="confirmDialog()" ng-disabled="viewModel.isAuthenticating" class="primary signin" localize="AuthDialog_LinkText_SignIn"></button> <button ng-click="cancelDialog()" localize="Cancel_ButtonText" class="cancel"></button></div></div></div>'),e.put("views/datasetParametersDialogBodyView.html",'<div><form name="parametersForm" class="parametersForm" ng-submit="confirmDialog()"><div ng-init="viewModel.parametersForm = parametersForm" class="parameterGroup"><div class="parameter" ng-repeat="parameter in viewModel.datasetModel.dataset.parameters"><span tabindex="-1" class="fieldName" ng-bind="parameter.name"></span><span class="description" tabindex="-1" ng-bind="parameter.description"></span> <input class="textBox" type="text" placeholder="{{parameter.sample}}" ng-model="parameter.value" ng-disabled="viewModel.showSpinner" autofocus tabindex="{{$index + 1}}" required ng-pattern="parameter.valueValidator" ng-change="enableConfirmButton()"></div></div></form></div><div class="action" ng-if="viewModel.showDatasetParametersDialog && viewModel.showPlainUI"> <button class="primary next" ng-click="confirmDialog()" localize="DatasetParametersDialog_NextButtonText" ng-disabled="dialogModel.isConfirmButtonDisabled"></button> <button class="cancel" ng-click="closeDialog()" localize="Cancel_ButtonText"></button></div>'),e.put("views/datasetParametersDialogView.html",'<div><modal-dialog class="datasetParametersDialog" view-model="dialogModel" ng-if="viewModel.showDatasetParametersDialog && !viewModel.showPlainUI" on-confirm-action="confirmDialog()" on-cancel-action="closeDialog()" on-close-action="closeDialog()"><div class="title trimmedTextWithEllipsis"><span ng-bind="viewModel.dialogTitle" title="{{::viewModel.dialogTitle}}"></span></div><div class="description">{{::viewModel.datasetModel.dataset.description}}</div><span localize="DatasetParametersDialog_HelpMessage"></span><a ng-click="relocateToLink()" href=""><span localize="LearnMore"></span></a><div class="datasetParametersDialogContentModal" ng-include="\'views/datasetParametersDialogBodyView.html\'"></div><spinner class="parametersSpinner" ng-if="viewModel.showSpinner"></spinner><div class="validationError" ng-if="viewModel.showValidationError"><inline-name-value-pairs name-value-pairs="viewModel.invalidParameterNameValuePairs" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showValidationError"><span localize="DatasetParametersDialog_ValidationError"></span></inline-name-value-pairs></div></modal-dialog><div ng-if="viewModel.showDatasetParametersDialog && viewModel.showPlainUI" class="datasetParametersDialog plain"><div class="validationError" ng-if="viewModel.showValidationError"><inline-name-value-pairs name-value-pairs="viewModel.invalidParameterNameValuePairs" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showValidationError"><span localize="DatasetParametersDialog_ValidationError"></span></inline-name-value-pairs></div><div ng-include="\'views/datasetParametersDialogBodyView.html\'" class="datasetParametersDialogContent"></div><div ng-if="viewModel.learnMoreUrl" class="learnMoreLink"><span localize="GetData_NeedHelpConnecting"></span><a ng-href="{{::viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></div><div ng-if="viewModel.showSpinner"><spinner class="parametersSpinner"></spinner><div class="credsSpinner" localize="DatasetParametersDialog_SearchingForCredentials"></div></div></div></div>')}})(powerbi=powerbi||{}),(function(n){!(function(e){var t=n.connectivity.htmlTemplate.put;function i(){o||(n.common.initializeAngularModule(),angular.module("powerbi.connectivity.controllers",[]),angular.module("powerbi.connectivity.directives",[]),angular.module("powerbi.connectivity.components",[]),angular.module("powerbi.connectivity",["powerbi.common","powerbi.connectivity.controllers","powerbi.connectivity.directives","powerbi.connectivity.components"]).factory("gatewaysMetadataService",["promiseFactory","gatewaysMetadataHttpService","telemetryService","featureSwitchService","localizationService","httpService",function(e,t,i,o,a,r){return n.connectivity.createGatewaysMetadataService(e,t,i,o,a,r)}]).factory("gatewaysMetadataHttpService",["httpService",function(e){return n.connectivity.createGatewaysMetadataHttpService(e)}]).run(["$templateCache",t]),o=!0)}e.initializeAngularModule=i;var o=!1;i(),e.registerBuildingBlocksForHost=function(e){var t=[{name:"AuthDialog",blockType:1,consumerHostFlags:12,factory:n.connectivity.directives.AuthDialog},{name:"AuthenticationDialog",blockType:2,consumerHostFlags:12,factory:n.connectivity.components.AuthenticationDialog},{name:"AuthenticationDialogBody",blockType:2,consumerHostFlags:12,factory:n.connectivity.components.AuthenticationDialogBody},{name:"DatasetParametersDialog",blockType:1,consumerHostFlags:12,factory:n.connectivity.directives.DatasetParametersDialog}];n.common.registerBuildingBlocksForHost(e,t,{componentsTarget:"powerbi.connectivity",directivesTarget:"powerbi.connectivity.directives"})}})(n.connectivity||(n.connectivity={}))})(powerbi=powerbi||{}),(function(a){!(function(e){var l,i;function o(){}e=e.helpers||(e.helpers={}),l=a.common.constants,i=window,o.convertTestPackageConnectionDetailsToErrorMessage=function(e,t){return["SharePointProviderUnableToGetFilesAndFolders","SharePointProviderUnableToGetFileProperties","SharePoint_ItemNotExist","SharePoint_FileNotFound","OneDriveProviderUnableToGetFileProperties"].indexOf(e.faultCode)<0?t.get("ErrorMessage_DefaultTitle"):t.get("SettingsDataset_OneDrive_FileNotFound")},o.retrieveUnderlyingErrorMessageFromPowerBIServiceException=function(e,t){return e?o.retrieveErrorDetailsMessageFromPowerBIServiceException(e.error,t):null},o.retrieveErrorDetailsMessageFromPowerBIServiceException=function(e,t){if(e&&e["pbi.error"]&&e["pbi.error"].details){e=e["pbi.error"].details.filter((function(e){return e.code===t}));if(!_.isEmpty(e))return"PaginatedReportAuthoringError"===t?o.removePiiTag(e[0].detail.value):e[0].detail.value}return null},o.convertHttpResultToNameValuePairs=function(e,t){return e?[{Name:t.get("AdditionalErrorInfo_ActivityIdText"),Value:e.activityId},{Name:t.get("AdditionalErrorInfo_RequestIdText"),Value:e.requestId},{Name:t.get("AdditionalErrorInfo_ErrorCodeText"),Value:e.status.toString()},{Name:t.get("AdditionalErrorInfo_TimestampText"),Value:(new Date).toString()},{Name:t.get("PowerBI_Build_Version_Text"),Value:a.getBuild()},{Name:t.get("PowerBI_Client_Version_Text"),Value:a.getClientVersion()},{Name:t.get("AdditionalErrorInfo_ClusterUriText"),Value:i.clusterUri}]:null},o.convertInvalidParameterErrorToNameValuePairs=function(e){try{var t=e.error;if(null==t||t.code!==l.ContentProviderInvalidModelParameterErrorCode||null==t["pbi.error"]||null==t["pbi.error"].details||0===t["pbi.error"].details.length)return null;for(var i=[],o=0,a=t["pbi.error"].details;o<a.length;o++){var r,n,s=a[o];null!=s&&null!=s.code&&null!=s.detail&&null!=s.detail.value&&(r=s.code,n=s.detail.value,i.push({Name:r,Value:n}))}return i}catch(e){return null}},o.removePiiTag=function(e){return null==e?void 0:e.replace(/<pii>|<\/pii>/gm,"")},e.ErrorConverterHelper=o})(a.connectivity||(a.connectivity={}))})(powerbi=powerbi||{}),(function(e){!(function(e){function t(){}e=e.helpers||(e.helpers={}),t.alwaysPromptForCredentials=function(e,t){if(null!=e||null!=t)return e&&e.alwaysPromptForContentProviderCreds||t&&t.alwaysPrompt},e.DatasetParametersDialogHelper=t})(e.connectivity||(e.connectivity={}))})(powerbi=powerbi||{}),(function(o){!(function(e){var t;function i(e,t){this.services=t,this.templateAppImgUrl=o.getBuild()+"/images/template-apps-auth-dialog.png"}e=e.controllers||(e.controllers={}),t=o.common.contracts.gateway.CredentialType,i.createOptions=function(){return{additionalServices:["localizationService"]}},i.prototype.$onInit=function(){this.initAuthDialog()},i.prototype.dismissSpinnerError=function(){this.viewModel.authDialogModel.showSpinner=!1,this.viewModel.authDialogModel.showError=!1,this.viewModel.authDialogModel.isAuthenticating=!1},i.prototype.enableAuthSelection=function(){this.viewModel.authDialogModel.disableAuthSelection=!1},i.prototype.enablePrivacySelection=function(){this.viewModel.authDialogModel.disablePrivacySelection=!1},i.prototype.isProxyModel=function(){var e=this.viewModel.authDialogModel.datasource.connectionStringGeneralProperties;return e&&0<e.length&&"server"===e[0].name&&(_.startsWith(e[0].value,"powerbi://")||_.startsWith(e[0].value,"asazure://"))},i.prototype.customizeAuthDialog=function(){var e=this.viewModel.authDialogModel;switch(this.resetAuthDialogState(),e.datasource.credentialTypes[e.selectedAuthenticationIndex]){case t.Anonymous:case t.WindowsWithoutImpersonation:this.customizeAuthDialogShowNothing();break;case t.Basic:this.customizeAuthDialogShowUserNameAndPassword();break;case t.OAuth2:this.customizeAuthDialogShowSignIn();break;case t.Key:this.customizeAuthDialogShowAccountKey();break;case t.Windows:this.customizeAuthDialogShowDetailsMessage(this.services.localizationService.get("AuthDialog_DetailsMessage_WindowsAuth"))}},i.prototype.isRDLReport=function(){return 0===this.viewModel.authDialogModel.assetType},i.prototype.initAuthDialog=function(){var e=this.viewModel.authDialogModel;e.selectedAuthenticationIndex||(e.selectedAuthenticationIndex=0),e.skipTestConnection||(e.skipTestConnection=!1),e.editableField1Value="",e.editableField2Value="",e.showSingleSignOn=e.allowSingleSignOn,e.isSingleSignOnEnabled=null!=e.datasource&&2===e.datasource.singleSignOnType,this.customizeAuthDialog(),this.dismissSpinnerError(),this.handleTemplateAppsUIHeightOnResize()},i.prototype.resetAuthDialogState=function(){this.viewModel.authDialogModel.isAuthenticating=!1},i.prototype.customizeAuthDialogShowNothing=function(){this.viewModel.authDialogModel.showEditableField1=!1,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label="",this.viewModel.authDialogModel.showDetailsMessage=!1},i.prototype.customizeAuthDialogShowUserNameAndPassword=function(){this.viewModel.authDialogModel.showEditableField1=!0,this.viewModel.authDialogModel.showEditableField2=!0,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.showDetailsMessage=!1,this.viewModel.authDialogModel.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_Username"),this.viewModel.authDialogModel.editableField2Label=this.services.localizationService.get("AuthDialog_FieldName_Password")},i.prototype.customizeAuthDialogShowAccountKey=function(){this.viewModel.authDialogModel.showEditableField1=!0,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_AccountKey")},i.prototype.customizeAuthDialogShowSignIn=function(){this.viewModel.authDialogModel.showEditableField1=!1,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.showDetailsMessage=!1},i.prototype.customizeAuthDialogShowDetailsMessage=function(e){this.viewModel.authDialogModel.showEditableField1=!1,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label="",this.viewModel.authDialogModel.showDetailsMessage=!0,this.viewModel.authDialogModel.detailsMessage=e},i.prototype.handleTemplateAppsUIHeightOnResize=function(){var e,t=this;this.viewModel.authDialogModel.showTemplateAppsUI&&(e=_.debounce((function(){$(".template-apps-mode").height(t.calculateFormHeight())}),50),$(window).on("resize",e))},i.prototype.calculateFormHeight=function(){if(this.viewModel.authDialogModel.showTemplateAppsUI)return $(".app-install-config-dialog").height()-208},e.AuthenticationDialogBodyController=i})(o.connectivity||(o.connectivity={}))})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).components||(t.components={})).AuthenticationDialogBody={templateUrl:"components/authenticationDialogBody/authenticationDialogBody.html",bindings:{viewModel:"<"},controller:e.common.createController(t.controllers.AuthenticationDialogBodyController)}})(powerbi=powerbi||{}),(function(g){!(function(e){var i,t,o,a,r,n,s,c,l,d,u,p,h;function v(e,t){this.services=t,this.initialized=!1,this.loginWindow=null;t=this.services.featureSwitchService.featureSwitches;this.provideStaticOAuthOption=t.ProvideStaticOAuthOption}e=e.controllers||(e.controllers={}),i=g.common.constants.contentProviderStoreCloseModalDialogMessage,t=g.common.constants.contentProviderStoreCancelModalDialogMessage,o=g.common.constants.contentProviderStoreGoBackModalDialogMessage,a=g.common.constants.contentProviderStoreGoToAppDocModalDialogMessage,r=g.common.constants,n=g.common.contracts.gateway.CredentialType,s=g.common.EncryptionContext,c=g.connectivity.helpers.ErrorConverterHelper,l=g.common.models.ModalDialogModel,d=g.common.models,u=g.common.contracts.gateway.PrivacyLevel,p=g.common.models.TestConnectionState,h=window,v.createOptions=function(){return{additionalServices:["$window","datasetsService","gatewaysMetadataService","localizationService","moduleLoader","promiseFactory","telemetryService","featureSwitchService"]}},v.prototype.$onInit=function(){this.initialized=!0,this.initModalDialog(),this.getEntropy()},v.prototype.$onChanges=function(e){var t;e&&(null===(t=null===(t=null===(t=e.viewModel)||void 0===t?void 0:t.currentValue)||void 0===t?void 0:t.datasource)||void 0===t?void 0:t.datasourceId)!==(null===(e=null===(e=null===(e=e.viewModel)||void 0===e?void 0:e.previousValue)||void 0===e?void 0:e.datasource)||void 0===e?void 0:e.datasourceId)&&this.initModalDialog()},v.prototype.$onDestroy=function(){this.removeWindowEventListenerIfExists()},v.prototype.goBack=function(){this.closeDialog(o)},v.prototype.cancelDialog=function(){var e=this.viewModel.sendCancelMessage?t:i;this.closeDialog(e)},v.prototype.sendNavigateToDocEvent=function(){this.sendMessage(a)},v.prototype.closeDialog=function(e){var t=this;void 0===e&&(e=i),this.viewModel.showModalDialog=!1,this.sendMessage(e),setTimeout((function(){t.notifyCloseDialog&&t.notifyCloseDialog()}),0)},v.prototype.confirmDialog=function(){this.viewModel.showError=!1;var e=this.dialogBodyModel.authDialogModel;if(!e.skipTestConnection&&!this.services.featureSwitchService.featureSwitches.skipRequiredDatsourceCredentials&&(e.showEditableField1&&!e.editableField1Value||e.showEditableField2&&!e.editableField2Value))return this.viewModel.showError=!0,this.errorMessage=this.services.localizationService.get("ModalDialogButtonText_FillInRequiredFields"),void(this.errorDetails=null);if(this.viewModel.allowSingleSignOn&&this.isSingleSignOnChanged())this.updateSingleSignOn();else{if(this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]===n.OAuth2){if(void 0===this.oAuthResponse&&this.provideStaticOAuthOption)return void this.getOAuthDetailsAndSignInThroughOAuth();if(void 0===this.oAuthResponse)return void this.signInThroughOAuth()}this.viewModel.showSpinner=!0,this.dialogModel.isConfirmButtonDisabled=!0,this.viewModel.isAuthenticating=!0,this.viewModel.datasource.isCloudDirectQuery?this.updateCloudDirectQueryCredentials():this.updateDatasourceRequest()}},v.prototype.sendMessage=function(e){var t;!this.viewModel.showPlainUI||null!=(t=this.services.$window.parent)&&t.postMessage(JSON.stringify({message:e}),r.hostOrigin)},v.prototype.initModalDialog=function(){var e,t,i,o=this;this.initialized&&(this.dialogModel=new l(!1,this.services.localizationService.get("AuthDialog_LinkText_SignIn"),!0,this.services.localizationService,!1,!1,!1),e=this.dialogModel,t=this.viewModel,i=this.services.localizationService,e.cancelButtonText=i.get("ModalDialogButtonText_Cancel"),e.isConfirmButtonDisabled=!1,e.autoCloseDialogOnConfirmButtonSelected=!1,e.confirmButtonImportance=d.ButtonImportance.Elevated,e.cancelButtonImportance=d.ButtonImportance.Elevated,this.showOAuthError=!1,this.confirmDialogButtonText=this.viewModel.showTemplateAppsUI?this.viewModel.confirmDialogButtonText:i.get("AuthDialog_LinkText_SignIn"),t.showModalDialog=!0,t.showError=!1,t.showSingleSignOn=this.viewModel.allowSingleSignOn,t.isSingleSignOnEnabled=null!=this.viewModel.datasource&&2===this.viewModel.datasource.singleSignOnType,this.oAuthErrorMessage=i.get("OAuth_Security_Error"),this.oAuthResponse=void 0,this.errorMessage=void 0,this.errorDetails=void 0,this.loginWindow=null,this.dialogBodyModel={authDialogModel:this.viewModel,errorDetails:function(){return o.errorDetails},errorMessage:function(){return o.errorMessage},showOAuthError:function(){return o.showOAuthError},oAuthErrorMessage:function(){return o.oAuthErrorMessage}},this.removeWindowEventListenerIfExists())},v.prototype.getEntropy=function(){var o=this;this.services.gatewaysMetadataService.getEntropy().then((function(e){if(e){o.entropy=[];for(var t=e.length,i=0;i<t;i++)o.entropy.push(e.charCodeAt(i))}else o.entropy=s.generateEntropy()}))},v.prototype.isSingleSignOnChanged=function(){var e=this.viewModel.isSingleSignOnEnabled,t=this.viewModel.datasource.singleSignOnType;return e&&2!==t||!e&&0!==t},v.prototype.updateCloudDirectQueryCredentials=function(){var t=this,i=this.services.localizationService,e=this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex],o=this.getCredentialsFromInput(),e={credentials:JSON.stringify(o),credentialType:e,encryptedConnection:0,privacyLevel:u.Public,encryptionAlgorithm:"none",skipTestConnection:this.viewModel.skipTestConnection};this.services.gatewaysMetadataService.updateCredentials(this.viewModel.datasource.gatewayObjectId,this.viewModel.datasource.dataSourceObjectId,e).then((function(){var e;t.resetModelAfterAuthentication(!1),t.viewModel.datasource.testConnectionState=p.Passed,t.datasetDatasourceUpdated&&(e={name:(e=t.viewModel.datasource).name||e.fullName},t.datasetDatasourceUpdated(e)),t.closeDialog()}),(function(e){t.resetModelAfterAuthentication(!0),t.errorMessage=i.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),t.errorDetails=c.convertHttpResultToNameValuePairs(e,t.services.localizationService)}))},v.prototype.updateSingleSignOn=function(){var t=this,i=this.services.localizationService;this.services.gatewaysMetadataService.updateDataSource(this.viewModel.datasource.gatewayObjectId,this.viewModel.datasource.dataSourceObjectId,{dataSourceType:null,onPremGatewayRequired:null,connectionDetails:null,credentialDetails:null,dataSourceAnnotation:null,supportedAuthenticationTypes:null,singleSignOnType:!0===this.viewModel.isSingleSignOnEnabled?2:0}).then((function(){t.resetModelAfterAuthentication(!1),t.viewModel.datasource.singleSignOnType=t.viewModel.isSingleSignOnEnabled?2:0,t.confirmDialog()}),(function(e){t.resetModelAfterAuthentication(!0),t.errorMessage=i.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),t.errorDetails=c.convertHttpResultToNameValuePairs(e,t.services.localizationService)}))},v.prototype.getCredentialsFromInput=function(){switch(this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]){case n.Anonymous:case n.Windows:case n.WindowsWithoutImpersonation:return this.getEmptyCredentialDetails();case n.Basic:return this.getCredentialDetailsUsernameAndPassword();case n.Key:return this.getCredentialDetailsKey();case n.OAuth2:return this.getCredentialDetailsRedirectEndpoint()}},v.prototype.updateDatasourceCredentials=function(e){var t=this,i=this.services.promiseFactory.defer();return this.services.gatewaysMetadataService.updateCredentials(this.viewModel.datasource.gatewayObjectId,this.viewModel.datasource.dataSourceObjectId,e).then((function(){t.resetModelAfterAuthentication(!1),t.viewModel.datasource.testConnectionState=d.TestConnectionState.Passed,t.viewModel.validateParameters?t.validateParameters().finally((function(){i.resolve(null)})):(t.updateDataSourceComplete(),i.resolve(null))}),(function(e){t.errorMessage=t.services.localizationService.format("UpdateDatasourceCredential_Error_Title",[c.retrieveUnderlyingErrorMessageFromPowerBIServiceException(e.data,"DM_ErrorDetailNameCode_UnderlyingErrorMessage")]),t.errorDetails=c.convertHttpResultToNameValuePairs(e,t.services.localizationService),t.resetModelAfterAuthentication(!0),i.reject(e)})),i.promise},v.prototype.validateParameters=function(){var t,i,o=this,e=this.services.promiseFactory.defer();return this.shouldRunValidateParametersOnImport()?(t=this.createValidateParametersEvent(),this.services.gatewaysMetadataService.validateParametersBeforeImport(this.viewModel.providerKey,this.viewModel.dataAccessInfo,t.event).then((function(e){o.handleParameterValidationSuccessResult(t)}),(function(e){o.handleParameterValidationErrorResult(e,t)})).finally((function(){return e.resolve(null)}))):this.shouldRunValidateParametersOnUpdate()?(i=this.createValidateParametersEvent(),this.services.gatewaysMetadataService.validateParametersBeforeUpdate(this.viewModel.datasource.modelId,i.event).then((function(e){o.handleParameterValidationSuccessResult(i)}),(function(e){o.handleParameterValidationErrorResult(e,i)})).finally((function(){return e.resolve(null)}))):e.resolve(null),e.promise},v.prototype.createValidateParametersEvent=function(){return this.services.telemetryService.startEvent(g.telemetry.MashUpContentProviderValidateParameters,{providerId:this.viewModel.providerId,providerKey:this.viewModel.providerKey,isImport:this.viewModel.isImportScenario})},v.prototype.shouldRunValidateParametersOnImport=function(){return this.viewModel.isImportScenario&&null!=this.viewModel.dataAccessInfo&&null!=this.viewModel.providerKey},v.prototype.shouldRunValidateParametersOnUpdate=function(){return!this.viewModel.isImportScenario&&null!=this.viewModel.datasource&&null!=this.viewModel.datasource.modelId},v.prototype.sendUpdateDatasourceRequest=function(e){var t=this,i=this.services.telemetryService;this.viewModel.showError=!1;var o,a=this.viewModel.isImportScenario?i.startEvent(g.telemetry.MashUpContentProviderUpdateDatasource,{providerId:this.viewModel.providerId}):i.startEvent(g.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:this.viewModel.providerId}),i=this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex];this.viewModel.datasource.onpremGatewayRequired?(o=atob(this.viewModel.personalGateway.gatewayPublicKey).split(/<\/Modulus>|<Modulus>/)[1],this.encryptCredentials(e,o,i,this.entropy).then((function(e){t.updateDatasourceCredentials(e).then((function(){a.resolve()}),(function(e){a.reject(g.errorDetailsHelper.getTelemetryErrorDetails(e.error))}))}))):(o=i===n.Anonymous?u.Public:u.Private,o={credentials:JSON.stringify(e),credentialType:i,encryptedConnection:this.viewModel.datasource.datasourceType===g.common.contracts.gateway.DataSourceType.PostgreSql?0:2,privacyLevel:null==this.viewModel.selectedPrivacyLevelIndex?o:this.viewModel.privacyLevelMapping.indexOf(this.viewModel.privacyLevelOptions[this.viewModel.selectedPrivacyLevelIndex]),encryptionAlgorithm:"none",skipTestConnection:this.viewModel.skipTestConnection},this.updateDatasourceCredentials(o).then((function(){a.resolve()}),(function(e){a.reject(g.errorDetailsHelper.getTelemetryErrorDetails(e.error))})))},v.prototype.handleParameterValidationSuccessResult=function(e){e.resolve(),this.updateDataSourceComplete()},v.prototype.handleParameterValidationErrorResult=function(e,t){t.reject(g.errorDetailsHelper.getTelemetryErrorDetails(e.error));e=c.convertInvalidParameterErrorToNameValuePairs(e);_.isEmpty(e)?this.updateDataSourceComplete():(this.datasetShowParameterDialogAfterInvalidParameter&&this.datasetShowParameterDialogAfterInvalidParameter({error:e}),this.viewModel.isImportScenario||this.updateDataSourceComplete())},v.prototype.updateDataSourceComplete=function(){var e=this.viewModel.datasource,e=e.name||e.fullName;this.datasetDatasourceUpdated&&this.datasetDatasourceUpdated({name:e}),this.datasetShowDatasourceUpdatedNotification&&this.datasetShowDatasourceUpdatedNotification({name:e}),this.viewModel.leaveShowing||this.closeDialog()},v.prototype.sendUpdatePackageRequest=function(e){var i=this,t=this.services.telemetryService,o=this.services.localizationService;this.dialogModel.isConfirmButtonDisabled=!0,this.viewModel.showError=!1;for(var a=0,r=e.credentialData;a<r.length;a++){var n,s=r[a];if("redirectEndpoint"===s.name){(n=s.value)&&0<n.length&&(0<(s=(n=n.substr(n.indexOf("code=")+5)).indexOf("&"))&&(n=n.substr(0,s)),n=encodeURIComponent(n));break}}var e=this.viewModel.datasource.packageId,l=t.startEvent(g.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:this.viewModel.providerId});this.services.datasetsService.updatePackageCredentials(e,n,l.event).then((function(){var e;l.resolve(),i.resetModelAfterAuthentication(!1),i.viewModel.datasource.testConnectionState=p.Passed,i.datasetDatasourceUpdated&&(e={name:(e=i.viewModel.datasource).name||e.fullName},i.datasetDatasourceUpdated(e)),i.closeDialog()}),(function(e){i.errorDetails=c.convertHttpResultToNameValuePairs(e,i.services.localizationService);var t=e.data;t?(i.errorMessage=c.convertTestPackageConnectionDetailsToErrorMessage(e.data.testConnectionResponse,i.services.localizationService),i.errorDetails&&i.errorDetails.push({Name:i.services.localizationService.get("Details"),Value:t.testConnectionResponse.faultCode})):i.errorMessage=o.get("UpdateDatasourceCredential_Error_ShortTitle"),i.resetModelAfterAuthentication(!0),l.reject(g.errorDetailsHelper.getTelemetryErrorDetails(e.error))}))},v.prototype.resetModelAfterAuthentication=function(e){this.viewModel.showSpinner=!1,this.viewModel.isAuthenticating=!1,this.viewModel.showWaitingMessageForOAuth=!1,this.viewModel.showError=e,this.dialogModel.isConfirmButtonDisabled=!1},v.prototype.updateDatasourceRequest=function(){var e=this.getCredentialsFromInput();this.viewModel.updatePackage?this.sendUpdatePackageRequest(e):this.sendUpdateDatasourceRequest(e)},v.prototype.getCredentialDetailsUsernameAndPassword=function(){return{credentialData:[{name:"username",value:this.viewModel.editableField1Value},{name:"password",value:this.viewModel.editableField2Value}]}},v.prototype.getCredentialDetailsKey=function(){return{credentialData:[{name:"key",value:this.viewModel.editableField1Value}]}},v.prototype.getCredentialDetailsRedirectEndpoint=function(){return{credentialData:[{name:"redirectEndpoint",value:this.oAuthResponse},{name:"oAuth2Nonce",value:this.viewModel.datasource.oAuth2Nonce}]}},v.prototype.getEmptyCredentialDetails=function(){return{credentialData:[]}},v.prototype.getOAuthDetailsAndSignInThroughOAuth=function(){var t=this,e=this.viewModel.datasource;this.services.gatewaysMetadataService.getDataSourceOAuthDetailsForGatewayCluster(e.gatewayObjectId,e.dataSourceObjectId).then((function(e){t.viewModel.datasource.oAuth2URL=e.OAuthEndpoint,t.viewModel.datasource.oAuth2Nonce=e.OAuthNonce,t.signInThroughOAuth()}),(function(e){t.resetModelAfterAuthentication(!0),t.errorMessage=t.services.localizationService.get("OAuth_Not_Supported_Error"),t.errorDetails=c.convertHttpResultToNameValuePairs(e,t.services.localizationService)}))},v.prototype.signInThroughOAuth=function(){var i=this,e=this.viewModel.datasource.oAuth2URL;if("https:"!==e.substring(0,6).toLowerCase())return this.showOAuthError=!0,void(this.oAuthErrorMessage=this.oAuthErrorMessage);this.showOAuthError=!1;var t=window.location.host,e=this.reformUrlWithNewState(e,t),t=e[0],o=e[1],a=null!==(e=jsCommon.QueryStringUtil.parseQueryString(t.substring(t.indexOf("?"))).redirect_uri)&&void 0!==e?e:h.oauthRedirectUrl;this.oAuthListener=function(e){var t=JSON.parse(e.data);t&&t.OAuthResponse?(e=t.OAuthResponse,t=a,"?"===e.substring(0,1)?t+=e:t+="?"+e,(t=decodeURIComponent(i.reformUrlWithNewState(t,o)[0]))!==i.oAuthResponse&&(i.oAuthResponse=t,i.viewModel.showWaitingMessageForOAuth=!0,i.services.telemetryService.logEvent(g.telemetry.ConnectivityOAuthSucceeded,{providerId:i.viewModel.providerId,providerKey:i.viewModel.providerKey}),i.confirmDialog())):(i.showOAuthError=!0,i.oAuthErrorMessage=i.oAuthErrorMessage)},null===this.loginWindow&&this.services.$window.addEventListener(jsCommon.DOMConstants.messageEventName,this.oAuthListener),t&&(e=window.location.origin,e=a+jsCommon.QueryStringUtil.rebuildQueryString({login_uri:t,redirect_targeturi:e}),this.services.telemetryService.logEvent(g.telemetry.ConnectivityOAuthInitiated,{providerId:this.viewModel.providerId,providerKey:this.viewModel.providerKey}),this.loginWindow=g.common.helpers.OAuthPopupWindowHelper.popupOAuthWindow(e),this.loginWindow||(this.showOAuthError=!0,this.viewModel.isAuthenticating=!1,jsCommon.BrowserUtility.isInternetExplorerBrowser()?(this.oAuthErrorMessage=this.services.localizationService.get("OAuth_Referrer_Not_Available_Error"),this.services.telemetryService.logEvent(g.telemetry.ConnectivityOAuthReferrerNotAvailableInIE,{providerId:this.viewModel.providerId,providerKey:this.viewModel.providerKey})):this.oAuthErrorMessage=this.oAuthErrorMessage))},v.prototype.reformUrlWithNewState=function(e,t){var i=jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))),o=null;return i.state&&(o=i.state,i.state=t),i["#state"]&&(o=i["#state"],i["#state"]=t),[e.substring(0,e.indexOf("?"))+jsCommon.QueryStringUtil.rebuildQueryString(i),o]},v.prototype.encryptCredentials=function(e,t,i,o){var a=this,r=this.services.promiseFactory.defer();return s.create(JSON.stringify(e),t,o,(function(e){var t=i===n.Anonymous?u.Public:u.Private,t={credentials:e,credentialType:i,encryptedConnection:a.viewModel.datasource.datasourceType===g.common.contracts.gateway.DataSourceType.SqlServer?0:2,privacyLevel:null==a.viewModel.selectedPrivacyLevelIndex?t:a.viewModel.privacyLevelMapping.indexOf(a.viewModel.privacyLevelOptions[a.viewModel.selectedPrivacyLevelIndex]),encryptionAlgorithm:"RSA-OAEP"};r.resolve(t)}),this.services.moduleLoader,this.services.promiseFactory).then((function(e){e.rsaEncrypt()})),r.promise},v.prototype.removeWindowEventListenerIfExists=function(){this.oAuthListener&&(this.services.$window.removeEventListener(jsCommon.DOMConstants.messageEventName,this.oAuthListener,!1),this.oAuthListener=void 0)},e.AuthenticationDialogController=v})(g.connectivity||(g.connectivity={}))})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).components||(t.components={})).AuthenticationDialog={templateUrl:"components/authenticationDialog/authenticationDialog.html",bindings:{viewModel:"<",datasetDatasourceUpdated:"&",datasetShowParameterDialogAfterInvalidParameter:"&",datasetShowDatasourceUpdatedNotification:"&",notifyCloseDialog:"&"},controller:e.common.createController(t.controllers.AuthenticationDialogController)}})(powerbi=powerbi||{}),(function(h){!(function(e){var n,s,l,c,d,u,p;function t(e,t){var i=this;this.scope=e,this.model=this.scope.viewModel,this.services=t,this.loginWindow=null,this.scope.customizeAuthDialog=function(){return i.customizeAuthDialog()},this.scope.dismissSpinnerError=function(){return i.dismissSpinnerError()},this.scope.signInThroughOAuth=function(){return i.signInThroughOAuth()},this.initModalDialog(),this.initAuthDialog(),this.getEntropy()}e=e.controllers||(e.controllers={}),n=h.common.contracts.gateway.CredentialType,s=h.common.EncryptionContext,l=h.connectivity.helpers.ErrorConverterHelper,c=h.common.constants,d=h.common.contracts.gateway.PrivacyLevel,u=h.common.models.TestConnectionState,p=window,t.createOptions=function(){return{additionalServices:["$window","$element","datasetsService","featureSwitchService","gatewaysMetadataService","localizationService","moduleLoader","promiseFactory","telemetryService"]}},t.prototype.getEntropy=function(){var o=this;this.services.gatewaysMetadataService.getEntropy().then((function(e){if(e){o.entropy=[];for(var t=e.length,i=0;i<t;i++)o.entropy.push(e.charCodeAt(i))}else o.entropy=s.generateEntropy()}))},t.prototype.relocateToLink=function(){var e=h.models.contentProviderHelpLink[this.model.providerId];e?this.services.$window.open(e,"_blank"):this.services.$window.open(h.models.contentProviderFallbackLink,"_blank")},t.prototype.initModalDialog=function(){var e=this;this.scope.dialogModel=new h.common.models.ModalDialogModel(!1,this.services.localizationService.get("AuthDialog_LinkText_SignIn"),!0,this.services.localizationService,!1,!1,!1),this.scope.dialogModel.cancelButtonText=this.services.localizationService.get("ModalDialogButtonText_Cancel"),this.scope.dialogModel.isConfirmButtonDisabled=!1,this.scope.dialogModel.autoCloseDialogOnConfirmButtonSelected=!1,this.scope.dialogModel.confirmButtonImportance=h.common.models.ButtonImportance.Elevated,this.scope.dialogModel.cancelButtonImportance=h.common.models.ButtonImportance.Elevated,this.scope.relocateToLink=function(){return e.relocateToLink()},this.scope.confirmDialog=function(){return e.confirmDialog()},this.scope.cancelDialog=function(){return e.cancelDialog()},this.scope.closeDialog=function(){return e.closeDialog()},this.scope.showOAuthError=!1,this.scope.showOAuthNotSupported=!1,this.model.showModalDialog=!0,this.model.showError=!1,this.oAuthErrorMessage=this.services.localizationService.get("OAuth_Security_Error")},t.prototype.initAuthDialog=function(){this.model.selectedAuthenticationIndex||(this.model.selectedAuthenticationIndex=0),this.model.skipTestConnection||(this.model.skipTestConnection=!1),this.model.editableField1Value="",this.model.editableField2Value="",this.model.showSingleSignOn=this.model.allowSingleSignOn,this.model.isSingleSignOnEnabled=null!=this.model.datasource&&2===this.model.datasource.singleSignOnType,this.customizeAuthDialog(),this.dismissSpinnerError()},t.prototype.confirmDialog=function(){this.model.showError=!1;var e=this.model;if(!e.skipTestConnection&&!this.services.featureSwitchService.featureSwitches.skipRequiredDatsourceCredentials&&(e.showEditableField1&&!e.editableField1Value||e.showEditableField2&&!e.editableField2Value))return this.model.showError=!0,this.scope.errorMessage=this.services.localizationService.get("ModalDialogButtonText_FillInRequiredFields"),void(this.scope.errorDetails=null);this.model.allowSingleSignOn&&this.isSingleSignOnChanged()?this.updateSingleSignOn():this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex]!==n.OAuth2||void 0!==this.scope.oAuthResponse?(this.model.showSpinner=!0,this.scope.dialogModel.isConfirmButtonDisabled=!0,this.model.isAuthenticating=!0,this.model.datasource.isCloudDirectQuery?this.updateCloudDirectQueryCredentials():this.model.isManageGatewaysScenario?this.returnToManageGatewaysToAddDatasource():this.updateDatasourceRequest()):this.signInThroughOAuth()},t.prototype.returnToManageGatewaysToAddDatasource=function(){this.resetModelAfterAuthentication(!1),this.model.datasource.testConnectionState=h.common.models.TestConnectionState.Passed,this.model.credentialData=this.getCredentialsFromInput(),this.updateDataSourceComplete()},t.prototype.isSingleSignOnChanged=function(){return this.model.isSingleSignOnEnabled&&2!==this.model.datasource.singleSignOnType||!this.model.isSingleSignOnEnabled&&0!==this.model.datasource.singleSignOnType},t.prototype.updateCloudDirectQueryCredentials=function(){var t=this,e=this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex],i=this.getCredentialsFromInput(),e={credentials:JSON.stringify(i),credentialType:e,encryptedConnection:0,privacyLevel:d.Public,encryptionAlgorithm:"none",skipTestConnection:this.model.skipTestConnection};this.services.gatewaysMetadataService.updateCredentials(this.model.datasource.gatewayObjectId,this.model.datasource.dataSourceObjectId,e).then((function(){t.resetModelAfterAuthentication(!1),t.model.datasource.testConnectionState=u.Passed;var e=t.model.datasource;t.scope.$emit(c.datasetDatasourceUpdated,e.name||e.fullName),t.closeDialog()}),(function(e){t.resetModelAfterAuthentication(!0),t.scope.errorMessage=t.services.localizationService.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),t.scope.errorDetails=l.convertHttpResultToNameValuePairs(e,t.services.localizationService)}))},t.prototype.updateSingleSignOn=function(){var t=this;this.services.gatewaysMetadataService.updateDataSource(this.model.datasource.gatewayObjectId,this.model.datasource.dataSourceObjectId,{dataSourceType:null,onPremGatewayRequired:null,connectionDetails:null,credentialDetails:null,dataSourceAnnotation:null,supportedAuthenticationTypes:null,singleSignOnType:!0===this.model.isSingleSignOnEnabled?2:0}).then((function(){t.resetModelAfterAuthentication(!1),t.model.datasource.singleSignOnType=t.model.isSingleSignOnEnabled?2:0,t.confirmDialog()}),(function(e){t.resetModelAfterAuthentication(!0),t.scope.errorMessage=t.services.localizationService.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),t.scope.errorDetails=l.convertHttpResultToNameValuePairs(e,t.services.localizationService)}))},t.prototype.getCredentialsFromInput=function(){switch(this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex]){case n.Anonymous:case n.Windows:case n.WindowsWithoutImpersonation:return this.getEmptyCredentialDetails();case n.Basic:return this.getCredentialDetailsUsernameAndPassword();case n.Key:return this.getCredentialDetailsKey();case n.OAuth2:return this.getCredentialDetailsRedirectEndpoint()}},t.prototype.updateDatasourceCredentials=function(e){var t=this,i=this.services.promiseFactory.defer();return this.services.gatewaysMetadataService.updateCredentials(this.model.datasource.gatewayObjectId,this.model.datasource.dataSourceObjectId,e).then((function(){t.resetModelAfterAuthentication(!1),t.model.datasource.testConnectionState=h.common.models.TestConnectionState.Passed,t.model.validateParameters?t.validateParameters().finally((function(){i.resolve(null)})):(t.updateDataSourceComplete(),i.resolve(null))}),(function(e){t.scope.errorMessage=t.services.localizationService.format("UpdateDatasourceCredential_Error_Title",[l.retrieveUnderlyingErrorMessageFromPowerBIServiceException(e.data,"DM_ErrorDetailNameCode_UnderlyingErrorMessage")]),t.scope.errorDetails=l.convertHttpResultToNameValuePairs(e,t.services.localizationService),t.resetModelAfterAuthentication(!0),i.reject(e)})),i.promise},t.prototype.validateParameters=function(){var t,i,o=this,e=this.services.promiseFactory.defer();return this.shouldRunValidateParametersOnImport()?(t=this.createValidateParametersEvent(),this.services.gatewaysMetadataService.validateParametersBeforeImport(this.model.providerKey,this.model.dataAccessInfo,t.event).then((function(e){o.handleParameterValidationSuccessResult(e,t)}),(function(e){o.handleParameterValidationErrorResult(e,t)})).finally((function(){return e.resolve(null)}))):this.shouldRunValidateParametersOnUpdate()?(i=this.createValidateParametersEvent(),this.services.gatewaysMetadataService.validateParametersBeforeUpdate(this.model.datasource.modelId,i.event).then((function(e){o.handleParameterValidationSuccessResult(e,i)}),(function(e){o.handleParameterValidationErrorResult(e,i)})).finally((function(){return e.resolve(null)}))):e.resolve(null),e.promise},t.prototype.createValidateParametersEvent=function(){return this.services.telemetryService.startEvent(h.telemetry.MashUpContentProviderValidateParameters,{providerId:this.model.providerId,providerKey:this.model.providerKey,isImport:this.model.isImportScenario})},t.prototype.shouldRunValidateParametersOnImport=function(){return this.model.isImportScenario&&null!=this.model.dataAccessInfo&&null!=this.model.providerKey},t.prototype.shouldRunValidateParametersOnUpdate=function(){return!this.model.isImportScenario&&null!=this.model.datasource&&null!=this.model.datasource.modelId},t.prototype.sendUpdateDatasourceRequest=function(e){var t=this,i=this.services.telemetryService,o=this.model;o.showError=!1;var a,r=o.isImportScenario?i.startEvent(h.telemetry.MashUpContentProviderUpdateDatasource,{providerId:o.providerId}):i.startEvent(h.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:o.providerId}),i=o.datasource.credentialTypes[o.selectedAuthenticationIndex];o.datasource.onpremGatewayRequired?(a=atob(o.personalGateway.gatewayPublicKey).split(/<\/Modulus>|<Modulus>/)[1],this.encryptCredentials(e,a,i,this.entropy).then((function(e){t.updateDatasourceCredentials(e).then((function(){r.resolve()}),(function(e){r.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error))}))}))):(a=i===n.Anonymous?d.Public:d.Private,o={credentials:JSON.stringify(e),credentialType:i,encryptedConnection:null!=this.model.datasource&&this.model.datasource.datasourceType===h.common.contracts.gateway.DataSourceType.PostgreSql?0:2,privacyLevel:null==o.selectedPrivacyLevelIndex?a:o.privacyLevelMapping.indexOf(o.privacyLevelOptions[o.selectedPrivacyLevelIndex]),encryptionAlgorithm:"none",skipTestConnection:this.model.skipTestConnection},this.updateDatasourceCredentials(o).then((function(){r.resolve()}),(function(e){r.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error))})))},t.prototype.handleParameterValidationSuccessResult=function(e,t){t.resolve(),this.updateDataSourceComplete()},t.prototype.handleParameterValidationErrorResult=function(e,t){t.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error));e=l.convertInvalidParameterErrorToNameValuePairs(e);_.isEmpty(e)?this.updateDataSourceComplete():(this.scope.$emit(h.common.constants.datasetShowParameterDialogAfterInvalidParameter,e),this.model.isImportScenario||this.updateDataSourceComplete())},t.prototype.updateDataSourceComplete=function(){var e=this.model.datasource,e=e.name||e.fullName;this.scope.$emit(c.datasetDatasourceUpdated,e),this.scope.$emit(c.datasetShowDatasourceUpdatedNotification,e),this.model.leaveShowing||this.closeDialog()},t.prototype.sendUpdatePackageRequest=function(e){var i=this,t=this.services.telemetryService;this.scope.dialogModel.isConfirmButtonDisabled=!0,this.model.showError=!1;for(var o=0,a=e.credentialData;o<a.length;o++){var r,n=a[o];if("redirectEndpoint"===n.name){(r=n.value)&&0<r.length&&(0<(n=(r=r.substr(r.indexOf("code=")+5)).indexOf("&"))&&(r=r.substr(0,n)),r=encodeURIComponent(r));break}}var e=this.model.datasource.packageId,s=t.startEvent(h.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:this.model.providerId});this.services.datasetsService.updatePackageCredentials(e,r,s.event).then((function(){s.resolve(),i.resetModelAfterAuthentication(!1),i.model.datasource.testConnectionState=u.Passed;var e=i.model.datasource;i.scope.$emit(c.datasetDatasourceUpdated,e.name||e.fullName),i.closeDialog()}),(function(e){i.scope.errorDetails=l.convertHttpResultToNameValuePairs(e,i.services.localizationService);var t=e.data;t?(i.scope.errorMessage=l.convertTestPackageConnectionDetailsToErrorMessage(e.data.testConnectionResponse,i.services.localizationService),i.scope.errorDetails&&i.scope.errorDetails.push({Name:i.services.localizationService.get("Details"),Value:t.testConnectionResponse.faultCode})):i.scope.errorMessage=i.services.localizationService.get("UpdateDatasourceCredential_Error_ShortTitle"),i.resetModelAfterAuthentication(!0),s.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error))}))},t.prototype.cancelDialog=function(){this.closeDialog(h.common.constants.contentProviderStoreCancelModalDialogMessage)},t.prototype.closeDialog=function(e){var t=this;void 0===e&&(e=h.common.constants.contentProviderStoreCloseModalDialogMessage),this.model.showModalDialog=!1,this.scope.viewModel.showPlainUI&&null!=this.services.$window.parent&&this.services.$window.parent.postMessage(JSON.stringify({message:e}),h.common.constants.hostOrigin),setTimeout((function(){t.model.showAuthDialog=!1,t.scope.$digest()}),0)},t.prototype.customizeAuthDialog=function(){this.resetAuthDialogState();var e=this.model;switch(e.datasource.credentialTypes[e.selectedAuthenticationIndex]){case n.Anonymous:case n.WindowsWithoutImpersonation:this.customizeAuthDialogShowNothing();break;case n.Basic:this.customizeAuthDialogShowUserNameAndPassword();break;case n.OAuth2:this.customizeAuthDialogShowSignIn();break;case n.Key:this.customizeAuthDialogShowAccountKey();break;case n.Windows:this.customizeAuthDialogShowDetailsMessage(this.services.localizationService.get("AuthDialog_DetailsMessage_WindowsAuth"))}},t.prototype.resetAuthDialogState=function(){this.scope.showOAuthNotSupported=!1,this.model.isAuthenticating=!1},t.prototype.resetModelAfterAuthentication=function(e){this.model.showSpinner=!1,this.model.isAuthenticating=!1,this.model.showWaitingMessageForOAuth=!1,this.model.showError=e,this.scope.dialogModel.isConfirmButtonDisabled=!1,e&&this.services.$element.find(".expandableBlockWarning").get(0).scrollIntoView()},t.prototype.customizeAuthDialogShowUserNameAndPassword=function(){this.model.showEditableField1=!0,this.model.showEditableField2=!0,this.model.showWaitingMessageForOAuth=!1,this.model.showDetailsMessage=!1,this.model.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_Username"),this.model.editableField2Label=this.services.localizationService.get("AuthDialog_FieldName_Password")},t.prototype.customizeAuthDialogShowAccountKey=function(){this.model.showEditableField1=!0,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_AccountKey")},t.prototype.customizeAuthDialogShowSignIn=function(){this.model.showEditableField1=!1,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.showDetailsMessage=!1,null==this.scope.viewModel.datasource.oAuth2URL&&(this.scope.showOAuthNotSupported=!0,this.model.isAuthenticating=!0)},t.prototype.customizeAuthDialogShowNothing=function(){this.model.showEditableField1=!1,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label="",this.model.showDetailsMessage=!1},t.prototype.customizeAuthDialogShowDetailsMessage=function(e){this.model.showEditableField1=!1,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label="",this.model.showDetailsMessage=!0,this.model.detailsMessage=e},t.prototype.updateDatasourceRequest=function(){var e=this.getCredentialsFromInput();this.model.updatePackage?this.sendUpdatePackageRequest(e):this.sendUpdateDatasourceRequest(e)},t.prototype.getCredentialDetailsUsernameAndPassword=function(){return{credentialData:[{name:"username",value:this.model.editableField1Value},{name:"password",value:this.model.editableField2Value}]}},t.prototype.getCredentialDetailsKey=function(){return{credentialData:[{name:"key",value:this.model.editableField1Value}]}},t.prototype.getCredentialDetailsRedirectEndpoint=function(){return{credentialData:[{name:"redirectEndpoint",value:this.scope.oAuthResponse},{name:"oAuth2Nonce",value:this.scope.viewModel.datasource.oAuth2Nonce}]}},t.prototype.getEmptyCredentialDetails=function(){return{credentialData:[]}},t.prototype.dismissSpinnerError=function(){this.model.showSpinner=!1,this.model.showError=!1,this.model.isAuthenticating=!1},t.prototype.signInThroughOAuth=function(){var i=this,e=this.scope.viewModel.datasource.oAuth2URL;if("https:"!==e.substring(0,6).toLowerCase())return this.scope.showOAuthError=!0,void(this.scope.oAuthErrorMessage=this.oAuthErrorMessage);this.scope.showOAuthError=!1;function t(e){var t=JSON.parse(e.data);t&&t.OAuthResponse?(e=t.OAuthResponse,t=r,"?"===e.substring(0,1)?t+=e:t+="?"+e,(t=decodeURIComponent(i.reformUrlWithNewState(t,a)[0]))!==i.scope.oAuthResponse&&(i.scope.oAuthResponse=t,i.model.showWaitingMessageForOAuth=!0,i.services.telemetryService.logEvent(h.telemetry.ConnectivityOAuthSucceeded,{providerId:i.model.providerId,providerKey:i.model.providerKey}),i.confirmDialog())):(i.scope.showOAuthError=!0,i.scope.oAuthErrorMessage=i.oAuthErrorMessage)}var o=window.location.host,e=this.reformUrlWithNewState(e,o),o=e[0],a=e[1],r=null!==(e=jsCommon.QueryStringUtil.parseQueryString(o.substring(o.indexOf("?"))).redirect_uri)&&void 0!==e?e:p.oauthRedirectUrl;null===this.loginWindow&&this.services.$window.addEventListener(jsCommon.DOMConstants.messageEventName,t),this.scope.$on(h.common.constants.scopeDestroyEventName,(function(){i.services.$window.removeEventListener(jsCommon.DOMConstants.messageEventName,t,!1),i.loginWindow=null})),o&&(e=window.location.origin,e=r+jsCommon.QueryStringUtil.rebuildQueryString({login_uri:o,redirect_targeturi:e}),this.services.telemetryService.logEvent(h.telemetry.ConnectivityOAuthInitiated,{providerId:this.model.providerId,providerKey:this.model.providerKey}),this.loginWindow=h.common.helpers.OAuthPopupWindowHelper.popupOAuthWindow(e),this.loginWindow||(this.scope.showOAuthError=!0,this.model.isAuthenticating=!1,jsCommon.BrowserUtility.isInternetExplorerBrowser()?(this.scope.oAuthErrorMessage=this.services.localizationService.get("OAuth_Referrer_Not_Available_Error"),this.services.telemetryService.logEvent(h.telemetry.ConnectivityOAuthReferrerNotAvailableInIE,{providerId:this.model.providerId,providerKey:this.model.providerKey})):this.scope.oAuthErrorMessage=this.oAuthErrorMessage))},t.prototype.reformUrlWithNewState=function(e,t){var i=jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))),o=null;return i.state&&(o=i.state,i.state=t),i["#state"]&&(o=i["#state"],i["#state"]=t),[e.substring(0,e.indexOf("?"))+jsCommon.QueryStringUtil.rebuildQueryString(i),o]},t.prototype.encryptCredentials=function(e,t,i,o){var a=this.services.promiseFactory.defer(),r=this.model;return s.create(JSON.stringify(e),t,o,(function(e){var t=i===n.Anonymous?d.Public:d.Private,t={credentials:e,credentialType:i,encryptedConnection:r.datasource.datasourceType===h.common.contracts.gateway.DataSourceType.SqlServer?0:2,privacyLevel:null==r.selectedPrivacyLevelIndex?t:r.privacyLevelMapping.indexOf(r.privacyLevelOptions[r.selectedPrivacyLevelIndex]),encryptionAlgorithm:"RSA-OAEP"};a.resolve(t)}),this.services.moduleLoader,this.services.promiseFactory).then((function(e){e.rsaEncrypt()})),a.promise},e.AuthDialogController=t})(h.connectivity||(h.connectivity={}))})(powerbi=powerbi||{}),(function(l){!(function(e){var t,o,n,s,i;function a(e,t){this.scope=e,this.model=this.scope.viewModel,this.services=t,this.initModalDialog()}e=e.controllers||(e.controllers={}),t=l.connectivity.helpers.DatasetParametersDialogHelper,o=l.common.helpers.ImportHelper,n=l.common.helpers.ModelConverterHelper,s=l.common.models.TestConnectionState,i=l.connectivity.helpers.ErrorConverterHelper,a.createOptions=function(){return{additionalServices:["$window","datasetsService","errorService","telemetryService","localizationService","featureSwitchService","gatewaysMetadataService"]}},a.prototype.relocateToLink=function(){var e=l.models.contentProviderHelpLink[this.model.providerIdentification.providerId];e?this.services.$window.open(e,"_blank"):this.services.$window.open(l.models.contentProviderFallbackLink,"_blank")},a.prototype.initModalDialog=function(){var i=this,e=this.scope.dialogModel=new l.common.models.ModalDialogModel(!1,this.services.localizationService.get("DatasetParametersDialog_NextButtonText"),!0,this.services.localizationService,!1,!1,!1);e.cancelButtonText=this.services.localizationService.get("ModalDialogButtonText_Cancel"),e.isConfirmButtonDisabled=!0,e.autoCloseDialogOnConfirmButtonSelected=!1,e.confirmButtonImportance=l.common.models.ButtonImportance.Elevated,e.cancelButtonImportance=l.common.models.ButtonImportance.Elevated,this.scope.confirmDialog=function(){return i.confirmDialog()},this.scope.closeDialog=function(){return i.closeDialog()},this.scope.enableConfirmButton=function(){return i.enableConfirmButton()},this.scope.relocateToLink=function(){return i.relocateToLink()},this.scope.checkConfirmButton=function(){return i.checkConfirmButton()},this.scope.$watch("viewModel.showDatasetParametersDialog",(function(e,t){e&&e!==t&&i.scope.checkConfirmButton()}),!0),this.scope.$watch("viewModel.parametersForm.$dirty",(function(e,t){e&&e!==t&&i.scope.dialogModel.isConfirmButtonDisabled&&(i.scope.dialogModel.isConfirmButtonDisabled=!1)}),!0)},a.prototype.enableConfirmButton=function(){this.scope.dialogModel.isConfirmButtonDisabled&&(this.scope.dialogModel.isConfirmButtonDisabled=!1)},a.prototype.confirmDialog=function(){var t=this;if(!this.areAllParametersValueSet())return this.model.showValidationError=!0,void(this.model.invalidParameterNameValuePairs=null);this.model.showValidationError=!1,this.model.showSpinner=!0;var i,e,o,a=this.services.telemetryService,r=this.services.datasetsService,n=this.model.providerIdentification;this.scope.dialogModel.isConfirmButtonDisabled=!0,this.model.isImportScenario?(i=a.startEvent(l.telemetry.MashUpContentProviderSaveModelParameters,{providerId:n.providerId,providerKey:n.providerKey}),e=(e=n.providerKey)||n.providerId.toString(),this.model.proxy.updateMashUpProviderPackageModelParameters(e,this.model.datasetModel.dataset.parameters,i.event).then((function(e){i.resolve(),t.discoverDatasourcesForImport(e)}),(function(e){t.resetState(),r.displayOopsErrorAndEndTelemetry(a,t.services.errorService,"DatasetParametersDialog_Error_FailedToUpdateModelParameters",e,i)}))):(o=a.startEvent(l.telemetry.DashboardParametersDialogSaveParameters,{providerId:n.providerId}),r.updateModelParameters(this.model.datasetModel.dataset.modelId.toString(),this.model.datasetModel.dataset.parameters,o.event).then((function(){o.resolve(),t.getModelDatasources()}),(function(e){t.resetState(),r.displayOopsErrorAndEndTelemetry(a,t.services.errorService,"DatasetParametersDialog_Error_FailedToUpdateModelParameters",e,o)})))},a.prototype.getModelDatasources=function(){var t=this,i=this.services.telemetryService,o=this.services.datasetsService,e=this.model.providerIdentification,a=i.startEvent(l.telemetry.DashboardGetAggregatedDatasourcesForOneModel,{providerId:e.providerId});this.services.gatewaysMetadataService.getModelDataSources(this.model.datasetModel.dataset.modelId).then((function(e){a.resolve(),t.model.datasetModel.dataset.datasources=n.convertDMTSDiscoverDatasourcesResponseToDatasources(t.model.datasetModel.dataset.modelId,e.datasources,t.services.localizationService),t.closeDialog(),t.getCredentials()}),(function(e){t.resetState(),o.displayOopsErrorAndEndTelemetry(i,t.services.errorService,"SettingsDataset_Error_FailedToLoadDatasources",e,a)}))},a.prototype.discoverDatasourcesForImport=function(e){var t=this,i=this.services.telemetryService,o=this.services.datasetsService,a=this.model.providerIdentification,e=e.data;this.model.dataAccessInfo=e;var r=i.startEvent(l.telemetry.MashUpContentProviderGetAggregatedDatasourcesForImport,{providerCategory:a.providerCategory,providerId:a.providerId,providerKey:a.providerKey});o.discoverDatasourceForImport(a.providerId.toString(),e,r.event).then((function(e){r.resolve(),t.model.datasetModel.dataset.datasources=n.convertDMTSDiscoverDatasourcesResponseToDatasources(0,e.data.datasources,t.services.localizationService),t.services.gatewaysMetadataService.getDataSourceStatus(t.model.datasetModel.dataset.datasources[0].gatewayObjectId,t.model.datasetModel.dataset.datasources[0].dataSourceObjectId).then((function(){t.model.datasetModel.dataset.datasources[0].alreadyExecutedTestConnection=!0,t.model.datasetModel.dataset.datasources[0].testConnectionState=s.Passed}),(function(){t.model.datasetModel.dataset.datasources[0].alreadyExecutedTestConnection=!0,t.model.datasetModel.dataset.datasources[0].testConnectionState=s.Failed})).finally((function(){t.scope.viewModel.showPlainUI?t.scope.viewModel.showDatasetParametersDialog=!1:t.closeDialog(),t.getCredentials()}))}),(function(e){t.resetState(),o.displayOopsErrorAndEndTelemetry(i,t.services.errorService,"SettingsDataset_Error_FailedToLoadDatasources",e,r)}))},a.prototype.getCredentials=function(){var e,t,i=this;this.alwaysPromptForCredentials()||null!=this.model.datasetModel.dataset.datasources&&0<this.model.datasetModel.dataset.datasources.length&&this.model.datasetModel.dataset.datasources[0].testConnectionState!==s.Passed?(e={dsIndex:0,dataAccessInfo:this.model.dataAccessInfo,modelId:this.model.datasetModel.dataset.modelId,providerKey:this.model.providerIdentification.providerKey,validateParameters:!0},this.scope.$emit(l.common.constants.datasetShowAuthDialog,e)):this.model.isImportScenario?(t=this.services.telemetryService.startEvent(l.telemetry.MashUpContentProviderValidateParameters,{providerId:this.model.providerIdentification.providerId,providerKey:this.model.providerIdentification.providerKey,isImport:this.model.isImportScenario}),this.services.gatewaysMetadataService.validateParametersBeforeImport(this.model.providerIdentification.providerKey,this.model.dataAccessInfo,t.event).then((function(e){i.handleParameterValidationSuccessResult(e,t)}),(function(e){i.handleParameterValidationErrorResult(e,t)}))):o.continueWithImportFlow(this.services.$window,!1,this.model.dataAccessInfo)},a.prototype.handleParameterValidationSuccessResult=function(e,t){t.resolve(),o.continueWithImportFlow(this.services.$window,!1,this.model.dataAccessInfo)},a.prototype.handleParameterValidationErrorResult=function(e,t){t.reject(l.errorDetailsHelper.getTelemetryErrorDetails(e.error));e=i.convertInvalidParameterErrorToNameValuePairs(e);null!=e&&0<e.length?this.scope.$emit(l.common.constants.datasetShowParameterDialogAfterInvalidParameter,e):o.continueWithImportFlow(this.services.$window,!1,this.model.dataAccessInfo)},a.prototype.closeDialog=function(){var e;this.resetState(),this.model.showDatasetParametersDialog=!1,this.scope.viewModel.showPlainUI&&null!=this.services.$window.parent&&(e={message:l.common.constants.contentProviderStoreCloseModalDialogMessage},this.services.$window.parent.postMessage(JSON.stringify(e),l.common.constants.hostOrigin))},a.prototype.resetState=function(){this.model.showSpinner=!1,this.checkConfirmButton()},a.prototype.areAllParametersValueSet=function(){return 0===_.filter(this.model.datasetModel.dataset.parameters,(function(e){return void 0===e.value||""===e.value})).length},a.prototype.areAnyParametersValueSet=function(){var e=this.model.datasetModel.dataset.parameters;return _.filter(e,(function(e){return void 0===e.value||""===e.value})).length<e.length},a.prototype.checkConfirmButton=function(){this.scope&&this.scope.dialogModel&&(this.scope.dialogModel.isConfirmButtonDisabled=!this.areAnyParametersValueSet())},a.prototype.alwaysPromptForCredentials=function(){return t.alwaysPromptForCredentials(this.services.featureSwitchService.featureSwitches,this.model)},e.DatasetParametersDialogController=a})(l.connectivity||(l.connectivity={}))})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).directives||(t.directives={})).AuthDialog=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/authDialogView.html",this.scope={viewModel:"="},this.controller=e.common.createController(e.connectivity.controllers.AuthDialogController)}})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).directives||(t.directives={})).DatasetParametersDialog=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/datasetParametersDialogView.html",this.scope={viewModel:"="},this.controller=e.common.createController(t.controllers.DatasetParametersDialogController)}})(powerbi=powerbi||{}),(function(e){((e=e.connectivity||(e.connectivity={})).models||(e.models={})).DatasetParametersDialogModel=function(){this.showDatasetParametersDialog=!1,this.showSpinner=!1,this.showValidationError=!1}})(powerbi=powerbi||{}),(function(e){((e=e.connectivity||(e.connectivity={})).models||(e.models={})).DataSourceContextMenuItemModel=function(e){this.source=e,this.metadata=[],this.actions=[]}})(powerbi=powerbi||{}),(function(e){var t;t=e.connectivity||(e.connectivity={}),(t=(e=t.models||(t.models={})).GatewayStatus||(e.GatewayStatus={}))[t.NotReachable=1]="NotReachable",t[t.Live=2]="Live",t[t.Unknown=3]="Unknown",e.GatewayContextMenuItemModel=function(e){this.source=e,this.metadata=[],this.actions=[]}})(powerbi=powerbi||{}),(function(e){(e=(e=(e=e.connectivity||(e.connectivity={})).models||(e.models={})).GatewaysSelectionType||(e.GatewaysSelectionType={}))[e.None=0]="None",e[e.Gateway=1]="Gateway",e[e.DataSource=2]="DataSource"})(powerbi=powerbi||{}),(function(e){!(function(e){var a="/metadata/datamovement/gateways",r="/metadata/datamovement/gatewayclusters",n="/metadata/datamovement/models";e.createGatewaysMetadataHttpService=function(e){return new t(e)};var t=(i.prototype.getGateways=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetGateways");return t.enableTelemetry=!0,this.httpService.get(a+"?type="+e+"&api-version=10.0",t)},i.prototype.getGatewayStatus=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetGatewayStatus");return t.enableTelemetry=!0,this.httpService.get(a+"/"+e+"/status?api-version=10.0",t)},i.prototype.deleteGatewayObjectId=function(e,t){t=this.httpService.powerbiRequestOptions(t,"DeleteGateway");return t.enableTelemetry=!0,this.httpService.delete(a+"/"+e+"?api-version=10.0",t)},i.prototype.createDataSource=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"CreateDataSource");return i.enableTelemetry=!0,this.httpService.post(a+"/"+e+"/dataSources?api-version=10.0",JSON.stringify(t),i)},i.prototype.createDataSourceToCluster=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"CreateDataSourceToCluster");return i.enableTelemetry=!0,this.httpService.post(r+"/"+e+"/dataSources?api-version=10.0",JSON.stringify(t),i)},i.prototype.getDataSources=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetDataSources");return t.enableTelemetry=!0,this.httpService.get(a+"/"+e+"/dataSources?api-version=10.0",t)},i.prototype.getDataSourceStatus=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"GetDataSourceStatus");return i.retryCount=1,i.enableTelemetry=!0,this.httpService.get(a+"/"+e+"/dataSources/"+t+"/status?api-version=10.0",i)},i.prototype.updateDataSource=function(e,t,i,o){o=this.httpService.powerbiRequestOptions(o,"UpdateDataSource");return o.enableTelemetry=!0,this.httpService.patch(a+"/"+e+"/dataSources/"+t+"?api-version=10.0",{datasourceName:i.dataSourceName,datasourceAnnotation:i.dataSourceAnnotation,singleSignonType:i.singleSignOnType},o)},i.prototype.deleteDataSource=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"DeleteDataSource");return i.enableTelemetry=!0,this.httpService.delete(a+"/"+e+"/dataSources/"+t+"?api-version=10.0",i)},i.prototype.getModelDataSources=function(e,t,i){t=this.httpService.powerbiRequestOptions(t,"GetModelDataSources");t.retryCount=1,t.enableTelemetry=!0;e=n+"/"+e+"/dataSources?api-version=10.0";return i&&(e=jsCommon.UrlUtils.setQueryParameters(e,{cachePolicy:"ForceRefresh"},!0)),this.httpService.get(e,t)},i.prototype.getDatapoolDataSources=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetDatapoolsDataSources");return t.retryCount=1,t.enableTelemetry=!0,this.httpService.get("metadata/dataflows/settings/"+e+"/datasources",t)},i.prototype.getRdlDataSources=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetRdlDataSources");return t.retryCount=1,t.enableTelemetry=!0,this.httpService.get("metadata/rdl/"+e+"/datasources/monikers",t)},i.prototype.rediscoverModelDataSources=function(e,t){t=this.httpService.powerbiRequestOptions(t,"RediscoverModelDataSources");return t.retryCount=1,t.enableTelemetry=!0,this.httpService.post(n+"/"+e+"/datasources/rediscover?api-version=10.0",null,t)},i.prototype.bindModelToGateway=function(e,t,i,o){i=this.httpService.powerbiRequestOptions(i,"BindModelToGateway");i.enableTelemetry=!0;t={gatewayObjectId:t};return o&&0<o.length&&(t.datasourceObjectIds=o),this.httpService.post(n+"/"+e+"/bind?api-version=10.0",JSON.stringify(t),i)},i.prototype.addDataSourcePrincipals=function(e,t,i,o){o=this.httpService.powerbiRequestOptions(o,"AddDataSourcePrincipals");return o.enableTelemetry=!0,this.httpService.patch(a+"/"+e+"/datasources/"+t+"/principals?api-version=10.0",JSON.stringify(i),o)},i.prototype.deleteDataSourcePrincipals=function(e,t,i,o){o=this.httpService.powerbiRequestOptions(o,"DeleteDataSourcePrincipals");return o.enableTelemetry=!0,this.httpService.patch(a+"/"+e+"/datasources/"+t+"/principals/delete?api-version=10.0",JSON.stringify(i),o)},i.prototype.getDataSourcePrincipals=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"GetDataSourcePrincipals");return i.enableTelemetry=!0,this.httpService.get(a+"/"+e+"/datasources/"+t+"/principals?api-version=10.0",i)},i.prototype.addGatewayPrincipals=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"AddGatewayPrincipals");return i.enableTelemetry=!0,this.httpService.patch(a+"/"+e+"/principals?api-version=10.0",JSON.stringify(t),i)},i.prototype.getGatewayPrincipals=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetGatewayPrincipals");return t.enableTelemetry=!0,this.httpService.get(a+"/"+e+"/principals?api-version=10.0",t)},i.prototype.deleteGatewayPrincipals=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"DeleteGatewayPrincipals");return i.enableTelemetry=!0,this.httpService.patch(a+"/"+e+"/principals/delete?api-version=10.0",JSON.stringify(t),i)},i.prototype.getEntropy=function(e){e=this.httpService.powerbiRequestOptions(e,"GetEntropy");return e.enableTelemetry=!0,this.httpService.get("/metadata/datamovement/entropy",e)},i.prototype.updateCredentials=function(e,t,i,o){o=this.httpService.powerbiRequestOptions(o,"UpdateCredentials");return o.enableTelemetry=!0,this.httpService.put(a+"/"+e+"/dataSources/"+t+"/credentials?api-version=10.0",i,o)},i.prototype.updateClusterCredentials=function(e,t,i,o){o=this.httpService.powerbiRequestOptions(o,"UpdateClusterCredentials");return o.enableTelemetry=!0,this.httpService.put(r+"/"+e+"/dataSources/"+t+"/credentials?api-version=10.0",i,o)},i.prototype.getGatewaysVersion=function(e){e=this.httpService.powerbiRequestOptions(e,"GetGatewaysVersion");return e.enableTelemetry=!0,this.httpService.get("/metadata/datamovement/gateways/version",e)},i.prototype.supportedDataSources=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"SupportedDataSources");return i.enableTelemetry=!0,this.httpService.get(r+"/"+e+"/supportedDatasources?locale="+t+"&api-version=10.0",i)},i.prototype.getDataSourceOAuthDetailsForGatewayCluster=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"GetDataSourceOAuthDetailsForGatewayCluster");return i.enableTelemetry=!0,this.httpService.get(r+"/"+e+"/dataSources/"+t+"/getOAuthDetails?api-version=10.0",i)},i.prototype.initiateOAuthLoginOnGatewayCluster=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"InitiateOAuthLoginOnGatewayCluster");return i.enableTelemetry=!0,this.httpService.post(r+"/"+e+"/initiateOAuthLogin?api-version=10.0",t,i)},i.prototype.getUPNMappingResult=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"GetUPNMapping");return this.httpService.post("metadata/datamovement/mapUpn",{upns:e,analysisServicesUpnMapping:t},i)},i.prototype.getGatewayClusters=function(e){e=this.httpService.powerbiRequestOptions(e,"GetGatewayClusters");return e.enableTelemetry=!0,this.httpService.get(r+"?api-version=10.0",e)},i.prototype.getGatewayClustersWithRoleOptions=function(e){e=this.httpService.powerbiRequestOptions(e,"GetGatewayClusters");return e.enableTelemetry=!0,this.httpService.get("/metadata/datamovement/gatewayClustersWithRoleOptions?api-version=10.0",e)},i.prototype.updateGatewayCluster=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"UpdateGatewayCluster");return i.enableTelemetry=!0,this.httpService.patch(r+"/"+e+"?api-version=10.0",JSON.stringify(t),i)},i.prototype.getClusterDataSourceStatus=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"GetClusterDataSourceStatus");return i.retryCount=1,i.enableTelemetry=!0,this.httpService.get(r+"/"+e+"/dataSources/"+t+"/status?api-version=10.0",i)},i.prototype.getGatewayClusterStatus=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetGatewayClusterStatus");return t.enableTelemetry=!0,this.httpService.get(r+"/"+e+"/status?api-version=10.0",t)},i.prototype.getSSOTestConnection=function(e,t,i,o){i=this.httpService.powerbiRequestOptions(i,"SSOConnectionTest");return i.enableTelemetry=!0,i.retryCount=0,this.httpService.post(r+"/"+e+"/dataSources/"+t+"/SSOTestConnection?api-version=10.0",o,i)},i.prototype.getUserDatasourceLimitStatus=function(e){e=this.httpService.powerbiRequestOptions(e=void 0===e?null:e,"GetUserDatasourceLimitStatus");return e.enableTelemetry=!0,this.httpService.get("/metadata/datamovement/userDatasourcelimitStatus?api-version=10.0",e)},i);function i(e){this.httpService=e}})(e.connectivity||(e.connectivity={}))})(powerbi=powerbi||{}),(function(s){!(function(e){var o=s.common.contracts.gateway.GatewayStatus,a=s.common.contracts.gateway.GatewayType;e.createGatewaysMetadataService=function(e,t,i,o,a,r){return new n(e,t,i,o,a,r)};var n=(t.prototype.getGateways=function(){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getGateways(a.Resource,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.getPersonalGatewayAndGetStatus=function(){return __awaiter(this,void 0,s.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return[4,this._gatewaysHttpService.getGateways(a.Personal,null)];case 1:return t=e.sent(),[4,this.getPersonalGatewayStatus(t.data[0])];case 2:return[2,e.sent()]}}))}))},t.prototype.getGatewayStatus=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getGatewayStatus(e,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.deleteGateway=function(e){var t=this._promiseFactory.defer(),i=this._telemetryService.startEvent(s.telemetry.SettingsDeleteGateway);return this._gatewaysHttpService.deleteGatewayObjectId(e,i.event).then((function(){i.resolve(),t.resolve(null)}),(function(e){i.reject(),t.reject(e)})),t.promise},t.prototype.createDataSource=function(e,t){var i=this._promiseFactory.defer(),o=this._telemetryService.startEvent(s.telemetry.SettingsCreateDataSource,{dataSourceType:t.dataSourceType,credentialType:t.credentialDetails.credentialType});return this._gatewaysHttpService.createDataSource(e,t,o.event).then((function(e){o.resolve(),i.resolve(e.data)}),(function(e){o.reject(),i.reject(e)})),i.promise},t.prototype.createDataSourceToCluster=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.createDataSourceToCluster(e,t,null).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},t.prototype.getDataSources=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getDataSources(e,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.getDataSourceStatus=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.getDataSourceStatus(e,t,null).then((function(){i.resolve(null)}),(function(e){i.reject(e)})),i.promise},t.prototype.updateDataSource=function(e,t,i){var o=this._promiseFactory.defer(),a=this._telemetryService.startEvent(s.telemetry.SettingsUpdateGatewayDatasourceUPNMapping);return this._gatewaysHttpService.updateDataSource(e,t,i,a.event).then((function(){a.resolve(),o.resolve(null)}),(function(e){a.reject(),o.reject(e)})),o.promise},t.prototype.deleteDataSource=function(e,t){var i=this._promiseFactory.defer(),o=this._telemetryService.startEvent(s.telemetry.SettingsDeleteDataSource);return this._gatewaysHttpService.deleteDataSource(e,t,o.event).then((function(){o.resolve(),i.resolve(null)}),(function(e){o.reject(),i.reject(e)})),i.promise},t.prototype.getModelDataSources=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.getModelDataSources(e,null,t).then((function(e){i.resolve(e.data)}),(function(e){i.reject(e)})),i.promise},t.prototype.getDatapoolDataSources=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getDatapoolDataSources(e,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.getRdlDataSources=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getRdlDataSources(e,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.rediscoverModelDataSources=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.rediscoverModelDataSources(e,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.bindModelToGateway=function(e,t,i){var o=this._promiseFactory.defer(),a=this._telemetryService.startEvent(s.telemetry.SettingsBindModelToGateway);return this._gatewaysHttpService.bindModelToGateway(e,t,a.event,i).then((function(){a.resolve(),o.resolve(null)}),(function(e){a.reject(),o.reject(e)})),o.promise},t.prototype.addDataSourcePrincipals=function(e,t,i){var o=this._promiseFactory.defer(),a=_.filter(i,(function(e){return 0<e.principalList.length&&3&e.accessRight})),a=_.reduce(a,(function(e,t){return e+t.principalList.length}),0),r=this._telemetryService.startEvent(s.telemetry.SettingsAddDataSourcePrincipals,{principalCount:a});return this._gatewaysHttpService.addDataSourcePrincipals(e,t,i,r.event).then((function(){r.resolve(),o.resolve(null)}),(function(e){r.reject(),o.reject(e)})),o.promise},t.prototype.deleteDataSourcePrincipals=function(e,t,i){var o=this._promiseFactory.defer(),a=_.filter(i,(function(e){return 0<e.principalList.length&&0===e.accessRight})),a=_.reduce(a,(function(e,t){return e+t.principalList.length}),0),r=this._telemetryService.startEvent(s.telemetry.SettingsRemoveDataSourcePrincipals,{principalCount:a});return this._gatewaysHttpService.deleteDataSourcePrincipals(e,t,i,r.event).then((function(){r.resolve(),o.resolve(null)}),(function(e){r.reject(),o.reject(e)})),o.promise},t.prototype.getDataSourcePrincipals=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.getDataSourcePrincipals(e,t,null).then((function(e){i.resolve(e.data)}),(function(e){i.reject(e)})),i.promise},t.prototype.addGatewayPrincipals=function(e,t){var i=this._promiseFactory.defer(),o=_.filter(t,(function(e){return 0<e.principalList.length&&3&e.accessRight})),o=_.reduce(o,(function(e,t){return e+t.principalList.length}),0),a=this._telemetryService.startEvent(s.telemetry.SettingsAddGatewayPrincipals,{principalCount:o});return this._gatewaysHttpService.addGatewayPrincipals(e,t,a.event).then((function(){a.resolve(),i.resolve(null)}),(function(e){a.reject(),i.reject(e)})),i.promise},t.prototype.getGatewayPrincipals=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getGatewayPrincipals(e,null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.deleteGatewayPrincipals=function(e,t){var i=this._promiseFactory.defer(),o=_.filter(t,(function(e){return 0<e.principalList.length&&0===e.accessRight})),o=_.reduce(o,(function(e,t){return e+t.principalList.length}),0),a=this._telemetryService.startEvent(s.telemetry.SettingsRemoveGatewayPrincipals,{principalCount:o});return this._gatewaysHttpService.deleteGatewayPrincipals(e,t,a.event).then((function(){a.resolve(),i.resolve(null)}),(function(e){a.reject(),i.reject(e)})),i.promise},t.prototype.getEntropy=function(){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getEntropy(null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.updateCredentials=function(e,t,i){var o=this._promiseFactory.defer(),a=this._telemetryService.startEvent(s.telemetry.SettingsUpdateCredentials);return this._gatewaysHttpService.updateCredentials(e,t,i,a.event).then((function(){a.resolve(),o.resolve(null)}),(function(e){a.reject(),o.reject(e)})),o.promise},t.prototype.updateClusterCredentials=function(e,t,i){var o=this._promiseFactory.defer(),a=this._telemetryService.startEvent(s.telemetry.SettingsUpdateCredentials);return this._gatewaysHttpService.updateClusterCredentials(e,t,i,a.event).then((function(e){a.resolve(),o.resolve(e)}),(function(e){a.reject(),o.reject(e)})),o.promise},t.prototype.getGatewaysVersion=function(){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getGatewaysVersion(null).then((function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},t.prototype.supportedDataSources=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.supportedDataSources(e,t,null).then((function(e){i.resolve(e.data)}),(function(e){i.reject(e)})),i.promise},t.prototype.getDataSourceOAuthDetailsForGatewayCluster=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.getDataSourceOAuthDetailsForGatewayCluster(e,t,null).then((function(e){i.resolve(e.data)}),(function(e){i.reject(e)})),i.promise},t.prototype.initiateOAuthLoginOnGatewayCluster=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.initiateOAuthLoginOnGatewayCluster(e,t,null).then((function(e){i.resolve(e.data)}),(function(e){i.reject(e)})),i.promise},t.prototype.getUPNMappingResult=function(e,t){var i=this._telemetryService.startEvent(s.telemetry.SettingsTestGatewayDatasourceUPNMapping),o=this._promiseFactory.defer();return this._gatewaysHttpService.getUPNMappingResult(e,t,i.event).then((function(e){o.resolve(e.data)}),(function(e){o.reject(e)})),o.promise},t.prototype.validateParametersBeforeImport=function(e,t,i){i=this.httpService.powerbiRequestOptions(i,"ValidateParameters");return i.retryCount=0,this.httpService.post("metadata/datamovement/datasources/validateParameters/"+e,t,i)},t.prototype.validateParametersBeforeUpdate=function(e,t){t=this.httpService.powerbiRequestOptions(t,"ValidateUpdatedParameters");return t.retryCount=0,this.httpService.post("metadata/datamovement/datasources/validateUpdatedParameters/"+e,null,t)},t.prototype.displayOopsErrorAndEndTelemetry=function(e,t,i,o,a){o.reject(),t.error(this.localizationService.get(i),i,{requestId:a?a.requestId:void 0,statusCode:a?a.status.toString():void 0})},t.prototype.getGatewayClusters=function(){return this._gatewaysHttpService.getGatewayClusters(null).then((function(e){return e.data}))},t.prototype.getGatewayClustersWithRoleOptions=function(){return this._gatewaysHttpService.getGatewayClustersWithRoleOptions(null).then((function(e){return e.data}))},t.prototype.updateGatewayCluster=function(e,t){return this._gatewaysHttpService.updateGatewayCluster(e,t,null).then((function(e){return e.data}))},t.prototype.getClusterDataSourceStatus=function(e,t){var i=this._promiseFactory.defer();return this._gatewaysHttpService.getClusterDataSourceStatus(e,t,null).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},t.prototype.getPersonalGatewayStatus=function(i){return __awaiter(this,void 0,s.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:if(!i)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.getGatewayStatus(i.gatewayObjectId)];case 2:return t=e.sent(),[2,this.constructPersonalGatewayDetailsAndStatusJson(i,t)];case 3:return(t=e.sent()).error&&t.error.code.match("DM_GWPipeline_Client_GatewayUnreachable")?(i.gatewayStatus=o.NotReachable,[2,this.constructPersonalGatewayDetailsAndStatusJson(i,void 0,o.NotReachable)]):[2,t];case 4:return[3,6];case 5:return[2,this.constructPersonalGatewayDetailsAndStatusJson(void 0,void 0,o.NotInstalled)];case 6:return[2]}}))}))},t.prototype.constructPersonalGatewayDetailsAndStatusJson=function(e,t,i){return{gatewayId:e&&e.gatewayId,gatewayName:e&&e.gatewayName,gatewayObjectId:e&&e.gatewayObjectId,gatewayDescription:e&&e.gatewayDescription,gatewayPublicKey:e&&e.gatewayPublicKey,gatewayStatusJson:t||{gatewayStatus:i},gatewayAnnotation:e&&e.gatewayAnnotation,gatewayType:e?e.gatewayType:a.Personal,allowableOptions:e&&e.allowableOptions}},t.prototype.getGatewayClusterStatus=function(e){var t=this._promiseFactory.defer();return this._gatewaysHttpService.getGatewayClusterStatus(e,null).then((function(e){t.resolve(e)}),(function(e){t.reject(e)})),t.promise},t.prototype.getSSOTestConnection=function(e,t,i,o){return this._gatewaysHttpService.getSSOTestConnection(e,t,null,{userPrincipalName:i,singleSignOnType:o})},t.prototype.getUserDatasourceLimitStatus=function(){return this._gatewaysHttpService.getUserDatasourceLimitStatus().then((function(e){return e.data}))},t);function t(e,t,i,o,a,r){this.localizationService=a,this.httpService=r,this._promiseFactory=e,this._gatewaysHttpService=t,this._telemetryService=i}})(s.connectivity||(s.connectivity={}))})(powerbi=powerbi||{}),(function(a){!(function(t){var e=jsCommon.Utility,i=a.telemetryEventFactory,o=a.telemetry.EventFactories;e?e.generateGuid:Function.prototype;t.ConnectivityUpdateGatewayEventName="PBI.Connectivity.UpdateGateway",t.ConnectivityUpdateGateway=o[t.ConnectivityUpdateGatewayEventName]=function(e){return i({name:t.ConnectivityUpdateGatewayEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityUpdateGatewayLoggers})},t.ConnectivityDeleteGatewayEventName="PBI.Connectivity.DeleteGateway",t.ConnectivityDeleteGateway=o[t.ConnectivityDeleteGatewayEventName]=function(e){return i({name:t.ConnectivityDeleteGatewayEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityDeleteGatewayLoggers})},t.ConnectivityCreateDataSourceEventName="PBI.Connectivity.CreateDataSource",t.ConnectivityCreateDataSource=o[t.ConnectivityCreateDataSourceEventName]=function(e){return i({name:t.ConnectivityCreateDataSourceEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityCreateDataSourceLoggers})},t.ConnectivityDeleteDataSourceEventName="PBI.Connectivity.DeleteDataSource",t.ConnectivityDeleteDataSource=o[t.ConnectivityDeleteDataSourceEventName]=function(e){return i({name:t.ConnectivityDeleteDataSourceEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityDeleteDataSourceLoggers})},t.ConnectivityBindModelToGatewayEventName="PBI.Connectivity.BindModelToGateway",t.ConnectivityBindModelToGateway=o[t.ConnectivityBindModelToGatewayEventName]=function(e){return i({name:t.ConnectivityBindModelToGatewayEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityBindModelToGatewayLoggers})},t.ConnectivityAddDataSourcePrincipalsEventName="PBI.Connectivity.AddDataSourcePrincipals",t.ConnectivityAddDataSourcePrincipals=o[t.ConnectivityAddDataSourcePrincipalsEventName]=function(e){return i({name:t.ConnectivityAddDataSourcePrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityAddDataSourcePrincipalsLoggers})},t.ConnectivityRemoveDataSourcePrincipalsEventName="PBI.Connectivity.RemoveDataSourcePrincipals",t.ConnectivityRemoveDataSourcePrincipals=o[t.ConnectivityRemoveDataSourcePrincipalsEventName]=function(e){return i({name:t.ConnectivityRemoveDataSourcePrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityRemoveDataSourcePrincipalsLoggers})},t.ConnectivityAddGatewayPrincipalsEventName="PBI.Connectivity.AddGatewayPrincipals",t.ConnectivityAddGatewayPrincipals=o[t.ConnectivityAddGatewayPrincipalsEventName]=function(e){return i({name:t.ConnectivityAddGatewayPrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityAddGatewayPrincipalsLoggers})},t.ConnectivityRemoveGatewayPrincipalsEventName="PBI.Connectivity.RemoveGatewayPrincipals",t.ConnectivityRemoveGatewayPrincipals=o[t.ConnectivityRemoveGatewayPrincipalsEventName]=function(e){return i({name:t.ConnectivityRemoveGatewayPrincipalsEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityRemoveGatewayPrincipalsLoggers})},t.ConnectivityUpdateCredentialsEventName="PBI.Connectivity.UpdateCredentials",t.ConnectivityUpdateCredentials=o[t.ConnectivityUpdateCredentialsEventName]=function(e){return i({name:t.ConnectivityUpdateCredentialsEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityUpdateCredentialsLoggers})},t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName="PBI.Connectivity.OpenGatewayDatasourceUPNMappingPane",t.ConnectivityOpenGatewayDatasourceUPNMappingPane=o[t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName]=function(e){return i({name:t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityOpenGatewayDatasourceUPNMappingPaneLoggers})},t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName="PBI.Connectivity.UpdateGatewayDatasourceUPNMapping",t.ConnectivityUpdateGatewayDatasourceUPNMapping=o[t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName]=function(e){return i({name:t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityUpdateGatewayDatasourceUPNMappingLoggers})},t.ConnectivityTestGatewayDatasourceUPNMappingEventName="PBI.Connectivity.TestGatewayDatasourceUPNMapping",t.ConnectivityTestGatewayDatasourceUPNMapping=o[t.ConnectivityTestGatewayDatasourceUPNMappingEventName]=function(e){return i({name:t.ConnectivityTestGatewayDatasourceUPNMappingEventName,baseEvent:t.CustomerAction(e),info:e,category:a.TelemetryCategory.CustomerAction,loggers:t.ConnectivityTestGatewayDatasourceUPNMappingLoggers})},t.ConnectivityOAuthInitiatedEventName="PBI.Connectivity.OAuthInitiated",t.ConnectivityOAuthInitiated=o[t.ConnectivityOAuthInitiatedEventName]=function(e){return i({name:t.ConnectivityOAuthInitiatedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.ConnectivityOAuthInitiatedLoggers})},t.ConnectivityOAuthReferrerNotAvailableInIEEventName="PBI.Connectivity.OAuthReferrerNotAvailableInIE",t.ConnectivityOAuthReferrerNotAvailableInIE=o[t.ConnectivityOAuthReferrerNotAvailableInIEEventName]=function(e){return i({name:t.ConnectivityOAuthReferrerNotAvailableInIEEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.ConnectivityOAuthReferrerNotAvailableInIELoggers})},t.ConnectivityOAuthSucceededEventName="PBI.Connectivity.OAuthSucceeded",t.ConnectivityOAuthSucceeded=o[t.ConnectivityOAuthSucceededEventName]=function(e){return i({name:t.ConnectivityOAuthSucceededEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.ConnectivityOAuthSucceededLoggers})}})(a.telemetry||(a.telemetry={}))})(powerbi=powerbi||{});;
"use strict";var __decorate=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(n<3?o(a):3<n?o(t,r,a):o(t,r))||a);return 3<n&&a&&Object.defineProperty(t,r,a),a},__awaiter=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(r,t){function i(e){try{n(l.next(e))}catch(e){t(e)}}function o(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,o)}n((l=l.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(r,i){var o,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(a=2&t[0]?n.return:t[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,t[1])).done)return a;switch(n=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],n=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}},__extends=this&&this.__extends||(function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}})();!(function(o){!(function(t){var e=jsCommon.Utility,r=o.telemetryEventFactory,i=o.telemetry.EventFactories;e?e.generateGuid:Function.prototype;t.ApprovedResourceFailLoadedEventName="PBI.ApprovedResource.FailLoaded",t.ApprovedResourceFailLoaded=i[t.ApprovedResourceFailLoadedEventName]=function(e){return r({name:t.ApprovedResourceFailLoadedEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.ApprovedResourceFailLoadedLoggers})},t.ApprovedResourceSuccessfulLoadEventName="PBI.ApprovedResource.SuccessfulLoad",t.ApprovedResourceSuccessfulLoad=i[t.ApprovedResourceSuccessfulLoadEventName]=function(e){return r({name:t.ApprovedResourceSuccessfulLoadEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.ApprovedResourceSuccessfulLoadLoggers})},t.ApprovedResourceEndpointDownEventName="PBI.ApprovedResource.EndpointDown",t.ApprovedResourceEndpointDown=i[t.ApprovedResourceEndpointDownEventName]=function(e){return r({name:t.ApprovedResourceEndpointDownEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.ApprovedResourceEndpointDownLoggers})},t.ApproveResourceLoadResourcePackageEventName="PBI.ApproveResource.LoadResourcePackage",t.ApproveResourceLoadResourcePackage=i[t.ApproveResourceLoadResourcePackageEventName]=function(e){return r({name:t.ApproveResourceLoadResourcePackageEventName,baseEvent:t.CustomerAction(e),info:e,category:o.TelemetryCategory.CustomerAction,loggers:t.ApproveResourceLoadResourcePackageLoggers})},t.AppSourceResourceEndpointDownEventName="PBI.AppSourceResource.EndpointDown",t.AppSourceResourceEndpointDown=i[t.AppSourceResourceEndpointDownEventName]=function(e){return r({name:t.AppSourceResourceEndpointDownEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.AppSourceResourceEndpointDownLoggers})},t.VisualConsentRegisterEventName="PBI.VisualConsent.Register",t.VisualConsentRegister=i[t.VisualConsentRegisterEventName]=function(e){return r({name:t.VisualConsentRegisterEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualConsentRegisterLoggers})},t.VisualConsentSetEventName="PBI.VisualConsent.Set",t.VisualConsentSet=i[t.VisualConsentSetEventName]=function(e){return r({name:t.VisualConsentSetEventName,baseEvent:t.CustomerAction(e),info:e,category:o.TelemetryCategory.CustomerAction,loggers:t.VisualConsentSetLoggers})},t.VisualConsentGetEventName="PBI.VisualConsent.Get",t.VisualConsentGet=i[t.VisualConsentGetEventName]=function(e){return r({name:t.VisualConsentGetEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualConsentGetLoggers})},t.VisualEventDownloadContentEventEventName="PBI.VisualEvent.DownloadContentEvent",t.VisualEventDownloadContentEvent=i[t.VisualEventDownloadContentEventEventName]=function(e){return r({name:t.VisualEventDownloadContentEventEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualEventDownloadContentEventLoggers})},t.TrustedVisualLoadEventName="PBI.TrustedVisual.Load",t.TrustedVisualLoad=i[t.TrustedVisualLoadEventName]=function(e){return r({name:t.TrustedVisualLoadEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.TrustedVisualLoadLoggers})},t.TrustedVisualGetConsentEventName="PBI.TrustedVisual.GetConsent",t.TrustedVisualGetConsent=i[t.TrustedVisualGetConsentEventName]=function(e){return r({name:t.TrustedVisualGetConsentEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.TrustedVisualGetConsentLoggers})},t.VisualAuthenticationGetResourceUrlEventName="PBI.VisualAuthentication.GetResourceUrl",t.VisualAuthenticationGetResourceUrl=i[t.VisualAuthenticationGetResourceUrlEventName]=function(e){return r({name:t.VisualAuthenticationGetResourceUrlEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualAuthenticationGetResourceUrlLoggers})},t.VisualAuthenticationGetAADTokenEventName="PBI.VisualAuthentication.GetAADToken",t.VisualAuthenticationGetAADToken=i[t.VisualAuthenticationGetAADTokenEventName]=function(e){return r({name:t.VisualAuthenticationGetAADTokenEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualAuthenticationGetAADTokenLoggers})},t.VisualAuthenticationGetWACTokenEventName="PBI.VisualAuthentication.GetWACToken",t.VisualAuthenticationGetWACToken=i[t.VisualAuthenticationGetWACTokenEventName]=function(e){return r({name:t.VisualAuthenticationGetWACTokenEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualAuthenticationGetWACTokenLoggers})},t.LocalResourceLoadResourcePackageItemEventName="PBI.LocalResource.LoadResourcePackageItem",t.LocalResourceLoadResourcePackageItem=i[t.LocalResourceLoadResourcePackageItemEventName]=function(e){return r({name:t.LocalResourceLoadResourcePackageItemEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.LocalResourceLoadResourcePackageItemLoggers})},t.VisualAuthenticationBlockAccessTokenEventName="PBI.VisualAuthentication.BlockAccessToken",t.VisualAuthenticationBlockAccessToken=i[t.VisualAuthenticationBlockAccessTokenEventName]=function(e){return r({name:t.VisualAuthenticationBlockAccessTokenEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.VisualAuthenticationBlockAccessTokenLoggers})},t.AdminControlInitializedEventName="PBI.AdminControl.Initialized",t.AdminControlInitialized=i[t.AdminControlInitializedEventName]=function(e){return r({name:t.AdminControlInitializedEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.AdminControlInitializedLoggers})},t.PbivizUnzipFailedEventName="PBI.Pbiviz.UnzipFailed",t.PbivizUnzipFailed=i[t.PbivizUnzipFailedEventName]=function(e){return r({name:t.PbivizUnzipFailedEventName,baseEvent:t.Verbose(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.PbivizUnzipFailedLoggers})},t.CustomVisualsLicenseLicensesLoadedEventName="PBI.CustomVisualsLicense.LicensesLoaded",t.CustomVisualsLicenseLicensesLoaded=i[t.CustomVisualsLicenseLicensesLoadedEventName]=function(e){return r({name:t.CustomVisualsLicenseLicensesLoadedEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.CustomVisualsLicenseLicensesLoadedLoggers})},t.CustomVisualsLicenseGetServicePlansCalledEventName="PBI.CustomVisualsLicense.GetServicePlansCalled",t.CustomVisualsLicenseGetServicePlansCalled=i[t.CustomVisualsLicenseGetServicePlansCalledEventName]=function(e){return r({name:t.CustomVisualsLicenseGetServicePlansCalledEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:o.TelemetryCategory.Verbose,loggers:t.CustomVisualsLicenseGetServicePlansCalledLoggers})}})(o.telemetry||(o.telemetry={}))})(powerbi=powerbi||{}),(function(e){var t,r;(t=e.visualHost||(e.visualHost={})).EsriVisual="esriVisual",t.EsriTestVisual="esriVisual_TEST",t.VisioVisual="Visio_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",t.VisioDFVisual="VisioDF_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",t.PowerAppsVisual="PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A",t.PowerAppsTestVisual="PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A_TEST",t.MapboxVisual="PBI_CV_EB3A4088_75C5_4746_9D8B_255A7B7ECD6C",t.MapboxTestVisual="MapboxVisual_TEST",t.MapboxNewVisual="PBI_CV_0157F990_CDD5_4FEC_8488_7262B9195669",t.FlowVisual="FlowVisual_C29F1DCC_81F5_4973_94AD_0517D44CC06A",t.FlowTestVisual="FlowVisual_C29F1DCC_81F5_4973_94AD_0517D44CC06A_TEST",t.CharticulatorVisual="charticulator58556A88422D44A99D9BF0052B958F87",t.CharticulatorTestVisual="charticulatorTest5CA7DEC756074797A2410E6A64934779",t.PowerOnVPMenuVisual="vPMenu6454E8C4E1BD492A83084AB46B0C248B",t.PowerOnDEMatrixV2Visual="DataEntryMatrix1444757060245",t.PowerOnDEMatrixV3Visual="PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD",t.PowerOnDetailReportVisual="detailReport1E51681FC15F46F9B4275CE593BECB98",t.PowerOnSmartFilterVisual="SmartFilterBySQLBI1458262140626",t.PowerOnTableEditorVisual="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181",t.PowerOnTableEditorV2Visual="tableeditor_v2",t.PowerOnForecasterVisual="PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E",t.PowerOnDraggableChartVisual="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182",t.PowerOnVPMenuVisual_TEST="vPMenu6454E8C4E1BD492A83084AB46B0C248B_TEST",t.PowerOnDEMatrixV2Visual_TEST="DataEntryMatrix1444757060245_TEST",t.PowerOnDEMatrixV3Visual_TEST="PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD_TEST",t.PowerOnDetailReportVisual_TEST="detailReport1E51681FC15F46F9B4275CE593BECB98_TEST",t.PowerOnSmartFilterVisual_TEST="SmartFilterBySQLBI1458262140626_TEST",t.PowerOnTableEditorVisual_TEST="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181_TEST",t.PowerOnTableEditorV2Visual_TEST="tableeditor_v2_TEST",t.PowerOnForecasterVisual_TEST="PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E_TEST",t.PowerOnDraggableChartVisual_TEST="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182_TEST",t.OrgStoreVisualSuffix="_OrgStore",t.CustomVisualDeprecatedAPI="1.2.0",t.TrustedVisuals=[t.EsriVisual,t.EsriTestVisual,t.VisioVisual,t.VisioDFVisual,t.PowerAppsVisual,t.PowerAppsTestVisual,t.MapboxVisual,t.MapboxNewVisual,t.MapboxTestVisual,t.FlowVisual,t.FlowTestVisual,t.PowerOnVPMenuVisual,t.PowerOnDEMatrixV2Visual,t.PowerOnDEMatrixV3Visual,t.PowerOnDetailReportVisual,t.PowerOnSmartFilterVisual,t.PowerOnTableEditorVisual,t.PowerOnTableEditorV2Visual,t.PowerOnForecasterVisual,t.PowerOnDraggableChartVisual,t.PowerOnVPMenuVisual_TEST,t.PowerOnDEMatrixV2Visual_TEST,t.PowerOnDEMatrixV3Visual_TEST,t.PowerOnDetailReportVisual_TEST,t.PowerOnSmartFilterVisual_TEST,t.PowerOnTableEditorVisual_TEST,t.PowerOnTableEditorV2Visual_TEST,t.PowerOnForecasterVisual_TEST,t.PowerOnDraggableChartVisual_TEST,t.CharticulatorVisual,t.CharticulatorTestVisual],t.ESRINotSupportedInEmbed="Esri is not supported in Embedded scenario.",t.warningCodeForCV="CV_Warning_Code",t.warningTitleLimit=70,t.warningDetailsLimit=2e3,(e=r=t.ResourcePackageName||(t.ResourcePackageName={})).RegisteredResources="RegisteredResources",e.SharedResources="SharedResources",(t=t.constants||(t.constants={})).ResourcePackageNames=[],t.ResourcePackageNames[1]=r.RegisteredResources,t.ResourcePackageNames[2]=r.SharedResources,t.StaticResourcesDictionary={},t.StaticResourcesDictionary[1]=!0,t.StaticResourcesDictionary[2]=!0})(powerbi=powerbi||{}),(function(e){(e=e.visualHost||(e.visualHost={})).resourceLoaderHttpTimeout=3e4,e.visualCDNBlobDevName="dev",e.visualCDNBlobDefaultName="prod",e.visualCDNBlobAppStoreName="app-store"})(powerbi=powerbi||{}),(function(e){(e.events||(e.events={})).reloadEmptyVisuals={type:4,name:"reloadEmptyVisuals"}})(powerbi=powerbi||{}),(function(e){var t;t=e.contracts||(e.contracts={}),(e=t.SharedResourcePackageNames||(t.SharedResourcePackageNames={})).BaseTheme="BaseTheme",e.Image="Image",e.ShapeMap="ShapeMap",(t=t.ResourcePackageItemType||(t.ResourcePackageItemType={}))[t.CustomVisualJavascript=0]="CustomVisualJavascript",t[t.CustomVisualsCss=1]="CustomVisualsCss",t[t.CustomVisualScreenshot=2]="CustomVisualScreenshot",t[t.CustomVisualIcon=3]="CustomVisualIcon",t[t.CustomVisualWatermark=4]="CustomVisualWatermark",t[t.CustomVisualMetadata=5]="CustomVisualMetadata",t[t.Image=100]="Image",t[t.ShapeMap=200]="ShapeMap",t[t.CustomTheme=201]="CustomTheme",t[t.BaseTheme=202]="BaseTheme",t[t.DashboardTheme=203]="DashboardTheme",t[t.DashboardBaseTheme=204]="DashboardBaseTheme",t[t.HighContrastTheme=205]="HighContrastTheme",t[t.AppNavigation=206]="AppNavigation",t[t.AppTheme=207]="AppTheme",t[t.AppBaseTheme=208]="AppBaseTheme"})(powerbi=powerbi||{}),(function(e){(e=(e=e.visualHost||(e.visualHost={})).VisualErrorType||(e.VisualErrorType={}))[e.AlreadyOpen=1]="AlreadyOpen",e[e.NotAllowed=2]="NotAllowed",e[e.BlockedByUser=3]="BlockedByUser"})(powerbi=powerbi||{}),(function(e){function r(e,t,r){if(void 0!==e){var i=t.defer(),o=new FileReader;return o.onload=function(){i.resolve(o.result)},o.onerror=function(){i.reject(o.error)},r?o.readAsText(e):o.readAsDataURL(e),i.promise}}(e=(e=e.visualHost||(e.visualHost={})).BlobHelper||(e.BlobHelper={})).readAsDataUrl=function(e,t){return r(e,t,!1)},e.readAsText=function(e,t){return r(e,t,!0)}})(powerbi=powerbi||{}),(function(e){var t,r,a,i,o,n;function s(e,t){return i[t](e)}function l(e){return e.type,!!n[e.type]}function u(e,t,r){return null==e||_.isArray(e),r=p(t,r),_.find(e,(function(e){return e.type===t&&e.name===r}))}function c(e,t){return _.find(e&&e.items,(function(e){return e.name===t}))}function p(e,t){t=o[e]||t;return t}t=e.visualHost||(e.visualHost={}),r=t.utils||(t.utils={}),t=e.contracts.ResourcePackageItemType,o=e.visualHost.constants.ResourcePackageNames,n=e.visualHost.constants.StaticResourcesDictionary,a=r.ResourcePackageUtils||(r.ResourcePackageUtils={}),(i={})[t.BaseTheme]=function(e){return"BaseThemes/"+e+".json"},i[t.CustomTheme]=function(e){return"BuiltInThemes/"+e+".json"},i[t.HighContrastTheme]=function(e){return"HighContrastThemes/"+e+".json"},i[t.Image]=function(e){return"Images/"+e},i[t.ShapeMap]=function(e){return"Shapemaps/"+e+".json"},a.getSharedResourcePath=s,a.newSharedResourceItem=function(e,t,r){return{type:t,path:s(e,t),name:e,content:r}},a.getStaticResources=function(e){return _.keyBy(_.filter(e,l),(function(e){return e.name}))},a.isStaticResource=l,a.ensureResourcePackage=function(e,t,r){_.isArray(e);var i=u(e,t,r=p(t,r));return i||e.push(i={id:void 0,name:r,type:t,items:[]}),i},a.findResourcePackage=u,a.findItemInPackages=function(e,t,r,i){return c(u(e,t,i),r)},a.findItemInPackage=c,a.ensurePackageName=p,a.mergeStaticResourcePackages=function(e,t){l(e),l(t),e.type,t.type,e.name,t.name,null==e.id&&null!=t.id&&(e.id=t.id);for(var r=0,i=t.items;r<i.length;r++){var o=i[r],n=a.findItemInPackage(e,o.name);n?(function(e,t){e.name,t.name,e.path,t.path,e.type,t.type,null==e.id&&null!=t.id&&(e.id=t.id);!e.content&&t.content&&(e.content=t.content);!e.contentBlob&&t.contentBlob&&(e.contentBlob=t.contentBlob);!e.contentBlobUrl&&t.contentBlobUrl&&(e.contentBlobUrl=t.contentBlobUrl);e.content||e.contentBlob||e.promise||!t.promise||(e.promise=t.promise);e.content&&e.contentBlob})(n,o):e.items.push(o)}},a.isCustomVisualResourcePackage=function(e){return e&&(0===e.type||3===e.type)},a.getCustomVisualTypes=function(e){return _.chain(e).filter((function(e){return a.isCustomVisualResourcePackage(e)})).map((function(e){return e.name})).uniq().value()}})(powerbi=powerbi||{}),(function(l){var e,c,r,d,p,u,h,v,f,g;function y(e,t,r,i,o){return n(t,{packageType:e.packageType,packageName:e.packageName,itemName:e.itemName},r,i,o).then((function(e){return null==e?h.nullConstant():h.text(e)}),(function(e){return h.nullConstant()}))}function m(e){return e?"string"==typeof e?e:null!=e.status?e.status.toString():e.stack?e.stack.toString():e.message?e.message.toString():"Unknown reason":"No reason given"}function n(e,t,r,i,o){e=u.findResourcePackage(e,t.packageType,t.packageName);if(e)return a(e,t.itemName,r,i,o);f.error("Missing resource package "+t.packageType,!0);e=void 0;if(2===t.packageType&&o&&null!=(e=o.itemTypeFromReference)){var n=u.getSharedResourcePath(t.itemName,e);return r.loadSharedResource(n,e).catch((function(e){f.error("Error loading shared resource from app "+n+" "+m(e),!1)}))}return i.resolve()}function a(e,t,r,i,o){var n=o&&o.usePersistableFormat,a=o&&o.itemTypeFromReference;if(!e)return i.reject(new Error("loadAndResolveContent: no package"));var s=u.findItemInPackage(e,t);if(!s&&2===e.type&&a&&e&&a&&(s=u.newSharedResourceItem(t,a),e.items.push(s)),s&&s.path,!s||!s.path)return f.error("Missing resource item or path !resourcePackageItem="+!s+", resourcePackageItem.path="+(s&&s.path),!0),i.resolve();var t=2===e.type?s.content?i.resolve(s.content):s.promise||(s.promise=r.loadSharedResource(s.path,s.type).finally((function(){delete s.promise})).then((function(e){return e instanceof Blob?s.contentBlob=e:(_.isString(e)||(e=JSON.stringify(e)),s.content=e)}),(function(e){throw f.error("Error loading shared resource from app "+s.path+" "+m(e),!1),e}))):r.loadResourcePackageItem(e,t),l=i.defer();return t.then((function(){!(function(e,t,r,i,o){var n=null;if(t){var a=o===p.ShapeMap||t.type===p.ShapeMap,s=t.type===p.BaseTheme||t.type===p.CustomTheme||t.type===p.HighContrastTheme,l=3===e.type||0===e.type,o=t.content;if(o)a&&g.isDataUri(o)&&(o=g.atou(g.getBase64ContentFromDataUri(o))),n=o;else if(t.contentBlob){if(2===e.type&&t.type===p.Image||i||a||l||s){var u=r.defer();return(a||l||s?c.readAsText:c.readAsDataUrl)(t.contentBlob,r).then((function(e){return u.resolve(e)}),(function(e){return u.resolve(null)})),u.promise}t.contentBlobUrl||(t.contentBlobUrl=window.URL.createObjectURL(t.contentBlob)),n=t.contentBlobUrl}}return r.resolve(n)})(e,s,i,n,a).then((function(e){return l.resolve(e)}))})).catch((function(e){return l.reject(e)})),l.promise}function o(e,t,r,i){if(r){r=u.findResourcePackage(r,1);return r?t.loadResourcePackageItem(r,i):e.reject(new Error("loadRegisteredResource: no RegisteredResources package"))}return e.reject(new Error("loadRegisteredResource: no packages"))}function S(e,t,a){var s=[];return r.visitPropertyExprs({definitions:e,descriptors:t,visitor:function(e,t,r,i,o){var n=i&&i.geoJson&&1===o.length&&"content"===o[0];!n||17===(i=t).type.kind&&17===i.name.kind&&17===i.content.kind&&(i.type.value!==l.GeoJsonTypes.shared||"string"==typeof(o=i.name.value)&&null==i.content.value&&(a&&a(o,p.ShapeMap),e=h.resourcePackageItem(u.ensurePackageName(2),2,o),i.content=e)),e instanceof v&&(e={getRefValue:function(){return t[r]},setRefValue:function(e){t[r]=e}},n&&(e.itemType=p.ShapeMap),s.push(e))}}),s}e=l.visualHost||(l.visualHost={}),c=l.visualHost.BlobHelper,r=l.data.DataViewObjectDefinitions,d=l.data.services.DataViewObjectSerializer,p=l.contracts.ResourcePackageItemType,u=l.visualHost.utils.ResourcePackageUtils,h=l.data.SQExprBuilder,v=l.data.SQResourcePackageItemExpr,f=jsCommon.Trace,g=jsCommon.UrlUtils,(e=e.ResourcePackageReferenceResolver||(e.ResourcePackageReferenceResolver={})).loadFromDataViewObjects=function(e,t,r,i,o,n){if(!e)return o.resolve(null);for(var a=[],s=0,l=S(e,t,n);s<l.length;s++){var u=l[s],c=u.getRefValue();a.push(y(c,r(),i,o,{itemTypeFromReference:u.itemType}))}return o.all(a)},e.loadAndResolveFromDataViewObjects=function(e,t,i,o,n,a,s){if(!e)return n.resolve(null);for(var e=d.serializeObjects(e,t),r=d.deserializeObjects(e,t),t=S(r,t),l=[],u=0,c=t;u<c.length;u++)!(function(t){var e=t.getRefValue(),r=null!=s?s.createChildActivity({name:"Visual Container Resource Load",resourceType:e.packageType}):void 0,e=y(e,i,o,n,{usePersistableFormat:a,itemTypeFromReference:t.itemType}).then((function(e){t.setRefValue(e),r&&r.resolve()})).catch((function(){r&&r.reject()}));l.push(e)})(c[u]);var p=n.defer();return n.all(l).then((function(){return p.resolve(r)})),p.promise},e.hasResourceReferencesToResolve=function(e,t){return!!e&&0<S(e,t).length},e.loadAndResolveFromSQExpr=y,e.getLoadAndResolveErrorReason=m,e.loadAndResolveItemContent=n,e.loadAndResolveContent=a,e.loadRegisteredResource=o,e.loadRegisteredResourceAsDataUri=function(t,e,r,i){return o(t,e,r,i).then((function(e){return Blob,e instanceof Blob?l.visualHost.BlobHelper.readAsDataUrl(e,t):"string"!=typeof e||g.isDataUri(e)?e:g.makeJsonDataUri(e)}))},e.loadRegisteredResourceAsDecodedString=function(t,e,r,i){return o(t,e,r,i).then((function(e){return Blob,e instanceof Blob?l.visualHost.BlobHelper.readAsText(e,t):e})).then((function(e){try{"string"==typeof e&&g.isDataUri(e)&&(e=g.atou(g.getBase64ContentFromDataUri(e)))}catch(e){throw f.error("Error decoding registeredResource: "+JSON.stringify(e),!!e.stack),e}return e}))}})(powerbi=powerbi||{}),(function(e){((e=e.visualHost||(e.visualHost={})).VisualHostUtils||(e.VisualHostUtils={})).isDefined=function(e,t){for(var r,i=t.split(".");r=i.shift();){if(!e||void 0===e[r]||null===e[r])return!1;e=e[r]}return!0}})(powerbi=powerbi||{}),(function(l){!(function(i){i.createApprovedResourceLoader=function(e,t,r){return new o(e,t,r)},i.createPhantomJsApprovedResourceLoader=function(e,t,r,i){return new o(e,t,r,!0,i)};var o=(e.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},e.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackage=function(n){function t(e,t,r,i,o){a.telemetryService.logEvent(l.telemetry.ApprovedResourceFailLoaded,{visualType:n.name,fileName:e,isClientGenerated:!!o,start:r,end:i,parentId:a.telemetryService.root.id,isError:!0,errorSource:"PowerBI",errorCode:t})}var a=this;return this.approvedResourceService.loadApprovedResourcesMetadata(this.onlyApprovedForServerRenderResources,this.promiseFactory).catch((function(e){return a.promiseFactory.reject(e)})).then((function(){var e=[];return a.approvedResourceService.isApprovedResource(n.name)?(e.push(a.loadResourcesWithVisualApi(n,t)),a.promiseFactory.all(e)):a.promiseFactory.reject("Visual is not an approved visual")}))},e.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},e.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},e.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},e.prototype.loadVisualPlugin=function(t){var r=this.promiseFactory.defer();return t&&t.items&&0<t.items.length?this.loadResourcePackage(t).then((function(){var e=l.visuals.plugins[t.name];e?(e.iconUrl=i.resourceInjector.getInjectedIconUrl(t.name),r.resolve(e)):r.reject("Unable to load visual plugin from resource package: "+t.name)})).catch((function(){r.reject("failed to resolve all promises")})):r.resolve(null),r.promise},e.prototype.destroy=function(){},e.prototype.loadResourcesWithVisualApi=function(r,i){var o=this,n=this.promiseFactory.defer(),a=(new Date).toISOString(),s=this.featureSwitchService?!!this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps:void 0;return this.approvedResourceService.getCustomVisualPbivizJson(r.name).then((function(e){var t=(new Date).toISOString();o.handleLoadResourceResponse(e.data,r),o.telemetryService.logEvent(l.telemetry.ApprovedResourceSuccessfulLoad,{visualType:r.name,fileName:o.approvedResourceService.customVisualJsonUrlBuilder(r.name),isClientGenerated:!!r.isPublic,consumePublicCvsWithoutRps:s,start:a,end:t,parentId:o.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),n.resolve(null)}),(function(e){var t=JSON.stringify(e),e=(new Date).toISOString();i(o.approvedResourceService.customVisualJsonUrlBuilder(r.name),t,a,e,r.isPublic),n.reject(t)})),n.promise},e.prototype.handleLoadResourceResponse=function(e,t){t.items&&t.items[0]&&(t.items[0].content=JSON.stringify(e));e=i.visualPluginUtility.createVisualPlugin(e,this.locale,2);e&&(e.isDeprecated=this.approvedResourceService.isDeprecated(t.name),e.approvedForNoIframe=this.approvedResourceService.isApprovedForNoIframe(t.name)),l.extensibility.visualPluginAdapter.transformPlugin(e);t=l.visuals.plugins[e.name];t&&(e.favoriteId=t.favoriteId,e.isOutOfBox=t.isOutOfBox),l.visuals.plugins[e.name]=e},e);function e(e,t,r,i,o){this.featureSwitchService=o,this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.approvedResourceService=t,this.telemetryService=r,this.onlyApprovedForServerRenderResources=i}})(l.visualHost||(l.visualHost={}))})(powerbi=powerbi||{});var commonGlobals=window;!(function(s){!(function(a){var o=jsCommon.Version.gt,r=jsCommon.Version.lt,t=jsCommon.BrowserUtility;a.createApprovedResourceService=function(e,t,r,i,o){return new n(e,t,r,i,o)};var n=(i.prototype.getCustomVisualPbivizJson=function(e){var t=this.customVisualJsonUrlBuilder(e),e={responseType:"json",timeout:s.visualHost.resourceLoaderHttpTimeout,retryCount:this.resourcesRetryCount,logRetries:!0,addRequestIdToRetries:!0};return this.httpService.get(t,e)},i.prototype.getCustomVisualVersion=function(e){e=this.getCompatibleVisualVersion(e);return e?e.version:null},i.prototype.customVisualJsonUrlBuilder=function(e){var t=this.getCompatibleVisualVersion(e);if(t)return this.customVisualsEndpoint+"/"+e+"."+t.version+"."+t.hash+".pbiviz.json"},i.prototype.getVisualIdFromAssetId=function(e){for(var t in this.approvedVisuals)if(this.approvedVisuals[t]&&this.approvedVisuals[t].assetId===e)return t;return null},i.prototype.isApprovedVisualsDefined=function(){return!!this.approvedVisuals},i.prototype.isApprovedResource=function(e){return!!this.approvedVisuals&&!!this.approvedVisuals[e]},i.prototype.isApprovedResourceByAssetId=function(e){return!!this.approvedVisualsAssetIds&&!!this.approvedVisualsAssetIds[e]},i.prototype.isApprovedResourceServerRender=function(e){var t=this.getCompatibleVisualVersion(e);return this.isApprovedResource(e)&&!!t&&!!t.approvedForServerRender},i.prototype.isApprovedForNoIframe=function(e){if(this.onlyApprovedForServerRenderResources||t.isInternetExplorerBrowser())return!1;e=this.getCompatibleVisualVersion(e);return!!e&&!!e.approvedForNoIframe},i.prototype.isTrustedResource=function(t){return!!_.find(this.trustedVisuals,(function(e){return e===t}))},i.prototype.addTrustedVisual=function(e){this.isTrustedResource(e)||this.trustedVisuals.push(e)},i.prototype.isDeprecated=function(e){var t=this.getCompatibleVisualVersion(e);return this.isApprovedResource(e)&&!!t&&(!!t.isDeprecated||t.apiVersion&&r(t.apiVersion,a.CustomVisualDeprecatedAPI))},i.prototype.usesExternalResourcesInAirGappedEnv=function(e){e=this.getCompatibleVisualVersion(e);return this.inAirGappedEnv&&e&&e.usesExternalResources},i.prototype.canUseLocalStorage=function(e){if(this.onlyApprovedForServerRenderResources)return!1;var t=this.getCompatibleVisualVersion(e);return!!t&&(!!this.isApprovedResource(e)&&t.canUseLocalStorage)},i.prototype.removeApprovedResource=function(e){this.approvedVisuals&&(this.approvedVisuals[e]=void 0)},i.prototype.getCdnEnvEndpointName=function(e){var t=s.getVisualCDNBlobContainerUrl()||a.visualCDNBlobDefaultName;return e+(t=this.appStoreCdnOverride?a.visualCDNBlobAppStoreName:t)},i.prototype.loadApprovedResourcesMetadata=function(e,t){var i=this;return e&&(this.onlyApprovedForServerRenderResources=!0),this.approvedResourceJsonInProccess?this.approvedResourceJsonRequest.promise:(this.approvedResourceJsonRequest=t.defer(),this.approvedVisuals?(this.setApprovedResources(null,this.onlyApprovedForServerRenderResources),this.approvedResourceJsonRequest.resolve(null)):(this.approvedResourceJsonInProccess=!0,t.allSettled([this.featureSwitchesPromise,this.customVisualsEndpointPromise]).then((function(e){i.customVisualsEndpoint=e[1].value})).finally((function(){var r=(new Date).toISOString(),e={responseType:"json",timeout:s.visualHost.resourceLoaderHttpTimeout,retryCount:i.resourcesRetryCount,logRetries:!0,addRequestIdToRetries:!0};i.httpService.get(i.customVisualsEndpoint+"/approvedResources.json",e).then((function(e){var t=(new Date).toISOString();i.telemetryService&&i.telemetryService.logEvent(s.telemetry.ApprovedResourceEndpointDown,{endpoint:i.customVisualsEndpoint,allEndpointDown:!1,start:r,end:t,parentId:i.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),i.setApprovedResources(e.data,i.onlyApprovedForServerRenderResources),i.approvedResourceJsonRequest.resolve(null),i.approvedResourceJsonInProccess=!1}),(function(e){var t=(new Date).toISOString();i.telemetryService&&i.telemetryService.logEvent(s.telemetry.ApprovedResourceEndpointDown,{endpoint:i.customVisualsEndpoint,allEndpointDown:!0,start:r,end:t,parentId:i.telemetryService.root.id,isError:!0,errorSource:"PowerBI",errorCode:JSON.stringify(e)}),i.approvedResourceJsonRequest.reject(JSON.stringify(e)),i.approvedResourceJsonInProccess=!1}))}))),this.approvedResourceJsonRequest.promise)},i.prototype.cdnUrlBuilder=function(e,t,r){var i=this.getCompatibleApiVersion(t);return i?this.getCdnEnvEndpointName(e)+"/"+i+"/"+t+r:this.getCdnEnvEndpointName(e)+"/"+t+r},i.prototype.getTrustedResources=function(){return this.trustedVisuals},i.prototype.hasApi=function(e){e=this.getCompatibleVisualVersion(e);return!!e&&(!!this.approvedVisuals&&!!e&&!!e.apiVersion&&e.apiVersion!==this.legacy)},i.prototype.getTelemetryUsageLimit=function(e){var t=this.getCompatibleVisualVersion(e);return t&&this.isApprovedResource(e)&&t.telemetryUsageLimit||0},i.prototype.canRefreshHostData=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!!this.isApprovedResource(e)&&t.canRefreshHostData)},i.prototype.canGetAADToken=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!this.blockedAccessToken(e)&&(!!this.isApprovedResource(e)&&t.canGetAADToken))},i.prototype.blockedAccessToken=function(e){if(this.options&&this.options.shouldBlockAccessToken())return this.telemetryService&&this.telemetryService.logEvent(s.telemetry.VisualAuthenticationBlockAccessToken,{visualType:e,reason:"Access Token does not exists in publishToWeb/PaasEmbed"}),!0;try{var t=JSON.parse(atob(commonGlobals.powerBIAccessToken.split(".")[1])).scp;return 0<=t.indexOf("user_impersonation")||0<=t.indexOf("__Tokens.WAC")?!1:(this.telemetryService&&this.telemetryService.logEvent(s.telemetry.VisualAuthenticationBlockAccessToken,{visualType:e,reason:"Access Token is blocked due to insufficient scope"}),!0)}catch(e){return!1}},i.prototype.canGetWACToken=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!this.blockedAccessToken(e)&&(!!this.isApprovedResource(e)&&t.canGetWACToken))},i.prototype.getAllApprovedForServerRenderResourcesTypes=function(){var t=this;if(!this.approvedVisuals)return[];var e=Object.keys(this.approvedVisuals);return _.filter(e,(function(e){return t.isApprovedResourceServerRender(e)}))},i.prototype.getPublicId=function(e){return this.isApprovedResource(e)&&this.approvedVisuals[e].assetId?this.approvedVisuals[e].assetId:null},i.prototype.canManageAsyncUpdate=function(e){if(this.isApprovedResource(e)){e=this.getCompatibleVisualVersion(e);if(e&&e.callsRenderingCompleted)return!0}return!1},i.prototype.getCompatibleApiVersion=function(e){if(!this.isApprovedResource(e))return null;if(!this.approvedVisuals[e].allVersions)return null;e=this.approvedVisuals[e].allVersions;e.sort((function(e,t){return e.apiVersion&&(!t.apiVersion||o(e.apiVersion,t.apiVersion))?-1:1}));for(var t=0,r=e;t<r.length;t++){var i=(function(t){if(s.extensibility.getVisualApiVersions().some((function(e){return e.version===t.apiVersion})))return{value:t.apiVersion}})(r[t]);if("object"==typeof i)return i.value}return this.legacy},i.prototype.getCompatibleVisualVersion=function(e){var t=this.getCompatibleApiVersion(e);if(t)for(var r=0,i=this.approvedVisuals[e].allVersions;r<i.length;r++){var o=i[r];if(o.apiVersion===t)return o}return null},i.prototype.setApprovedResources=function(e,t){e&&(this.approvedVisuals=e,this.approvedVisualsAssetIds=i.buildApprovedVisualsAssetIds(e)),t&&(t=this.getAllApprovedForServerRenderResourcesTypes(),t=_.pick(this.approvedVisuals,t),this.approvedVisuals=t)},i.buildApprovedVisualsAssetIds=function(e){return _.reduce(e,(function(e,t){return t.assetId&&(e[t.assetId]=!0),e}),{})},i);function i(e,t,r,i,o){var n=this;this.httpService=t,this.options=i,this.telemetryService=o,this.trustedVisuals=a.TrustedVisuals,this.resourcesRetryCount=5,this.legacy="legacy",this.approvedResourceJsonInProccess=!1,this.featureSwitchesPromise=e.getFeatureSwitches().then((function(e){n.appStoreCdnOverride=e.appStoreCdnOverride,n.inAirGappedEnv=e.restrictServiceOutboundFlowsEnabled})),this.customVisualsEndpointPromise=r.getCustomVisualsEndpointAsync()}})(s.visualHost||(s.visualHost={}))})(powerbi=powerbi||{});var powerbi,CustomVisualsUtils=powerbi.visualHost.CustomVisualsUtils;!(function(a){!(function(o){o.createConditionalResourceLoader=function(e,t,r,i,o){return new n(e,t,r,i,o)};var n=(e.prototype.resourceLoaderSelector=function(e){switch(e.type){case 0:case 3:return this.getCustomVisualResourceLoader(e);case 1:case 2:return this.getStaticResourceResourceLoader();default:e.type,e.type}},e.prototype.getStaticResourceResourceLoader=function(){return this.getLocalResourceLoader()},e.prototype.getCustomVisualResourceLoader=function(e){if(3===e.type)return this.getOrganizationalStoreResourceLoader();if(e.developerModeVisual)return this.getSandboxResourceLoader();if(this.approvedResourceService.isTrustedResource(e.name)){if(this.getApprovedResourcesForTrustedVisualsEnabled())return this.getTrustedResourceLoader()}else{if(this.resourceLoaderInitOptions.getApprovedResourcesEnabled())return this.getApprovedResourceLoader();if(this.resourceLoaderInitOptions.getSandboxVisualsEnabled())return this.getSandboxResourceLoader()}return this.getLocalResourceLoader()},e.prototype.getApprovedResourcesForTrustedVisualsEnabled=function(){return this.resourceLoaderInitOptions.getApprovedResourcesEnabled()||a.getVisualCDNBlobContainerUrl()!==o.visualCDNBlobDevName},e.prototype.getLocalResourceLoader=function(){return void 0===this.resourceLoaderCollection.localResourceLoader&&(this.resourceLoaderCollection.localResourceLoader=this.resourceLoaderFactories.localResourceLoaderFactory()),this.resourceLoaderCollection.localResourceLoader},e.prototype.getSandboxResourceLoader=function(){return void 0===this.resourceLoaderCollection.sandboxResourceLoader&&(this.resourceLoaderCollection.sandboxResourceLoader=this.resourceLoaderFactories.sandboxResourceLoaderFactory()),this.resourceLoaderCollection.sandboxResourceLoader},e.prototype.getApprovedResourceLoader=function(){return void 0===this.resourceLoaderCollection.approvedResourceLoader&&(this.resourceLoaderCollection.approvedResourceLoader=this.resourceLoaderFactories.approvedResourceLoaderFactory()),this.resourceLoaderCollection.approvedResourceLoader},e.prototype.getTrustedResourceLoader=function(){return void 0===this.resourceLoaderCollection.trustedResourceLoader&&(this.resourceLoaderCollection.trustedResourceLoader=this.resourceLoaderFactories.trustedResourceLoaderFactory()),this.resourceLoaderCollection.trustedResourceLoader},e.prototype.getOrganizationalStoreResourceLoader=function(){return void 0===this.resourceLoaderCollection.organizationalStoreResourceLoader&&(this.resourceLoaderCollection.organizationalStoreResourceLoader=this.resourceLoaderFactories.organizationalStoreResourceLoaderFactory()),this.resourceLoaderCollection.organizationalStoreResourceLoader},e.prototype.loadTrustedResourcePackages=function(e){var t=[];return t.push(this.getTrustedResourceLoader().loadTrustedResourcePackages(e)),this.promiseFactory.all(t)},e.prototype.updateResourcePackageId=function(e){var t;return!a.visuals.plugins||(t=a.visuals.plugins[e.name])&&(t.resourcePackageId=e.id),null},e.prototype.isValid=function(e){if(null==a.visuals.plugins||null==e||null==e.name)return!1;if(o.CustomVisualsUtils.isOrganizationalCustomVisual(e.name)&&3!==e.type)return!1;var t=a.visuals.plugins[e.name];return!(null!=t&&!0!==t.custom&&!this.approvedResourceService.isTrustedResource(e.name))},e.prototype.loadResourcePackages=function(e){for(var t=this,r=[],i=this,o=0,n=e;o<n.length;o++)!(function(e){r.push(i.resourceLoaderSelector(e).loadResourcePackage(e).then((function(){return t.updateResourcePackageId(e)})))})(n[o]);return this.promiseFactory.all(r)},e.prototype.isPublicManagedVisual=function(e){var t=this.promiseFactory.defer();return this.managedCustomVisualsService?this.managedCustomVisualsService.isPublicManagedVisualByVisualType(e).then((function(e){t.resolve(e)})).catch((function(){t.reject()})):t.resolve(!1),t.promise},e.prototype.loadResourcePackage=function(t){var r=this;if(a.getVisualCDNBlobContainerUrl()!==o.visualCDNBlobDevName&&!1===this.isValid(t))return this.promiseFactory.reject("Attempting to load an invalid custom visual");var e,i=this.resourceLoaderSelector(t);if(i===this.resourceLoaderCollection.approvedResourceLoader)e=i.loadResourcePackage(t).catch((function(e){return r.isPublicManagedVisual(t.name).then((function(e){return e||r.resourceLoaderInitOptions.getSandboxVisualsEnabled?r.approvedResourceService.isApprovedResource(t.name)?r.promiseFactory.reject("Fallback is blocked for public custom visuals"):(r.approvedResourceService.removeApprovedResource(t.name),e?r.promiseFactory.reject("Fallback is blocked for public managed visuals"):r.getSandboxResourceLoader().loadResourcePackage(t)):r.getLocalResourceLoader().loadResourcePackage(t)}))}));else{if(i===this.resourceLoaderCollection.trustedResourceLoader)return i.loadResourcePackage(t);e=this.isPublicManagedVisual(t.name).then((function(e){return e&&!t.developerModeVisual?r.promiseFactory.reject("Fallback is blocked for public managed visuals"):r.approvedResourceService.isApprovedResource(t.name)&&!t.developerModeVisual?r.promiseFactory.reject("Fallback is blocked for public custom visuals"):i.loadResourcePackage(t)}))}return e.then((function(){return r.updateResourcePackageId(t)}))},e.prototype.loadVisualPlugin=function(e){return this.resourceLoaderSelector(e).loadVisualPlugin(e)},e.prototype.loadVisualPlugins=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.resourceLoaderSelector(o).loadVisualPlugin(o))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackageItem=function(e,t){return this.resourceLoaderSelector(e).loadResourcePackageItem(e,t)},e.prototype.loadSharedResource=function(e,t){return this.getLocalResourceLoader().loadSharedResource(e,t)},e.prototype.destroy=function(){var e,t=this.resourceLoaderCollection;for(e in t)t.hasOwnProperty(e)&&t[e].destroy()},e);function e(e,t,r,i,o){this.promiseFactory=e,this.resourceLoaderInitOptions=t,this.resourceLoaderFactories=r,this.approvedResourceService=i,this.managedCustomVisualsService=o,this.resourceLoaderCollection={}}})(a.visualHost||(a.visualHost={}))})(powerbi=powerbi||{}),(function(l){!(function(a){a.createTrustedResourceLoader=function(e,t,r,i,o,n,a){return new s(e,t,r,i,o,n=void 0===n?!1:n,a)},a.CustomVizJSONSuffix=".pbiviz.json";var s=(e.prototype.loadTrustedResourcePackages=function(e){var t=[];if(e&&0<e.length)for(var r=9999,i=0,o=e;i<o.length;i++){var n=o[i];l.visuals.plugins[n]?t.push(this.promiseFactory.resolve([l.visuals.plugins[n]])):(n={id:r++,name:n,type:0,items:[{name:n,type:l.contracts.ResourcePackageItemType.CustomVisualMetadata,path:n+a.CustomVizJSONSuffix}]},this.resourcePackagesService.registerPackages([n]),t.push(this.loadResourcePackage(n)))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackage=function(r){var i=this;if(!this.resourceLoaderInitOptions||this.resourceLoaderInitOptions.getApprovedResourcesEnabled())return this.approvedResourceService.loadApprovedResourcesMetadata(this.onlyApprovedForServerRenderResources,this.promiseFactory).catch((function(e){return i.promiseFactory.reject(e)})).then((function(){var e=[];if(i.onlyApprovedForServerRenderResources&&!i.approvedResourceService.isApprovedResource(r.name))return i.promiseFactory.reject("Visual is not an approved visual");if(!i.approvedResourceService.hasApi(r.name))return i.promiseFactory.reject("The trusted visual does not have a supported API version for this client");var t=i.loadCustomVisualJson(r.name,r.isPublic);return t.catch((function(e){return i.promiseFactory.reject(e)})),e.push(t),i.promiseFactory.all(e)}));return this.promiseFactory.all([])},e.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},e.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},e.prototype.loadVisualPlugins=function(e){return this.promiseFactory.reject()},e.prototype.loadVisualPlugin=function(e){return this.promiseFactory.reject()},e.prototype.destroy=function(){},e.prototype.loadCustomVisualJson=function(r,i){var o=this,n=this.promiseFactory.defer(),a=(new Date).toISOString(),s=this.featureSwitchService?!!this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps:void 0;return this.approvedResourceService.getCustomVisualPbivizJson(r).then((function(e){var t=(new Date).toISOString();o.telemetryService.logEvent(l.telemetry.ApprovedResourceSuccessfulLoad,{visualType:r,fileName:o.approvedResourceService.customVisualJsonUrlBuilder(r),isClientGenerated:!!i,consumePublicCvsWithoutRps:s,start:a,end:t,parentId:o.telemetryService.root.id,isError:!1,errorSource:"PowerBI"});e=o.handleLoadResourceResponse(e.data);n.resolve(e)}),(function(e){var t=(new Date).toISOString(),t=o.handleLoadResourceError(e,r,o.approvedResourceService.customVisualJsonUrlBuilder(r),a,t,i);n.reject(t),n.reject(e.data)})),n.promise},e.prototype.handleLoadResourceError=function(e,t,r,i,o,n){e=JSON.stringify(e);return this.telemetryService.logEvent(l.telemetry.ApprovedResourceFailLoaded,{visualType:t,fileName:r,isClientGenerated:!!n,start:i,end:o,parentId:this.telemetryService.root.id,isError:!0,errorSource:"PowerBI",errorCode:e}),e},e.prototype.handleLoadResourceResponse=function(e){var t;try{t=a.visualPluginUtility.createVisualPlugin(e,this.locale,2)}catch(e){return null}t.custom=!0,t.isDeprecated=this.approvedResourceService.isDeprecated(t.name),(t.name===a.EsriVisual||t.name===a.PowerAppsVisual||t.name===a.FlowVisual&&this.featureSwitchService.featureSwitches.powerAutomateNativeVisual)&&(t.custom=!1);e=l.visuals.plugins[t.name];return e&&(t.favoriteId=e.favoriteId,t.isOutOfBox=e.isOutOfBox),l.extensibility.visualPluginAdapter.transformPlugin(t),l.visuals.plugins[t.name]=t},e);function e(e,t,r,i,o,n,a){void 0===n&&(n=!1),this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.approvedResourceService=t,this.resourcePackagesService=r,this.telemetryService=o,this.onlyApprovedForServerRenderResources=n,this.resourceLoaderInitOptions=a,this.featureSwitchService=i}})(l.visualHost||(l.visualHost={}))})(powerbi=powerbi||{}),(function(u){!(function(n){var e=u.telemetry.LocalResourceLoadResourcePackageItemEventName,t=u.MonitorWith,r=u.contracts.ResourcePackageItemType,i=n.utils.ResourcePackageUtils;n.createResourceLoader=function(e,t,r){return new s(e,t,r||new o(e.promiseFactory))};var o=(a.prototype.get=function(e,t,r){return this.promiseFactory.reject()},a.prototype.getBlob=function(e,t,r){return this.promiseFactory.reject()},a);function a(e){this.promiseFactory=e}n.DefaultSharedResourceItemProxy=o;var s=(l.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},l.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},l.prototype.loadResourcePackage=function(e){var t=[];if(e&&e.items)for(var r=0,i=e.items;r<i.length;r++){var o=i[r];t.push(this.loadCustomVisualResourcePackageItem(o,e))}return this.promiseFactory.all(t)},l.prototype.loadResourcePackageItem=function(e,t){t=i.findItemInPackage(e,t);return t?t.content?this.promiseFactory.resolve(t.content):this.loadBlob(e.id,e.name,t):(jsCommon.Trace.warning("loadResourcePackageItem: item not found in package"),this.promiseFactory.resolve(null))},l.prototype.loadSharedResource=function(e,t){return t===r.Image?this.sharedResourceItemProxy.getBlob(null,i.ensurePackageName(2),e,{retries:1}):this.sharedResourceItemProxy.get(null,i.ensurePackageName(2),e,{retries:1})},l.prototype.loadVisualPlugin=function(t){var r=this,i=this.promiseFactory.defer();return t&&t.items&&0<t.items.length?this.loadResourcePackage(t).then((function(){var e=u.visuals.plugins[t.name];e?(e.iconUrl=r.getIconUrl(t),i.resolve(e)):i.reject("Unable to load visual plugin from resource package")})).catch((function(){i.reject("failed to resolve all promises")})):i.resolve(null),i.promise},l.prototype.destroy=function(){},l.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},l.prototype.getIconUrl=function(e){var t="#css-"+e.name,r=$(t)[0],i=_.find(document.styleSheets,(function(e){return e.ownerNode===r}));if(!i)return"";for(var o=0;o<i.cssRules.length;o++){var n=i.cssRules[o];if(n.selectorText&&n.selectorText===".visual-icon."+e.name)return n.style.backgroundImage}return""},l.prototype.loadCustomVisualResourcePackageItem=function(e,t){switch(e.type){case u.contracts.ResourcePackageItemType.CustomVisualJavascript:return this.loadCustomVisualJS(t.id,t.name,e);case u.contracts.ResourcePackageItemType.CustomVisualsCss:return this.loadCustomVisualCss(t.id,t.name,e);case u.contracts.ResourcePackageItemType.CustomVisualMetadata:return this.loadCustomVisualMetadata(t.id,t.name,e)}},l.prototype.loadCustomVisualJS=function(e,t,r){var i=this,o=this.promiseFactory.defer();return r.content?(n.resourceInjector.injectJsCode(t,r.content),o.resolve(r.content)):(this.provider,this.provider.get(e,t,r.path,{retries:1}).then((function(e){n.resourceInjector.injectJsCode(t,e),r.content=e,i.transformPlugin(t).then((function(){return o.resolve(e)}),(function(e){return o.reject(e)}))})).catch((function(e){o.reject(e)}))),o.promise},l.prototype.transformPlugin=function(e){var t=u.visuals.plugins[e];return t?(u.extensibility.visualPluginAdapter.transformPlugin(t),this.promiseFactory.resolve()):this.promiseFactory.reject("Unable to load visual plugin from resource package: "+e)},l.prototype.loadCustomVisualCss=function(e,t,r){var i=this.promiseFactory.defer();return r.content?(n.resourceInjector.injectCssCode(t,r.content),i.resolve(r.content)):(this.provider,this.provider.get(e,t,r.path,{retries:1}).then((function(e){n.resourceInjector.injectCssCode(t,e),r.content=e,i.resolve(e)})).catch((function(e){i.reject(e)}))),i.promise},l.prototype.loadCustomVisualMetadata=function(e,t,r){var i=this,o=this.promiseFactory.defer();try{r.content?o.resolve(this.createPlugin(t,r.content)):this.provider.get(e,t,r.path,{retries:1}).then((function(e){r.content=e,o.resolve(i.createPlugin(t,e))})).catch((function(e){o.reject(e)}))}catch(e){o.reject(e)}return o.promise},l.prototype.createPlugin=function(e,t){var r=t;"object"!=typeof t&&(r=JSON.parse(t));t=u.visualHost.visualPluginUtility.createVisualPlugin(r,this.locale,0);u.extensibility.visualPluginAdapter.transformPlugin(t);r=u.visuals.plugins[t.name];return r&&!r.custom&&(t.custom=!1),r&&(t.favoriteId=r.favoriteId,t.isOutOfBox=r.isOutOfBox),u.visuals.plugins[t.name]=t},l.prototype.loadBlob=function(e,t,r){var i=this.promiseFactory.defer(this.telemetryV2Enabled);return r.contentBlob?i.resolve(r.contentBlob):r.promise?r.promise.then((function(e){return i.resolve(e)})):(r.promise=this.provider.getBlob(e,t,r.path,{retries:1}),r.promise.then((function(e){r.contentBlob=e,i.resolve(e)})).catch((function(e){i.reject(e)})).finally((function(){delete r.promise}))),i.promise},__decorate([t(e)],l.prototype,"loadResourcePackageItem",null),l);function l(e,t,r){this.provider=t,this.sharedResourceItemProxy=r,this.promiseFactory=e&&e.promiseFactory,this.locale=e&&e.locale,this.telemetryV2Enabled=e&&e.telemetryV2Enabled}n.LocalResourceLoader=s})(u.visualHost||(u.visualHost={}))})(powerbi=powerbi||{}),(function(e){function i(e,t){t=r(t);return e&&e.stringResources?e.stringResources[t]:null}function r(e){return{ar:"ar-SA",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR","en-US":"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fi:"fi-FI",fr:"fr-FR",gl:"gl-ES",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",id:"id-ID",it:"it-IT",ja:"ja-JP",kk:"kk-KZ",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ms:"ms-MY",no:"nb-NO",nl:"nl-NL",pl:"pl-PL",br:"pt-BR",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",si:"sl-SI","sr-Cyrl":"sr-Cyrl-RS","sr-Latn":"sr-Latn-RS",sv:"sv-SE",th:"th-TH",tr:"tr-TR",uk:"uk-UA",vi:"vi-VN","zh-Hans":"zh-CN","zh-Hant":"zh-TW"}[e]||e||navigator.language}(e=(e=e.visualHost||(e.visualHost={})).LocalizationResourceUtility||(e.LocalizationResourceUtility={})).setLocalizedCapabilities=function(e,t){var r=e.capabilities,t=i(e,t)||i(e,"en-US");return r&&t&&(function e(t,r){for(var i in t){var o;t.hasOwnProperty(i)&&("object"==typeof t[i]?e(t[i],r):"displayNameKey"===i&&t.displayName?(o=t.displayNameKey,t.displayName=r[o]||t.displayName):"descriptionKey"===i&&t.description?(o=t.descriptionKey,t.description=r[o]||t.description):"placeHolderTextKey"===i&&t.placeHolderText&&(o=t.placeHolderTextKey,t.placeHolderText=r[o]||t.placeHolderText))}})(r,t),e},e.getLocalizedResources=i,e.getLocale=r})(powerbi=powerbi||{}),(function(t){var e,r,i,o,n;e=t.visualHost||(t.visualHost={}),o=jsCommon.Lazy,n=t.visuals.plugins,e=e.utils||(e.utils={}),r=["play","subview","smallMultiple"],i=new o(function(){var e={};return e[n.card.name]=!0,e[n.gauge.name]=!0,e[n.image.name]=!0,e[n.kpi.name]=!0,e[n.textbox.name]=!0,e}),e.isCustomVisual=function(e,t){return e?!!e.custom:!_.includes(r,t)},e.isScriptVisual=function(e){return e&&e.capabilities&&e.capabilities.dataViewMappings&&!!t.ScriptResultUtil.findScriptResultMapping(e.capabilities.dataViewMappings)},e.isScriptVisualQueryable=function(e,t){return"pythonVisual"===e||!(!t||!t.scriptVisualEnabled)},e.isLightWeightRenderingVisual=function(e){return!!e&&!!i.getValue()[e.name]}})(powerbi=powerbi||{}),(function(l){var u,e,t;function r(){this.visualPlugins={},this.loadedVisualPlugins={}}u=l.visualHost||(l.visualHost={}),e=u.visualPluginServiceHelpers||(u.visualPluginServiceHelpers={}),r.prototype.getLoadedPlugins=function(){return _.map(this.loadedVisualPlugins,(function(e){return e}))},r.prototype.getLoadedPlugin=function(e){return this.loadedVisualPlugins[e]},r.prototype.hasPlugin=function(e){return!!this.visualPlugins[e]},r.prototype.loadPlugin=function(e,t){var r;t&&(null!=(r=this.visualPlugins[e])&&!0!==r.custom&&!t.developerModeVisual||(this.visualPlugins[e]=t)),this.loadedVisualPlugins[e]=this.visualPlugins[e]},r.prototype.unloadPlugin=function(e){delete this.loadedVisualPlugins[e]},t=r,e.VisualPluginStorage=t,(t=t=e.VisualPluginStorage||(e.VisualPluginStorage={})).ensurePlugin=function(t,e,r,i,o,n){var a,s=e.defer();return i.name!==u.PowerAppsVisual||i.isPublic?!o&&t.hasPlugin(i.name)?(t.loadPlugin(i.name),s.resolve(null)):!o&&l.visuals.plugins[i.name]?(t.loadPlugin(i.name,l.visuals.plugins[i.name]),s.resolve(null)):_.isEmpty(i.items)?s.reject("Resource package does not contain any items"):(n&&(a=n.startEvent(l.telemetry.ApproveResourceLoadResourcePackage,{resourcePackageName:i.name})),r.loadResourcePackage(i).catch((function(e){i.name})).finally((function(){var e=l.visuals.plugins[i.name];e?(e.iconUrl||(e.iconUrl=u.visualPluginServiceHelpers.getPluginIconUrl(i.name)),t.loadPlugin(e.name,e),s.resolve(null),a&&a.resolve()):(s.reject("Unable to load visual plugin from resource package"),a&&a.reject())}))):s.resolve(null),s.promise},t.ensureTrustedVisualPlugins=function(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];e.loadPlugin(o.name,o)}}})(powerbi=powerbi||{}),(function(n){var e,r;function a(e,t){if(t)switch(e.name){case r.actionButton.name:e.capabilities=n.visuals.getActionButtonCapabilites(t);break;case r.scatterChart.name:e.capabilities=n.visuals.getScatterChartCapabilities(t);break;case r.areaChart.name:e.capabilities=n.visuals.getLineChartCapabilities(!1,!0,t);break;case r.lineChart.name:e.capabilities=n.visuals.getLineChartCapabilities(!1,!1,t);break;case r.stackedAreaChart.name:e.capabilities=n.visuals.getLineChartCapabilities(!0,!0,t);break;case r.waterfallChart.name:e.capabilities=n.visuals.getWaterfallChartCapabilities(t);break;case r.comboChart.name:e.capabilities=n.visuals.getLegacyComboChartCapabilities(!1);break;case r.lineStackedColumnComboChart.name:e.capabilities=n.visuals.getComboChartCapabilities(!0,t);break;case r.lineClusteredColumnComboChart.name:e.capabilities=n.visuals.getComboChartCapabilities(!1,t);break;case r.columnChart.name:case r.hundredPercentStackedColumnChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!1,!0,!1,t);break;case r.barChart.name:case r.hundredPercentStackedBarChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!0,!0,!1,t);break;case r.clusteredBarChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!0,!1,!1,t);break;case r.clusteredColumnChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!1,!1,!1,t);break;case r.ribbonChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!1,!1,!0,t);break;case r.pivotTable.name:e.capabilities=n.visuals.getPivotTableCapabilities(t);break;case r.filledMap.name:e.capabilities=n.visuals.getFilledMapCapabilities(t);break;case r.azureMap.name:e.capabilities=n.visuals.getAzureMapCapabilities(t);break;case r.map.name:e.capabilities=n.visuals.getMapCapabilities(t);break;case r.donutChart.name:case r.pieChart.name:e.capabilities=n.visuals.getDonutChartCapabilities(t);break;case r.kpi.name:e.capabilities=n.visuals.getKPIStatusWithHistoryCapabilities(t);break;case r.funnel.name:e.capabilities=n.visuals.getFunnelChartCapabilities(t);break;case r.shapeMap.name:e.capabilities=n.visuals.getShapeMapCapabilities();break;case r.table.name:e.capabilities=n.visuals.getTableCapabilities(t);break;case r.tableEx.name:e.capabilities=n.visuals.getTableExCapabilities(t);break;case r.treemap.name:e.capabilities=n.visuals.getTreemapCapabilities(t);break;case r.slicer.name:e.capabilities=n.visuals.getSlicerCapabilities(t);break;case r.keyDriversVisual.name:e.capabilities=n.visuals.getKeyDriversCapabilities();break;case r.decompositionTreeVisual.name:e.capabilities=n.visuals.getDecompositionTreeCapabilities(t)}}e=n.visualHost||(n.visualHost={}),r=n.visuals.plugins,(e=e.visualPluginServiceHelpers||(e.visualPluginServiceHelpers={})).getPluginCopyWithFeatureSwitches=function(e,t,r,i){return o=e,e=t,t=i,i=function(e){return a(e,r)},(o=n.Prototype.inherit(o)).create=e,o.createES6=t,i&&i(o),o;var o},e.applyFeatureSwitches=a,e.getPluginIconUrl=function(e){var t=$("#css-"+e)[0],r=_.find(document.styleSheets,(function(e){return e.ownerNode===t}));if(r&&r.cssRules)for(var i=0;i<r.cssRules.length;i++){var o=r.cssRules[i];if(o.selectorText&&o.selectorText===".visual-icon."+e)return o.style.backgroundImage}return""}})(powerbi=powerbi||{}),(function(l){var e;(e=(e=l.visualHost||(l.visualHost={})).visualPluginServiceHelpers||(e.visualPluginServiceHelpers={})).isVisualPluginLoaded=function(e){return!!l.visuals.plugins[e]},e.ensurePlugin=function(r,i,o,n,e,a,t){var s;if(e&&e.isRunning()&&(s=e.createChildActivity({name:"Visual Container Module Load"})),e=function(){var e=i.getPlugin(r);if(!e||!e.module)return s&&(e?s.resolve():s.reject()),(a?l.PbiPromise:n).resolve(e);if(e.createES6&&!e.module.css)return n.resolve(e);var t={javascript:e.createES6?void 0:e.module.javascript,css:e.module.css};return o.require(t).then((function(){return s&&s.resolve(),e}),(function(){return s&&s.reject(),null}))},t){t=t.ensureCustomVisual(r);if(t)return t.then(e)}return e()}})(powerbi=powerbi||{}),(function(F){!(function(u){var n=F.visualHost.utils.ResourcePackageUtils,s=u.visualPluginServiceHelpers.VisualPluginStorage,c=F.visuals.createPivotTable,p=F.visuals.createTableEx,d=F.visuals.createMatrix,h=F.visuals.createTable,v=F.visuals.createActionButton,f=F.visuals.createCard,g=F.visuals.createGauge,y=F.visuals.createDonutChart,m=F.visuals.createFunnelChart,S=F.visuals.createMap,b=F.visuals.createAzureMap,w=F.visuals.createSlicer,V=F.visuals.createTextbox,C=F.visuals.createAlwaysUseSmallViewportTextboxViewModelAdapter,P=F.visuals.createKpi,R=F.visuals.createDecompositionTree,A=F.visuals.createCartesianChart,I=F.visuals.createRealTimeLineChartAnimator,M=F.visuals.createCartesianChartBehaviorFactory,T=F.visuals.createScatterChartMobileBehaviorFactory;u.createMobileVisualPluginService=function(e,t,r,i){return new o(e,t,r,i)};var o=(l.prototype.getVisuals=function(){return this.storage.getLoadedPlugins()},l.prototype.getPlugin=function(e){var t=this.storage.getLoadedPlugin(e);return!t&&F.visuals.plugins[e]&&(this.storage.loadPlugin(e,E(e,this.featureSwitches,this.trimOrdinalDataOnOverflow,this.getMapThrottleInterval(),this.properties)),t=this.storage.getLoadedPlugin(e)),t},l.prototype.capabilities=function(e){e=this.getPlugin(e);return e?e.capabilities:void 0},l.prototype.ensureBuiltInPlugins=function(){return this.initBuiltInPlugins},l.prototype.ensurePlugins=function(e){this.promiseFactory;var t=[];if(e&&e.length)for(var r=0,i=e;r<i.length;r++){var o=i[r];n.isCustomVisualResourcePackage(o)&&t.push(this.ensurePlugin(o))}return this.promiseFactory.allSettled(t)},l.prototype.ensurePlugin=function(e){return s.ensurePlugin(this.storage,this.promiseFactory,this.resourceLoader,e)},l.prototype.ensureTrustedVisualPlugins=function(e){s.ensureTrustedVisualPlugins(this.storage,e)},l.prototype.requireSandbox=function(e){return u.utils.isCustomVisual(e)},l.prototype.isCustomVisual=function(e){return u.utils.isCustomVisual(this.getPlugin(e),e)},l.prototype.isScriptVisual=function(e){return u.utils.isScriptVisual(this.getPlugin(e))},l.prototype.isScriptVisualQueryable=function(e){return u.utils.isScriptVisualQueryable(e,this.featureSwitches)},l.prototype.isLightWeightRenderingVisual=function(e){return u.utils.isLightWeightRenderingVisual(this.getPlugin(e))},l.prototype.getMapThrottleInterval=function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("windows phone"))return 100},l.prototype.getInteractivityOptions=function(e){return{overflow:this.getMobileOverflowString(e),isInteractiveLegend:this.isChartSupportInteractivity(e),selection:!0,isVisualInteractive:!0}},l.prototype.getTelemetryHostInformation=function(){return{name:"MobileTileHost"}},l.prototype.getMobileOverflowString=function(e){return"multiRowCard"!==e?"hidden":"visible"},l.prototype.isChartSupportInteractivity=function(e){switch(e){case"areaChart":case"barChart":case"clusteredBarChart":case"clusteredColumnChart":case"columnChart":case"donutChart":case"hundredPercentStackedBarChart":case"hundredPercentStackedColumnChart":case"lineChart":case"pieChart":case"scatterChart":case"table":case"matrix":case"multiRowCard":return!0;default:return!1}},l.prototype.getStorage=function(){return this.storage},l.MinHeightGaugeSideNumbersVisible=80,l.GaugeMarginsOnSmallViewPort=10,l.MinHeightFunnelCategoryLabelsVisible=80,l.MaxHeightToScaleDonutLegend=300,l);function l(e,t,r,i){var o=this;this.promiseFactory=e,this.resourceLoader=t,this.trimOrdinalDataOnOverflow=!1,this.properties=r||{gaugeSmallViewPortProperties:{hideGaugeSideNumbersOnSmallViewPort:!0,smallGaugeMarginsOnSmallViewPort:!0,MinHeightGaugeSideNumbersVisible:l.MinHeightGaugeSideNumbersVisible,GaugeMarginsOnSmallViewPort:l.GaugeMarginsOnSmallViewPort},funnelSmallViewPortProperties:{hideFunnelCategoryLabelsOnSmallViewPort:!0,minHeightFunnelCategoryLabelsVisible:l.MinHeightFunnelCategoryLabelsVisible},donutSmallViewPortProperties:{maxHeightToScaleDonutLegend:l.MaxHeightToScaleDonutLegend},cardSmallViewportProperties:null};var n=this.getMapThrottleInterval();if(this.storage=new s,i)this.initBuiltInPlugins=i().then((function(e){for(var t in o.featureSwitches=e,F.visuals.plugins)o.storage.loadPlugin(t,E(t,e,o.trimOrdinalDataOnOverflow,n,o.properties))}));else{for(var a in F.visuals.plugins)this.storage.loadPlugin(a,E(a,void 0,this.trimOrdinalDataOnOverflow,n,this.properties));this.initBuiltInPlugins=e.resolve(null)}}function E(e,o,t,r,i){var n=this,a=(o=o?_.clone(o):{}).touchScreenOptimizedTooltips;switch(e){case F.visuals.plugins.areaChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.areaChart,(function(e){return e.module.createCartesianChart({chartType:1,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:1,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.barChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.barChart,(function(e){return e.module.createCartesianChart({chartType:6,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:6,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.clusteredBarChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.clusteredBarChart,(function(e){return e.module.createCartesianChart({chartType:5,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:5,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.clusteredColumnChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.clusteredColumnChart,(function(e){return e.module.createCartesianChart({chartType:3,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:3,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.columnChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.columnChart,(function(e){return e.module.createCartesianChart({chartType:4,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:4,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.comboChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.comboChart,(function(e){return e.module.createCartesianChart({chartType:11,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:11,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.dataDotChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.dataDotChart,(function(e){return e.module.createCartesianChart({chartType:12,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:12,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.dataDotClusteredColumnComboChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.dataDotClusteredColumnComboChart,(function(e){return e.module.createCartesianChart({chartType:16,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:16,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.dataDotStackedColumnComboChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.dataDotStackedColumnComboChart,(function(e){return e.module.createCartesianChart({chartType:17,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:17,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.hundredPercentStackedBarChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.hundredPercentStackedBarChart,(function(e){return e.module.createCartesianChart({chartType:7,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:7,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.hundredPercentStackedColumnChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.hundredPercentStackedColumnChart,(function(e){return e.module.createCartesianChart({chartType:8,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:8,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.stackedAreaChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.stackedAreaChart,(function(e){return e.module.createCartesianChart({chartType:2,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:2,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.waterfallChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.waterfallChart,(function(e){return e.module.createCartesianChart({chartType:13,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a,featureSwitches:o})}),o,A?function(){return A({chartType:13,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a,featureSwitches:o})}:void 0);case F.visuals.plugins.realTimeLineChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.realTimeLineChart,(function(e){e=e.module;return e.createCartesianChart({chartType:18,animator:e.createRealTimeLineChartAnimator(),animateCategoryAxis:!0,animateValueAxis:!0,tooltipsEnabled:a})}),o,A?function(){return __awaiter(n,void 0,void 0,(function(){var t,r;return __generator(this,(function(e){switch(e.label){case 0:return t=A,r={chartType:18},[4,I()];case 1:return[2,t.apply(void 0,[(r.animator=e.sent(),r.animateCategoryAxis=!0,r.animateValueAxis=!0,r.tooltipsEnabled=a,r)])]}}))}))}:void 0);case F.visuals.plugins.lineChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.lineChart,(function(e){return e.module.createCartesianChart({chartType:0,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:0,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.lineClusteredColumnComboChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.lineClusteredColumnComboChart,(function(e){return e.module.createCartesianChart({chartType:14,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:14,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.lineStackedColumnComboChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.lineStackedColumnComboChart,(function(e){return e.module.createCartesianChart({chartType:15,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:15,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.scatterChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.scatterChart,(function(e){e=e.module;return e.createCartesianChart({chartType:10,behaviorFactory:e.createCartesianChartBehaviorFactory([e.createScatterChartMobileBehaviorFactory()],o),tooltipsEnabled:a,featureSwitches:o})}),o,A?function(){return __awaiter(n,void 0,void 0,(function(){var t,r,i;return __generator(this,(function(e){switch(e.label){case 0:return t=A,i={chartType:10},r=M,[4,T()];case 1:return[4,r.apply(void 0,[[e.sent()],o])];case 2:return[2,t.apply(void 0,[(i.behaviorFactory=e.sent(),i.tooltipsEnabled=a,i.featureSwitches=o,i)])]}}))}))}:void 0);case F.visuals.plugins.gauge.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.gauge,(function(e){return e.module.createGauge({gaugeSmallViewPortProperties:i.gaugeSmallViewPortProperties,tooltipsEnabled:a},o)}),o,g?function(){return g({gaugeSmallViewPortProperties:i.gaugeSmallViewPortProperties,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.funnel.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.funnel,(function(){return new F.visuals.FunnelChart({animator:null,funnelSmallViewPortProperties:i.funnelSmallViewPortProperties,tooltipsEnabled:a})}),o,m?function(){return m({animator:null,funnelSmallViewPortProperties:i.funnelSmallViewPortProperties,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.donutChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.donutChart,(function(){return new F.visuals.DonutChart({disableGeometricCulling:!0,smallViewPortProperties:i.donutSmallViewPortProperties,tooltipsEnabled:a})}),o,y?function(){return y({disableGeometricCulling:!0,smallViewPortProperties:i.donutSmallViewPortProperties,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.pieChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.pieChart,(function(){return new F.visuals.DonutChart({sliceWidthRatio:0,disableGeometricCulling:!0,smallViewPortProperties:i.donutSmallViewPortProperties,tooltipsEnabled:a})}),o,y?function(){return y({sliceWidthRatio:0,disableGeometricCulling:!0,smallViewPortProperties:i.donutSmallViewPortProperties,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.ribbonChart.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.ribbonChart,(function(e){return e.module.createCartesianChart({chartType:9,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}),o,A?function(){return A({chartType:9,trimOrdinalDataOnOverflow:t,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.matrix.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.matrix,(function(){return new F.visuals.Matrix}),o,d?function(){return d()}:void 0);case F.visuals.plugins.table.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.table,(function(){return new F.visuals.Table}),o,h?function(){return h()}:void 0);case F.visuals.plugins.pivotTable.name:var s=F.visuals.PivotTableOptions.createMobileConstructorOptions();return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.pivotTable,(function(){return new F.visuals.PivotTable(s,o)}),o,c?function(){return c(s,o)}:void 0);case F.visuals.plugins.tableEx.name:var l=F.visuals.TableExOptions.createMobileConstructorOptions();return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.tableEx,(function(){return new F.visuals.TableEx(l,o)}),o,p?function(){return p(l,o)}:void 0);case F.visuals.plugins.map.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.map,(function(){return new F.visuals.Map({viewChangeThrottleInterval:r,enableCurrentLocation:!!o&&o.mapCurrentLocationEnabled,tooltipsEnabled:a})}),o,S?function(){return S({viewChangeThrottleInterval:r,enableCurrentLocation:!!o&&o.mapCurrentLocationEnabled,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.filledMap.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.filledMap,(function(){return new F.visuals.Map({filledMap:!0,viewChangeThrottleInterval:r,tooltipsEnabled:a})}),o,S?function(){return S({filledMap:!0,viewChangeThrottleInterval:r,tooltipsEnabled:a})}:void 0);case F.visuals.plugins.azureMap.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.azureMap,(function(e){return e.module.createAzureMap({tooltipsEnabled:a})}),o,b?function(){return b({tooltipsEnabled:a})}:void 0);case F.visuals.plugins.actionButton.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.actionButton,(function(e){return new e.module.ActionButton}),o,v?function(){return v()}:void 0);case F.visuals.plugins.card.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.card,(function(e){return e.module.createCard({cardSmallViewportProperties:i.cardSmallViewportProperties,tooltipsEnabled:a,featureSwitches:o})}),o,f?function(){return f({cardSmallViewportProperties:i.cardSmallViewportProperties,tooltipsEnabled:a,featureSwitches:o})}:void 0);case F.visuals.plugins.textbox.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.textbox,(function(e){e=e.module;return e.createTextbox({viewModelAdapter:e.createAlwaysUseSmallViewportTextboxViewModelAdapter(),supportsNarrativeExpressions:o.daxTransformEnabled})}),o,V?function(){return __awaiter(n,void 0,void 0,(function(){var t,r;return __generator(this,(function(e){switch(e.label){case 0:return t=V,r={},[4,C()];case 1:return[2,t.apply(void 0,[(r.viewModelAdapter=e.sent(),r.supportsNarrativeExpressions=o.daxTransformEnabled,r)])]}}))}))}:void 0);case F.visuals.plugins.slicer.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.slicer,(function(){return new F.visuals.Slicer({featureSwitches:o})}),o,w?function(){return w({featureSwitches:o})}:void 0);case F.visuals.plugins.kpi.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.kpi,(function(){return new F.visuals.KPIStatusWithHistory({interactivityEnabled:!0},o)}),o,P?function(){return P({interactivityEnabled:!0})}:void 0);case F.visuals.plugins.decompositionTreeVisual.name:return u.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(F.visuals.plugins.decompositionTreeVisual,(function(e){return new e.module.DecompositionTree}),o,R?function(){return R()}:void 0);default:return F.Prototype.inherit(F.visuals.plugins[e])}}})(F.visualHost||(F.visualHost={}))})(powerbi=powerbi||{}),(function(e){var n,a;n=e.visualHost||(e.visualHost={}),a=jsCommon.Version,(e=n.resourceInjector||(n.resourceInjector={})).injectJsCode=function(e,t,r,i){void 0===r&&(r=!1),void 0===i&&(i=null);var o={major:1,minor:8,patch:0},n=document.createElement("script");r?i&&a.gt(i,o)||a.eq(i,o)?n.innerHTML="\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    "+t+";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                \t\tif (key ===\"window\" || key === \"self\"){\n                                            Object.defineProperty(newWindow, key, {\n                                                get: (function(newWindow) {\n                                                    return function() {\n                                                        return newWindow;\n                                                    }\n                                                })(newWindow),\n                                                set: function() { }\n                                        });\n                                    } else {\n                                        Object.defineProperty(newWindow, key, {\n                                            get: (function(item) {\n                                                return function() {\n                                                    return item;\n                                                }\n                                            })(item),\n                                            set: function() { }\n                                        });\n                                    }\n                                } else if (typeof item === 'number' || typeof item === 'boolean' || typeof item === 'string') {\n                                      Object.defineProperty(newWindow, key, {\n                                          get: (function(w, keyString) {\n                                              return function() {\n                                                  return w[keyString];\n                                              }\n                                          })(w, key.toString()),\n                                          set: (function(w, keyString) {\n                                              return function(newValue) {\n                                                  w[keyString] = newValue;\n                                              }\n                                          })(w, key.toString())\n                                      });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            ":n.innerHTML="\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    "+t+";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                    Object.defineProperty(newWindow, key, {\n                                        get: (function(item) {\n                                            return function() {\n                                                return item;\n                                            }\n                                        })(item),\n                                        set: function() { }\n                                    });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            ":n.innerHTML=t,n.id="js-"+e,n.setAttribute("name",e),document.body.appendChild(n)},e.injectCssCode=function(e,t){(t=$("<style></style>",{html:t,id:"css-"+e})).attr("name",e),$("head").append(t)},e.injectJsUrl=function(e,t,r){var i=e.defer();return $.ajax({url:r,dataType:"script",cache:!0,success:function(){return i.resolve(null)},error:function(e,t,r){return i.reject(r)},timeout:n.resourceLoaderHttpTimeout}),i.promise},e.injectCssUrl=function(e,t,r){var i=e.defer(),o=setTimeout((function(){return i.reject("Timeout")}),n.resourceLoaderHttpTimeout);return $("<link>",{id:"css-"+t,type:"text/css",rel:"stylesheet",href:r,crossorigin:"anonymous"}).on("load",(function(e){clearTimeout(o),i.resolve(null)})).on("error",(function(e){clearTimeout(o),i.reject(e)})).appendTo($("head")),i.promise},e.getInjectedIconUrl=function(e){var t=$("#css-"+e)[0],r=_.find(document.styleSheets,(function(e){return e.ownerNode===t}));if(r&&r.cssRules)for(var i=0;i<r.cssRules.length;i++){var o=r.cssRules[i];if(o.selectorText&&_.includes(o.selectorText,e))return o.style.backgroundImage}return""}})(powerbi=powerbi||{}),(function(e){!(function(e){var n=e.utils.ResourcePackageUtils;e.createResourcePackagesService=function(){return new t};var t=(r.prototype.getAllPackages=function(){return this.packages},r.prototype.registerPackages=function(e){if(e)for(var t=0,r=e;t<r.length;t++){var i,o=r[t];!o.items||0===o.items.length||3===o.type&&o.disabled||(this.resourcePackageNameIdLookupTable[o.id]=o.name,(i=n.findResourcePackage(this.packages,o.type,o.name))?n.isStaticResource(o)?n.mergeStaticResourcePackages(i,o):_.merge(i,o):((i=_.clone(o)).items=_.clone(o.items),this.packages.push(i)))}},r.prototype.getPackage=function(t){return _.find(this.packages,(function(e){return e.name===t}))},r.prototype.delete=function(t){_.remove(this.packages,(function(e){return e.name===t}))},r.prototype.getPackageById=function(e){e=this.resourcePackageNameIdLookupTable[e];return e&&this.getPackage(e)},r.prototype.clear=function(){this.packages=[],this.resourcePackageNameIdLookupTable={}},r);function r(){this.resourcePackageNameIdLookupTable={},this.packages=[{id:void 0,name:e.ResourcePackageName.SharedResources,type:2,items:[]}]}})(e.visualHost||(e.visualHost={}))})(powerbi=powerbi||{}),(function(d){!(function(u){var c,e,s=d.contracts.ResourcePackageItemType,r=d.visualHost.utils.ResourcePackageUtils,p=jsCommon.Version.lt;u.createSandboxResourceLoader=function(e,t,r,i,o){return new n(e,t,r,i,o)},(e=c=c||{}).loadResourcePackage="loadResourcePackage",e.loadVisualPlugin="loadVisualPlugin",e.loadVisualPluginWithContent="loadVisualPluginWithContent",e.onVisualPluginLoad="onVisualPluginLoad",e.onResourcePackageLoad="onResourcePackageLoad",e.onVisualPluginLoadError="onVisualPluginLoadError",e.onResourcePackageLoadError="onResourcePackageLoadError";var a,n=(a=u.LocalResourceLoader,__extends(t,a),t.prototype.loadResourcePackage=function(e,t){return r.isCustomVisualResourcePackage(e),this.loadVisualPlugin(e,t)},t.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},t.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},t.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},t.prototype.loadVisualPlugin=function(n,a){var s=this,l=this.promiseFactory.defer();return this.loadResourcesContent(n).then((function(e){if(e&&!_.isEmpty(e)){var t=_.keyBy(e,"type"),e=t[d.contracts.ResourcePackageItemType.CustomVisualMetadata];if(e)try{var r=jsCommon.JsonExtensions.tryParseJSON(e.content),i=u.visualPluginUtility.createVisualPlugin(r,s.locale,a?1:0);d.extensibility.visualPluginAdapter.transformPlugin(i);var o=d.visuals.plugins[i.name];o&&(i.favoriteId=o.favoriteId,i.isOutOfBox=o.isOutOfBox),i.developerModeVisual=n.developerModeVisual,i.apiVersion&&p(i.apiVersion,u.CustomVisualDeprecatedAPI)&&(i.isDeprecated=!0),d.visuals.plugins[i.name]=i,l.resolve(i)}catch(e){l.reject(e)}else{t={pluginName:n.name,mappedPluginContent:t},t={eventName:c.loadVisualPluginWithContent,arguments:[t]};s.messageProxy.postMessageAsync(t).then((function(e){var t=e,e=d.visuals.plugins[t.name];e&&!e.custom||(t.custom=!0,e=t.capabilities.objects,t.capabilities.objects=d.data.services.DataViewObjectDescriptorSerializer.deserialize(e),d.extensibility.visualPluginAdapter.transformPlugin(t),s.approvedResourceService&&s.approvedResourceService.isApprovedVisualsDefined()&&(t.isDeprecated=!0),d.visuals.plugins[t.name]=t,l.resolve(t))})).catch((function(e){l.reject(e)}))}}else l.resolve(null)})).catch((function(e){l.reject(e)})),l.promise},t.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},t.prototype.destroy=function(){this.iframe.remove(),this.iframe=null,this.messageProxy.destroy(),this.messageProxy=null,this.contentWindow=null},t.prototype.initIFrame=function(){var e=this,t=this.sandboxLoaderUri;jsCommon.QueryStringUtil.getQueryStringValue("unmin")&&(t+="?unmin=1"),this.iframe=$('<iframe class="sandbox-resource-loader ng-hide" sandbox="allow-scripts"></iframe>').attr("src",t).one("load",(function(){return e.onIFrameLoad()})).appendTo(document.body)},t.prototype.onIFrameLoad=function(){this.contentWindow=this.iframe[0].contentWindow,this.messageProxy.contentWindow=this.contentWindow,this.messageProxy.flushQueue()},t.prototype.loadResourcesContent=function(e){for(var t=[],r=e.id,i=e.name,o=0,n=e.items;o<n.length;o++){var a=n[o];a.type!==s.CustomVisualIcon&&t.push(this.loadResourceContent(r,i,a,e))}return this.promiseFactory.all(t)},t.prototype.loadResourceContent=function(e,t,r,i){var o=this,n=this.promiseFactory.defer();return r.content?n.resolve(this.getItemContent(r.content,r)):this.provider.get(e,t,r.path).then((function(e){e?n.resolve(o.getItemContent(e,r)):u.ResourcePackageReferenceResolver.loadAndResolveContent(i,r.name,o,o.promiseFactory).then((function(e){n.resolve(o.getItemContent(e,r))}))})).catch((function(e){n.reject(e)})),n.promise},t.prototype.getItemContent=function(e,t){e=_.isString(e)?e:JSON.stringify(e);return t.content=t.type===s.CustomVisualMetadata?e:void 0,{type:t.type,content:e}},t);function t(e,t,r,i,o){var n=a.call(this,e,i,null)||this;return e.promiseFactory,n.approvedResourceService=o,n.locale=e&&e.locale,n.promiseFactory=e.promiseFactory,n.messageProxy=t,n.sandboxLoaderUri=r,n.provider=i,n.initIFrame(),n}u.SandboxResourceLoader=n})(d.visualHost||(d.visualHost={}))})(powerbi=powerbi||{}),(function(e){!(function(s){s.createOrganizationalStoreResourceLoader=function(e,t,r,i,o,n){return new a(e,t,i,o,r,n)};var l,a=(l=s.SandboxResourceLoader,__extends(e,l),e.prototype.loadResourcePackage=function(n){var a=this;if(n)return this.resourcePackageResolver(n).then((function(e){var r=[];if(e&&e.items&&!e.disabled)for(var i,t=0,o=e.items;t<o.length;t++)!(function(t){i=s.ResourcePackageReferenceResolver.loadAndResolveContent(e,t.name,a,a.promiseFactory).then((function(e){t.content=e})),r.push(i)})(o[t]);else if(!e||e.disabled)return a.resourcePackagesService.delete(n.name),null;return a.promiseFactory.all(r).then((function(){return l.prototype.loadResourcePackage.call(a,e,!0)}))})).catch((function(){return a.resourcePackagesService.delete(n.name),null}))},e);function e(e,t,r,i,o,n){i=l.call(this,e,t,r,i)||this;return i.resourcePackagesService=o,i.resourcePackageResolver=n,i.resourcePackagesService.getAllPackages(),i}})(e.visualHost||(e.visualHost={}))})(powerbi=powerbi||{}),(function(e){function t(e){this.promiseFactory=e,this.promiseFactory=e}e=e.visualHost||(e.visualHost={}),t.prototype.loadResourcePackage=function(e){return this.promiseFactory.resolve()},t.prototype.loadResourcePackages=function(e){return this.promiseFactory.resolve()},t.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.resolve()},t.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.resolve()},t.prototype.loadSharedResource=function(e){return this.promiseFactory.resolve()},t.prototype.loadVisualPlugin=function(e){return this.promiseFactory.resolve(null)},t.prototype.loadVisualPlugins=function(e){return this.promiseFactory.resolve()},t.prototype.destroy=function(){},e.UnapprovedResourceLoader=t})(powerbi=powerbi||{}),(function(i){var e,t,o;function r(e){return{objectName:e.objectName,displayName:e.displayName,properties:(function(e){var t,r={};for(t in e)r[t]=(function(e){if(e instanceof i.data.SemanticFilter)return o.serializeFilter(e);return void 0===e?null:e})(e[t]);return r})(e.properties),selector:t.serializeSelector(e.selector),altConstantValueSelector:t.serializeSelector(e.altConstantValueSelector),validValues:e.validValues,containerIdx:e.containerIdx,propertyInstanceKind:e.propertyInstanceKind}}function n(e){return{objectName:e.objectName,displayName:e.displayName,properties:(function(e){var t,r={};for(t in e)r[t]=(function(e){var t=e;if(t&&t.From&&t.Where)return o.deserializeFilter(t);return e})(e[t]);return r})(e.properties),selector:t.deserializeSelector(e.selector),altConstantValueSelector:t.deserializeSelector(e.altConstantValueSelector),validValues:e.validValues,containerIdx:e.containerIdx,propertyInstanceKind:e.propertyInstanceKind}}e=(e=i.visualHost||(i.visualHost={})).services||(e.services={}),t=i.data.services.DataViewObjectSerializer,o=i.data.services.SemanticQuerySerializer,(e=e.VisualObjectInstanceSerializer||(e.VisualObjectInstanceSerializer={})).serialize=function(e){return 0===e.length?[]:_.map(e,r)},e.deserialize=function(e){return 0===e.length?[]:_.map(e,n)},e.serializeContainers=function(e,t){return _.map(e,(function(e){return{displayName:i.data.getDisplayName(e.displayName,t)}}))},e.deserializeContainers=function(e){return _.map(e,(function(e){return{displayName:e.displayName}}))}})(powerbi=powerbi||{}),(function(e){var t,r;function i(e){var t={selector:r.serializeSelector(e.selector),altStaticSelector:r.serializeSelector(e.altStaticSelector),objects:e.objects};return void 0!==e.allowOverrideSubtotalMatching&&(t.allowOverrideSubtotalMatching=e.allowOverrideSubtotalMatching),t}function o(e){var t={selector:r.deserializeSelector(e.selector),altStaticSelector:r.deserializeSelector(e.altStaticSelector),objects:e.objects};return void 0!==e.allowOverrideSubtotalMatching&&(t.allowOverrideSubtotalMatching=e.allowOverrideSubtotalMatching),t}t=(t=e.visualHost||(e.visualHost={})).services||(t.services={}),r=e.data.services.DataViewObjectSerializer,(t=t.VisualObjectRepetitionSerializer||(t.VisualObjectRepetitionSerializer={})).serialize=function(e){return _.isEmpty(e)?[]:_.map(e,i)},t.deserialize=function(e){return _.isEmpty(e)?[]:_.map(e,o)}})(powerbi=powerbi||{}),(function(t){var e;function r(e){return{dataColors:o(e.dataColors),foreground:e.foreground,foregroundLight:e.foregroundLight,foregroundDark:e.foregroundDark,foregroundNeutralLight:e.foregroundNeutralLight,foregroundNeutralDark:e.foregroundNeutralDark,foregroundNeutralSecondary:e.foregroundNeutralSecondary,foregroundNeutralSecondaryAlt:e.foregroundNeutralSecondaryAlt,foregroundNeutralSecondaryAlt2:e.foregroundNeutralSecondaryAlt2,foregroundNeutralTertiary:e.foregroundNeutralTertiary,foregroundNeutralTertiaryAlt:e.foregroundNeutralTertiaryAlt,foregroundSelected:e.foregroundSelected,foregroundButton:e.foregroundButton,background:e.background,backgroundLight:e.backgroundLight,backgroundNeutral:e.backgroundNeutral,backgroundDark:e.backgroundDark,hyperlink:e.hyperlink,tableAccent:e.tableAccent,visitedHyperlink:e.visitedHyperlink,mapPushpin:e.mapPushpin,shapeStroke:e.shapeStroke,disabledText:e.disabledText,selection:e.selection,separator:e.separator}}function i(e){return{dataColors:n(e.dataColors),foreground:e.foreground,foregroundLight:e.foregroundLight,foregroundDark:e.foregroundDark,foregroundNeutralLight:e.foregroundNeutralLight,foregroundNeutralDark:e.foregroundNeutralDark,foregroundNeutralSecondary:e.foregroundNeutralSecondary,foregroundNeutralSecondaryAlt:e.foregroundNeutralSecondaryAlt,foregroundNeutralSecondaryAlt2:e.foregroundNeutralSecondaryAlt2,foregroundNeutralTertiary:e.foregroundNeutralTertiary,foregroundNeutralTertiaryAlt:e.foregroundNeutralTertiaryAlt,foregroundSelected:e.foregroundSelected,foregroundButton:e.foregroundButton,background:e.background,backgroundLight:e.backgroundLight,backgroundNeutral:e.backgroundNeutral,backgroundDark:e.backgroundDark,hyperlink:e.hyperlink,visitedHyperlink:e.visitedHyperlink,mapPushpin:e.mapPushpin,shapeStroke:e.shapeStroke,disabledText:e.disabledText,tableAccent:e.tableAccent,selection:e.selection,separator:e.separator}}function o(e){return{colors:e.getAllColors(),sentimentColors:e.getSentimentColors(),gradientColors:e.getGradientColors()}}function n(e){return new t.visuals.DataColorPalette(e.colors,e.sentimentColors,e.gradientColors)}(e=(e=t.visualHost||(t.visualHost={})).VisualStyleSerializer||(e.VisualStyleSerializer={})).serializeVisualStyle=function(e){return{colorPalette:r(e.colorPalette),isHighContrast:e.isHighContrast,icons:e.icons}},e.deserializeVisualStyle=function(e){return{colorPalette:i(e.colorPalette),isHighContrast:e.isHighContrast,icons:e.icons}},e.serializeColorPalette=r,e.deserializeColorPalette=i,e.serializeDataColors=o,e.deserializeDataColors=n})(powerbi=powerbi||{}),(function(s){!(function(i){var a,e;(e=a=i.UserConsent||(i.UserConsent={}))[e.NotRequired=0]="NotRequired",e[e.Declined=1]="Declined",e[e.Approved=2]="Approved",i.createVisualConsentService=function(e,t){return new r(e,t)};var r=(t.prototype.registerVisualConsent=function(e,t){this.visualConsentOptionsMap[e],this.visualConsentOptionsMap[e]=t,this.telemetryService.logEvent(s.telemetry.VisualConsentRegister,{visualType:e,parentId:this.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),this.loadConsentAsync(e)},t.prototype.hasConsent=function(e){return this.cachedConsentMap[e]},t.prototype.setConsent=function(e,t){if(!this.isConsentRequiringVisual(e))return this.promiseFactory.reject("Visual type does not require consent");this.cachedConsentMap[e]=t;var r=this.visualConsentOptionsMap[e]&&this.visualConsentOptionsMap[e].consentPersistencyProvider;return this.telemetryService.logEvent(s.telemetry.VisualConsentSet,{visualType:e,userConsent:t,parentId:this.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),r?r.saveConsent(t):this.promiseFactory.reject("No persistencyProvider was set for visual "+e)},t.prototype.getConsent=function(e){var r=this,i=[];e=_.uniq(e),this.telemetryService.logEvent(s.telemetry.VisualConsentGet,{visualTypes:e.join(", "),parentId:this.telemetryService.root.id,isError:!1,errorSource:"PowerBI"});for(var o=this,t=0,n=e;t<n.length;t++)!(function(t){if(!o.isConsentRequiringVisual(t)){var e={visualType:t,consent:a.NotRequired};return i.push(o.promiseFactory.resolve(e))}i.push(o.loadConsentAsync(t).then((function(e){if(e){e={visualType:t,consent:a.Approved};return r.promiseFactory.resolve(e)}return r.showConsentDialog(t)})))})(n[t]);return this.promiseFactory.allSettled(i).then((function(e){return _.map(_.filter(e,(function(e){return 0===e.type})),(function(e){return e.value}))}))},t.prototype.isConsentRequiringVisual=function(e){return!!this.visualConsentOptionsMap[e]},t.prototype.loadConsentAsync=function(t){var r=this;if(this.visualConsentOptionsMap[t],void 0!==this.cachedConsentMap[t])return this.promiseFactory.resolve(this.cachedConsentMap[t]);var e=this.visualConsentOptionsMap[t]&&this.visualConsentOptionsMap[t].consentPersistencyProvider;return e?e.loadConsent().then((function(e){return r.cachedConsentMap[t]=e,r.promiseFactory.resolve(e)})).catch((function(e){if(e!==i.ESRINotSupportedInEmbed)return r.promiseFactory.reject(e)})):this.promiseFactory.reject("VisualConsentService.getConsentAsync: Missing consentPersistencyProvider for visual "+t)},t.prototype.showConsentDialog=function(t){var r=this;if(!this.isConsentRequiringVisual(t))return this.promiseFactory.reject("VisualConsentService.showConsentDialog: Visual type does not require consent");var e=this.visualConsentOptionsMap[t]&&this.visualConsentOptionsMap[t].consentDialogProvider;return e?e.showConsentDialog().then((function(e){r.setConsent(t,e);e={visualType:t,consent:e?a.Approved:a.Declined};return r.promiseFactory.resolve(e)})).catch((function(e){return r.promiseFactory.reject(e)})):this.promiseFactory.reject("VisualConsentService.showConsentDialog: Missing consentDialogProvider for visual "+t)},t);function t(e,t){this.promiseFactory=e,this.telemetryService=t,this.cachedConsentMap={},this.visualConsentOptionsMap={}}})(s.visualHost||(s.visualHost={}))})(powerbi=powerbi||{}),(function(r){!(function(){(r.visualHost||(r.visualHost={})).createVisualInstanceIdTrackingService=function(){return new e};var e=(t.prototype.associate=function(e,t){for(var r=0,i=this.listeners;r<i.length;r++)i[r].onInstanceAssociated(e,t)},t.prototype.subscribeToInstanceIdAssociation=function(e){_.includes(this.listeners,e)||this.listeners.push(e)},t);function t(){this.listeners=[]}})()})(powerbi=powerbi||{}),(function(o){var n;((n=o.visualHost||(o.visualHost={})).visualPluginUtility||(n.visualPluginUtility={})).createVisualPlugin=function(t,e,r){t.content,t.content.iconBase64,t=e?n.LocalizationResourceUtility.setLocalizedCapabilities(t,e):t;var i=e?n.LocalizationResourceUtility.getLocalizedResources(t,e):null,e=n.LocalizationResourceUtility.getLocalizedResources(t,"en-US"),r={name:t.visual.guid,apiVersion:t.apiVersion,class:t.visual.visualClassName,displayName:t.visual.displayName,capabilities:t.capabilities,custom:!0,iconUrl:'url("'+t.content.iconBase64+'")',content:t.content,version:t.visual.version,create:function(){return null},customizeQuery:function(e){return null},localizationResources:i||e?{enUSStrings:e,localizedStrings:i}:null,supportUrl:t.visual.supportUrl,source:r,publisher:t.author?t.author.name:void 0};return t.capabilities&&t.capabilities.subtotals&&o.visuals.CustomVisualPluginMethods.isSubtotalCustomizationCapabilityValid(t.capabilities.subtotals)&&(r.customizeQuery=function(e){return o.visuals.CustomVisualPluginMethods.customizeQueryForSubtotals(e,t.capabilities.subtotals)}),r}})(powerbi=powerbi||{}),(function(e){!(function(e){var t,r=jsCommon.Utility;(t=e.events||(e.events={})).WindowMessageProxyMessageEvent="message",t.WindowMessageProxyErrorEvent="error";var i="message",s="onMessageProxyAsyncComplete";e.createWindowMessageProxy=function(e,t){return new o(e,t)};var o=(Object.defineProperty(n.prototype,"allowSameWindow",{get:function(){return this._allowSameWindow},set:function(e){this._allowSameWindow=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"contentWindow",{get:function(){return this._contentWindow},set:function(e){this._contentWindow=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"queue",{get:function(){return jQuery.extend([],this._queue)},enumerable:!1,configurable:!0}),n.prototype.postMessage=function(e){this.contentWindow?this.sendMessage(e):this.queueMessage(e)},n.prototype.postMessageAsync=function(e){var t=this,r=this.promiseFactory.defer(),i=this.createRandomString();return this.deferredCache[i]=r,e.id=i,this.postMessage(e),r.promise.finally((function(){delete t.deferredCache[i]})),r.promise},n.prototype.queueMessage=function(e,t){void 0===t&&(t=this._queue.length);e=this.prepareMessage(e);this._queue.splice(t,0,e)},n.prototype.on=function(e,t){this.handlers[e]&&(-1<this.handlers[e].indexOf(t)||this.handlers[e].push(t))},n.prototype.off=function(e,t){this.handlers[e]&&(t?-1<(t=this.handlers[e].indexOf(t))&&this.handlers[e].splice(t,1):this.handlers[e].length=0)},n.prototype.flushQueue=function(){!this.isFlushing&&this.contentWindow&&(this.isFlushing=!0,this.contentWindow.postMessage&&this.contentWindow.postMessage(this._queue,"*"),this._queue.length=0,this.isFlushing=!1)},n.prototype.sendMessage=function(e){e=this.prepareMessage(e);this.contentWindow&&this.contentWindow.postMessage&&this.contentWindow.postMessage(e,"*")},n.prototype.prepareMessage=function(e){var t;try{t=JSON.stringify(e)}catch(e){throw t=null,r.ensureError(e)}return t},n.prototype.onMessageReceived=function(e){if(this.allowSameWindow||e.originalEvent.source!==window){var t;try{t="string"==typeof e.originalEvent.data?JSON.parse(e.originalEvent.data):e.originalEvent.data}catch(e){t=null}if(t)for(var r=0,i=jQuery.isArray(t)?t:[t];r<i.length;r++){var o=i[r],n=void 0,a=void 0;try{a="string"==typeof o?(n=JSON.parse(o),o.length):(n=o,e.originalEvent.data.length)}catch(e){n=null}if(!n)return;this.dispatchMessage(e.originalEvent,n,a)}}},n.prototype.dispatchMessage=function(e,t,r){var i={message:t,source:e.source,packedSize:r};if(t.id&&(t.eventName===s||t.result||t.error)){r=this.deferredCache[t.id];return r?t.error?r.reject(t.error):r.resolve(t.result):void 0}for(var o=0,n=t.error?this.handlers.error:this.handlers.message;o<n.length;o++){var a=n[o];this.invokeHandler(a,i)}},n.prototype.invokeHandler=function(e,t){var r,i,o=this;t.message.id&&(i={id:t.message.id,eventName:s,arguments:[]});try{r=e.call(null,t),i&&this.promiseFactory.when(r).then((function(e){i.result=e,o.postMessage(i)})).catch((function(e){i.error=e,o.postMessage(i)}))}catch(e){i&&(i.error={message:e.message},this.postMessage(i))}},n.prototype.createRandomString=function(){return(Math.random()+1).toString(36).substring(7)},n.prototype.destroy=function(){this.handlers.message.length=0,this.handlers.error.length=0,$(window).off(i,this.windowMessageHandler),this.windowMessageHandler=null},n);function n(e,t){var r=this;this.promiseFactory=e,this._queue=[],this._allowSameWindow=!1,this.handlers={message:[],error:[]},this.isFlushing=!1,t&&(this._contentWindow=t),this.deferredCache={},this.windowMessageHandler=function(e){return r.onMessageReceived(e)},$(window).on(i,this.windowMessageHandler)}})(e.visualHost||(e.visualHost={}))})(powerbi=powerbi||{}),(function(o){var n;(function(e){function r(e){var t=e.type||o.VisualUpdateType.Data;return t&o.VisualUpdateType.Resize&&2===e.resizeMode&&(t|=o.VisualUpdateType.ResizeEnd),t}e.convertLegacyUpdateType=r;function t(t,e){return{update:function(e){t.update&&t.update({viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,type:r(e)})},destroy:function(){t.destroy&&t.destroy()},enumerateObjectInstances:function(e){return t.enumerateObjectInstances&&t.enumerateObjectInstances(e)||[]}}}function i(e){return{}}e.addVersion=function(){n.getVisualApiVersions().push({version:"1.0.0",overloads:t,hostAdapter:i})}})((n=o.extensibility||(o.extensibility={})).v100||(n.v100={}))})(powerbi=powerbi||{}),(function(t){var i,e,r;function o(r,e){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,type:i.v100.convertLegacyUpdateType(e)},e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function n(e){return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:e.host})},colors:r.isDefined(e,"style.colorPalette.dataColors.getAllColors")?e.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors()}}i=t.extensibility||(t.extensibility={}),e=i.v110||(i.v110={}),r=t.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.1.0",overloads:o,hostAdapter:n})}})(powerbi=powerbi||{}),(function(r){var o,e,i;function t(r,i){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,type:o.v100.convertLegacyUpdateType(e)},i.colorPalette.reset(),e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function n(t){var e=i.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new o.SelectionManager({hostServices:t.host})},colorPalette:o.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)}}}o=r.extensibility||(r.extensibility={}),e=o.v120||(o.v120={}),i=r.visualHost.VisualHostUtils,e.addVersion=function(){o.getVisualApiVersions().push({version:"1.2.0",overloads:t,hostAdapter:n})}})(powerbi=powerbi||{}),(function(r){var i,e,o;function t(t){var e=o.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:t.host})},colorPalette:i.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService({hostServices:t.host})}}i=r.extensibility||(r.extensibility={}),e=i.v130||(i.v130={}),o=r.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.3.0",hostAdapter:t})}})(powerbi=powerbi||{}),(function(r){var i,e,o;function t(t){var e=o.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:t.host})},colorPalette:i.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService({hostServices:t.host}),locale:t.host.locale()}}i=r.extensibility||(r.extensibility={}),e=i.v140||(i.v140={}),o=r.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.4.0",hostAdapter:t})}})(powerbi=powerbi||{}),(function(r){var i,e,o;function t(t){var e=o.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:t.host})},colorPalette:i.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService({hostServices:t.host}),locale:t.host.locale(),allowInteractions:!(!t||!t.interactivity)&&t.interactivity.isVisualInteractive}}i=r.extensibility||(r.extensibility={}),e=i.v150||(i.v150={}),o=r.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.5.0",hostAdapter:t})}})(powerbi=powerbi||{}),(function(r){var o,e,i;function t(r,i){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,type:o.v100.convertLegacyUpdateType(e)},i.colorPalette.reset(),e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function n(t){var e=i.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new o.SelectionManager({hostServices:t.host})},colorPalette:o.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:o.createTooltipService({hostServices:t.host}),locale:t.host.locale(),allowInteractions:!(!t||!t.interactivity)&&t.interactivity.isVisualInteractive}}o=r.extensibility||(r.extensibility={}),e=o.v160||(o.v160={}),i=r.visualHost.VisualHostUtils,e.addVersion=function(){o.getVisualApiVersions().push({version:"1.6.0",overloads:t,hostAdapter:n})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(o){var e=i.isDefined(o,"style.colorPalette.dataColors.getAllColors")?o.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:o.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return o.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:o.host}),telemetry:r.createTelemetryService({hostServices:o.host}),locale:o.host.locale(),allowInteractions:!(!o||!o.interactivity)&&o.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r){var i;e?((i=[]).push(e),o.host.applyJsonFilter(i,t,r)):o.host.applyJsonFilter(null,t,r)}}}r=t.extensibility||(t.extensibility={}),e=r.v170||(r.v170={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.7.0",hostAdapter:o})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:n.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()}}}r=t.extensibility||(t.extensibility={}),e=r.v180||(r.v180={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.8.0",hostAdapter:o})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:n.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()}}}r=t.extensibility||(t.extensibility={}),e=r.v190||(r.v190={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.9.0",hostAdapter:o})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:n.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)}}}r=t.extensibility||(t.extensibility={}),e=r.v1100||(r.v1100={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.10.0",hostAdapter:o})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){var e=n.host;return e.selectionManager=new r.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)}}}r=t.extensibility||(t.extensibility={}),e=r.v1110||(r.v1110={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.11.0",hostAdapter:o})}})(powerbi=powerbi||{}),(function(r){var o,e,i;function t(r,i){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,operationKind:e.operationKind,type:o.v100.convertLegacyUpdateType(e)},i.colorPalette.reset(),e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function n(n){var e=n.host,t=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return e.selectionManager=new o.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:o.createColorPalette(t),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:o.createTooltipService({hostServices:n.host}),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}o=r.extensibility||(r.extensibility={}),e=o.v011200||(o.v011200={}),i=r.visualHost.VisualHostUtils,e.addVersion=function(){o.getVisualApiVersions().push({version:"1.12.0",overloads:t,hostAdapter:n})}})(powerbi=powerbi||{}),(function(t){var r;function e(n){var e=n.host;return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return e.selectionManager=new r.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}((r=t.extensibility||(t.extensibility={})).v011300||(r.v011300={})).addVersion=function(){r.getVisualApiVersions().push({version:"1.13.0",hostAdapter:e})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=n.host;return e.apiVersion=i,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=new r.SelectionManager({hostServices:e,apiVersion:i}),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}r=t.extensibility||(t.extensibility={}),e=r.v020000||(r.v020000={}),i="2.0.0",e.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var o,t;function r(r,i){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,operationKind:e.operationKind,type:o.v100.convertLegacyUpdateType(e),jsonFilters:e.jsonFilters},i.colorPalette.reset(),e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function i(n){var e=n.host;return e.apiVersion=t,{createSelectionIdBuilder:function(){return e.createSelectionIdBuilder()},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(t),e.selectionManager},colorPalette:o.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}o=e.extensibility||(e.extensibility={}),e=o.v020100||(o.v020100={}),t="2.1.0",e.addVersion=function(){o.getVisualApiVersions().push({version:t,overloads:r,hostAdapter:i})}})(powerbi=powerbi||{}),(function(e){var t,r;function i(n){var e=n.host;return e.apiVersion=r,{createSelectionIdBuilder:function(){return e.createSelectionIdBuilder()},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(r),e.selectionManager},colorPalette:t.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:t.createTelemetryService({hostServices:n.host}),authenticationService:t.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}t=e.extensibility||(e.extensibility={}),e=t.v020200||(t.v020200={}),r="2.2.0",e.addVersion=function(){t.getVisualApiVersions().push({version:r,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var o,e,r;function i(r,i){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,operationKind:e.operationKind,jsonFilters:e.jsonFilters,type:o.v100.convertLegacyUpdateType(e),updateId:e.updateId},i.colorPalette.reset(),e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function n(n){var e=n.host;return e.apiVersion=r,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(r),e.selectionManager},colorPalette:o.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()},storageService:o.createStorageService(e),eventService:o.createEventService(e)}}o=t.extensibility||(t.extensibility={}),e=o.v020300||(o.v020300={}),r="2.3.0",e.addVersion=function(){o.getVisualApiVersions().push({version:r,overloads:i,hostAdapter:n})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=n.host;return e.apiVersion=i,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(i),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()},storageService:r.createStorageService(e),eventService:r.createEventService(e)}}r=t.extensibility||(t.extensibility={}),e=r.v020400||(r.v020400={}),i="2.4.0",e.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(t){var r,e,i;function o(n){var e=n.host;return e.apiVersion=i,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(i),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()},storageService:r.createStorageService(e),eventService:r.createEventService(e)}}r=t.extensibility||(t.extensibility={}),e=r.v020500||(r.v020500={}),i="2.5.0",e.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var o,t,r;function i(r,i){return{update:function(e){var t;r.update&&(t={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,isInFocus:!!e.isInFocus,operationKind:e.operationKind,jsonFilters:e.jsonFilters,type:o.v100.convertLegacyUpdateType(e),updateId:e.updateId},i.colorPalette.reset(),e=r.constructor.__transform__,_.isFunction(e)?r.update(t,e(t.dataViews)):r.update(t))}}}function n(n){var t=n.host;return t.apiVersion=r,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(r),t.selectionManager},colorPalette:o.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return t.fetchMoreData()},storageService:o.createStorageService(t),eventService:o.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)}}}o=e.extensibility||(e.extensibility={}),t=o.v020600||(o.v020600={}),r="2.6.0",t.addVersion=function(){o.getVisualApiVersions().push({version:r,overloads:i,hostAdapter:n})}})(powerbi=powerbi||{}),(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return t.fetchMoreData()},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030200||(r.v030200={}),i="3.2.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return t.fetchMoreData()},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030300||(r.v030300={}),i="3.3.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return t.fetchMoreData(e)},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030400||(r.v030400={}),i="3.4.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return t.fetchMoreData(e)},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030500||(r.v030500={}),i="3.5.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return t.fetchMoreData(e)},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030600||(r.v030600={}),i="3.6.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(e){var t,r,i;function o(n){var r=n.host;return r.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return r.selectionManager=r.createSelectionManager(i),r.selectionManager},colorPalette:t.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService(),telemetry:t.createTelemetryService({hostServices:n.host}),authenticationService:t.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return r.fetchMoreData(e)},storageService:t.createStorageService(r),eventService:t.createEventService(r),switchFocusModeState:function(e){return r.switchFocusModeState(e)},hostEnv:n.hostEnv,displayWarningIcon:function(e,t){return r.displayWarningIcon(e,t)}}}t=e.extensibility||(e.extensibility={}),r=t.v030700||(t.v030700={}),i="3.7.0",r.addVersion=function(){t.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v030800||(r.v030800={}),o="3.8.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v030900||(r.v030900={}),o="3.9.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040000||(r.v040000={}),o="4.0.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040100||(r.v040100={}),o="4.1.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040200||(r.v040200={}),o="4.2.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040300||(r.v040300={}),o="4.3.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i)}}r=t.extensibility||(t.extensibility={}),e=r.v040400||(r.v040400={}),o="4.4.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null===(e=n.interactivity)||void 0===e||!e.isVisualInteractive),allowModalDialog:!(null===(e=n.interactivity)||void 0===e||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i)}}r=t.extensibility||(t.extensibility={}),e=r.v040500||(r.v040500={}),o="4.5.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),(function(u){!(function(s){var a=[];s.getVisualApiVersions=function(){return a},s.setVisualApiVersions=function(e){a=e},u.extensibility.v100.addVersion(),u.extensibility.v110.addVersion(),u.extensibility.v120.addVersion(),u.extensibility.v130.addVersion(),u.extensibility.v140.addVersion(),u.extensibility.v150.addVersion(),u.extensibility.v160.addVersion(),u.extensibility.v170.addVersion(),u.extensibility.v180.addVersion(),u.extensibility.v190.addVersion(),u.extensibility.v1100.addVersion(),u.extensibility.v1110.addVersion(),u.extensibility.v011200.addVersion(),u.extensibility.v011300.addVersion(),u.extensibility.v020000.addVersion(),u.extensibility.v020100.addVersion(),u.extensibility.v020200.addVersion(),u.extensibility.v020300.addVersion(),u.extensibility.v020400.addVersion(),u.extensibility.v020500.addVersion(),u.extensibility.v020600.addVersion(),u.extensibility.v030200.addVersion(),u.extensibility.v030300.addVersion(),u.extensibility.v030400.addVersion(),u.extensibility.v030500.addVersion(),u.extensibility.v030600.addVersion(),u.extensibility.v030700.addVersion(),u.extensibility.v030800.addVersion(),u.extensibility.v030900.addVersion(),u.extensibility.v040000.addVersion(),u.extensibility.v040100.addVersion(),u.extensibility.v040200.addVersion(),u.extensibility.v040300.addVersion(),u.extensibility.v040400.addVersion(),s.createVisualApiAdapter=function(e,t,r,i,o,n){var a=new l(e,t,r,i,o),o=t=new s.VisualTimeTrackingWrapper(a);return null!=n&&(o=new s.VisualOutsideZoneAdapter(t,n)),new s.VisualSafeExecutionWrapper(o,e,r,i,a.isPluginInError)};var l=(e.prototype.init=function(n){return __awaiter(this,void 0,u.Promise,(function(){var t,r,i,o;return __generator(this,(function(e){switch(e.label){case 0:return(n.element,n.host,n.element.empty(),n=u.Prototype.inherit(n),this.legacy)?(i={module:this.module,featureSwitches:n.featureSwitches},this.plugin.createES6?[4,(t=this).plugin.createES6(i)]:[3,2]):[3,5];case 1:return t.visual=e.sent(),[3,3];case 2:this.visual=this.creator(i),e.label=3;case 3:return[4,this.visualLegacy.init(n)];case 4:return e.sent(),[3,9];case 5:return(r=this.host=a[this.apiVersionIndex].hostAdapter(n),i={element:n.element.get(0),host:r,module:this.module,featureSwitches:n.featureSwitches},this.plugin.createES6)?[4,(o=this).plugin.createES6(i)]:[3,7];case 6:return o.visual=e.sent(),[3,8];case 7:this.visual=this.creator(i),e.label=8;case 8:this.overloadMethods(),e.label=9;case 9:return[2]}}))}))},e.prototype.update=function(t){return __awaiter(this,void 0,u.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.plugin.systemVisual||((t=u.Prototype.inherit(t)).visualDefinitionData=void 0,t.dataTransforms=void 0),(t.type&u.VisualUpdateType.Resize)===u.VisualUpdateType.Resize&&this.visualHasMethod("onResizing")?this.plugin.custom&&this.visualHasMethod("update")?[4,this.visualLegacy.update(t)]:[3,2]:[3,3];case 1:e.sent(),e.label=2;case 2:return this.onResizing(t.viewport,t.resizeMode),[3,6];case 3:return this.visualHasMethod("update")?[4,this.visualLegacy.update(t)]:[3,5];case 4:return e.sent(),[3,6];case 5:(!t.type||t.type&u.VisualUpdateType.Data)&&this.onDataChanged(_.pick(t,["dataViews","operationKind"])),t.type&u.VisualUpdateType.ViewMode&&this.onViewModeChanged(t.viewMode),e.label=6;case 6:return[2]}}))}))},e.prototype.destroy=function(){this.visualHasMethod("destroy")&&this.visualLegacy.destroy()},e.prototype.enumerateObjectInstances=function(e){if(this.visualHasMethod("enumerateObjectInstances"))return this.visualLegacy.enumerateObjectInstances(e)},e.prototype.enumerateObjectRepetition=function(){if(this.visualHasMethod("enumerateObjectRepetition"))return this.visualLegacy.enumerateObjectRepetition()},e.prototype.enumerateObjectInstancesAsync=function(e){return this.visualHasMethod("enumerateObjectInstancesAsync")?this.visualAdapter.enumerateObjectInstancesAsync(e):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},e.prototype.enumerateObjectRepetitionAsync=function(){return this.visualHasMethod("enumerateObjectRepetitionAsync")?this.visualAdapter.enumerateObjectRepetitionAsync():this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(e.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!1,configurable:!0}),e.prototype.onResizing=function(e,t){this.visualHasMethod("onResizing")&&this.visualLegacy.onResizing(e,t)},e.prototype.onDataChanged=function(e){this.visualHasMethod("onDataChanged")&&this.visualLegacy.onDataChanged(e)},e.prototype.onViewModeChanged=function(e){this.visualHasMethod("onViewModeChanged")&&this.visualLegacy.onViewModeChanged(e)},e.prototype.onClearSelection=function(){this.visualHasMethod("onClearSelection")&&this.visualLegacy.onClearSelection()},e.prototype.onRestoreSelection=function(e){if(this.visualHasMethod("onRestoreSelection"))return this.visualLegacy.onRestoreSelection(e)},e.prototype.canResizeTo=function(e){if(this.visualHasMethod("canResizeTo"))return this.visualLegacy.canResizeTo(e)},e.prototype.unwrap=function(){return this.visual},e.prototype.getTelemetryInformation=function(){if(this.visualHasMethod("getTelemetryInformation"))return this.visualLegacy.getTelemetryInformation()},e.prototype.getFormattingModel=function(){if(this.visualHasMethod("getFormattingModel"))return this.visualLegacy.getFormattingModel()},e.prototype.resolveFormattingPlaceholder=function(e){if(this.visualHasMethod("resolveFormattingPlaceholder"))return this.visualLegacy.resolveFormattingPlaceholder(e)},Object.defineProperty(e.prototype,"visualNew",{get:function(){if(!this.legacy)return this.visual},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visualLegacy",{get:function(){if(this.legacy)return this.visual},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visualAdapter",{get:function(){return this.visual},enumerable:!1,configurable:!0}),e.prototype.visualHasMethod=function(e){var t=this.legacy?this.visualLegacy:this.visualNew;return t&&_.isFunction(t[e])},e.prototype.getVersionIndex=function(e){if(e)for(var t=s.getVisualApiVersions().length,r=0;r<t;r++)if(s.getVisualApiVersions()[r].version===e)return r;return-1},e.prototype.overloadMethods=function(){var e,t=this.getCompiledOverloads();for(e in t)this[e]=t[e]},e.prototype.getCompiledOverloads=function(){for(var e={},t=this.apiVersionIndex,r=this.visualNew,i=0;i<=t;i++){var o=s.getVisualApiVersions()[i].overloads;_.isFunction(o)&&_.assign(e,o(r,this.host))}return e},e);function e(e,t,r,i,o){this.plugin=e,this.creator=t,this.promiseFactory=r,this.telemetryService=i,this.module=o,this.isPluginInError=!1,t||this.plugin.createES6,this.telemetryService;t=e.apiVersion,e=this.getVersionIndex(t);t?-1<e?(this.apiVersionIndex=e,this.legacy=!1):this.isPluginInError=!0:this.legacy=!0}s.VisualApiAdapter=l})(u.extensibility||(u.extensibility={}))})(powerbi=powerbi||{}),(function(e){function t(e,t){this.wrappedVisual=e,this.ngZone=t}e=e.extensibility||(e.extensibility={}),t.prototype.init=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.init,e)},t.prototype.update=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.update,e)},t.prototype.destroy=function(){this.executeOutsideAngularZone(this.wrappedVisual.destroy)},t.prototype.onResizing=function(e,t){this.executeOutsideAngularZone(this.wrappedVisual.onResizing,e,t)},t.prototype.onDataChanged=function(e){this.executeOutsideAngularZone(this.wrappedVisual.onDataChanged,e)},t.prototype.onViewModeChanged=function(e){this.executeOutsideAngularZone(this.wrappedVisual.onViewModeChanged,e)},t.prototype.onClearSelection=function(){this.executeOutsideAngularZone(this.wrappedVisual.onClearSelection)},t.prototype.onRestoreSelection=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.onRestoreSelection,e)},t.prototype.canResizeTo=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.canResizeTo,e)},t.prototype.enumerateObjectInstances=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectInstances,e)},t.prototype.enumerateObjectInstancesAsync=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectInstancesAsync,e)},t.prototype.enumerateObjectRepetition=function(){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectRepetition)},t.prototype.enumerateObjectRepetitionAsync=function(){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectRepetitionAsync)},t.prototype.visualHasMethod=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.visualHasMethod,e)},t.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},Object.defineProperty(t.prototype,"sandbox",{get:function(){var e;return null===(e=this.wrappedVisual)||void 0===e?void 0:e.sandbox},enumerable:!1,configurable:!0}),t.prototype.getTelemetryInformation=function(){return this.executeOutsideAngularZone(this.wrappedVisual.getTelemetryInformation)},t.prototype.getFormattingModel=function(){return this.executeOutsideAngularZone(this.wrappedVisual.getFormattingModel)},t.prototype.resolveFormattingPlaceholder=function(e){var t=this;return this.ngZone.runOutsideAngular((function(){return t.wrappedVisual.resolveFormattingPlaceholder(e)}))},t.prototype.executeOutsideAngularZone=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.wrappedVisual;return this.ngZone.runOutsideAngular((function(){return e.apply(i,t)}))},e.VisualOutsideZoneAdapter=t})(powerbi=powerbi||{}),(function(a){var e,r,i;function s(e){switch(e.toLowerCase()){case"grouping":case a.VisualDataRoleKind.Grouping.toString():return a.VisualDataRoleKind.Grouping;case"measure":case a.VisualDataRoleKind.Measure.toString():return a.VisualDataRoleKind.Measure;case"groupingormeasure":case a.VisualDataRoleKind.GroupingOrMeasure.toString():return a.VisualDataRoleKind.GroupingOrMeasure}}function l(e,t){return _.isString(e)||-1===_.indexOf(r,t)?e:a.data.getDisplayName(e,i)}e=(e=a.extensibility||(a.extensibility={})).visualPluginAdapter||(e.visualPluginAdapter={}),r=["displayName","description","placeHolderText"],i={get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}},e.transformPlugin=function(e){(e.apiVersion?function(e){e&&(function(e){for(var t in e){t=e[t];if(t){var r=t.properties;if(r)for(var i in r){i=r[i];i&&((i=i.type)&&i.enumeration&&(i.enumeration=a.createEnumType(i.enumeration)))}}}}(e.objects),(function(e){for(var t in e){t=e[t];t&&t.kind&&(t.kind=s(t.kind.toString()))}})(e.dataRoles),(function(e){for(var t in e){t=e[t];if(t){var r=t.conditions;if(r)for(var i in r){var o=r[i];if(o)for(var n in o){var a=o[n];a&&a.kind&&(o[n].kind=s(a.kind.toString()))}}}}})(e.dataViewMappings))}:function(e){e&&(function(e){for(var t in e){var r=e[t];if(r){var i=(r=e[t]=_.mapValues(r,l)).properties;if(i)for(var o in i){var n=i[o];n&&((o=(n=i[o]=_.mapValues(n,l)).type)&&o.enumeration&&_.isFunction(o.enumeration.members)&&(n=o.enumeration.members().map((function(e){return _.mapValues(e,l)})),o.enumeration=a.createEnumType(n)))}}}}(e.objects),(function(e){for(var t in e){var r=e[t];r&&(e[t]=_.mapValues(r,l))}})(e.dataRoles))})(e.capabilities)}})(powerbi=powerbi||{}),(function(i){var e,r,t;function o(e,t,r,i,o,n){this.wrappedVisual=e,this.visualPlugin=t,this.promiseFactory=r,this.telemetryService=i,this.isPluginInError=o,this.silent=n,this.initCalled=!1,this.startTimeISO=(new Date).toISOString()}e=i.extensibility||(i.extensibility={}),r=jsCommon.ExceptionHelper,t=jsCommon.Trace,o.prototype.init=function(e){var t,r=this;if(this.initCalled=!0,e&&e.host&&e.host.telemetry&&(t=e.host.telemetry(),this.instanceId=t&&t.instanceId),this.wrappedVisual.init)return this.executeSafelyAsync((function(){return r.wrappedVisual.init(e)}))},o.prototype.checkInit=function(){return!!this.initCalled||(t.assertFail("Another visual method was called before init"),!1)},o.prototype.destroy=function(){var e=this;this.wrappedVisual.destroy&&this.executeSafely((function(){return e.wrappedVisual.destroy()}))},o.prototype.update=function(r){var e=this;if(this.checkInit(),this.wrappedVisual.update)return this.executeSafelyAsync((function(){return __awaiter(e,void 0,i.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.wrappedVisual.update(r)];case 1:return e.sent(),this.telemetryService&&this.startTimeISO&&this.visualPlugin.custom&&(t=(new Date).toISOString(),this.telemetryService.logEvent(i.telemetry.VisualApiUsage,{name:this.visualPlugin.name,apiVersion:this.visualPlugin.apiVersion,custom:!!this.visualPlugin.custom,visualVersion:this.visualPlugin.version,visualName:this.instanceId,start:this.startTimeISO,end:t,isError:this.isPluginInError,errorSource:"User"}),this.startTimeISO=null),[2]}}))}))}))},o.prototype.onResizing=function(e,t){var r=this;this.checkInit(),this.wrappedVisual.onResizing&&this.executeSafely((function(){return r.wrappedVisual.onResizing(e,t)}))},o.prototype.onDataChanged=function(e){var t=this;this.checkInit(),this.wrappedVisual.onDataChanged&&this.executeSafely((function(){return t.wrappedVisual.onDataChanged(e)}))},o.prototype.onViewModeChanged=function(e){var t=this;this.checkInit(),this.wrappedVisual.onViewModeChanged&&this.executeSafely((function(){return t.wrappedVisual.onViewModeChanged(e)}))},o.prototype.onClearSelection=function(){var e=this;this.checkInit(),this.wrappedVisual.onClearSelection&&this.executeSafely((function(){return e.wrappedVisual.onClearSelection()}))},o.prototype.onRestoreSelection=function(e){var t=this;return this.checkInit(),!!this.wrappedVisual.onRestoreSelection&&this.executeSafely((function(){return t.wrappedVisual.onRestoreSelection(e)}))},o.prototype.canResizeTo=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.canResizeTo)return this.executeSafely((function(){return t.wrappedVisual.canResizeTo(e)}))},o.prototype.enumerateObjectInstances=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.enumerateObjectInstances)return this.executeSafely((function(){return t.wrappedVisual.enumerateObjectInstances(e)}))},o.prototype.enumerateObjectRepetition=function(){var e=this;if(this.checkInit(),this.wrappedVisual.enumerateObjectRepetition)return this.executeSafely((function(){return e.wrappedVisual.enumerateObjectRepetition()}))},o.prototype.enumerateObjectInstancesAsync=function(e){var t=this;return this.checkInit(),this.visualAdapter.enumerateObjectInstancesAsync?this.executeSafely((function(){return t.visualAdapter.enumerateObjectInstancesAsync(e)})):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},o.prototype.enumerateObjectRepetitionAsync=function(){var e=this;return this.checkInit(),this.visualAdapter.enumerateObjectRepetitionAsync?this.executeSafely((function(){return e.visualAdapter.enumerateObjectRepetitionAsync()})):this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(o.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"visualAdapter",{get:function(){return this.wrappedVisual},enumerable:!1,configurable:!0}),o.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},o.prototype.visualHasMethod=function(e){var t=this.wrappedVisual;return t&&t.visualHasMethod(e)},o.prototype.getTelemetryInformation=function(){var e=this;if(this.checkInit(),this.wrappedVisual.getTelemetryInformation)return this.executeSafely((function(){return e.wrappedVisual.getTelemetryInformation()}))},o.prototype.getFormattingModel=function(){var e=this;if(this.checkInit(),this.wrappedVisual.getFormattingModel)return this.executeSafely((function(){return e.wrappedVisual.getFormattingModel()}))},o.prototype.resolveFormattingPlaceholder=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.resolveFormattingPlaceholder)return this.executeSafely((function(){return t.wrappedVisual.resolveFormattingPlaceholder(e)}))},o.prototype.executeSafely=function(e){try{return e()}catch(e){this.silent,this.telemetryService&&this.logVisualExceptionEvent(e)}},o.prototype.executeSafelyAsync=function(r){return __awaiter(this,void 0,i.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,r()];case 1:return[2,e.sent()];case 2:return t=e.sent(),this.silent,this.telemetryService&&this.logVisualExceptionEvent(t),[3,3];case 3:return[2]}}))}))},o.prototype.logVisualExceptionEvent=function(e){var t=!!this.visualPlugin.custom;this.telemetryService.logEvent(i.telemetry.VisualException,{visualType:this.visualPlugin.name,isCustom:t,apiVersion:this.visualPlugin.apiVersion,visualName:this.instanceId,isDeprecated:!!this.visualPlugin.isDeprecated,source:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:t?void 0:r.cleanExceptionMessage(e),stack:t?void 0:r.cleanExceptionStack(e)})},e.VisualSafeExecutionWrapper=o})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).VisualPlugin=function(t){return function(e){e.__transform__=t.transform}}})(powerbi=powerbi||{}),(function(e){!(function(e){e.createColorPalette=function(e){return new t(e)},e.createExtendedColorPalette=function(e){return new i(e)};var t=(r.prototype.getColor=function(e){if(r=this.colorPalette[e])return r;var t=this.colors,r=this.colorPalette[e]=t[this.colorIndex++];return this.colorIndex>=t.length&&(this.colorIndex=0),r},r.prototype.reset=function(){return this.colorIndex=0,this},r);function r(e){this.colorPalette={},this.colorIndex=0,this.colors=e}var o,i=(__extends(n,o=t),n);function n(e){var t=this,r=e.colorPalette.dataColors;(t=o.call(this,r.getAllColors())||this).isHighContrast=e.isHighContrast,t.foreground=e.colorPalette.foreground,t.foregroundLight=e.colorPalette.foregroundLight,t.foregroundDark=e.colorPalette.foregroundDark,t.foregroundNeutralLight=e.colorPalette.foregroundNeutralLight,t.foregroundNeutralDark=e.colorPalette.foregroundNeutralDark,t.foregroundNeutralSecondary=e.colorPalette.foregroundNeutralSecondary,t.foregroundNeutralSecondaryAlt=e.colorPalette.foregroundNeutralSecondaryAlt,t.foregroundNeutralSecondaryAlt2=e.colorPalette.foregroundNeutralSecondaryAlt2,t.foregroundNeutralTertiary=e.colorPalette.foregroundNeutralTertiary,t.foregroundNeutralTertiaryAlt=e.colorPalette.foregroundNeutralTertiaryAlt,t.foregroundSelected=e.colorPalette.foregroundSelected,t.foregroundButton=e.colorPalette.foregroundButton,t.background=e.colorPalette.background,t.backgroundLight=e.colorPalette.backgroundLight,t.backgroundNeutral=e.colorPalette.backgroundNeutral,t.backgroundDark=e.colorPalette.backgroundDark,t.hyperlink=e.colorPalette.hyperlink,t.visitedHyperlink=e.colorPalette.visitedHyperlink,t.mapPushpin=e.colorPalette.mapPushpin,t.shapeStroke=e.colorPalette.shapeStroke;var i=r.getSentimentColors();t.bad=i.bad,t.neutral=i.neutral,t.good=i.good;r=r.getGradientColors();return t.minimum=r.minColor,t.center=r.midColor,t.maximium=r.maxColor,t.null=r.nullColor,t.negative=i.bad,t.positive=i.good,t.selection=e.colorPalette.selection,t.separator=e.colorPalette.separator,t}})(e.extensibility||(e.extensibility={}))})(powerbi=powerbi||{}),(function(e){var t;function r(){}t=e.extensibility||(e.extensibility={}),r.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=[e.identity[t]]),this},r.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=[t.identity]),this},r.prototype.withMeasure=function(e){return this.measure=e,this},r.prototype.createSelectionId=function(){return e.visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},r.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},t.SelectionIdBuilder=r})(powerbi=powerbi||{}),(function(t){var e,r,n;function o(e,t){void 0===t&&(t=!1),this.dataPointObjectName="dataPoint",this.filterPropertyIdentifier={objectName:"general",propertyName:"filter"},this.hostServices=e.hostServices,this.apiVersion=e.apiVersion,this.selectedIds=[],this.promiseFactory=this.hostServices.promiseFactory(),this.noIframe=t}e=t.extensibility||(t.extensibility={}),r=t.visuals.CustomVisualSelectionId,n=jsCommon.Version,o.prototype.select=function(e,t){void 0===t&&(t=!1);var r=this.promiseFactory.defer();return e?(e instanceof Array||(e=[e]),this.hostServices.shouldRetainSelection()?this.sendSelectionToHost(e,t):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds,t)),r.resolve(this.selectedIds)):r.reject(),r.promise},o.prototype.showContextMenu=function(e,t,r){var i=this.promiseFactory.defer();return this.sendContextMenuToHost(e=e||{},t,r),i.resolve(null),i.promise},o.prototype.toggleExpandCollapse=function(e,t){var r=this.promiseFactory.defer();return this.sendExpandCollapseToHost(e,!0===t),r.resolve(null),r.promise},o.prototype.hasSelection=function(){return 0<this.selectedIds.length},o.prototype.clear=function(){var e=this.promiseFactory.defer();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(null),e.promise},o.prototype.getSelectionIds=function(){return this.selectedIds},o.prototype.setSelectionIds=function(e){this.selectedIds=e},o.prototype.sendSelectionToHost=function(e,t){var r,i,o;this.noIframe||!this.apiVersion||n.lt(this.apiVersion,"2.0.0")?(r=this.dataPointObjectName,o=!(i={visualObjects:_.chain(e).filter((function(e){return e.hasIdentity()})).map((function(e){return{objectName:r,selectorsByColumn:e.getSelectorsByColumn()}})).value(),selectors:void 0,selectionMode:t?3:0}),(o=!_.isEmpty(e)?e[0].getSelector()&&!e[0].getSelectorsByColumn():o)&&(i.selectors=_.chain(e).filter((function(e){return e.hasIdentity()})).map((function(e){return e.getSelector()})).value()),this.hostServices.onSelect(i)):this.hostServices.sendSelectionIdsToHost(this.prepareCustomVisualSelectEventArgs(e,t))},o.prototype.sendContextMenuToHost=function(e,t,r){e&&t&&this.hostServices.customVisualOnContextMenu({data:[e],position:t,dataRoles:r?[r]:void 0})},o.prototype.sendExpandCollapseToHost=function(e,t){e&&null!=e.nodeIsCollapsed&&this.hostServices.customVisualOnExpandCollapse({data:e,entireLevel:t})},o.prototype.selectInternal=function(r,e){var i=this;r.length<1||(1<r.length?this.selectedIds=e?r.filter((function(t){return!i.selectedIds.some((function(e){return e.equals(t)}))})).concat(this.selectedIds.filter((function(t){return!r.some((function(e){return e.equals(t)}))}))):r:o.containsSelection(this.selectedIds,r[0])?this.selectedIds=e?this.selectedIds.filter((function(e){return!r[0].equals(e)})):1<this.selectedIds.length?r:[]:e?this.selectedIds.push(r[0]):this.selectedIds=r)},o.containsSelection=function(e,t){return e.some((function(e){return t.equals(e)}))},o.getSelectorsByColumn=function(e){return e&&e[0]instanceof r?e:_(e).filter((function(e){return e.hasIdentity})).map((function(e){return e.getSelectorsByColumn()})).compact().value()},o.createChangeForFilterProperty=function(e,t){var r={},i={objectName:e.objectName,selector:void 0,properties:r};return null==t?(r[e.propertyName]={},{remove:[i]}):(r[e.propertyName]=t,{merge:[i]})},o.prototype.getFilterFromSelectors=function(){if(this.hasSelection()){var e=_.chain(this.selectedIds).filter((function(e){return e.hasIdentity()})).map((function(e){return e.getSelector()})).value();return t.data.Selector.filterFromSelector(e,!1)}},o.prototype.prepareCustomVisualSelectEventArgs=function(e,t){var r={selectionIds:[],multiSelect:t};if(e&&e[0]&&(e[0].dataMap||e[0].measures))for(var i=0,o=e;i<o.length;i++){var n=o[i];r.selectionIds.push(n)}return r},o.prototype.applySelectionFilter=function(){this.hostServices.persistProperties(o.createChangeForFilterProperty(this.filterPropertyIdentifier,this.getFilterFromSelectors()))},o.prototype.registerOnSelectCallback=function(e){this.onSelectCallback=e},o.prototype.invokeOnSelectCallback=function(e){_.isFunction(this.onSelectCallback)&&this.onSelectCallback(e)},e.SelectionManager=o})(powerbi=powerbi||{}),(function(e){!(function(t){t.createTooltipService=function(e){return new r(e)};var r=(e.prototype.enabled=function(){return this.tooltipService&&this.tooltipService.enabled()},e.prototype.show=function(e){this.enabled()&&(e={coordinates:e.coordinates,dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.SelectionManager.getSelectorsByColumn(e.identities)},this.tooltipService.show(e))},e.prototype.move=function(e){this.enabled()&&(e={coordinates:e.coordinates,dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.SelectionManager.getSelectorsByColumn(e.identities)},this.tooltipService.move(e))},e.prototype.hide=function(e){this.enabled()&&this.tooltipService.hide(e)},e);function e(e){this.hostServices=e.hostServices,this.tooltipService=this.hostServices.tooltips()}})(e.extensibility||(e.extensibility={}))})(powerbi=powerbi||{}),(function(e){!(function(e){e.createTelemetryService=function(e){return new t(e)};var t=(r.prototype.trace=function(e,t){this.telemetryService&&this.telemetryService.trace(e,t)},r);function r(e){this.hostServices=e.hostServices,this.telemetryService=this.hostServices&&this.hostServices.telemetry&&this.hostServices.telemetry(),this.instanceId=this.telemetryService&&this.telemetryService.instanceId}e.convertVisualEventType=function(e){switch(e){case 3:return"VisualEventError";case 2:return"VisualEventTrace";case 0:return"VisualEventRenderStarted";case 1:return"VisualEventRenderCompleted";default:return}},e.convertStringToVisualEventType=function(e){switch(e){case"VisualEventError":return 3;case"VisualEventTrace":return 2;case"VisualEventRenderStarted":return 0;case"VisualEventRenderCompleted":return 1;default:return}}})(e.extensibility||(e.extensibility={}))})(powerbi=powerbi||{}),(function(r){!(function(){(r.extensibility||(r.extensibility={})).createAuthenticationService=function(e){return new t(e)};var t=(e.prototype.getResourceUrl=function(){return this.authenticationService?this.authenticationService.getResourceUrl():this.promiseFactory.reject()},e.prototype.getAADAuthenticationToken=function(){return this.authenticationService?this.authenticationService.getAADAuthenticationToken():this.promiseFactory.reject()},e.prototype.getAADToken=function(){return this.authenticationService?this.authenticationService.getAADToken():this.promiseFactory.reject()},e.prototype.getWACToken=function(e,t){return this.authenticationService?this.authenticationService.getWACToken(e,t):this.promiseFactory.reject()},e.prototype.getSignedInAccessToken=function(){return this.promiseFactory.reject()},e.prototype.getClusterInfo=function(){return this.promiseFactory.reject()},e);function e(e){this.hostServices=e.hostServices,this.authenticationService=this.hostServices&&this.hostServices.authenticationService&&this.hostServices.authenticationService(),this.promiseFactory=this.hostServices.promiseFactory()}})()})(powerbi=powerbi||{}),(function(e){function t(e){this.localizationResources=e}e=e.extensibility||(e.extensibility={}),t.prototype.getDisplayName=function(e){var t=this.localizationResources;return t&&t.localizedStrings&&t.localizedStrings.hasOwnProperty(e)?t.localizedStrings[e]:t&&t.enUSStrings&&t.enUSStrings.hasOwnProperty(e)?t.enUSStrings[e]:e},e.LocalizationManager=t})(powerbi=powerbi||{}),(function(r){!(function(){(r.extensibility||(r.extensibility={})).createEventService=function(e){return new t(e)};var t=(e.prototype.renderingStarted=function(e){this.eventService&&this.eventService.renderingStarted(e)},e.prototype.renderingFinished=function(e){this.eventService&&this.eventService.renderingFinished(e)},e.prototype.renderingFailed=function(e,t){this.eventService&&this.eventService.renderingFailed(e,t)},e);function e(e){this.eventService=e&&e.eventService&&e.eventService()}})()})(powerbi=powerbi||{}),(function(r){!(function(){(r.extensibility||(r.extensibility={})).createLicenseManager=function(e){return new t(e)};var t=(e.prototype.getAvailableServicePlans=function(){return this.licenseManagerService?this.licenseManagerService.getAvailableServicePlans():this.promiseFactory.reject()},e.prototype.notifyLicenseRequired=function(e){return this.licenseManagerService?this.licenseManagerService.notifyLicenseRequired(e):this.promiseFactory.reject()},e.prototype.notifyFeatureBlocked=function(e){return this.licenseManagerService?this.licenseManagerService.notifyFeatureBlocked(e):this.promiseFactory.reject()},e.prototype.clearLicenseNotification=function(){return this.licenseManagerService?this.licenseManagerService.clearLicenseNotification():this.promiseFactory.reject()},e);function e(e){this.licenseManagerService=e&&e.licenseManagerService&&e.licenseManagerService(),this.promiseFactory=e.promiseFactory()}})()})(powerbi=powerbi||{}),(function(e){var t,r;t=(t=e.extensibility||(e.extensibility={})).legacy||(t.legacy={}),r=e.data.Selector,t.isOldSelectEventArgs=function(e){var t=null!=e.data||null!=e.selectors,e=_.some(e.visualObjects,(function(e){return e.selectorsByColumn&&e.selectorsByColumn.metadata&&!_.isArray(e.selectorsByColumn.metadata)}));return t||e},t.getSelectorsByColumn=function(e){var t;if(e.data2)t=e.data2;else{if(e.selectors||e.data)return _.map(e.selectors||e.data,(function(e){if(!e)return;var t={};return t[""]=e.data,{dataMap:t,metadata:[e.metadata]}}));if(!e.visualObjects)return[];t=_.map(e.visualObjects,(function(e){return e.selectorsByColumn}))}for(var r=0,i=t;r<i.length;r++){var o=i[r],n=o.metadata;n&&!_.isArray(n)&&(o.metadata=[n])}return t},t.getSelectors=function(e){return null!=e.selectors?e.selectors:e.data||(e.visualObjects?_.map(e.visualObjects,(function(e){return r.convertSelectorsByColumnToSelector(e.selectorsByColumn)})):e.data)}})(powerbi=powerbi||{}),(function(i){var s,e,o,n,t,a,r;function l(e){return e&&_.endsWith(e,i.visualHost.OrgStoreVisualSuffix)}function u(e,t,r,i,o,n,a){return!(!t||e===s.EsriVisual||l(e)||a)&&(!!r||!(!i||o.isApprovedResourceServerRender(e))&&(!n||o.isApprovedVisualsDefined()))}s=i.visualHost||(i.visualHost={}),e=s.CustomVisualsUtils||(s.CustomVisualsUtils={}),r=jsCommon.Version,(t=o=e.CustomVisualsAdminControlState||(e.CustomVisualsAdminControlState={}))[t.FeatureIsDisabled=0]="FeatureIsDisabled",t[t.AllCustomVisualsAreEnabled=1]="AllCustomVisualsAreEnabled",t[t.AllCustomVisualsAreDisabled=2]="AllCustomVisualsAreDisabled",t[t.NonCertifiedCustomVisualsAreDisabled=3]="NonCertifiedCustomVisualsAreDisabled",t[t.FailedEvaluatingState=4]="FailedEvaluatingState",(t=n=e.CustomVisualTypes||(e.CustomVisualTypes={}))[t.Unclassified=0]="Unclassified",t[t.NonCertifiedCustomVisual=1]="NonCertifiedCustomVisual",t[t.NonCdnCustomVisual=2]="NonCdnCustomVisual",t[t.CertifiedCustomVisual=3]="CertifiedCustomVisual",t[t.OrganizationalStore=4]="OrganizationalStore",t[t.Native=5]="Native",e.getAdminControlState=function(e,t,r){if(void 0===a)try{if(!(t&&e&&e.featureSwitches&&e.featureSwitches.customVisualsTenantSwitch))return a=o.FeatureIsDisabled;a=e.featureSwitches.customVisualsTenantEnabled?e.featureSwitches.certifiedCustomVisualsTenantEnabled?o.NonCertifiedCustomVisualsAreDisabled:o.AllCustomVisualsAreEnabled:o.AllCustomVisualsAreDisabled,t.logChildEvent(r&&r.event,i.telemetry.AdminControlInitialized,{AdminControlState:o[a]})}catch(e){a=o.FailedEvaluatingState}return a},e.isCustomVisualTypeDisabled=function(e,t,r,i,o,n,a){return n||a?u(t,!0,n,a,r,i,o):u(t,e.featureSwitches.customVisualsTenantSwitch,!e.featureSwitches.customVisualsTenantEnabled,e.featureSwitches.certifiedCustomVisualsTenantEnabled,r,i,o)},e.shouldAllowEmptyDataView=function(e){return!(!e||!e.capabilities)&&((!e.custom||e.apiVersion&&r.gt(e.apiVersion,"3.5.0"))&&e.capabilities.supportsEmptyDataView)},e.areCustomVisualsDisabled=function(e,t){return t||e.featureSwitches.customVisualsTenantSwitch&&!e.featureSwitches.customVisualsTenantEnabled},e.isOrganizationalCustomVisual=l,e.isCustomVisualTypeDisabledHelper=u,e.getCustomVisualType=function(e,t,r){return r?l(t)?n.OrganizationalStore:e.isApprovedVisualsDefined()?e.isApprovedResourceServerRender(t)?n.CertifiedCustomVisual:e.isApprovedResource(t)?n.NonCertifiedCustomVisual:n.NonCdnCustomVisual:n.Unclassified:n.Native},e.SandboxPropertyTranslator=function(e){switch(e){case 0:return"allow-scripts";case 1:return"allow-popups";case 2:return"allow-same-origin";case 3:return"allow-forms";case 4:return"allow-top-navigation-by-user-activation";case 5:return"allow-downloads"}}})(powerbi=powerbi||{}),(function(r){var e;function t(e){this.wrappedVisual=e}e=r.extensibility||(r.extensibility={}),t.prototype.init=function(e){var t=this;if(this.wrappedVisual.init)return this.trackVisualTime((function(){return t.wrappedVisual.init(e)}))},t.prototype.destroy=function(){var e=this;this.wrappedVisual.destroy&&this.trackVisualTime((function(){return e.wrappedVisual.destroy()}))},t.prototype.update=function(e){var t=this;if(this.wrappedVisual.update)return this.trackVisualTime((function(){return t.wrappedVisual.update(e)}),(function(){return e&&e.parentContextActivity?e.parentContextActivity.createChildActivity({name:"Visual Update"}):void 0}))},t.prototype.onResizing=function(e,t){var r=this;this.wrappedVisual.onResizing&&this.trackVisualTime((function(){return r.wrappedVisual.onResizing(e,t)}))},t.prototype.onDataChanged=function(e){var t=this;this.wrappedVisual.onDataChanged&&this.trackVisualTime((function(){return t.wrappedVisual.onDataChanged(e)}))},t.prototype.onViewModeChanged=function(e){var t=this;this.wrappedVisual.onViewModeChanged&&this.trackVisualTime((function(){return t.wrappedVisual.onViewModeChanged(e)}))},t.prototype.onClearSelection=function(){var e=this;this.wrappedVisual.onClearSelection&&this.trackVisualTime((function(){return e.wrappedVisual.onClearSelection()}))},t.prototype.onRestoreSelection=function(e){var t=this;return!!this.wrappedVisual.onRestoreSelection&&this.trackVisualTime((function(){return t.wrappedVisual.onRestoreSelection(e)}))},t.prototype.canResizeTo=function(e){var t=this;if(this.wrappedVisual.canResizeTo)return this.trackVisualTime((function(){return t.wrappedVisual.canResizeTo(e)}))},t.prototype.enumerateObjectInstances=function(e){var t=this;if(this.wrappedVisual.enumerateObjectInstances)return this.trackVisualTime((function(){return t.wrappedVisual.enumerateObjectInstances(e)}))},t.prototype.enumerateObjectRepetition=function(){var e=this;if(this.wrappedVisual.enumerateObjectRepetition)return this.trackVisualTime((function(){return e.wrappedVisual.enumerateObjectRepetition()}))},t.prototype.enumerateObjectInstancesAsync=function(e){var t=this;return this.visualAdapter.enumerateObjectInstancesAsync?this.trackVisualTime((function(){return t.visualAdapter.enumerateObjectInstancesAsync(e)})):r.Promise.resolve(this.enumerateObjectInstances(e))},t.prototype.enumerateObjectRepetitionAsync=function(){var e=this;return this.visualAdapter.enumerateObjectRepetitionAsync?this.trackVisualTime((function(){return e.visualAdapter.enumerateObjectRepetitionAsync()})):r.Promise.resolve(this.enumerateObjectRepetition())},Object.defineProperty(t.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visualAdapter",{get:function(){return this.wrappedVisual},enumerable:!1,configurable:!0}),t.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},t.prototype.visualHasMethod=function(e){var t=this.wrappedVisual;return t&&t.visualHasMethod(e)},t.prototype.getTelemetryInformation=function(){var e=this;if(this.wrappedVisual.getTelemetryInformation)return this.trackVisualTime((function(){return e.wrappedVisual.getTelemetryInformation()}))},t.prototype.getFormattingModel=function(){var e=this;if(this.wrappedVisual.getFormattingModel)return this.trackVisualTime((function(){return e.wrappedVisual.getFormattingModel()}))},t.prototype.resolveFormattingPlaceholder=function(e){var t=this;if(this.wrappedVisual.resolveFormattingPlaceholder)return this.trackVisualTime((function(){return t.wrappedVisual.resolveFormattingPlaceholder(e)}))},t.prototype.trackVisualTime=function(e,t){t=t&&t();try{return e()}finally{t&&t.resolve()}},e.VisualTimeTrackingWrapper=t})(powerbi=powerbi||{}),(function(r){!(function(){(r.extensibility||(r.extensibility={})).createDownloadService=function(e){return new t(e)};var t=(e.prototype.exportVisualsContent=function(e,t,r,i){var o=this.promiseFactory.defer();return this.downloadService.exportVisualsContent(e,t,r,i).then((function(e){return o.resolve(e)}),(function(e){return o.reject(e)})),o.promise},e);function e(e){this.downloadService=e&&e.downloadService&&e.downloadService(),this.promiseFactory=e.promiseFactory()}})()})(powerbi=powerbi||{}),(function(r){!(function(){(r.extensibility||(r.extensibility={})).createStorageService=function(e){return new t(e)};var t=(e.prototype.enabled=function(){return null!=this.storageService?this.storageService.isStorageEnabled():this.promiseFactory.reject()},e.prototype.get=function(e){return null!=this.storageService&&e?this.storageService.getStorageData(e):this.promiseFactory.reject()},e.prototype.set=function(e,t){return null!=this.storageService&&e&&t?this.storageService.setStorageData(e,t):this.promiseFactory.reject()},e.prototype.remove=function(e){null!=this.storageService&&e&&this.storageService.removeStorageData(e)},e);function e(e){this.storageService=e&&e.localStorageService&&e.localStorageService(),this.promiseFactory=e.promiseFactory()}})()})(powerbi=powerbi||{});;
"use strict";var powerbi,__awaiter=this&&this.__awaiter||function(e,a,s,p){return new(s=s||Promise)(function(i,t){function o(e){try{r(p.next(e))}catch(e){t(e)}}function n(e){try{r(p.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}r((p=p.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&t[0]?r.return:t[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,t[1])).done)return a;switch(r=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(i,s)}catch(e){t=[6,e],r=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}};!(function(o){!(function(e){var s=window;function p(){return window.resourceLoaderUrl||"/explore/resourcePackageItem/"}e.getResourceLoaderUrl=p,e.createJQueryResourceItemProxy=function(e){return new t(e)};var t=(i.prototype.get=function(e,t,i){var o=this.promiseFactory.defer(),n=s.clusterUri,r=window.powerBIAccessToken;top&&top.powerBIAccessToken&&(r=top.powerBIAccessToken);var a=p(),r={authorization:"Bearer "+r};window.isAnonymousEmbed&&(n=window.clusterApiUri,a=window.resourceLoaderUrl+e+"/",r["X-PowerBI-ResourceKey"]=window.powerBIResourceKey);i=n+a+encodeURIComponent(i);return $.ajax({url:i,headers:r,dataType:"string"}).then((function(e){return o.resolve(e)}),(function(e){return o.reject(e)})),o.promise},i.prototype.getBlob=function(e,t,i){return o.createJQueryPromiseFactory().reject()},i);function i(e){this.promiseFactory=e}})(o.visualSandbox||(o.visualSandbox={}))})(powerbi=powerbi||{}),(function(s){!(function(e){var r=s.visualHost,a=s.contracts.ResourcePackageItemType;e.createResourceLoaderHost=function(){var e=s.createJQueryPromiseFactory(),e={messageProxy:r.createWindowMessageProxy(e,window.parent),promiseFactory:e,resourceProvider:{get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}}};return new t(e)};var t=(i.prototype.onMessageReceived=function(e){if("loadVisualPluginWithContent"===e.message.eventName)return this.loadVisualPluginWithContent.apply(this,e.message.arguments)},i.prototype.loadVisualPluginWithContent=function(e){var t=this.promiseFactory.defer(),i=e.pluginName,o=e.mappedPluginContent,e=o[a.CustomVisualJavascript].content,o=o[a.CustomVisualsCss].content;try{r.resourceInjector.injectJsCode(i,e),r.resourceInjector.injectCssCode(i,o);var n=s.visuals.plugins[i];n.iconUrl=r.visualPluginServiceHelpers.getPluginIconUrl(i),n.content={js:e,css:o,iconBase64:n.iconUrl},s.extensibility.visualPluginAdapter.transformPlugin(n),n.capabilities.objects=s.data.services.DataViewObjectDescriptorSerializer.serialize(n.capabilities.objects,this.resourceProvider),t.resolve(n)}catch(e){t.reject(e)}return t.promise},i);function i(e){var t=this;e.messageProxy,e.promiseFactory,this.messageProxy=e.messageProxy,this.promiseFactory=e.promiseFactory,this.resourceProvider=e.resourceProvider,this.messageProxy.on(r.events.WindowMessageProxyMessageEvent,(function(e){return t.onMessageReceived(e)}))}function o(){var e;n||(window.powerbi||(window.powerbi={}),window.powerbi.visualSandbox||(window.powerbi.visualSandbox={}),e=s.visualSandbox.createResourceLoaderHost,window.powerbi.visualSandbox.createResourceLoaderHost=function(){return e()},n=!0)}e.ResourceLoaderHost=t,e.exportCreateResourceLoaderHostToGlobal=o;var n=!1;o()})(s.visualSandbox||(s.visualSandbox={}))})(powerbi=powerbi||{}),(function(b){!(function(l){var s=b.data.segmentation.DataViewMerger,i=b.data.services.DataViewObjectSerializer,t=b.data.services.DataViewObjectDescriptorSerializer,o=b.visualHost.services.VisualObjectInstanceSerializer,n=b.visualHost.services.VisualObjectRepetitionSerializer,r=b.visualHost.VisualStyleSerializer,a=b.extensibility.createVisualApiAdapter,p=jsCommon.Version;l.relayMouseEvents=["click","mouseup","MSPointerUp","pointerup"],l.relayTouchEvents=["tap","touchend","touchcancel"],l.relayUIEvents=l.relayMouseEvents.concat(l.relayTouchEvents),l.relayUIEventProps=["type","bubbles","which","buttons","button","ctrlKey","altKey","metaKey","shiftKey","x","y","clientX","clientY","pageX","pageY","movementX","movementY","layerX","layerY","changedTouches"];var u=(c.getLastId=function(){return c.counter},c.counter=0,c);function c(e){this.id=++c.counter,this.deferred=e}l.SandboxPromise=u;var d=(y.getLastId=function(){return y.counter},y.counter=0,y);function y(e){this.id=++y.counter,this.deferred=e}l.SandboxPromise2=d;var h=(e.prototype.CreatePromise=function(e){e=new u(e);return this.promises[e.id]=e},e.prototype.ResolvePromise=function(e,t){var i=this.promises[e];i&&(i.deferred.resolve(t),this.promises[e]=null)},e.prototype.RejectPromise=function(e,t){var i=this.promises[e];i&&(i.deferred.reject(t),this.promises[e]=null)},e.prototype.CreatePromise2=function(e){e=new d(e);return this.promises2[e.id]=e},e.prototype.ResolvePromise2=function(e,t){var i=this.promises2[e];i&&(i.deferred.resolve(t),this.promises2[e]=null)},e.prototype.RejectPromise2=function(e,t){var i=this.promises2[e];i&&(i.deferred.reject(t),this.promises2[e]=null)},e);function e(){this.promises={},this.promises2={}}function g(){return window.powerbi.visuals.plugins}function f(e,t,i){var o=e.content,n=e.hasBeenInjected||g()&&g().hasOwnProperty(e.name)&&g()[e.name].hasBeenInjected;t&&n||(b.visualHost.resourceInjector.injectJsCode(e.name,o.js,i,e.apiVersion),b.visualHost.resourceInjector.injectCssCode(e.name,o.css));o=!e.apiVersion||p.lt(e.apiVersion,{major:3,minor:0,patch:0})?(g()[e.name],g()[e.name]):(window[e.name],window[e.name].default);return e.apiVersion&&(o.iconUrl=e.iconUrl,o.capabilities=e.capabilities,o.localizationResources=e.localizationResources,o.isDeprecated=e.isDeprecated),t&&(o.hasBeenInjected=!0,o.approvedForNoIframe=!0,g()[e.name]=o),o}l.SandboxPromiseHandler=h,l.createSandboxHost=function(e,t){void 0===t&&(t=!1);var i=b.createJQueryPromiseFactory(),o=b.visualHost.createWindowMessageProxy(i,window.parent);l.SandboxVisualHostServices.initialize();var n,r,a={promiseFactory:i},s=l.createSandboxTelemetryProxyService(o),p=new h,u=l.createVisualHostServices(o,p),p={$element:e,hostServices:u,hostServicesControl:u,dataProxy:(n=i,r=l.createSandboxNoOpTelemetryProxyService(),e={dsr:{name:"dsr",reader:function(e){return new b.data.dsr.DsrDataReader(e,{execute:function(){return n.reject()}},r,{dsrV2:!1},null,void 0,void 0)}}},u={promiseFactory:function(){return n}},u=b.data.createDataReaderProvider(b.data.createDataReaderFactory(e,{}),u),b.data.createDataProxy(n,u,r)),promiseFactory:i,messageProxy:o,resourceLoader:b.visualHost.createResourceLoader(a,null),resourceProvider:{get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}},telemetryProxyService:s,instanceId:"",sandboxPromiseHandler:p};return new v(p,t)},l.injectCustomVisual=f;var v=(Object.defineProperty(m.prototype,"visual",{get:function(){return this._visual},enumerable:!1,configurable:!0}),m.prototype.init=function(e){this.hostServices.initInstanceId(e.instanceId),this.hostServicesControl.initInstanceId(e.instanceId),this.style=r.deserializeVisualStyle(e.style);var t={animation:e.animation,element:this.container,host:this.hostServices,interactivity:e.interactivity,style:this.style,viewport:e.viewport,localizationResources:this.plugin.localizationResources,hostEnv:e.hostEnv,dataMultiSelectMode:e.dataMultiSelectMode};return this.featureSwitches=e.featureSwitches,this.skipRedundantResize=this.featureSwitches&&this.featureSwitches.cvSkipExtraResize,this.attachRelayUIEventListener(),this.attachWindowResizeListener(),this.visual.init(t)},m.prototype.destroy=function(){this.detachRelayUIEventListener(),this.detachWindowResizeListener(),this.messageProxy.off(b.visualHost.events.WindowMessageProxyMessageEvent),this.messageProxy.destroy(),this.visual&&this.visual.destroy&&this.visual.destroy()},m.prototype.categoriesExists=function(e){return!!(e&&e.dataViews&&0<e.dataViews.length&&e.dataViews[0].categorical&&e.dataViews[0].categorical.categories&&0<e.dataViews[0].categorical.categories.length&&e.dataViews[0].categorical.categories[0]&&e.dataViews[0].categorical.categories[0].values)},m.prototype.getHostCategoriesValues=function(e,t,i){try{if(e){if(i)for(var o=0;o<e.length;o++)e[o]&&(e[o]=new Date(e[o]));t.dataViews[0].categorical.categories[0].values=e}}catch(e){this.sendError(e)}return t},m.prototype.update=function(t){var i,e,o=this,n=t.message.arguments[0];this.plugin&&this.plugin.apiVersion&&!p.lt(this.plugin.apiVersion,"2.0.0")?(this.stringifiedDataView=n.serializedDataView?n.serializedDataView.stringifiedDataView:null,e=n.serializedDataView?[this.dataViewSerializer.deserializeDataView(n.serializedDataView,p.gt(this.plugin.apiVersion,"3.5.9"))]:[],e=this.lastVisualUpdateOptions={dataViews:e,suppressAnimations:n.suppressAnimations,viewMode:n.viewMode,editMode:n.editMode,viewport:n.viewport,type:n.type,operationKind:b.VisualDataChangeOperationKind.Create,resizeMode:n.resizeMode,isInFocus:n.isInFocus,jsonFilters:n.jsonFilters||null,updateId:n.updateId},this.plugin&&this.plugin.apiVersion&&!p.lt(this.plugin.apiVersion,"3.5.0")?(this.onRestoreCvSelectionIds(n.selections,!p.gt(this.plugin.apiVersion,"2.4.0")),this.fixUpdateOptionsAndUpdateVisual(e,t,n)):(this.fixUpdateOptionsAndUpdateVisual(e,t,n),this.onRestoreCvSelectionIds(n.selections,!p.gt(this.plugin.apiVersion,"2.4.0")))):(n.dataTransforms&&(i=b.data.services.DataViewTransformActionsSerializer.deserializeDataViewTransformActions(n.dataTransforms,this.plugin.capabilities||{})),this.transformDataViewSource(n.dataViewSource,i,!0).then((function(e){e=o.lastVisualUpdateOptions={dataViews:e.dataViews,suppressAnimations:n.suppressAnimations,viewMode:n.viewMode,editMode:n.editMode,viewport:n.viewport,type:n.type,operationKind:b.VisualDataChangeOperationKind.Create,resizeMode:n.resizeMode,isInFocus:n.isInFocus,jsonFilters:n.jsonFilters||null,updateId:n.updateId};o.visualHasNullFilter(i)&&o.onRestoreSelection(null),o.fixUpdateOptionsAndUpdateVisual(e,t,n)})).catch((function(e){return o.sendError(e)})))},m.prototype.visualHasNullFilter=function(e){var t,i;if(null!==(t=null===(t=null===(t=null===(t=null===(t=this.plugin)||void 0===t?void 0:t.capabilities)||void 0===t?void 0:t.objects)||void 0===t?void 0:t.general)||void 0===t?void 0:t.properties)&&void 0!==t&&t.filter){e=null===(e=null==e?void 0:e.objects)||void 0===e?void 0:e.general;if(e&&0<e.length&&null!==(i=e[0])&&void 0!==i&&i.properties&&!e[0].properties.filter)return!0}return!1},m.prototype.updateWithCachedData=function(e){var t,i,o=e.message.arguments[0];this.plugin&&this.plugin.apiVersion&&!p.lt(this.plugin.apiVersion,"2.0.0")?(this.lastVisualUpdateOptions.dataViews&&this.lastVisualUpdateOptions.dataViews[0]&&this.lastVisualUpdateOptions.dataViews[0].metadata&&(i=this.lastVisualUpdateOptions.dataViews[0].metadata.segment,this.lastVisualUpdateOptions.dataViews[0].metadata=o.dataViewMetadata?JSON.parse(o.dataViewMetadata):void 0,this.lastVisualUpdateOptions.dataViews[0].metadata.segment=i),n=this.lastVisualUpdateOptions.dataViews,i=!0):(o.dataTransforms&&(t=b.data.services.DataViewTransformActionsSerializer.deserializeDataViewTransformActions(o.dataTransforms,this.plugin.capabilities||{})),this.lastDataViewTransformApplyOptions.transforms=t,n=b.data.DataViewTransform.apply(this.lastDataViewTransformApplyOptions).dataViews);var n=this.lastVisualUpdateOptions={dataViews:n,suppressAnimations:o.suppressAnimations,viewMode:o.viewMode,editMode:o.editMode,viewport:o.viewport,type:o.type,operationKind:b.VisualDataChangeOperationKind.Create,resizeMode:o.resizeMode,isInFocus:o.isInFocus,jsonFilters:o.jsonFilters||null,updateId:o.updateId};this.fixUpdateOptionsAndUpdateVisual(n,e,o,i)},m.prototype.loadResourcePackage=function(t){var i=this;this.resourceLoader.loadVisualPlugin(t).then((function(e){i.plugin=e,i.createAdapter()})).catch((function(){var e=new Error("Unable to load plugin, resource package id: "+t.id);return i.sendError(e)}))},m.prototype.createAdapter=function(){var e=this.plugin;if(this.container.addClass("visual-"+e.name),this._visual=a(e,e.create,this.promiseFactory,this.telemetryProxyService),!e||!this.visual){e=new Error("Unable to create visual from plugin "+e.name);return this.sendError(e)}this.flushQueue(),this.isVisualInitialized=!0,this.sendSandboxReady()},m.prototype.loadWithoutResourcePackage=function(e){var t=e.apiVersion?this.isolate&&p.lt(e.apiVersion,"3.0.0"):this.isolate;this.plugin=f(e,!1,t),b.extensibility.visualPluginAdapter.transformPlugin(this.plugin),this.createAdapter()},m.prototype.enumerateObjectInstances=function(e){if(this.visual.enumerateObjectInstances){var t=this.visual.enumerateObjectInstances(e);if(t){var i=t,e=this.plugin&&this.plugin.apiVersion&&!p.lt(this.plugin.apiVersion,"2.0.0");return i&&i.instances?e?{instances:i.instances,containers:i.containers}:{instances:o.serialize(i.instances),containers:i.containers?o.serializeContainers(i.containers,this.resourceProvider):null}:e?t:o.serialize(t)}}},m.prototype.enumerateObjectRepetition=function(){if(this.visual.enumerateObjectRepetition){var e=this.visual.enumerateObjectRepetition();return e?n.serialize(e):void 0}},m.prototype.sendUpdateResult=function(){var e=this.container.children("*").length;this.messageProxy.postMessage({eventName:"onUpdateResult",arguments:[e]})},m.prototype.sendSandboxReady=function(){var e=this.plugin.capabilities;e.objects&&(e.objects=t.serialize(this.plugin.capabilities.objects,this.resourceProvider));e={name:this.plugin.name,watermarkKey:this.plugin.watermarkKey,capabilities:e,class:this.plugin.class,iconUrl:this.plugin.iconUrl,custom:!0,create:function(){return null}};this.messageProxy.postMessage({eventName:"onPluginReady",arguments:[e]})},m.prototype.flushQueue=function(){for(;0<this.messageQueue.length;){var e=this.messageQueue.shift();this.executeMessage(e)}},m.prototype.sendError=function(e,t){e={eventName:"onError",arguments:[],error:{id:t?t.id:null,eventName:t?t.eventName:null,name:e.name,message:e.message,pluginName:this.plugin.name}};this.messageProxy.postMessage(e)},m.prototype.onMessageReceived=function(e){if(this.isVisualInitialized||"loadResourcePackage"===e.message.eventName||"loadWithoutResourcePackage"===e.message.eventName)return this.executeMessage(e);this.messageQueue.push(e)},m.prototype.executeMessage=function(e){var t=e.message;try{if($.isFunction(this[t.eventName]))return"update"===t.eventName||"updateWithCachedData"===t.eventName||"handleLoadMoreDataResult"===t.eventName?this[t.eventName].call(this,e):this[t.eventName].apply(this,t.arguments);if(this.visual&&$.isFunction(this.visual[t.eventName]))return this.visual[t.eventName].apply(this.visual,t.arguments)}catch(e){this.sendError(e,t)}},m.prototype.transformDataViewSource=function(e,t,i){var o=this,n=this.promiseFactory.defer();return(e?this.createDataView(e):this.promiseFactory.resolve({dataView:null})).then((function(e){e=b.data.DataViewTransform.apply(o.lastDataViewTransformApplyOptions={prototype:e.dataView,objectDescriptors:o.plugin.capabilities?o.plugin.capabilities.objects:void 0,dataViewMappings:o.plugin.capabilities?o.plugin.capabilities.dataViewMappings:void 0,dataRoles:o.plugin.capabilities?o.plugin.capabilities.dataRoles:void 0,drillCapabilities:o.plugin.capabilities&&o.plugin.capabilities.drilldown,expandCollapseCapabilties:o.plugin.capabilities&&o.plugin.capabilities.expandCollapse,transforms:t,colorAllocatorFactory:b.visuals.createColorAllocatorFactory(),bypassConcatenation:i,visualStyle:o.style,keepAllMetadataColumnsCapability:!!o.plugin.capabilities&&o.plugin.capabilities.keepAllMetadataColumns,featureSwitches:o.featureSwitches}).dataViews;n.resolve({dataViews:e})})).catch((function(e){return o.sendError(e)})),n.promise},m.prototype.createDataView=function(e){var t=this,i=this.promiseFactory.defer(),e={type:e.type,query:{dataSources:null,command:e.data}};return this.dataProxy.execute(e).then((function(e){e=e&&e.dataReaderResult?e.dataReaderResult.dataView:null,e=b.DataViewAnalysis.validateAndReshape(e,t.plugin.capabilities?t.plugin.capabilities.dataViewMappings:null);i.resolve({dataView:e.dataView})})).catch((function(e){return t.sendError(e)})),i.promise},m.prototype.attachWindowResizeListener=function(){$(window).on("resize",this.windowResizeListener.bind(this)),$(window).trigger("resize")},m.prototype.detachWindowResizeListener=function(){$(window).off("resize")},m.prototype.windowResizeListener=function(){var e,t,i;this.lastVisualUpdateOptions&&(e=$(window).height(),t=$(window).width(),this.skipRedundantResize&&this.lastVisualUpdateOptions.viewport&&this.lastVisualUpdateOptions.viewport.width&&this.lastVisualUpdateOptions.viewport.height&&Math.abs(t-this.lastVisualUpdateOptions.viewport.width)<=1&&Math.abs(e-this.lastVisualUpdateOptions.viewport.height)<=1||((i=b.Prototype.inherit(this.lastVisualUpdateOptions)).viewport={width:t,height:e,scale:this.lastVisualUpdateOptions.viewport.scale},i.type=b.VisualUpdateType.Resize,i.resizeMode=1,this.visual.update(i)))},m.prototype.attachRelayUIEventListener=function(){this.container.on(l.relayUIEvents.join(" "),this.relayUIEventListener)},m.prototype.detachRelayUIEventListener=function(){this.container.off(l.relayUIEvents.join(" "),this.relayUIEventListener)},m.prototype.handleLoadMoreDataResult=function(a){return __awaiter(this,void 0,b.Promise,(function(){var t,i,o,n,r;return __generator(this,(function(e){switch(e.label){case 0:return(t=a.message.arguments[1],this.plugin&&this.plugin.apiVersion&&!p.lt(this.plugin.apiVersion,"2.0.0"))?(i=a.message.arguments[0])&&this.stringifiedDataView!==i.stringifiedDataView?(this.stringifiedDataView=i.stringifiedDataView,o=[this.dataViewSerializer.deserializeDataView(i)],this.lastVisualUpdateOptions.type=b.VisualUpdateType.Data,t?(s.mergeDataViews(this.lastVisualUpdateOptions.dataViews[0],o[0]),this.lastVisualUpdateOptions.operationKind=b.VisualDataChangeOperationKind.Append,[4,this.aggregateDataViewSizeAndUpdateVisual(a.packedSize)]):[3,2]):[3,4]:[3,5];case 1:return e.sent(),[3,4];case 2:return this.lastVisualUpdateOptions.dataViews[0]=o[0],this.lastVisualUpdateOptions.operationKind=b.VisualDataChangeOperationKind.Segment,[4,this.visual.update(this.lastVisualUpdateOptions)];case 3:e.sent(),e.label=4;case 4:return[3,9];case 5:return(this.lastDataViewTransformApplyOptions&&this.lastDataViewTransformApplyOptions.prototype,r=a.message.arguments[0],n=r?r.dataReaderResult.dataView:null)?(this.lastVisualUpdateOptions.type=b.VisualUpdateType.Data,t?(s.mergeDataViews(this.lastDataViewTransformApplyOptions.prototype,n),this.lastVisualUpdateOptions.dataViews=b.data.DataViewTransform.apply(this.lastDataViewTransformApplyOptions).dataViews,this.lastVisualUpdateOptions.operationKind=b.VisualDataChangeOperationKind.Append,[4,this.aggregateDataViewSizeAndUpdateVisual(a.packedSize)]):[3,7]):[3,9];case 6:return e.sent(),[3,9];case 7:return this.lastVisualUpdateOptions.dataViews[0]=n,this.lastVisualUpdateOptions.operationKind=b.VisualDataChangeOperationKind.Segment,[4,this.visual.update(this.lastVisualUpdateOptions)];case 8:e.sent(),e.label=9;case 9:return r={eventName:"stopProgressBar",arguments:[]},this.messageProxy.postMessage(r),[2]}}))}))},m.prototype.aggregateDataViewSizeAndUpdateVisual=function(t){return __awaiter(this,void 0,b.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.aggregatedDataViewSize+=t,104857600<=this.aggregatedDataViewSize?this.hostServicesControl.enableLoadMoreData(!1):this.hostServicesControl.enableLoadMoreData(!0),[4,this.visual.update(this.lastVisualUpdateOptions)];case 1:return e.sent(),[2]}}))}))},m.prototype.handleGetResourceUrlResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.payload):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.payload)},m.prototype.handleGetAADAuthenticationTokenResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.payload):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e)},m.prototype.handleGetAADTokenResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.payload):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.payload)},m.prototype.handleGetWACTokenResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise2(e.promiseId,e.payload||""):this.sandboxPromiseHandler.ResolvePromise2(e.promiseId,e.wacToken)},m.prototype.handleIsStorageEnabled=function(e){this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.enabled)},m.prototype.handleGetStorageData=function(e){e.data?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},m.prototype.handleExportVisualsContent=function(e){void 0!==e.data?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},m.prototype.handleSetStorageData=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.freeSpace)},m.prototype.handleModalDialogResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.data):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data)},m.prototype.handleLicenseResult=function(e){e.licenseInfoResult?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.licenseInfoResult):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},m.prototype.handleLicenseNotificationResult=function(e){null==e.licenseNotificationResult?this.sandboxPromiseHandler.RejectPromise(e.promiseId):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.licenseNotificationResult)},m.prototype.onRestoreSelection=function(e){var t=this.hostServices.selectionManager;t&&(e&&e.selection?(e=e.selection.map((function(e){return b.visuals.SelectionId.fromSelectorsByColumn(i.deserializeSelectorsByColumn(e))})),t.setSelectionIds(e),t.invokeOnSelectCallback(e)):(t.setSelectionIds([]),t.invokeOnSelectCallback([])))},m.prototype.onRestoreCvSelectionIds=function(e,t){void 0===t&&(t=!0);var i,o=this.hostServices.selectionManager;o&&(i=[],e?(i=_.map(e,(function(e){return new b.visuals.CustomVisualSelectionId(e.serializedDataMap,e.measures)})),o.setSelectionIds(i)):o.setSelectionIds([]),t&&o.invokeOnSelectCallback(i))},m.prototype.fixUpdateOptionsAndUpdateVisual=function(e,t,i,o){(o=void 0===o?!1:o)||(e=this.categoriesExists(e)?this.getHostCategoriesValues(i.categoriesValues,e,i.isCategoryDate):e,this.hostServicesControl.enableLoadMoreData(!0),this.aggregatedDataViewSize=t.packedSize),this.visual.update(e),this.sendUpdateResult()},m);function m(e,t){var i=this;this.isolate=t=void 0===t?!1:t,this.isVisualInitialized=!1,this.messageQueue=[],this.relayUIEventListener=function(e){e=_.pick(e.originalEvent,l.relayUIEventProps);i.messageProxy.postMessage({eventName:"onRelayUIEvent",arguments:[e]})},this.container=e.$element,this.hostServices=e.hostServices,this.hostServicesControl=e.hostServicesControl,this.dataProxy=e.dataProxy,this.promiseFactory=e.promiseFactory,this.messageProxy=e.messageProxy,this.resourceLoader=e.resourceLoader,this.resourceProvider=e.resourceProvider,this.telemetryProxyService=e.telemetryProxyService,this.sandboxPromiseHandler=e.sandboxPromiseHandler,this.aggregatedDataViewSize=0,this.dataViewSerializer=new l.SandboxDataViewSerializer,this.skipRedundantResize=!1,this.messageProxy.on(b.visualHost.events.WindowMessageProxyMessageEvent,(function(e){return i.onMessageReceived(e)}))}function S(){var i;w||(window.powerbi||(window.powerbi={}),window.powerbi.visualSandbox||(window.powerbi.visualSandbox={}),i=b.visualSandbox.createSandboxHost,window.powerbi.visualSandbox.createSandboxHost=function(e,t){return i(e,t=void 0===t?!1:t)},w=!0)}l.SandboxHost=v,l.exportCreateSandboxToGlobal=S;var w=!1;S(),l.exportCreateResourceLoaderHostToGlobal()})(b.visualSandbox||(b.visualSandbox={}))})(powerbi=powerbi||{}),(function(r){!(function(e){var t=r.data.services.DataViewObjectSerializer,i=r.visuals.CustomVisualSelectionId;e.createSandboxVisualHostTooltipService=function(e){return new o(e)};var o=(n.prototype.serializeIdentities=function(e){return e&&e[0]instanceof i?e:e&&_(e).map((function(e){return t.serializeSelectorsByColumn(e)})).compact().value()},n.prototype.show=function(e){e=e&&{coordinates:e.coordinates,dataItems:e.dataItems,identities:this.serializeIdentities(e.identities),isTouchEvent:e.isTouchEvent};this.messageProxy.postMessage({eventName:"showTooltip",arguments:[e]})},n.prototype.move=function(e){e=e&&{coordinates:e.coordinates,dataItems:e.dataItems,identities:this.serializeIdentities(e.identities),isTouchEvent:e.isTouchEvent};this.messageProxy.postMessage({eventName:"moveTooltip",arguments:[e]})},n.prototype.hide=function(e){this.messageProxy.postMessage({eventName:"hideTooltip",arguments:[e]})},n.prototype.visible=function(){return!1},n.prototype.container=function(){return this.rootElement},n.prototype.enabled=function(){return!0},n);function n(e){this.messageProxy=e,this.rootElement=window.document.body}})(r.visualSandbox||(r.visualSandbox={}))})(powerbi=powerbi||{}),(function(n){!(function(e){var i=n.extensibility.convertVisualEventType;e.createSandboxVisualHostTelemetryService=function(e,t){return new o(e,t)};var o=(t.prototype.trace=function(e,t){this.messageProxy.postMessageAsync({eventName:"logVisualEvent",arguments:[i(e),{instanceId:this.instanceId,payload:t}]})},t);function t(e,t){this.messageProxy=e,this.instanceId=t}})(n.visualSandbox||(n.visualSandbox={}))})(powerbi=powerbi||{}),(function(e){!(function(e){e.createSandboxVisualHostLocalStorageService=function(e,t,i){return new o(e,t,i)};var o=(t.prototype.isStorageEnabled=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"isStorageEnabled",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getStorageData=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"getStorageData",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t.prototype.setStorageData=function(e,t){var i=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"setStorageData",arguments:[e,t,i.id]};return this.messageProxy.postMessage(t),i.deferred.promise},t.prototype.removeStorageData=function(e){this.messageProxy.postMessage({eventName:"removeStorageData",arguments:[e]})},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostLocalStorageService=o})(e.visualSandbox||(e.visualSandbox={}))})(powerbi=powerbi||{}),(function(e){!(function(e){e.createSandboxVisualHostEventService=function(e,t){return new i(e,t)};var i=(t.prototype.renderingStarted=function(e){e={eventName:"renderingStarted",arguments:[this.instanceId,e.updateId]};this.messageProxy.postMessage(e)},t.prototype.renderingFinished=function(e){e={eventName:"renderingFinished",arguments:[this.instanceId,e.updateId]};this.messageProxy.postMessage(e)},t.prototype.renderingFailed=function(e,t){t={eventName:"renderingFailed",arguments:[this.instanceId,e.updateId,t]};this.messageProxy.postMessage(t)},t);function t(e,t){this.messageProxy=e,this.instanceId=t}e.SandboxVisualHostEventService=i})(e.visualSandbox||(e.visualSandbox={}))})(powerbi=powerbi||{}),(function(s){!(function(e){var i,t;(t=i=e.proxiedTelemetryEventType||(e.proxiedTelemetryEventType={})).VisualApiUsage="VisualApiUsage",t.VisualException="VisualException",e.createSandboxTelemetryProxyService=function(e){return new o(e)};var o=(n.prototype.getOpenActivityById=function(e){},n.prototype.suspend=function(){},n.prototype.resume=function(){},n.prototype.flush=function(){},n.prototype.restart=function(){},n.prototype.stopActivity=function(e,t,i){},n.prototype.startPerfEventDeprecated=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new r({info:{}})},n.prototype.logEvent=function(e,t){return _.isArray(t),e===s.telemetry.VisualApiUsage?this.windowMessageProxy.postMessageAsync({eventName:"logEvent",arguments:[i.VisualApiUsage,t]}):e===s.telemetry.VisualException&&this.windowMessageProxy.postMessageAsync({eventName:"logEvent",arguments:[i.VisualException,t]}),null},n.prototype.logTelemetryData=function(e,t,i){return null},n.prototype.logChildEvent=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o]},n.prototype.startActivity=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new r({info:{}})},n.prototype.startChildActivity=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o]},n.prototype.startEvent=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new r({info:{}})},n.prototype.startMonitoredActivity=function(e,t,i){var o={info:{}};return{activityEvent:o,activityDeferred:new r(o)}},n.prototype.startChildEvent=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new r({info:{}})},n.prototype.logTrace=function(e){},Object.defineProperty(n.prototype,"sessionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appInstanceId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){},enumerable:!1,configurable:!0}),n.prototype.setHostInfo=function(e,t){},n.prototype.getHostData=function(){},n.prototype.setExpAssignmentContext=function(e){},n);function n(e){this.windowMessageProxy=e}var r=(a.prototype.resolve=function(){this.isEnded=!0,this.onResolve()},a.prototype.cancel=function(e){return e?this.resolve():this.reject({isCancelled:!0,errorCode:"non-ignorable cancellation of deferred telemety event"})},a.prototype.reject=function(e){this.isEnded=!0,this.onReject()},a.prototype.isActive=function(){return!this.isEnded},a);function a(e){var i=this;this.event=e,this.promise=new s.Promise(function(e,t){i.onResolve=e,i.onReject=t})}e.EmptyDeferredTelemetryEvent=r})(s.visualSandbox||(s.visualSandbox={}))})(powerbi=powerbi||{}),(function(e){!(function(n){n.createSandboxNoOpTelemetryProxyService=function(){return new e};var e=(t.prototype.getOpenActivityById=function(e){},t.prototype.suspend=function(){},t.prototype.resume=function(){},t.prototype.flush=function(){},t.prototype.restart=function(){},t.prototype.stopActivity=function(e,t,i){},t.prototype.startPerfEventDeprecated=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new n.EmptyDeferredTelemetryEvent({info:{}})},t.prototype.logEvent=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return null},t.prototype.logTelemetryData=function(e,t,i){return null},t.prototype.logChildEvent=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o]},t.prototype.startActivity=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new n.EmptyDeferredTelemetryEvent({info:{}})},t.prototype.startChildActivity=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o]},t.prototype.startEvent=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return new n.EmptyDeferredTelemetryEvent({info:{}})},t.prototype.startMonitoredActivity=function(e,t,i){var o={info:{}};return{activityEvent:o,activityDeferred:new n.EmptyDeferredTelemetryEvent(o)}},t.prototype.startChildEvent=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new n.EmptyDeferredTelemetryEvent({info:{}})},t.prototype.logTrace=function(e){},Object.defineProperty(t.prototype,"sessionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appInstanceId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){},enumerable:!1,configurable:!0}),t.prototype.setHostInfo=function(e,t){},t.prototype.getHostData=function(){},t.prototype.setExpAssignmentContext=function(e){},t);function t(){}})(e.visualSandbox||(e.visualSandbox={}))})(powerbi=powerbi||{}),(function(i){var o,n,t,r,a,s,p,u;function l(e,t){this.messageProxy=e,this.sandboxPromiseHandler=t,this.loadMoreDataEnabled=!0,this.visualHostTooltipService=o.createSandboxVisualHostTooltipService(e),this.queryDictionary=l.parseUrlParameters(),this.authService=o.createSandboxVisualHostAuthenticationService(e,this.promiseFactory(),t),this.storageService=o.createSandboxVisualHostLocalStorageService(e,this.promiseFactory(),t),this.contentDownloadService=o.createSandboxVisualHostDownloadService(e,this.promiseFactory(),t),this.licensesManagerService=o.createSandboxVisualHostLicenseManagerService(e,this.promiseFactory(),t),this.dialogPromiseFactory=this.promiseFactory()}o=i.visualSandbox||(i.visualSandbox={}),n=i.data.services.DataViewObjectSerializer,t=i.extensibility.SelectionManager,r=jsCommon.Version,a=i.visualHost.services.VisualObjectInstanceSerializer,s={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},p={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",Restatement_Comma:"{0}, {1}",Restatement_CompoundAnd:"{0} and {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Decrease:"Decrease",Increase:"Increase",Waterfall_TotalLabel:"Total",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"},l.prototype.initInstanceId=function(e){this._instanceId=e,this.telemetryService=o.createSandboxVisualHostTelemetryService(this.messageProxy,e),this.eventsService=o.createSandboxVisualHostEventService(this.messageProxy,e)},l.initialize=function(){i.visuals.ToolTipComponent&&(i.visuals.ToolTipComponent.localizationOptions=l.createTooltipLocaleOptions())},l.createLocaleOptions=function(){return{null:p.NullValue,true:p.BooleanTrue,false:p.BooleanFalse,NaN:p.NaNValue,infinity:p.InfinityValue,negativeInfinity:p.NegativeInfinityValue,beautify:function(e){return l.beautify(e)},describe:function(e){return l.describeUnit(e)},restatementComma:p.Restatement_Comma,restatementCompoundAnd:p.Restatement_CompoundAnd,restatementCompoundOr:p.Restatement_CompoundOr}},l.createTooltipLocaleOptions=function(){return{highlightedValueDisplayName:p.Tooltip_HighlightedValueDisplayName}},l.prototype.getLocalizedString=function(e){return p[e]},l.prototype.onSelecting=function(e){e.action=0},l.prototype.onSelect=function(e){var t;e=i.extensibility.legacy.isOldSelectEventArgs(e)?{data:n.serializeSelectors((t=e).data),data2:n.serializeSelectorsByColumn(t.data2),selectors:n.serializeSelectors(e.selectors)}:{visualObjects:n.serializeVisualObjects(e.visualObjects)},this.messageProxy.postMessage({eventName:"onSelect",arguments:[e]})},l.prototype.customVisualOnContextMenu=function(e){this.messageProxy.postMessage({eventName:"onCustomVisualContextMenu",arguments:[e]})},l.prototype.customVisualOnExpandCollapse=function(e){this.messageProxy.postMessage({eventName:"onCustomVisualExpandCollapse",arguments:[e]})},l.prototype.switchFocusModeState=function(e){this.messageProxy.postMessage({eventName:"onSwitchFocusModeState",arguments:[e]})},l.prototype.displayWarningIcon=function(e,t){null!=e&&null!=t&&this.messageProxy.postMessage({eventName:"onDisplayWarningIcon",arguments:[e,t]})},l.prototype.persistProperties=function(e){var t=e,e=this.apiVersion&&(r.gt(this.apiVersion,"2.0.0")||r.eq(this.apiVersion,"2.0.0"))?e:t.merge||t.remove||t.replace?{merge:t.merge?a.serialize(t.merge):null,replace:t.replace?a.serialize(t.replace):null,remove:t.remove?a.serialize(t.remove):null}:a.serialize(e);this.messageProxy.postMessage({eventName:"persistProperties",arguments:[e]})},l.prototype.sendSelectionIdsToHost=function(e){this.messageProxy.postMessage({eventName:"transformCvSelectionIdsAndSelect",arguments:[e]})},l.prototype.loadMoreData=function(){this.fetchMoreData(!0)},l.prototype.loadWindow=function(e){},l.prototype.fetchMoreData=function(e){return!!this.loadMoreDataEnabled&&(this.messageProxy.postMessage({eventName:"loadMoreData",arguments:[e=!1!==e?!0:e]}),!0)},l.prototype.launchUrl=function(e){this.messageProxy.postMessage({eventName:"launchUrl",arguments:[e]})},l.prototype.openModalDialog=function(e,t,i){var o=this.sandboxPromiseHandler.CreatePromise(this.dialogPromiseFactory.defer()),i={eventName:"openModalDialog",arguments:[e,t,i,o.id]};return this.messageProxy.postMessage(i),o.deferred.promise},l.prototype.tooltips=function(){return this.visualHostTooltipService},l.prototype.telemetry=function(){return this.telemetryService},l.prototype.authenticationService=function(){return this.authService},l.prototype.localStorageService=function(){return this.storageService},l.prototype.eventService=function(){return this.eventsService},l.prototype.licenseManagerService=function(){return this.licensesManagerService},l.prototype.visualTimeSynchronization=function(){return this.visualTimeSynchronizationService},l.prototype.networkAvailability=function(){return this.networkAvailabilityService},l.prototype.getSectionsMetadata$=function(){},l.prototype.getBookmarksMetadata$=function(){},l.prototype.downloadService=function(){return this.contentDownloadService},l.prototype.artifactService=function(){},l.prototype.locale=function(){var e=this.queryDictionary&&this.queryDictionary.locale;return e||navigator.language},l.prototype.loader=function(){var e=this;return{require:function(){return e.promiseFactory().reject()}}},l.prototype.applyJsonFilter=function(e,t,i,o){i=[e,t,i];return o&&i.push(o),this.messageProxy.postMessage({eventName:"applyJsonFilter",arguments:i}),!0},l.prototype.applyIdentityFilter=function(e,t,i,o){i=[e,t,i];return o&&i.push(o),this.messageProxy.postMessage({eventName:"applyIdentityFilter",arguments:i}),!0},l.prototype.getJSONFilter=function(e,t){return this.promiseFactory().reject()},l.parseUrlParameters=function(e){var t={},e=e=void 0===e?window.location.search:e;if(e&&"?"===e.substr(0,1))for(var i=0,o=e.substr(1).split("&");i<o.length;i++){var n=o[i],n=n&&n.split("=");n&&2===n.length&&(t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]))}return t},l.prototype.destroy=function(){this.messageProxy.destroy(),this.messageProxy=null},l.prototype.refreshHostData=function(){this.messageProxy.postMessage({eventName:"refreshHostData",arguments:null})},l.prototype.createSelectionIdBuilder=function(){return new i.visuals.CustomVisualSelectionId},l.prototype.createTooltipService=function(){return i.extensibility.createTooltipService({hostServices:this})},l.prototype.createSelectionManager=function(e){return new t({hostServices:this,apiVersion:e})},l.prototype.alertScreenReader=function(e){},l.prototype.alertWithDebounce=function(e,t){},l.prototype.requestFocus=function(){},l.prototype.setShouldDeferData=function(){},l.prototype.onDragStart=function(){},l.prototype.onContextMenu=function(){},l.prototype.onSwitchFocusModeState=function(){},l.prototype.onDisplayWarningIcon=function(){},l.prototype.onClearCustomizedWarningIcon=function(){},l.prototype.getVisualLinkProperties=function(){},l.prototype.canSelect=function(){return!1},l.prototype.canExpandCollapse=function(e){return!1},l.prototype.setNodeExpansionState=function(e){},l.prototype.setLevelExpansionState=function(e){},l.prototype.onCustomSort=function(e){},l.prototype.getViewMode=function(){return 0},l.prototype.getEditMode=function(){return 0},l.prototype.setWarnings=function(e){},l.prototype.setToolbar=function(e){},l.prototype.shouldRetainSelection=function(){return!1},l.prototype.geocoder=function(){return i.visuals.services.createGeocoder()},l.prototype.geolocation=function(){},l.prototype.promiseFactory=function(){return i.createJQueryPromiseFactory()},l.prototype.ignoreDefaultFilter=function(){return!1},l.prototype.getIdentityDisplayNames=function(e){},l.prototype.setIdentityDisplayNames=function(e){},l.prototype.setFilterExpressionMetadata=function(){},l.prototype.getFilterExpressionMetadata=function(){},l.prototype.getUIComponentFactory=function(){},l.prototype.onHyperlinkClick=function(e,t){},l.prototype.isVisualEnabled=function(){return this.promiseFactory().resolve(!0)},l.prototype.dataMultiSelectMode=function(){return 0},l.prototype.dropdown=function(){},l.prototype.setAriaMetadata=function(e){},l.prototype.onNotifyLicense=function(e){},l.prototype.onClearLicenseNotification=function(){},l.prototype.onNotifyFeatureBlocked=function(e){},l.prototype.getSubSelectionService=function(){},Object.defineProperty(l.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!1,configurable:!0}),l.beautify=function(e){var t=s[e];return t&&p[t]||e},l.describeUnit=function(e){var t=-1===e?"Auto":e.toString(),i=p["DisplayUnitSystem_E"+t+"_Title"],t=e<=0?"{0}":p["DisplayUnitSystem_E"+t+"_LabelFormat"];if(i||t)return{title:i,format:t}},l.prototype.enableLoadMoreData=function(e){this.loadMoreDataEnabled=e},u=l,o.SandboxVisualHostServices=u,o.createVisualHostServices=function(e,t){return new u(e,t)}})(powerbi=powerbi||{}),(function(a){!(function(e){var t=a.extensibility.SelectionManager,o=(i.prototype.onSelecting=function(e){e.action=0},i.prototype.onSelect=function(e){this.powerbiHost&&this.powerbiHost.onSelect(e)},i.prototype.persistProperties=function(e){this.powerbiHost&&this.powerbiHost.persistProperties(e)},i.prototype.tooltips=function(){return this.visualHostTooltipService},i.prototype.applyJsonFilter=function(e,t,i,o){this.powerbiHost.applyJsonFilter(e,t,i,o)},i.prototype.applyIdentityFilter=function(e,t,i,o){this.powerbiHost.applyIdentityFilter(e,t,i,o)},i.prototype.getJSONFilter=function(e,t){return this.promiseFactory().reject()},i.prototype.createSelectionIdBuilder=function(){return new a.visuals.SelectionIdBuilder},i.prototype.createTooltipService=function(){return this.tooltipService},i.prototype.createSelectionManager=function(e){return new t({hostServices:this,apiVersion:e},!0)},i.prototype.getLocalizedString=function(e){return null},i.prototype.locale=function(){return navigator.language},i.prototype.loader=function(){var e=this;return{require:function(){return e.promiseFactory().reject()}}},i.prototype.onSwitchFocusModeState=function(e){this.powerbiHost&&this.powerbiHost.onSwitchFocusModeState(e)},i.prototype.onDisplayWarningIcon=function(e,t){var i,o,n;this.powerbiHost&&(i=a.visualHost.warningCodeForCV,o=a.visualHost.warningTitleLimit,n=a.visualHost.warningDetailsLimit,n=new a.visuals.CustomizedWarning(i,e.substr(0,o),t.substr(0,n)),this.powerbiHost.setWarnings([n]))},i.prototype.loadMoreData=function(){},i.prototype.loadWindow=function(e){},i.prototype.setShouldDeferData=function(){},i.prototype.fetchMoreData=function(e){return!0},i.prototype.launchUrl=function(e){},i.prototype.destroy=function(){},i.prototype.refreshHostData=function(){},i.prototype.onContextMenu=function(){},i.prototype.authenticationService=function(){return null},i.prototype.telemetry=function(){return null},i.prototype.localStorageService=function(){return null},i.prototype.eventService=function(){return null},i.prototype.licenseManagerService=function(){return null},i.prototype.visualTimeSynchronization=function(){return null},i.prototype.alertScreenReader=function(e){},i.prototype.alertWithDebounce=function(e,t){},i.prototype.requestFocus=function(){},i.prototype.onDragStart=function(){},i.prototype.getVisualLinkProperties=function(){},i.prototype.canSelect=function(){return!1},i.prototype.canExpandCollapse=function(){return!1},i.prototype.setNodeExpansionState=function(e){},i.prototype.setLevelExpansionState=function(e){},i.prototype.onCustomSort=function(e){},i.prototype.getViewMode=function(){return 0},i.prototype.getEditMode=function(){return 0},i.prototype.setWarnings=function(e){},i.prototype.setToolbar=function(e){},i.prototype.shouldRetainSelection=function(){return!1},i.prototype.geocoder=function(){return a.visuals.services.createGeocoder()},i.prototype.geolocation=function(){},i.prototype.promiseFactory=function(){return a.createJQueryPromiseFactory()},i.prototype.ignoreDefaultFilter=function(){return!1},i.prototype.getIdentityDisplayNames=function(e){},i.prototype.setIdentityDisplayNames=function(e){},i.prototype.setFilterExpressionMetadata=function(){},i.prototype.getFilterExpressionMetadata=function(){},i.prototype.getUIComponentFactory=function(){},i.prototype.onHyperlinkClick=function(e,t){},i.prototype.isVisualEnabled=function(){return this.promiseFactory().resolve(!0)},i.prototype.dataMultiSelectMode=function(){return 0},i.prototype.dropdown=function(){},i.prototype.networkAvailability=function(){},i.prototype.downloadService=function(){},i.prototype.setAriaMetadata=function(e){},i.prototype.artifactService=function(){},i.prototype.getSectionsMetadata$=function(){},i.prototype.getBookmarksMetadata$=function(){},i.prototype.onNotifyLicense=function(e){},i.prototype.onClearLicenseNotification=function(){},i.prototype.onNotifyFeatureBlocked=function(e){},i.prototype.getSubSelectionService=function(){},i.prototype.enableLoadMoreData=function(e){},i);function i(e,t,i){this.powerbiHost=e,this.visualHostTooltipService=i,this.tooltipService=new n(t,this.visualHostTooltipService)}e.NonSandboxVisualHostServices=o;var n=(r.prototype.enabled=function(){return this.tooltipService&&this.tooltipService.enabled()},r.prototype.show=function(e){this.enabled()&&(e={coordinates:this.fixCoordinates(e.coordinates),dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.getSelectorsByColumn(e.identities)},this.tooltipService.show(e))},r.prototype.move=function(e){this.enabled()&&(e={coordinates:this.fixCoordinates(e.coordinates),dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.getSelectorsByColumn(e.identities)},this.tooltipService.move(e))},r.prototype.hide=function(e){this.enabled()&&this.tooltipService.hide(e)},r.prototype.fixCoordinates=function(e){var t=this.element.offset();return e[0]=e[0]+t.left,e[1]=e[1]+t.top,e},r);function r(e,t){this.tooltipService=t,this.element=e}e.createNonSandboxVisualHostServices=function(e,t,i){return new o(e,t,i)}})(a.visualSandbox||(a.visualSandbox={}))})(powerbi=powerbi||{}),(function(o){var e,i,l;function t(){this.serializeDataViewFromScrathTimes=0,this.identitiesArray=[],this.identityNodeIndexArray={},this.stackNodeIndex=[],this.rowsLevel=[],this.lastNodeIndex=[]}e=o.visualSandbox||(o.visualSandbox={}),i=o.data.services.DataViewScopeIdentitySerializer,l="children",t.prototype.serializeDataViewForCv=function(e,t,i,o,n){var r=this;if(this.isSupportExpandCollapse=!!e&&!!e.matrix&&!!t.expandCollapse,i?this.isSupportExpandCollapse&&(n&&_.isEmpty(n),this.lastNodeIndex=n):(this.identitiesArray=[],this.identityNodeIndexArray={},this.stackNodeIndex=[],this.rowsLevel=[],this.serializeDataViewFromScrathTimes=(this.serializeDataViewFromScrathTimes+1)%11617,this.lastNodeIndex=[]),e){e=this.filterDataViewsType(e,t),this.isSupportExpandCollapse&&e.matrix.rows&&e.matrix.rows.levels&&e.matrix.rows.levels.forEach((function(e,t){e.sources&&e.sources[0]&&e.sources[0].queryName&&(r.rowsLevel.length>t?r.rowsLevel[t]=e.sources[0].queryName:r.rowsLevel.push(e.sources[0].queryName))}));n=this.getValueSource(e),t=this.getValueGroups(e),e=JSON.stringify(e,(function(e,t){return r.replacer(e,t,o)}));return _.isEmpty(this.stackNodeIndex),{valueSource:n,valueGroups:t,stringifiedDataView:e}}},t.prototype.serializeDataViewMetadata=function(e){var i=this;return e.metadata?JSON.stringify(e.metadata,(function(e,t){return i.replacer(e,t)})):null},t.prototype.deserializeDataView=function(e,t){var i=this,t=t?JSON.parse(e.stringifiedDataView,(function(e,t){return i.deserializeDataViewHelper(e,t)})):JSON.parse(e.stringifiedDataView);return this.reconstructValuesGroups(t,e),this.reconstructValuesSource(t,e),t},t.prototype.deserializeDataViewHelper=function(e,t){if("children"===e&&t&&t instanceof Array)for(var i=0;i<t.length;i++)if(t[i]&&(t[i].isDate&&(t[i].value=new Date(t[i].value)),t[i].values))for(var o in t[i].values)t[i].values[o].isDate&&(t[i].values[o].value=new Date(t[i].values[o].value));return t},t.prototype.convertOpaqueIdentitiesToScopeIds=function(e){var t=[];if(e&&0<e.length)for(var i=0,o=e;i<o.length;i++){var n=o[i],r=this.replaceOpaqueIndexWithScopeIds(n);r&&(r.opaqueIdentity={identityIndex:n},t.push(r))}return t},t.prototype.convertCVSelectionIdToPowerbiSelctionId=function(e){var i=this,e=JSON.parse(JSON.stringify(e),(function(e,t){return i.replaceOpaqueIdentitiesWithDataViewScopeIdentities(e,t)}));return o.visuals.SelectionId.createWithSelectorForColumnAndMeasures(e.dataMap,e.measures)},t.prototype.getIndexOfIdentity=function(t){return _.findIndex(this.identitiesArray,(function(e){return o.DataViewScopeIdentity.equals(e,t)}))},t.prototype.getNodeIndexOfSelectionId=function(e){var t=[];if(e&&e.dataMap)for(var i in e.dataMap){i=_.first(e.dataMap[i]).identityIndex;null!=this.identityNodeIndexArray[i]&&t.push(this.identityNodeIndexArray[i])}return t},t.prototype.sortSelectionIdDataMapAccordingToRows=function(i){var o=this;if(!i||!i.dataMap)return!1;var e=Object.keys(i.dataMap).sort((function(e,t){return o.rowsLevel.indexOf(e)-o.rowsLevel.indexOf(t)})),t=!_.isEmpty(e)&&!_.isEmpty(this.rowsLevel)&&e.length<=this.rowsLevel.length&&e.every((function(e,t){return e===o.rowsLevel[t]}));return t&&(i.dataMap=e.reduce((function(e,t){return e[t]=i.dataMap[t],e}),{})),t},t.prototype.deserializeVisualObjectInstance=function(e){var i=this;return JSON.parse(JSON.stringify(e,(function(e,t){return i.replaceOpaqueIdentities(e,t)})))},t.prototype.flushIdentitiesArray=function(){this.identitiesArray&&0!==this.identitiesArray.length&&this.identitiesArray.forEach((function(e){e.opaqueIdentity=void 0,e.serializeDataViewFromScrathTimes=void 0}))},t.prototype.getValueGroups=function(e){var i=this;if(e&&e.categorical&&e.categorical.values&&e.categorical.values.grouped){e=e.categorical.values.grouped();return JSON.stringify(e,(function(e,t){return i.replacer(e,t)}))}return null},t.prototype.getValueSource=function(e){return e&&e.categorical&&e.categorical.values&&e.categorical.values.source?e.categorical.values.source:null},t.prototype.replacer=function(e,t,i){if(t){if(!isNaN(parseInt(e,10))&&t.identity&&this.isDataViewScopeIdentity(t.identity)&&this.isSupportExpandCollapse&&(this.stackNodeIndex.push(parseInt(e,10)+this.getNodeIndexOffset(t)),t.needOffset&&delete t.needOffset),this.isDataViewScopeIdentity(t))return t.serializeDataViewFromScrathTimes===this.serializeDataViewFromScrathTimes&&t.opaqueIdentity&&null!=t.opaqueIdentity.identityIndex?(this.stackNodeIndex.length&&(null!=this.identityNodeIndexArray[t.opaqueIdentity.identityIndex]?this.stackNodeIndex.pop():this.identityNodeIndexArray[t.opaqueIdentity.identityIndex]=this.stackNodeIndex.pop()),{identityIndex:t.opaqueIdentity.identityIndex}):(_.isEmpty(this.lastNodeIndex)||_.isEmpty(this.lastNodeIndex)||t.opaqueIdentity,t.opaqueIdentity={identityIndex:this.identitiesArray.length},t.serializeDataViewFromScrathTimes=this.serializeDataViewFromScrathTimes,this.identitiesArray.push(t),this.stackNodeIndex.length&&(this.identityNodeIndexArray[t.opaqueIdentity.identityIndex]=this.stackNodeIndex.pop()),t.opaqueIdentity);if(t instanceof Array){var o=[];if(this.isSupportExpandCollapse&&e===l&&!_.isEmpty(t)&&_.first(t).isMerge)for(var n=0,r=t;n<r.length;n++)r[n].needOffset=!0;if(i&&e===l)for(var a=0;a<t.length;a++)if(t[a]&&(t[a].value&&t[a].value instanceof Date&&(t[a].isDate=!0),t[a].values))for(var s in t[a].values)t[a].values[s].value&&t[a].values[s].value instanceof Date&&(t[a].values[s].isDate=!0);return o.push.apply(o,t||[]),o}if("object"==typeof t&&!this.dontNeedToClone(t)){var p,u={};for(p in t)u[p]=t[p];return u}}return t},t.prototype.replaceOpaqueIdentities=function(e,t){return t&&void 0!==t.identityIndex?i.serializeScopeIdentity(this.identitiesArray[t.identityIndex]):t},t.prototype.getNodeIndexOffset=function(e){if(this.isSupportExpandCollapse&&!_.isEmpty(this.lastNodeIndex)&&e.needOffset)return e.level,this.lastNodeIndex.length,this.lastNodeIndex[e.level];return 0},t.prototype.replaceOpaqueIdentitiesWithDataViewScopeIdentities=function(e,t){return t&&void 0!==t.identityIndex?this.identitiesArray[t.identityIndex]:t},t.prototype.filterDataViewsType=function(e,t){return t.dataViewMappings&&(t.dataViewMappings[0].categorical||(e.categorical=null),t.dataViewMappings[0].matrix||(e.matrix=null),t.dataViewMappings[0].table||(e.table=null),t.dataViewMappings[0].tree||(e.tree=null),t.dataViewMappings[0].single||(e.single=null)),e},t.prototype.dontNeedToClone=function(e){return e._proto_===Object.prototype||e instanceof Date},t.prototype.isDataViewScopeIdentity=function(e){return!!(e&&e.expr&&e.key&&e.kind)},t.prototype.reconstructValuesSource=function(e,t){t&&t.valueSource&&(e.categorical.values.source=t.valueSource)},t.prototype.reconstructValuesGroups=function(e,t){e&&e.categorical&&e.categorical.values&&e.categorical.values[0]&&(e.categorical.values.grouped=function(){return JSON.parse(t.valueGroups)})},t.prototype.replaceOpaqueIndexWithScopeIds=function(e){return e<this.identitiesArray.length?this.identitiesArray[e]:null},e.SandboxDataViewSerializer=t})(powerbi=powerbi||{}),(function(e){!(function(e){e.createSandboxVisualHostLicenseManagerService=function(e,t,i){return new o(e,t,i)};var o=(t.prototype.getAvailableServicePlans=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAvailableServicePlans",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.notifyLicenseRequired=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"notifyLicenseRequired",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t.prototype.notifyFeatureBlocked=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"notifyFeatureBlocked",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t.prototype.clearLicenseNotification=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"clearLicenseNotification",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostLicenseManagerService=o})(e.visualSandbox||(e.visualSandbox={}))})(powerbi=powerbi||{}),(function(e){!(function(e){e.createSandboxVisualHostAuthenticationService=function(e,t,i){return new o(e,t,i)};var o=(t.prototype.getResourceUrl=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getResourceUrl",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getAADAuthenticationToken=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAADAuthenticationToken",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getAADToken=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAADToken",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getWACToken=function(e,t){var i=this.sandboxPromiseHandler.CreatePromise2(this.promiseFactory.defer()),e={resourceEtag:t,resourceSiteUrl:e,promiseId:i.id};return this.messageProxy.postMessage({eventName:"getWACToken",arguments:[e]}),i.deferred.promise},t.prototype.getSignedInAccessToken=function(){return this.promiseFactory.reject()},t.prototype.getClusterInfo=function(){return this.promiseFactory.reject()},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostAuthenticationService=o})(e.visualSandbox||(e.visualSandbox={}))})(powerbi=powerbi||{}),(function(e){!(function(e){e.createSandboxVisualHostDownloadService=function(e,t,i){return new o(e,t,i)};var o=(t.prototype.downloadFile=function(e,t,i,o){throw new Error("Not implemented")},t.prototype.exportVisualsContent=function(e,t,i,o){var n=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer());return e&&t&&i&&o?(o={eventName:"exportVisualsContent",arguments:[e,t,i,o,n.id]},this.messageProxy.postMessage(o)):n.deferred.reject(),n.deferred.promise},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostDownloadService=o})(e.visualSandbox||(e.visualSandbox={}))})(powerbi=powerbi||{});;
"use strict";var powerbi,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,n,r,l){return new(r=r||Promise)(function(i,t){function s(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}o((l=l.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(i,s){var a,o,n,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return (function(t){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(n=2&t[0]?o.return:t[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,t[1])).done)return n;switch(o=0,(t=n?[2&t[0],n.value]:t)[0]){case 0:case 1:n=t;break;case 4:return r.label++,{value:t[1],done:!1};case 5:r.label++,o=t[1],t=[0];continue;case 7:t=r.ops.pop(),r.trys.pop();continue;default:if(!(n=0<(n=r.trys).length&&n[n.length-1])&&(6===t[0]||2===t[0])){r=0;continue}if(3===t[0]&&(!n||t[1]>n[0]&&t[1]<n[3])){r.label=t[1];break}if(6===t[0]&&r.label<n[1]){r.label=n[1],n=t;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(t);break}n[2]&&r.ops.pop(),r.trys.pop();continue}t=s.call(i,r)}catch(e){t=[6,e],o=0}finally{a=n=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}})([t,e])}}},__spreadArray=this&&this.__spreadArray||function(e,t){for(var i=0,s=t.length,a=e.length;i<s;i++,a++)e[a]=t[i];return e};!(function(a){!(function(t){var e=jsCommon.Utility,i=a.telemetryEventFactory,s=a.telemetry.EventFactories;e?e.generateGuid:Function.prototype;t.VisualInitializedEventName="PBI.Visual.Initialized",t.VisualInitialized=s[t.VisualInitializedEventName]=function(e){return i({name:t.VisualInitializedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["visualName"],loggers:t.VisualInitializedLoggers,logRatio:.025})},t.VisualLoadEventName="PBI.Visual.Load",t.VisualLoad=s[t.VisualLoadEventName]=function(e){return i({name:t.VisualLoadEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["visualName"],loggers:t.VisualLoadLoggers})},t.VisualLoadInitialDataViewEventName="PBI.Visual.LoadInitialDataView",t.VisualLoadInitialDataView=s[t.VisualLoadInitialDataViewEventName]=function(e){return i({name:t.VisualLoadInitialDataViewEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["visualName"],loggers:t.VisualLoadInitialDataViewLoggers})},t.VisualEventRenderStartedEventName="PBI.VisualEvent.RenderStarted",t.VisualEventRenderStarted=s[t.VisualEventRenderStartedEventName]=function(e){return i({name:t.VisualEventRenderStartedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventRenderStartedLoggers})},t.VisualEventRenderCompletedEventName="PBI.VisualEvent.RenderCompleted",t.VisualEventRenderCompleted=s[t.VisualEventRenderCompletedEventName]=function(e){return i({name:t.VisualEventRenderCompletedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventRenderCompletedLoggers})},t.VisualEventRenderingStartedEventName="PBI.VisualEvent.RenderingStarted",t.VisualEventRenderingStarted=s[t.VisualEventRenderingStartedEventName]=function(e){return i({name:t.VisualEventRenderingStartedEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventRenderingStartedLoggers})},t.VisualEventRenderingCompletedEventName="PBI.VisualEvent.RenderingCompleted",t.VisualEventRenderingCompleted=s[t.VisualEventRenderingCompletedEventName]=function(e){return i({name:t.VisualEventRenderingCompletedEventName,baseEvent:t.VerboseTimedEvent(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventRenderingCompletedLoggers})},t.VisualEventRenderingFailedEventName="PBI.VisualEvent.RenderingFailed",t.VisualEventRenderingFailed=s[t.VisualEventRenderingFailedEventName]=function(e){return i({name:t.VisualEventRenderingFailedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventRenderingFailedLoggers})},t.VisualEventUpdateTimeOutEventName="PBI.VisualEvent.UpdateTimeOut",t.VisualEventUpdateTimeOut=s[t.VisualEventUpdateTimeOutEventName]=function(e){return i({name:t.VisualEventUpdateTimeOutEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventUpdateTimeOutLoggers})},t.VisualEventTraceEventName="PBI.VisualEvent.Trace",t.VisualEventTrace=s[t.VisualEventTraceEventName]=function(e){return i({name:t.VisualEventTraceEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventTraceLoggers})},t.VisualEventErrorEventName="PBI.VisualEvent.Error",t.VisualEventError=s[t.VisualEventErrorEventName]=function(e){return i({name:t.VisualEventErrorEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventErrorLoggers})},t.VisualEventReachedTelemetryUsageLimitEventName="PBI.VisualEvent.ReachedTelemetryUsageLimit",t.VisualEventReachedTelemetryUsageLimit=s[t.VisualEventReachedTelemetryUsageLimitEventName]=function(e){return i({name:t.VisualEventReachedTelemetryUsageLimitEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventReachedTelemetryUsageLimitLoggers})},t.VisualEventLaunchURLEventName="PBI.VisualEvent.LaunchURL",t.VisualEventLaunchURL=s[t.VisualEventLaunchURLEventName]=function(e){return i({name:t.VisualEventLaunchURLEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventLaunchURLLoggers})},t.VisualEventDisplayInfoIconEventName="PBI.VisualEvent.DisplayInfoIcon",t.VisualEventDisplayInfoIcon=s[t.VisualEventDisplayInfoIconEventName]=function(e){return i({name:t.VisualEventDisplayInfoIconEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,optionalParameters:["isCustom"],loggers:t.VisualEventDisplayInfoIconLoggers})},t.VisualEventDownloadContentValidationFailedEventName="PBI.VisualEvent.DownloadContentValidationFailed",t.VisualEventDownloadContentValidationFailed=s[t.VisualEventDownloadContentValidationFailedEventName]=function(e){return i({name:t.VisualEventDownloadContentValidationFailedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventDownloadContentValidationFailedLoggers})},t.VisualEventDownloadContentEventName="PBI.VisualEvent.DownloadContent",t.VisualEventDownloadContent=s[t.VisualEventDownloadContentEventName]=function(e){return i({name:t.VisualEventDownloadContentEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventDownloadContentLoggers})},t.VisualEventDownloadContentBlockedDueToCVHostEnvironmentEventName="PBI.VisualEvent.DownloadContentBlockedDueToCVHostEnvironment",t.VisualEventDownloadContentBlockedDueToCVHostEnvironment=s[t.VisualEventDownloadContentBlockedDueToCVHostEnvironmentEventName]=function(e){return i({name:t.VisualEventDownloadContentBlockedDueToCVHostEnvironmentEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventDownloadContentBlockedDueToCVHostEnvironmentLoggers})},t.VisualEventAbortExpandCollapseEventName="PBI.VisualEvent.AbortExpandCollapse",t.VisualEventAbortExpandCollapse=s[t.VisualEventAbortExpandCollapseEventName]=function(e){return i({name:t.VisualEventAbortExpandCollapseEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventAbortExpandCollapseLoggers})},t.VisualEventAbortContextMenuExpandCollapseEventName="PBI.VisualEvent.AbortContextMenuExpandCollapse",t.VisualEventAbortContextMenuExpandCollapse=s[t.VisualEventAbortContextMenuExpandCollapseEventName]=function(e){return i({name:t.VisualEventAbortContextMenuExpandCollapseEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventAbortContextMenuExpandCollapseLoggers})},t.VisualEventGetAvailableServicePlansEventName="PBI.VisualEvent.GetAvailableServicePlans",t.VisualEventGetAvailableServicePlans=s[t.VisualEventGetAvailableServicePlansEventName]=function(e){return i({name:t.VisualEventGetAvailableServicePlansEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventGetAvailableServicePlansLoggers})},t.VisualEventLicenseIsUnsupportedEnvEventName="PBI.VisualEvent.LicenseIsUnsupportedEnv",t.VisualEventLicenseIsUnsupportedEnv=s[t.VisualEventLicenseIsUnsupportedEnvEventName]=function(e){return i({name:t.VisualEventLicenseIsUnsupportedEnvEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventLicenseIsUnsupportedEnvLoggers})},t.VisualEventLicenseFeatureDisabledEventName="PBI.VisualEvent.LicenseFeatureDisabled",t.VisualEventLicenseFeatureDisabled=s[t.VisualEventLicenseFeatureDisabledEventName]=function(e){return i({name:t.VisualEventLicenseFeatureDisabledEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventLicenseFeatureDisabledLoggers})},t.VisualEventLicenseServiceIsUndefinedEventName="PBI.VisualEvent.LicenseServiceIsUndefined",t.VisualEventLicenseServiceIsUndefined=s[t.VisualEventLicenseServiceIsUndefinedEventName]=function(e){return i({name:t.VisualEventLicenseServiceIsUndefinedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventLicenseServiceIsUndefinedLoggers})},t.VisualEventServicePlansResponseIsUndefinedEventName="PBI.VisualEvent.ServicePlansResponseIsUndefined",t.VisualEventServicePlansResponseIsUndefined=s[t.VisualEventServicePlansResponseIsUndefinedEventName]=function(e){return i({name:t.VisualEventServicePlansResponseIsUndefinedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventServicePlansResponseIsUndefinedLoggers})},t.VisualEventNotifyLicenseRequiredEventName="PBI.VisualEvent.NotifyLicenseRequired",t.VisualEventNotifyLicenseRequired=s[t.VisualEventNotifyLicenseRequiredEventName]=function(e){return i({name:t.VisualEventNotifyLicenseRequiredEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventNotifyLicenseRequiredLoggers})},t.VisualEventClearLicenseNotificationEventName="PBI.VisualEvent.ClearLicenseNotification",t.VisualEventClearLicenseNotification=s[t.VisualEventClearLicenseNotificationEventName]=function(e){return i({name:t.VisualEventClearLicenseNotificationEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventClearLicenseNotificationLoggers})},t.VisualEventNotifyLicenseFeatureBlockedEventName="PBI.VisualEvent.NotifyLicenseFeatureBlocked",t.VisualEventNotifyLicenseFeatureBlocked=s[t.VisualEventNotifyLicenseFeatureBlockedEventName]=function(e){return i({name:t.VisualEventNotifyLicenseFeatureBlockedEventName,baseEvent:t.Verbose(e),info:e,category:a.TelemetryCategory.Verbose,loggers:t.VisualEventNotifyLicenseFeatureBlockedLoggers})}})(a.telemetry||(a.telemetry={}))})(powerbi=powerbi||{}),(function(V){var d;(function(e){var o=V.common.events,l=V.data.DataViewTelemetry,y=V.data.DataViewTransform,p=V.data.DataViewObjectDefinitions,f=jsCommon.PerfTimer,r=V.telemetry,s=V.common.Watcher,t=(i.createOptions=function(){return{additionalServices:["$element","visualPlugin","telemetryService","promiseFactory","moduleLoader","featureSwitchService","visualSandbox","renderingSynchronizer","approvedResourceService","visualWarningTelemetryService","themeService","visualStylePresetService","trustedVisual","ngZone","svgProvider","globalEventBridge","managedCustomVisualsService","timeoutService"],scopedDependencies:["eventBridge"]}},i.prototype.$onChanges=function(e){this.core&&(e.viewModel&&(this.core.viewModel=e.viewModel.currentValue),e.allowDeferredRendering&&(this.core.allowDeferredRendering=e.allowDeferredRendering.currentValue),e.currentZone&&(this.core.currentZone=e.currentZone.currentValue))},i.prototype.$onInit=function(){var e=this,t=$(this.services.$element.find("div.visual").get(0));this.core=new n(t,this.services,function(){return e.visualReady&&e.visualReady()}),this.core.viewModel=this.viewModel,this.core.allowDeferredRendering=this.allowDeferredRendering,this.core.currentZone=this.currentZone,this.core.$onInit()},i.prototype.$onDestroy=function(){this.core&&this.core.$onDestroy()},i.prototype.$doCheck=function(){this.core&&this.core.$doCheck()},i);function i(e,t){this.services=t}e.VisualController=t;var a="viewModel",u="initialViewport",n=(c.prototype.$onInit=function(){var e=this;return V.zoneify(this.currentZone,(function(){return e.onInitImpl()}))},c.prototype.$onDestroy=function(){this.reloadEmptyVisualsSubscriptionManager&&(this.reloadEmptyVisualsSubscriptionManager.unsubscribeAll(),this.reloadEmptyVisualsSubscriptionManager=void 0),this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.destroyVisual(),this.visualElement=null,this.model&&(this.model.visual=null),this.isDestroyed=!0},c.prototype.$doCheck=function(){this.watcher.doCheck()},c.prototype.onInitImpl=function(){var e=this;return this.allowDeferredRendering?this.services.timeoutService.setTimeout().promise.then((function(){return e.initializeAsync()})):this.initializeAsync()},c.prototype.initializeAsync=function(){var t=this;if(this.viewModel&&this.viewModel.type)return this.processModelAsync(this.viewModel);var i=this.promiseFactory.defer();return this.watcher.add(a,(function(){return t.viewModel}),(function(e){e&&e.type&&(t.watcher.remove(a),t.processModelAsync(e).then((function(){return i.resolve()}),(function(e){return i.reject(e)})))})),i.promise},c.prototype.processModelAsync=function(o){return __awaiter(this,void 0,V.Promise,(function(){var t,i,s,a;return __generator(this,(function(e){switch(e.label){case 0:return(this.visualHasInitialData=!1,this.visualHasTelemetryInformation=!1,this.model=o,t=this.viewModel,a=t&&t.initialLoadActivity,o&&o.type)?(s=V.visualHost.CustomVisualsUtils.getCustomVisualType(this.approvedResourceService,this.model.type,this.visualPlugin.isCustomVisual(this.model.type)),this.visualLoadEvent=a?this.telemetryService.startChildEvent(a.event,r.VisualLoad,{visualType:o.type,hostInformation:JSON.stringify(this.visualPlugin.getTelemetryHostInformation()),instanceId:o.hostServices.instanceId,visualName:o.visualName,customVisualType:V.visualHost.CustomVisualsUtils.CustomVisualTypes[s],reportId:this.model.reportId,dashboadId:this.model.dashboardId}):this.telemetryService.startEvent(r.VisualLoad,{visualType:o.type,hostInformation:JSON.stringify(this.visualPlugin.getTelemetryHostInformation()),instanceId:o.hostServices.instanceId,visualName:o.visualName,customVisualType:V.visualHost.CustomVisualsUtils.CustomVisualTypes[s],reportId:this.model.reportId,dashboadId:this.model.dashboardId}),o.visualPlugin&&(this.visualPlugin=o.visualPlugin),[4,this.shouldDisableCustomVisuals(o.type)]):[2,this.promiseFactory.reject(void 0,!!this.currentZone)];case 1:if(a=e.sent(),i=this.promiseFactory.defer(!!this.currentZone),(s=this.plugin=this.visualPlugin.getPlugin(o.type))&&this.trustedVisual.canLoadVisual(s.name)&&!a){if(this.viewModel!==t)return[2,this.promiseFactory.resolve()];a={element:this.visualElement,host:o.hostServices,visualAdapterHostServices:o.visualAdapterHostServices,style:this.themeService.getVisualStyle(o.themeCollection),viewport:o.viewport,animation:{transitionImmediate:!1},featureSwitches:__assign({},this.featureSwitchService.featureSwitches)},this.model.interactivityOptions&&(a.interactivity=this.model.interactivityOptions),this.initVisualAsync(s,a,this.model).finally((function(){return i.resolve(null)}))}else this.subscribeToReloadEmptyVisuals(),i.resolve(),this.approvedResourceService.isApprovedResource(o.type)||this.visualReady();return[2,i.promise]}}))}))},c.prototype.subscribeToReloadEmptyVisuals=function(){var i=this;this.reloadEmptyVisualsSubscriptionManager||(this.reloadEmptyVisualsSubscriptionManager=this.services.globalEventBridge.createChannelSubscriptionManager().subscribe(V.events.reloadEmptyVisuals,(function(e,t){_.includes(t.visualTypes,i.viewModel.type)&&(i.reloadEmptyVisualsSubscriptionManager.unsubscribeAll(),i.reloadEmptyVisualsSubscriptionManager=void 0,i.viewport||(i.viewport=i.model.viewport),i.initializeAsync())})))},c.prototype.initVisualAsync=function(t,i,s){var a=this;if(!i.viewport){var o=this.promiseFactory.defer(!!this.currentZone);return this.watcher.add(u,(function(){return a.viewModel&&a.viewModel.viewport}),(function(e){e&&(a.watcher.remove(u),i.viewport=e,a.initVisualAsync(t,i,s).finally((function(){return o.resolve(null)})))})),o.promise}this.currentViewport=this.viewport=i.viewport,this.destroyVisual();var n=this.pendingAdapter=d.createVisualAdapter({visualPlugin:t,promiseFactory:this.promiseFactory,moduleLoader:this.moduleLoader,telemetryService:this.telemetryService,featureSwitches:this.featureSwitchService.featureSwitches,approvedResourceService:this.approvedResourceService,visualSandbox:this.visualSandbox,ngZone:this.ngZone},!!this.currentZone);return this.registeredToWatch||(this.registeredToWatch=!0,this.watcher.add("type",(function(){return a.viewModel&&a.viewModel.type}),(function(t,i,s){return __awaiter(a,void 0,V.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return!s&&i&&t&&t!==i?(this.visualElement.empty(),[4,this.processModelAsync(this.viewModel)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})),this.watcher.add("viewport",(function(){return a.viewModel&&a.viewModel.viewport}),(function(e,t,i){e&&a.onViewportChanged(e)})),this.watcher.add("themeCollection",(function(){return a.viewModel&&a.viewModel.themeCollection}),(function(e,t,i){return __awaiter(a,void 0,V.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return i?[3,2]:[4,this.onThemeNameChange()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}),{mode:2})),n.then((function(e){if(n===a.pendingAdapter)if(a.isDestroyed)a.telemetryService.logChildEvent(a.visualLoadEvent.event,r.VisualInitialized,{visualType:t.name,isCustom:t.custom||!1,isSandboxed:e.sandbox||!1,width:i.viewport.width,height:i.viewport.height,hostInformation:JSON.stringify({isDestroyed:!0}),instanceId:s.hostServices.instanceId,visualName:s.visualName});else{i.viewport=a.currentViewport;e=(a.model.visual=e).init(i);if(e)return e.then((function(){return a.afterVisualInit(t,i,s)}));a.afterVisualInit(t,i,s)}})).finally((function(){n===a.pendingAdapter&&(a.pendingAdapter=void 0,a.pendingUpdates=void 0)}))},c.prototype.afterVisualInit=function(e,t,i){var s,a=this;this.isDestroyed||(this.dataWatched||(this.dataWatched=!0,s=void 0,s=this.featureSwitchService.featureSwitches.noEmptyUpdate?function(e,t){null!=e&&a.enqueuePending(V.VisualUpdateType.Data,(function(e){return a.onDataChanged(e)}),e)}:this.watchScopeForChangesCallback(V.VisualUpdateType.Data,(function(e){return a.onDataChanged(e)})),this.watcher.add("data",(function(){return a.viewModel&&a.viewModel.data}),s)),i.visual.sandbox&&this.subscriptionManager&&this.subscriptionManager.subscribe(o.visualContainerResizeStart,(function(){return setTimeout((function(){return a.setDisableEvents(!0)}))})).subscribe(o.visualContainerResizeEnd,(function(){return setTimeout((function(){return a.setDisableEvents(!1)}))})),this.telemetryService.logChildEvent(this.visualLoadEvent.event,r.VisualInitialized,{visualType:e.name,isCustom:e.custom||!1,isSandboxed:i.visual.sandbox||!1,width:t.viewport.width,height:t.viewport.height,hostInformation:JSON.stringify(this.visualPlugin.getTelemetryHostInformation()),instanceId:i.hostServices.instanceId,visualName:i.visualName}),this.pendingAdapter=void 0,(t=this.pendingUpdates)&&(this.pendingUpdates=void 0,V.VisualUpdateType.Data,t&V.VisualUpdateType.Data&&this.onDataChanged(this.model.data)),i.visualInitialized=!0)},c.prototype.enqueuePending=function(e,t,i){this.pendingAdapter?this.pendingUpdates|=e:t(i)},c.prototype.destroyVisual=function(){var e,t=this.model;t&&(t.visualInitialized=!1,(e=t.visual)&&e.destroy&&e.destroy(),t.performanceActivity&&(t.performanceActivity.cancel(!0),t.performanceActivity=void 0),(t=this.pendingAdapter)&&(t.reject(new V.IgnorableClientError("pendingAdapter.reject")),this.pendingAdapter=void 0,this.pendingUpdates=void 0),this.dataWatched&&(this.dataWatched=!1,this.watcher.remove("data")))},c.prototype.onViewportChanged=function(e){e&&(this.currentViewport&&this.currentViewport.height===e.height&&this.currentViewport.width===e.width&&this.currentViewport.scale===e.scale||(this.currentViewport=e,this.viewport=e,e=f.start("update("+this.markerName()+")"),this.visualUpdate(),this.resolveDeferredInit(),e()))},c.prototype.markerName=function(){var e=this.model.type;return e=this.plugin&&this.plugin.custom?"customVisual:"+e:e},c.prototype.buildDataChangedOptions=function(e,t,i){t={dataViews:t,suppressAnimations:this.renderingSynchronizer.suppressAnimations};return e?t.operationKind=!1===e.isFirstSegment?V.VisualDataChangeOperationKind.Append:V.VisualDataChangeOperationKind.Create:i||(t.operationKind=V.VisualDataChangeOperationKind.None),t},c.prototype.transformAndValidateDataViews=function(e){var t,i,s,a=this.plugin.capabilities,o=this.model;this.modelHasOutstandingReferences(),this.model.performanceActivity&&(i=this.model.performanceActivity.createChildActivity({name:"Data View Transform"})),e&&e.dataView&&(s=e.dataView);var n=o.dataTransforms,r=this.applyStylePresetDefinitions(n),l=f.start("dataViewTransform("+this.markerName()+")"),u=o.themeCollection,c=1===this.viewModel.hostServices.getViewMode();if(s){var d,p=(d=y.apply({prototype:s,objectDescriptors:a?a.objects:null,dataViewMappings:a?a.dataViewMappings:null,transforms:r,colorAllocatorFactory:V.visuals.createColorAllocatorFactory(),dataRoles:a?a.dataRoles:null,drillCapabilities:a&&a.drilldown,expandCollapseCapabilties:a&&a.expandCollapse,visualStyle:this.themeService.getVisualStyle(u),orderIndependentSelectorMatching:o.orderIndependentSelectorMatching,keepAllMetadataColumnsCapability:!!a&&a.keepAllMetadataColumns,featureSwitches:this.featureSwitchService.featureSwitches,withWarnings:c})).dataViews,h=d.warnings;if(p&&0<p.length){for(var v,g=!0,m=0;g&&m<p.length;++m)(v=V.DataViewAnalysis.validateAndReshape(p[m],a.dataViewMappings)).isValid?p[m]=v.dataView:g=!1;g&&(t=this.buildDataChangedOptions(e,p,n))}!t&&o.allowInvalidDataView&&(t={dataViews:[],suppressAnimations:this.renderingSynchronizer.suppressAnimations})}else(v=V.DataViewAnalysis.validateAndReshape(s,a.dataViewMappings)).isValid||V.visualHost.CustomVisualsUtils.shouldAllowEmptyDataView(this.plugin)?(p=(d=y.apply({prototype:v.dataView,objectDescriptors:a?a.objects:null,dataViewMappings:a?a.dataViewMappings:null,transforms:r,colorAllocatorFactory:V.visuals.createColorAllocatorFactory(),dataRoles:a?a.dataRoles:null,drillCapabilities:a&&a.drilldown,expandCollapseCapabilties:a&&a.expandCollapse,visualStyle:this.themeService.getVisualStyle(u),orderIndependentSelectorMatching:o.orderIndependentSelectorMatching,keepAllMetadataColumnsCapability:!!a&&a.keepAllMetadataColumns,featureSwitches:this.featureSwitchService.featureSwitches,withWarnings:c})).dataViews,h=d.warnings,t=this.buildDataChangedOptions(e,p,n)):o.allowInvalidDataView&&(t={dataViews:[],suppressAnimations:this.renderingSynchronizer.suppressAnimations});return l(),i&&i.resolve(),t&&(t.visualDefinitionData=e,!_.isEmpty(h)&&this.viewModel&&this.viewModel.hostServices&&o.hostServices.setWarnings(h)),t},c.prototype.onThemeNameChange=function(){return __awaiter(this,void 0,V.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.processModelAsync(this.viewModel)];case 1:return e.sent(),[2]}}))}))},c.prototype.applyStylePresetDefinitions=function(e){var t,i,s=this.plugin.capabilities,a=this.themeService,o=this.model,n=(e=e&&V.Prototype.inherit(e)||{}).objects=p.clone(e.objects||{});o.additionalObjectUpdates&&o.additionalObjectUpdates(e.objects);var r=o.themeCollection,s=a.getVisualObjects(r,o.type,o.stylePresetName,s&&s.objects,this.plugin.custom);p.extend(n,s);s=this.plugin.stampHardcodedDefaultObjects;if(s){for(var l={},u=0,c=s;u<c.length;u++){var d=c[u];this.themeService.mustUseHardcodedDefaultForObjectProperty(r,this.plugin.name,d.objectProperty)&&p.extend(l,((t={})[d.objectProperty.objectName]=[{properties:((i={})[d.objectProperty.propertyName]=d.defaultValue,i)}],t))}p.extend(n,l)}a=a.getVisualStyle(r),o=this.visualStylePresetService.getStylePreset(o.type,o.stylePresetName);return a&&o&&(a=o.evaluate(a),p.extend(n,a)),e},c.prototype.loadConditionalFormattingIcons=function(){var n,e=this.model.dataTransforms&&this.model.dataTransforms.objects,t=this.plugin&&this.plugin.capabilities&&this.plugin.capabilities.objects;e&&t&&(n=!1,p.visitPropertyExprs({definitions:e,descriptors:t,structuralObjectVisitor:function(e,t,i,s,a,o){s.icon&&V.StructuralObjectDefinition.isIconDefinition(e)&&(n=!0,o.stopVisiting=!0)}}),n&&this.services.svgProvider.loadSheet("conditionalFormattingDialogIcons"))},c.prototype.applyDataChange=function(r){var l;return __awaiter(this,void 0,V.Promise,(function(){var t,i,s,a,o,n;return __generator(this,(function(e){switch(e.label){case 0:if(!(t=this.model&&this.model.visual))return jsCommon.Trace.error("applyDataChange with no visual: "+!!this.model+" "+!!this.viewModel+" "+!(!this.viewModel||!this.viewModel.visual)),[2];if(!t.onDataChanged&&!t.update)return[2];if(this.modelHasOutstandingReferences())return[2];this.loadConditionalFormattingIcons();try{i=this.transformAndValidateDataViews(r)}catch(e){throw new V.QueryPipelineError(e)}return i?!0!==this.allowDeferredRendering?[3,2]:[4,this.renderingSynchronizer.deferRenderOperation(this.visualElement,_.noop)]:[2];case 1:e.sent(),e.label=2;case 2:if(t!==this.model.visual)return[2];e.label=3;case 3:return(e.trys.push([3,7,,8]),(a=null===(l=this.viewModel)||void 0===l?void 0:l.hostServices.tooltips())&&a.hide({immediately:!0,isTouchEvent:!1}),this.dataViews=this.model.dataViews=i.dataViews,this.visualDefinitionData=r,s=this.dataViews&&this.dataViews.length,n=r&&r.warnings,_.isEmpty(n)||this.visualWarningTelemetryService.logWarnings(n,this.model),a=this.model.type,this.plugin&&this.plugin.custom&&(a="customVisual:"+a),this.viewport&&this.model.visual.update)?(o=f.start("update("+a+")"),[4,this.visualUpdate(i)]):[3,5];case 4:return e.sent(),this.model.performanceActivity&&(this.model.performanceActivity.resolve(),this.model.performanceActivity=void 0),this.model.pendingSelection&&s&&(this.model.visual.onRestoreSelection&&this.model.visual.onRestoreSelection({selection:this.model.pendingSelection}),this.model.selectedDatapoints=this.model.pendingSelection,this.model.pendingSelection=void 0),this.resolveDeferredInit(),o(),[3,6];case 5:t.onDataChanged&&(o=f.start("onDataChanged("+a+")"),t.onDataChanged(i),this.model.performanceActivity&&(this.model.performanceActivity.resolve(),this.model.performanceActivity=void 0),this.resolveDeferredInit(),o()),e.label=6;case 6:return this.visualReady(),[3,8];case 7:throw n=e.sent(),this.model.performanceActivity&&(this.model.performanceActivity.reject(),this.model.performanceActivity=void 0),this.visualReady(),n;case 8:return[2]}}))}))},c.prototype.onDataChanged=function(e){var t,i;this.model?(t=this.model.dataAppliedEvent,this.model.dataAppliedEvent=void 0,this.pendingDataChange&&(this.pendingDataChange.reject(),this.pendingDataChange=void 0),i=this.promiseFactory.defer(),(this.pendingDataChange=i).promise.then((function(){return t&&t.resolve()}),(function(){return t&&t.reject()})),this.applyDataChange(e).then((function(){return i.resolve()}),(function(){return i.reject()}))):jsCommon.Trace.error("onDataChanged called with no this.model, this.viewModel is"+(this.viewModel," not")+" defined")},c.prototype.resolveDeferredInit=function(){if(!this.visualHasInitialData&&this.dataViews&&(this.visualElement.attr("initialized",""),this.visualHasInitialData=!0,this.visualLoadEvent,this.visualLoadEvent.resolve(),this.visualLoadEvent=void 0),!this.visualHasTelemetryInformation&&!_.isEmpty(this.dataViews)&&(this.visualHasTelemetryInformation=!0,this.model&&_.isFunction(null===(e=this.model.visual)||void 0===e?void 0:e.getTelemetryInformation))){var e=this.model.visual.getTelemetryInformation();if(!_.isEmpty(e))try{this.telemetryService.logEvent(r.VisualLoadInitialDataView,{visualType:this.model.type,visualName:this.model.visualName,reportId:this.model.reportId,dashboardId:this.model.dashboardId,visualInformation:JSON.stringify(e)})}catch(e){this.model.visualName}}},c.prototype.setDisableEvents=function(e){this.disableEvents=e},c.prototype.visualUpdate=function(r){return __awaiter(this,void 0,V.Promise,(function(){var t,i,s,a,o,n=this;return __generator(this,(function(e){switch(e.label){case 0:return this.model.visual?(t=this.model.performanceActivity?this.model.performanceActivity.createChildActivity({name:"Visual Update Async"}):void 0,s=i=0,(a=this.viewModel&&this.viewModel.hostServices)&&(i=a.getViewMode(),s=a.getEditMode()),this.dataViews&&(o=_.map(this.dataViews,(function(e){return l.wrapKindProperties(e,n.telemetryService,n.plugin.name)}))),[4,this.model.visual.update({viewport:this.viewport,dataViews:o,suppressAnimations:!r||this.renderingSynchronizer.suppressAnimations,type:r?V.VisualUpdateType.Data:V.VisualUpdateType.Resize,resizeMode:r?void 0:2,operationKind:r?r.operationKind:void 0,viewMode:i,editMode:s,visualDefinitionData:(r||this).visualDefinitionData,dataTransforms:this.model.dataTransforms,isInFocus:this.model.isInFocus,visualRequiresData:this.model.visualRequiresData,visualHasData:this.model.visualHasData,updateId:jsCommon.Utility.generateGuid(),parentContextActivity:this.model.performanceActivity})]):[2];case 1:return e.sent(),t&&t.resolve(),[2]}}))}))},c.prototype.modelHasOutstandingReferences=function(){var e=this.model.dataTransforms&&this.model.dataTransforms.objects;return!!e&&d.ResourcePackageReferenceResolver.hasResourceReferencesToResolve(e,this.plugin.capabilities.objects)},c.prototype.watchScopeForChangesCallback=function(i,s){var a=this,o=!0;return function(e,t){e===t&&!o||a.enqueuePending(i,s,e),o=!1}},c.prototype.shouldDisableCustomVisuals=function(o){return __awaiter(this,void 0,V.Promise,(function(){var t,i,s,a;return __generator(this,(function(e){switch(e.label){case 0:return(V.visualHost.CustomVisualsUtils.getAdminControlState(this.featureSwitchService,this.telemetryService,this.viewModel.initialLoadActivity),t=this.visualPlugin.isCustomVisual(o))?(s=(i=V.visualHost.CustomVisualsUtils).isCustomVisualTypeDisabled,a=[this.featureSwitchService,o,this.approvedResourceService,!1],[4,this.managedCustomVisualsService.isPublicManagedVisualByVisualType(o)]):[3,2];case 1:t=s.apply(i,a.concat([e.sent(),this.model&&this.model.isDisabled,this.model&&this.model.isDisabledIfUncertified])),e.label=2;case 2:return[2,t]}}))}))},c.prototype.visualReady=function(){this.fireVisualReady()},c);function c(e,t,i){this.visualElement=e,this.services=t,this.fireVisualReady=i,this.watcher=new s,this.dataWatched=!1,this.isDestroyed=!1,this.visualPlugin=t.visualPlugin,this.telemetryService=t.telemetryService,this.moduleLoader=t.moduleLoader,this.promiseFactory=t.promiseFactory,this.featureSwitchService=t.featureSwitchService,this.visualSandbox=t.visualSandbox,this.renderingSynchronizer=t.renderingSynchronizer,this.approvedResourceService=t.approvedResourceService,this.managedCustomVisualsService=t.managedCustomVisualsService,this.visualWarningTelemetryService=t.visualWarningTelemetryService,this.themeService=t.themeService,this.visualStylePresetService=t.visualStylePresetService,this.trustedVisual=t.trustedVisual,this.ngZone=t.ngZone,t.eventBridge&&(this.subscriptionManager=t.eventBridge.createChannelSubscriptionManager()),this.registeredToWatch=!1,this.setDisableEvents(!1)}e.VisualComponentCore=n})((d=V.visualHost||(V.visualHost={})).controllers||(d.controllers={}))})(powerbi=powerbi||{}),(function(e){var t;((t=e.visualHost||(e.visualHost={})).components||(t.components={})).Visual={templateUrl:"components/visual/visual.html",bindings:{viewModel:"<",allowDeferredRendering:"<",currentZone:"<?",visualReady:"&?"},controller:e.common.createController(t.controllers.VisualController),controllerAs:"$ctrl"}})(powerbi=powerbi||{}),(function(e){((e=e.visualHost||(e.visualHost={})).htmlTemplate||(e.htmlTemplate={})).put=function(e){e.put("components/visual/visual.html","<div class=\"visual visual-{{$ctrl.core.viewModel.type}}\" ng-class=\"{'disable-events': $ctrl.core.disableEvents, 'allow-deferred-rendering': $ctrl.core.allowDeferredRendering !== false}\"></div>")}})(powerbi=powerbi||{}),(function(l){!(function(i){var e=l.visualHost.htmlTemplate.put,t=l.visualHost.components.Visual,a=[];function s(){o||(l.common.initializeAngularModule(),angular.module("powerbi.visualHost.controllers",[]),angular.module("powerbi.visualHost.directives",[]),angular.module("powerbi.visualHost",["powerbi.common","powerbi.visualHost.controllers","powerbi.visualHost.directives"]).run(["scopedProvider","featureSwitchService",n]).run(["$templateCache",e]),o=!0)}i.initializeAngularModule=s;var o=!1;function n(e,t){e.register("windowMessageProxy",{services:["promiseFactory"],fn:function(e){return i.createWindowMessageProxy(e)}})}s();var r=[{name:"Visual",factory:t,consumerHostFlags:25499}];i.registerBuildingBlocksForHost=function(e){for(var t=0,i=r;t<i.length;t++){var s=i[t];(s.consumerHostFlags&e)===e&&(function(e,t){e=e[0].toLowerCase()+e.slice(1);0<=a.indexOf(e)||(angular.module("powerbi.visualHost").component(e,t),a.push(e))})(s.name,s.factory)}}})(l.visualHost||(l.visualHost={}))})(powerbi=powerbi||{}),(function(c){!(function(u){u.createSandboxVisualProxy=function(e,t,i,s,a,o,n,r){return new l(e,t,i,s,a,o,n,r)};var l=(Object.defineProperty(e.prototype,"plugin",{get:function(){return this._plugin},enumerable:!1,configurable:!0}),e.prototype.init=function(e,t){this.visualDelegate=e,t&&(this._plugin=t,this.isSandboxReady=!0)},e.prototype.setPluginReadyHandler=function(e){this.pluginReadyHandler=e},e.prototype.logEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.telemetryService)return null;var i=e.shift(),i="string"==typeof i?this.getEventFactory(i):i;return this.telemetryService.logEvent.apply(this.telemetryService,__spreadArray([i],e))},e.prototype.getEventFactory=function(e){switch(e){case"VisualEventError":return c.telemetry.VisualEventError;case"VisualEventTrace":return c.telemetry.VisualEventTrace;case"VisualException":return c.telemetry.VisualException;case"VisualEventRenderStarted":return c.telemetry.VisualEventRenderStarted;case"VisualEventRenderCompleted":return c.telemetry.VisualEventRenderCompleted;case"VisualApiUsage":return c.telemetry.VisualApiUsage;default:return}},e.prototype.logVisualEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.plugin.name;if(!1!==this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService&&(this.approvedResourcesService.isApprovedResource(i)||this.approvedResourcesService.isTrustedResource(i))){var s=e[0],a=e[1],o=e[2],n={visualType:i,instanceId:a instanceof Object?a.instanceId:a},o=a instanceof Object?a.payload:o,a=c.extensibility.convertStringToVisualEventType(s);switch(a){case 0:case 1:if(!this.featureSwitchService.featureSwitches.customVisualsPerformanceTelemetry)return;o="";break;case 2:case 3:var r=this.approvedResourcesService.getTelemetryUsageLimit(i);if(this.telemetryUsageCount>=r)return;this.telemetryUsageCount++,this.telemetryUsageCount===r&&this.telemetryService.logEvent(c.telemetry.VisualEventReachedTelemetryUsageLimit,n),o=o?o.substring(0,this.telemetryEventsPayloadLimit):"";break;default:return}return this.logEvent.apply(this,[s,__assign(__assign({},n),{payload:o})])}},e.prototype.ready=function(e){this.contentWindow=e,this.messageProxy.contentWindow=e,this.isSandboxReady&&this.flushCallStack(),this.messageProxy.flushQueue(),this.isVisualReady=!0},e.prototype.update=function(e){var t=this;if(this.approvedResourcesService.canManageAsyncUpdate(this.plugin.name)&&e.updateId){var i=this.promiseFactory.defer();this.deferredCache[e.updateId]=i;var s=setTimeout((function(){i.reject("deferred update promise timed out"),t.telemetryService.logEvent(c.telemetry.VisualEventUpdateTimeOut,{visualType:t.plugin.name,timeOut:t.updateTimeOut,parentId:t.telemetryService.root.id})}),this.updateTimeOut);e.updateCallBack=function(){return i.resolve(null)};var a=this.invoke("update",[e]);return a&&a.catch((function(e){return i.reject(e)})),i.promise.catch((function(e){return e})).finally((function(){clearTimeout(s),e.updateId&&delete t.deferredCache[e.updateId]})),i.promise}return this.invoke("update",[e]),c.Promise.resolve(void 0)},e.prototype.invoke=function(e,t){if(this.isSandboxReady)return this.execute(e,t);this.methodQueue.push({methodName:e,arguments:t})},e.prototype.postMessage=function(e,t){this.messageProxy.postMessage({eventName:e,arguments:t})},e.prototype.postMessageAsync=function(e,t){return this.messageProxy.postMessageAsync({eventName:e,arguments:t})},e.prototype.onPluginReady=function(e){var t;this.pluginReadyHandler&&this.pluginReadyHandler(),this.isSandboxReady||(t=e.capabilities.objects,e.capabilities.objects=c.data.services.DataViewObjectDescriptorSerializer.deserialize(t),this.registerCustomVisual(e),this.flushCallStack(),this.isSandboxReady=!0)},e.prototype.destroy=function(){this.messageProxy.off(u.events.WindowMessageProxyMessageEvent),this.messageProxy.off(u.events.WindowMessageProxyErrorEvent),this.messageProxy.destroy(),this.contentWindow=null},e.prototype.registerCustomVisual=function(e){(this._plugin=e).custom=!0,c.visuals.plugins[e.name]=e},e.prototype.execute=function(e,t){if(_.isFunction(this.visualDelegate[e]))return this.visualDelegate[e].apply(this.visualDelegate,t);this.postMessage(e,t)},e.prototype.flushCallStack=function(){for(;0<this.methodQueue.length;){var e=this.methodQueue.shift();this.execute(e.methodName,e.arguments)}this.isVisualReady&&this.messageProxy.flushQueue()},e.prototype.onMessageReceived=function(e){this.validateMessageSource(e)&&($.isFunction(this[e.message.eventName])?this[e.message.eventName].apply(this,e.message.arguments):this.visualDelegate&&$.isFunction(this.visualDelegate[e.message.eventName])&&this.visualDelegate[e.message.eventName].apply(this.visualDelegate,e.message.arguments))},e.prototype.onMessageError=function(e){this.validateMessageSource(e)&&e.message&&e.message.error},e.prototype.refreshHostData=function(){(this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canRefreshHostData(this.plugin.name))&&this.visualDelegate.refreshHostData()},e.prototype.getResourceUrl=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetAADToken(t)?this.visualDelegate.getResourceUrl(t,e):this.postMessage("handleGetResourceUrlResult",[{payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e}])},e.prototype.getAADAuthenticationToken=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetAADToken(t)?this.visualDelegate.getAADAuthenticationToken(t,e):this.postMessage("handleGetAADAuthenticationTokenResult",[{payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e}])},e.prototype.getAADToken=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetAADToken(t)?this.visualDelegate.getAADToken(t,e):this.postMessage("handleGetAADTokenResult",[{payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e}])},e.prototype.getWACToken=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetWACToken(t)?this.visualDelegate.getWACToken(e.resourceSiteUrl,e.resourceEtag,t,e.promiseId):(e={payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e.promiseId},this.postMessage("handleGetWACTokenResult",[e]))},e.prototype.isLocalStoragePermitted=function(){var e,t=this.privilegeService.isLocalStorageEnabled(this.plugin);return t&&(e=this.plugin.name,t=!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canUseLocalStorage(e)),t},e.prototype.isStorageEnabled=function(e){var t=this.isLocalStoragePermitted();this.postMessage("handleIsStorageEnabled",[{promiseId:e,enabled:t}])},e.prototype.getStorageData=function(e,t){var i=this.plugin.name;this.isLocalStoragePermitted()?this.visualDelegate.getStorageData(i,e,t):this.postMessage("handleGetStorageData",[{promiseId:t,data:null}])},e.prototype.setStorageData=function(e,t,i){var s=this.plugin.name;this.isLocalStoragePermitted()?this.visualDelegate.setStorageData(s,e,t,i):this.postMessage("handleSetStorageData",[{promiseId:i,freeSpace:0,isError:!0}])},e.prototype.removeStorageData=function(e){var t=this.plugin.name;(!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canUseLocalStorage(t))&&this.visualDelegate.removeStorageData(t,e)},e.prototype.renderingStarted=function(e,t){this.renderEventStartTime=(new Date).toISOString(),this.telemetryService.logEvent(c.telemetry.VisualEventRenderingStarted,{visualType:this.plugin.name,instanceId:e,start:this.renderEventStartTime,end:this.renderEventStartTime,parentId:this.telemetryService.root.id})},e.prototype.renderingFinished=function(e,t){this.deferredCache[t]&&this.deferredCache[t].resolve(null),void 0!==this.renderEventStartTime&&(t=(new Date).toISOString(),this.telemetryService.logEvent(c.telemetry.VisualEventRenderingCompleted,{visualType:this.plugin.name,instanceId:e,start:this.renderEventStartTime,end:t,parentId:this.telemetryService.root.id}),this.renderEventStartTime=void 0)},e.prototype.renderingFailed=function(e,t,i){this.deferredCache[t]&&this.deferredCache[t].reject(i),void 0!==this.renderEventStartTime&&(this.telemetryService.logEvent(c.telemetry.VisualEventRenderingFailed,{visualType:this.plugin.name,instanceId:e,parentId:this.telemetryService.root.id}),this.renderEventStartTime=void 0)},e.prototype.validateMessageSource=function(e){return!!e.source&&!!this.contentWindow&&this.contentWindow===e.source},e.prototype.exportVisualsContent=function(e,t,i,s,a){this.visualDelegate.exportVisualsContent(e,t,i,s,a)},e);function e(e,t,i,s,a,o,n,r){var l=this;void 0===r&&(r=15e3),this.messageProxy=e,this.telemetryService=t,this.approvedResourcesService=i,this.featureSwitchService=s,this.isDebugVisual=a,this.promiseFactory=o,this.privilegeService=n,this.updateTimeOut=r,this.telemetryEventsPayloadLimit=4096,this.methodQueue=[],this.isSandboxReady=!1,this.isVisualReady=!1,this.telemetryUsageCount=0,this.deferredCache={},this.isDebugVisual=a,this.messageProxy.on(u.events.WindowMessageProxyMessageEvent,(function(e){return l.onMessageReceived(e)})),this.messageProxy.on(u.events.WindowMessageProxyErrorEvent,(function(e){return l.onMessageError(e)}))}})(c.visualHost||(c.visualHost={}))})(powerbi=powerbi||{}),(function(t){var o;function e(e,t,i,s){var a=this;this.messageProxy=e,this.telemetryService=t,this.plugin=i,this.instanceId=s,this._modalDialogState=null,this._dialog=null,this._iframe=null,this._minDisplayDurationReached=!1,setTimeout((function(){a._minDisplayDurationReached=!0}),2e3),this.messageProxy.on(o.events.WindowMessageProxyMessageEvent,(function(e){return a.onMessageReceived(e)})),this.messageProxy.on(o.events.WindowMessageProxyErrorEvent,(function(e){return a.onMessageError(e)}))}o=t.visualHost||(t.visualHost={}),Object.defineProperty(e.prototype,"dialog",{set:function(e){this._dialog=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iframe",{set:function(e){this._iframe=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modalDialogState",{get:function(){return this._modalDialogState},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(e,t){this.messageProxy.postMessage({eventName:e,arguments:t})},e.prototype.postMessageAsync=function(e,t){return this.messageProxy.postMessageAsync({eventName:e,arguments:t})},e.prototype.destroy=function(){this.messageProxy.off(o.events.WindowMessageProxyMessageEvent),this.messageProxy.off(o.events.WindowMessageProxyErrorEvent),this.messageProxy.destroy(),this._dialog=null,this._iframe=null},e.prototype.onMessageReceived=function(e){this.validateMessageSource(e)&&(_.isFunction(this[e.message.eventName])?this[e.message.eventName].apply(this,e.message.arguments):this.telemetryService.logEvent(t.telemetry.VisualEventError,{visualType:this.plugin.name,instanceId:this.instanceId,payload:"invalid message"}))},e.prototype.onMessageError=function(e){this.validateMessageSource(e)&&e.message&&e.message.error&&this.telemetryService.logEvent(t.telemetry.VisualEventError,{visualType:this.plugin.name,instanceId:this.instanceId,payload:e.message.error})},e.prototype.onDialogSetState=function(e){this._modalDialogState=e},e.prototype.onDialogClose=function(e,t){t&&(this._modalDialogState=t),this._dialog&&this._minDisplayDurationReached&&this._dialog.close(e)},e.prototype.onDialogResize=function(e,t){this._dialog&&(e=_.clamp(e,200,Math.ceil(.9*window.innerWidth))+2,t=_.clamp(t,100,Math.ceil(.91*window.innerHeight-120))+2,this._dialog.resize(e,t))},e.prototype.validateMessageSource=function(e){return!(!e.source||!this._iframe||this._iframe.contentWindow!==e.source)&&!!_.includes(["onDialogSetState","onDialogClose","onDialogResize"],e.message.eventName)},o.SandboxDialogProxy=e})(powerbi=powerbi||{}),(function(l){var e,r;function t(e,t,i,s){this.host=e,this.telemetryService=t,this.plugin=i,this.instanceId=s}e=l.visualHost||(l.visualHost={}),r=["txt","csv","json","tmplt","xml","pdf","xlsx"],t.prototype.exportVisualsContent=function(e,t,i,s,a){var o=this,n=t.split(".").pop(),r=this.getBlobSize(e);return this.validateContentSource(e,t,i,s,r)?(i=i.toLowerCase(),this.host.downloadService().exportVisualsContent(e,t,i,s,this.plugin.name,r).then((function(e){return o.telemetryService.logEvent(l.telemetry.VisualEventDownloadContent,{isFileSaved:e,contentSize:r,visualType:o.plugin.name,instanceId:o.instanceId,extension:n}),{promiseId:a,data:e}}),(function(){return{promiseId:a,data:!1}}))):this.handleInvalidRequest(r,n,a)},t.prototype.validateContentSource=function(e,t,i,s,a){var o=t.split(".").pop().toLowerCase(),n=0<r.filter((function(e){return o===e})).length,t=null===t.match(/[:/\\]/);return!(!(e&&i&&s&&t&&n)||10485760<a)},t.prototype.getBlobSize=function(e){if(!e)return 0;var t={type:jsCommon.HttpConstants.ApplicationOctetStream},t=new Blob([e],t);return t?t.size:0},t.prototype.handleInvalidRequest=function(e,t,i){return this.telemetryService.logEvent(l.telemetry.VisualEventDownloadContentValidationFailed,{contentSize:e,visualType:this.plugin.name,instanceId:this.instanceId,extension:t}),l.Promise.resolve({promiseId:i,data:!1})},e.SandboxDownloadContentProxy=t})(powerbi=powerbi||{}),(function(s){!(function(){(s.visualHost||(s.visualHost={})).createRenderingSynchronizer=function(){return new e};var e=(t.prototype.deferRenderOperation=function(e,i){return __awaiter(this,void 0,s.Promise,(function(){var t;return __generator(this,(function(e){return t=$.Deferred(),setTimeout((function(){i(),t.resolve()})),[2,t.promise()]}))}))},t.prototype.clearOperationsQueue=function(){},t);function t(){this.suppressAnimations=!1}})()})(powerbi=powerbi||{}),(function(S){var e;(function(e){var o=S.data.dsr;e.createVisualWarningTelemetryService=function(e,t){return new i(e,t)};var i=(t.prototype.logWarnings=function(e,t){if(!_.isEmpty(e))for(var i=0,s=e;i<s.length;i++){var a=s[i];a instanceof o.DsrLimitsWarning&&this.logDsrLimitsWarning(a,t)}},t.prototype.logDsrLimitsWarning=function(e,t){var i,s,a,o=e.limits,n=e.getDetails(S.common.getLocalize()).message,r=e.code,l=t.type;o.Primary&&(i=this.getLimitString(e.limits.Primary)),o.Secondary&&(s=this.getLimitString(e.limits.Secondary)),o.Intersection&&(a=this.getLimitString(e.limits.Intersection));var o=t.dataViews,e=t&&t.data&&t.data.isFirstSegment,u=e||_.some(o,(function(e){return e&&e.metadata&&e.metadata.segment}));if(!u||!1!==e)for(var c=0,d=o;c<d.length;c++){var p,h,v,g,m,y,f,V=d[c];V&&V.categorical&&(p=0,(m=_.head(V.categorical.categories))&&(p=m.values&&m.values.length||0),h=(f=V.categorical.values&&V.categorical.values.grouped())&&f.length||0,v=!(!V.categorical.values||!V.categorical.values.source),y=this.visualPlugin.capabilities(t.type),g=y&&y.drilldown&&_.head(y.drilldown.roles),m=!1,f=t.dataTransforms,g&&f&&(m=1<_.filter(f.selects,(function(e){return e.roles&&e.roles[g]})).length),y=void 0,(f=this.visualPlugin.getPlugin(t.type))&&f.getAdditionalTelemetry&&(y=JSON.stringify(f.getAdditionalTelemetry(V))),this.telemetryService.logEvent(S.telemetry.DsrDataLimitsWarning,{errorCode:r,targetVisualType:l,primaryDataReduction:i,secondaryDataReduction:s,intersectionDataReduction:a,primaryCount:p,secondaryCount:h,hasCategoryHierarchy:m,hasDynamicSeries:v,visualTelemetry:y,isSegmented:u,message:n}))}},t.prototype.getLimitString=function(e){switch(e.Type){case 0:return"Top:"+e.Count;case 1:return"Bottom:"+e.Count;case 2:return"Sample:"+e.Count}},t);function t(e,t){this.telemetryService=e,this.visualPlugin=t}})((e=S.visualHost||(S.visualHost={})).services||(e.services={}))})(powerbi=powerbi||{}),(function(o){var n;(n=o.visualHost||(o.visualHost={})).createVisualAdapter=function(t,e){var i=t.promiseFactory.defer(e),s=t.visualPlugin,a=t.ngZone;return t.visualSandbox&&(function(e){var t=e.visualPlugin,i=e.featureSwitches||{},s=e.approvedResourceService;if(!t)return!1;if(e.approvedResourceService&&e.approvedResourceService.isTrustedResource&&e.approvedResourceService.isTrustedResource(t.name))return!0;return!!n.utils.isCustomVisual(t)&&(!(!i.approvedResourcesDisabled&&!t.apiVersion&&s&&s.isApprovedResource(t.name))&&i.sandboxVisualsEnabled)})(t)?(e=t.visualSandbox.getVisualPlugin(s,t.telemetryService,t.isDebugVisual)).createES6?e.createES6().then((function(e){return i.resolve(e)})):e.create?i.resolve(e.create()):i.reject("either create or createES6 must be defined"):!s.module||s.createES6&&!s.module.css?i.resolve(o.extensibility.createVisualApiAdapter(s,s.create,t.promiseFactory,t.telemetryService,void 0,a)):t.moduleLoader.require({javascript:s.createES6?void 0:s.module.javascript,css:s.module.css}).then((function(e){return i.resolve(o.extensibility.createVisualApiAdapter(s,s.create,t.promiseFactory,t.telemetryService,e,a))}),(function(e){return i.reject(e)})),o.createRejectablePromise(i)},n.setCreateVisualAdapter=function(e){n.createVisualAdapter=e}})(powerbi=powerbi||{}),(function(n){!(function(o){var e,s;function i(e){this.visualSandbox=e}e=o.system||(o.system={}),s="dataViewer",i.prototype.reloadAdapter=function(t){var s=this;if(void 0===t&&(t=!1),this.dataViewShowing){if(t)return;this.toggleDataview(!1)}if(!n.localStorageService.getData("VISUAL_DEVELOPER_MODE_ENABLED")){this.toggleAutoReload(!1);var e=this.buildErrorMessage({message:this.host.getLocalizedString("DebugVisual_Enabled_Error_Message"),moreMessage:this.host.getLocalizedString("DebugVisual_Enabled_Error_Learn_More"),moreLinkHref:"https://aka.ms/powerbideveloperenablederror",moreLinkText:this.host.getLocalizedString("LearnMore"),type:"blockedsite"});return this.container.html(e),void this.setCapabilities()}var a=n.localStorageService.getData("DEVELOPMENT_SERVER_URL")||"https://localhost:8080/assets/";this.statusLoading||(this.statusLoading=!0,$.get(a+"status").done((function(e){if(e&&(!t||s.lastUpdateStatus!==e)){if("error"===(s.lastUpdateStatus=e)){e=s.buildErrorMessage({message:s.host.getLocalizedString("DebugVisual_Compile_Error_Message"),moreMessage:s.host.getLocalizedString("DebugVisual_Compile_Error_Learn_More"),moreLinkHref:"https://aka.ms/powerbideveloperpbivizcompileerror",moreLinkText:s.host.getLocalizedString("LearnMore"),type:"repair"});return s.container.html(e),void s.setCapabilities()}$.getJSON(a+"pbiviz.json").done((function(i){i.capabilities,i.visual&&i.visual.guid,i.capabilities&&i.visual&&i.visual.guid&&(s.visualGuid!==i.visual.guid&&(s.visualGuid=i.visual.guid),$.ajax(a+"visual.js",{dataType:"text"}).done((function(t){$.get(a+"visual.css").done((function(e){e={name:s.visualGuid,custom:!0,create:function(){return null},content:{js:t,css:e,iconBase64:null},capabilities:i.capabilities,apiVersion:i.apiVersion};n.extensibility.visualPluginAdapter.transformPlugin(e),o.plugins[e.name]=e,s.setCapabilities(e.capabilities),s.loadVisual(e)}))})))}))}})).fail((function(){s.toggleAutoReload(!1);var e=s.buildErrorMessage({message:s.host.getLocalizedString("DebugVisual_Server_Error_Message"),moreMessage:s.host.getLocalizedString("DebugVisual_Server_Error_Learn_More"),moreLinkHref:"https://aka.ms/powerbideveloperpbivizservererror",moreLinkText:s.host.getLocalizedString("LearnMore"),type:"error"});s.container.html(e),s.setCapabilities()})).always((function(){s.statusLoading=!1})))},i.prototype.loadVisual=function(e){var i=this,t=e.name!==s;this.promiseFactory=this.host.promiseFactory(),this.visualContainer.attr("class","visual-"+e.name),this.visualContainer.empty(),this.container.empty().append(this.visualContainer),this.adapterPromise&&this.adapterPromise.reject();t=this.adapterPromise=n.visualHost.createVisualAdapter({visualPlugin:e,promiseFactory:this.promiseFactory,moduleLoader:this.host.loader(),featureSwitches:{sandboxVisualsEnabled:t},visualSandbox:this.visualSandbox,isDebugVisual:!0});this.adapter&&this.adapter.destroy(),t.then((function(e){var t;i.adapter=e,i.sandbox=i.adapter.sandbox,e.init&&e.init(i.visualInitOptions),e.update&&i.lastUpdateOptions&&((t=i.lastUpdateOptions).type=n.VisualUpdateType.All,e.update(t))}))},i.prototype.toggleAutoReload=function(e){var t=this;this.autoReloadInterval&&!0!==e?(this.autoRefreshBtn.addClass("pbi-glyph-circle-play"),this.autoRefreshBtn.removeClass("pbi-glyph-circle-stop"),this.refreshBtn.show(),clearInterval(this.autoReloadInterval),this.autoReloadInterval=void 0):this.autoReloadInterval||!1===e||(this.autoRefreshBtn.removeClass("pbi-glyph-circle-play"),this.autoRefreshBtn.addClass("pbi-glyph-circle-stop"),this.refreshBtn.hide(),this.autoReloadInterval=setInterval((function(){return t.reloadAdapter(!0)}),i.autoReloadPollTime))},i.prototype.toggleDataview=function(e){this.dataViewShowing&&!0!==e?(this.dataViewShowing=!1,this.dataBtn.toggleClass("active",!1),this.reloadAdapter()):this.dataViewShowing||!1===e||(this.dataViewShowing=!0,this.dataBtn.toggleClass("active",!0),this.loadVisual(o.plugins[s]))},i.prototype.flatten=function(e){if(e instanceof Array){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=this.flatten(e[i]);return t}if("object"!=typeof e)return e;t={},i=void 0;for(i in e)t[i]=this.flatten(e[i]);return t},i.prototype.createAndClickAnchorTagWithJsonData=function(e){var t=document.createElement("a");t.href="data:"+e,t.download="dataViews.json",t.click()},i.prototype.exportDataViews=function(){var e=this.flatten(this.lastUpdateOptions.dataViews),e="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));this.createAndClickAnchorTagWithJsonData(e)},i.prototype.createRefreshBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Reload_Visual_Button_Title"),t=this.refreshBtn=$('<i title="'+t+'" class="controlBtn glyphicon pbi-glyph-refresh"></i>');return t.on("click",(function(){return e.reloadAdapter()})),t},i.prototype.createAutoRefreshBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Toggle_Auto_Reload_Button_Title"),t=this.autoRefreshBtn=$('<i title="'+t+'" class="controlBtn glyphicon pbi-glyph-circle-play"></i>');return t.on("click",(function(){return e.toggleAutoReload()})),t},i.prototype.createDataBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Show_Dataview_Button_Title"),t=this.dataBtn=$('<i title="'+t+'" class="controlBtn glyphicon pbi-glyph-seedata"></i>');return t.on("click",(function(){return e.toggleDataview()})),t},i.prototype.createHelpBtn=function(){var e=this.host.getLocalizedString("DebugVisual_Help_Button_Title");return $('<a href="https://aka.ms/powerbideveloperhelp" target="_blank"><i title="'+e+'" class="controlBtn glyphicon pbi-glyph-question"></i></a>')},i.prototype.createSmilyBtn=function(){var e=this.host.getLocalizedString("DebugVisual_Feedback_Button_Title");return $('<a href="https://aka.ms/powerbideveloperfeedback" target="_blank"><i title="'+e+'" class="controlBtn glyphicon pbi-glyph-smiley"></i></a>')},i.prototype.createExportDataViewsBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Export_Data_Button_Title"),t=$('<i title="'+t+'" class="controlBtn glyphicon pbi-glyph-export"></i>');return t.on("click",(function(){return e.exportDataViews()})),t},i.prototype.buildControls=function(){var e=$('<div class="debugVisual-controlsContainer"></div>');return e.append(this.createRefreshBtn(),this.createAutoRefreshBtn(),this.createDataBtn(),this.createExportDataViewsBtn(),this.createHelpBtn(),this.createSmilyBtn()),e},i.prototype.buildErrorMessage=function(e){return _.template(i.errorMessageTemplate)(e)},i.prototype.setCapabilities=function(e){void 0===e&&(e=i.defaultCapabilities),_.isEqual(e,o.plugins.debugVisual.capabilities)||(this.setCustomizeQuery(e),o.plugins.debugVisual.capabilities=e,this.host.visualCapabilitiesChanged())},i.prototype.setCustomizeQuery=function(t){t&&t.subtotals&&n.visuals.CustomVisualPluginMethods.isSubtotalCustomizationCapabilityValid(t.subtotals)&&(o.plugins.debugVisual.customizeQuery=function(e){return n.visuals.CustomVisualPluginMethods.customizeQueryForSubtotals(e,t.subtotals)})},i.prototype.init=function(e){this.host=e.host;var t=this.container=$('<div class="debugVisualContainer"></div>'),i=this.visualContainer=$('<div class="visual"></div>');this.dataViewShowing=!1,t.append(i),e.element.append(t),(this.visualInitOptions=e).element=i,this.host.setToolbar(this.buildControls()),this.reloadAdapter()},i.prototype.update=function(e){e.viewport&&(this.visualInitOptions.viewport=e.viewport);var t=(this.lastUpdateOptions=e).viewport.height,i=e.viewport.width;this.visualContainer.height(t).width(i),this.adapter&&this.adapter.update&&this.adapter.update(e)},i.prototype.enumerateObjectInstances=function(e){return this.adapter&&this.adapter.enumerateObjectInstances?this.adapter.enumerateObjectInstances(e):[]},i.prototype.enumerateObjectInstancesAsync=function(e){return this.adapter&&this.adapter.enumerateObjectInstancesAsync?this.adapter.enumerateObjectInstancesAsync(e):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},i.prototype.enumerateObjectRepetitionAsync=function(){return this.adapter&&this.adapter.enumerateObjectRepetitionAsync?this.adapter.enumerateObjectRepetitionAsync():this.promiseFactory.resolve([])},i.prototype.onClearSelection=function(){if(this.adapter&&this.adapter.onClearSelection)return this.adapter.onClearSelection()},i.prototype.onRestoreSelection=function(e){if(this.adapter&&this.adapter.onRestoreSelection)return this.adapter.onRestoreSelection(e)},i.prototype.destroy=function(){this.adapter&&this.adapter.destroy&&this.adapter.destroy(),this.toggleAutoReload(!1),this.container=null,this.visualContainer=null,this.host.setToolbar(null),this.promiseFactory=null},i.defaultCapabilities={dataRoles:[{displayName:"Values",name:"Values",kind:n.VisualDataRoleKind.Measure}],dataViewMappings:[{table:{rows:{for:{in:"Values"}}}}]},i.capabilities=i.defaultCapabilities,i.autoReloadPollTime=300,i.errorMessageTemplate='\n            <div class="errorContainer">\n                <div class="errorMessage">\n                    <div ng-switch="$ctrl.errorInfo.overlayType">\n                        <div class="glyphicon pbi-glyph-<%= type %> glyph-med"></div>\n                    </div>\n                    <div>\n                        <div class="errorSpan"><%= message %></div>\n                        <span class="errorSeeMore"><%= moreMessage %></span>\n                        <a class="errorSeeMore" href="<%= moreLinkHref %>" target="_blank"><%= moreLinkText %></a>\n                    </div>\n                </div>\n            </div>\n        ',e.DebugVisual=i})(n.visuals||(n.visuals={}))})(powerbi=powerbi||{}),(function(e){var t;(t=e.visuals||(e.visuals={})).addPlugin("debugVisual",{name:"debugVisual",watermarkKey:"kpi",titleKey:e.data.createDisplayNameGetter("DebugVisual_ToolTip"),capabilities:t.system.DebugVisual.capabilities,create:function(){return new t.system.DebugVisual},systemVisual:!0})})(powerbi=powerbi||{}),(function(l){!(function(s){var a=jsCommon.PerfTimer,i=jsCommon.QueryStringUtil,o=jsCommon.Version,t=(Object.defineProperty(e.prototype,"sandbox",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.init=function(e){var t=this;this.element=e.element,this.tooltipService=e.host.tooltips();var i=null!==(i=this.plugin.apiVersion)&&void 0!==i?i:"2.0.0";e.featureSwitches&&(!this.updateMessagesProcessor&&e.featureSwitches.cvAggregateUpdateMessages&&o.ge(i,"4.2.0")&&(this.updateMessagesProcessor=new s.UpdateMessagesProcessor(this.proxy,this.plugin,this.telemetryService)),e.featureSwitches=this.filterFeatureSwitches(e.featureSwitches,this.iframeFeatureSwitches)),this.initializeContainerTimerId=window.setTimeout((function(){t.initializeContainerTimerId=void 0,t.element&&t.initContainer(e.viewport)}),0),this.proxy.invoke("init",[e])},e.prototype.update=function(e){return(this.updateMessagesProcessor||this.proxy).update(e)},e.prototype.enumerateObjectInstancesAsync=function(e){return this.proxy.invoke("enumerateObjectInstancesAsync",[e])},e.prototype.enumerateObjectRepetitionAsync=function(){return this.proxy.invoke("enumerateObjectRepetitionAsync",[])},e.prototype.onRestoreSelection=function(e){if(this.supportCustomVisualSelectionId())return this.proxy.invoke("onRestoreCvSelectionIds",[e]);e=e.selection.map((function(e){return l.data.services.DataViewObjectSerializer.serializeSelectorsByColumn(e)}));return this.proxy.invoke("onRestoreSelection",[{selection:e}])},e.prototype.visualHasMethod=function(e){return _.isFunction(this[e])},e.prototype.destroy=function(){void 0!==this.initializeContainerTimerId&&window.clearTimeout(this.initializeContainerTimerId),this.container&&this.container.remove(),this.hideTooltip(),this.updateMessagesProcessor&&this.updateMessagesProcessor.destroy(),this.proxy.invoke("destroy",[])},e.prototype.hideTooltip=function(){this.tooltipService&&this.tooltipService.enabled()&&this.tooltipService.hide({immediately:!0,isTouchEvent:!1})},e.prototype.initContainer=function(e){var t=this,i="customVisual:"+this.pluginName+":initContainer";this.marker=a.start(i);i=this.generateIFrameUrl();this.container=$(this.iframeHtml).attr({width:e.width,height:e.height}),this.initCSP(),this.element.empty().append(this.container),this.container.attr({src:i}),this.container.one("load",(function(){return t.onIFrameLoad()})),this.container.mouseout((function(){return t.hideTooltip()}))},e.prototype.initCSP=function(){var e=this.privilegeService.getWebAccessParameters(this.plugin);null!==e&&(e=e.join(" "),this.container.attr({csp:"default-src 'self' data: blob: 'unsafe-inline' 'unsafe-eval' "+e+";"}))},e.prototype.onIFrameLoad=function(){var e=this.container[0];this.proxy.ready(e.contentWindow),this.marker()},e.prototype.generateIFrameUrl=function(){l.common.getLocalize().currentLanguageLocale;var e=i.clearAllQueriesFromUrl(this.visualSandboxUri),t={locale:s.LocalizationResourceUtility.getLocale(l.common.getLocalize().currentLanguageLocale)};return 4===this.hostEnv&&(t.plugin=this.pluginName),i.getQueryStringValue("unmin")&&(t.unmin="1"),e+i.rebuildQueryString(t)},e.prototype.filterFeatureSwitches=function(i,s){var e={};return e=i&&s?_.reduce(Object.keys(i),(function(e,t){return-1<s.indexOf(t)&&(e[t]=i[t]),e}),{}):e},e.prototype.supportCustomVisualSelectionId=function(){var e;return(null===(e=this.proxy.plugin)||void 0===e?void 0:e.apiVersion)&&o.ge(this.proxy.plugin.apiVersion,"2.0.0")},e);function e(e){this.iframeFeatureSwitches=["dsrV2","cvSkipExtraResize"],this.pluginName=e.plugin.name,this.proxy=e.proxy,this.visualSandboxUri=e.visualSandboxUri,this.hostEnv=e.hostEnv;var t=_.map(e.sandboxProperties,(function(e){return s.CustomVisualsUtils.SandboxPropertyTranslator(e)})).join(" "),i="";e.plugin.capabilities&&e.plugin.capabilities.supportsKeyboardFocus&&(i=" tabindex=0"),this.iframeHtml='<iframe class="visual-sandbox empty-sandbox-visual" sandbox="'+t+'" name="visual-sandbox"'+i+"></iframe>",this.plugin=e.plugin,this.telemetryService=e.telemetryService,this.privilegeService=e.privilegeService;t={urlLauncher:e.urlLauncher,visualHostTooltip:e.visualHostTooltip,hostEnv:e.hostEnv,dataMultiSelectMode:e.dataMultiSelectMode,sandboxPropertiesString:t,allowModalDialog:_.isFunction(e.openIFrameDialog),dialogSandboxUri:e.dialogSandboxUri,openIFrameDialog:e.openIFrameDialog,getEmbedHostType:e.getEmbedHostType},t=new s.SandboxDelegate(this.proxy,e.promiseFactory,this.telemetryService,e.visualsLicenseService,t,e.instanceId,e.useCVLicenses);this.proxy.init(t,e.plugin);e=window.powerbi.visuals.plugins[this.pluginName];e.content,this.proxy.postMessage("loadWithoutResourcePackage",[e])}s.SandboxVisual=t;for(var n=0,r=["update","onStyleChanged","onViewModeChanged","onEditModeChanged","onClearSelection","onSelectObject","canResizeTo"];n<r.length;n++)!(function(e){t.prototype[e]||(t.prototype[e]=function(){return this.proxy.invoke(e,_.toArray(arguments))})})(r[n])})(l.visualHost||(l.visualHost={}))})(powerbi=powerbi||{}),(function(i){var e,s;function t(e){this.isolate=!0,this.promiseFactory=e.promiseFactory,this.plugin=e.plugin,this.tooltipService=e.visualHostTooltip}e=i.visualHost||(i.visualHost={}),s=jsCommon.Version,t.prototype.init=function(e){var t=e.host.tooltips();t&&(this.tooltipService=t),this.cvContainer=e.element,this.loadWithoutResourcePackage(this.plugin),this.hostServices=i.visualSandbox.createNonSandboxVisualHostServices(e.host,this.cvContainer,this.tooltipService);e={animation:e.animation,element:this.cvContainer,host:this.hostServices,interactivity:e.interactivity,style:e.style,viewport:e.viewport,localizationResources:this.plugin.localizationResources};this.visual.init(e)},t.prototype.update=function(e){e={dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewMode:e.viewMode,editMode:e.editMode,viewport:e.viewport,type:e.type,operationKind:i.VisualDataChangeOperationKind.Create,resizeMode:e.resizeMode,isInFocus:e.isInFocus,jsonFilters:e.jsonFilters||null};return this.visual.update(e)},t.prototype.enumerateObjectInstancesAsync=function(e){var t=this.promiseFactory.defer();if(this.visual.enumerateObjectInstances){e=this.visual.enumerateObjectInstances(e);return e&&e.instances&&t.resolve({instances:e.instances,containers:e.containers}),t.resolve(e),t.promise}},t.prototype.enumerateObjectRepetitionAsync=function(){var e=this.promiseFactory.defer(),t=this.visual.enumerateObjectRepetition();return e.resolve(t),e.promise},t.prototype.onRestoreSelection=function(e){var t=this.hostServices.selectionManager;if(t)return e&&e.selection&&(e=e.selection.map((function(e){return i.visuals.SelectionId.fromSelectorsByColumn(e)})),t.setSelectionIds(e),t.invokeOnSelectCallback(e)),!0},t.prototype.onClearSelection=function(){var e=this.hostServices.selectionManager;e&&(e.setSelectionIds([]),e.invokeOnSelectCallback([]))},t.prototype.loadWithoutResourcePackage=function(e){var t=e.apiVersion?this.isolate&&s.lt(e.apiVersion,"3.0.0"):this.isolate;this.plugin=i.visualSandbox.injectCustomVisual(e,!0,t),this.createAdapter()},t.prototype.visualHasMethod=function(e){return _.isFunction(this[e])},t.prototype.destroy=function(){this.hideTooltip(),this.visual.destroy&&this.visual.destroy(),this.cvContainer&&this.cvContainer.empty()},t.prototype.createAdapter=function(){this.plugin;var e=this.plugin;this.visual=i.extensibility.createVisualApiAdapter(e,e.create,this.promiseFactory,null),this.visual},t.prototype.hideTooltip=function(){this.tooltipService&&this.tooltipService.enabled()&&this.tooltipService.hide({immediately:!0,isTouchEvent:!1})},e.NonSandboxDelegate=t})(powerbi=powerbi||{}),(function(S){!(function(m){var e=S.data.services,o=S.data.DataViewTransform,n=e.DataViewObjectSerializer,y=e.DataViewTransformActionsSerializer,r=m.services.VisualObjectInstanceSerializer,i=m.services.VisualObjectRepetitionSerializer,l=S.visuals.CustomVisualSelectionId,f=jsCommon.Version;m.CustomVisualsFilterPropertyIdentifier={objectName:"general",propertyName:"filter"},m.CustomVisualsNotificationTypeMapping=((e={})[0]="icon",e[1]="unsupported environment blocker",e[2]="blocker",e);var u=((e={})[1]="Web",e[2]="PublishToWeb",e[4]="Desktop",e[8]="Embed",e[16]="ReportServer",e[32]="ExportReportHost",e[64]="Mobile",e);function s(e,t){if(e.visualHasData&&(!e.dataViews||0===e.dataViews.length))return!0;var i=t.capabilities,t=i&&i.supportsLandingPage,i=i&&i.supportsEmptyDataView,i=t&&(i||1===e.viewMode);return e.visualRequiresData&&e.dataViews&&0===e.dataViews.length&&!i}m.shouldNotUpdateVisual=s;Object.defineProperty(V.prototype,"sandbox",{get:function(){return!0},enumerable:!1,configurable:!0}),V.prototype.init=function(e){var t;this.host=e.host,this.visualAdapterHostServices=e.visualAdapterHostServices,this.tooltipService=this.host.tooltips(),this.featureSwitches=e.featureSwitches,this.tooltipService||(this.tooltipService=this.visualSandboxOptions.visualHostTooltip),this.element=e.element,this.resize(e.viewport),this.style=e.style;var i=null===(i=this.visualSandboxOptions)||void 0===i?void 0:i.hostEnv;this.isExportVisualsContentSupported=!!i&&!!(5&i)&&!(null===(t=e.interactivity)||void 0===t||!t.isVisualInteractive),e.interactivity=e.interactivity||{},e.interactivity.allowModalDialog=(null===(t=this.visualSandboxOptions)||void 0===t?void 0:t.allowModalDialog)&&e.interactivity.isVisualInteractive;e={animation:(this.initOptions=e).animation,interactivity:e.interactivity,viewport:e.viewport,style:m.VisualStyleSerializer.serializeVisualStyle(e.style),featureSwitches:e.featureSwitches,hostEnv:this.visualSandboxOptions?this.visualSandboxOptions.hostEnv:void 0,instanceId:this.instanceId,dataMultiSelectMode:this.visualSandboxOptions&&this.visualSandboxOptions.dataMultiSelectMode&&this.visualSandboxOptions.dataMultiSelectMode()};this.proxy.postMessage("init",[e])},V.prototype.update=function(e){var i=this,t=this.promiseFactory.defer();return s(e,this.proxy.plugin)?(e.updateCallBack&&e.updateCallBack(),t.resolve(null),t.promise):this.updateCore(e,(function(e,t){return i.proxy.postMessageAsync(e,t)}))},V.prototype.updateCore=function(p,h){var v,g;return __awaiter(this,void 0,S.Promise,(function(){var t,i,s,a,o,n,r,l,u,c,d=this;return __generator(this,(function(e){switch(e.label){case 0:if(a=[],(p.type&S.VisualUpdateType.All)!==S.VisualUpdateType.All&&(p.type&S.VisualUpdateType.Resize)===S.VisualUpdateType.Resize&&2!==p.resizeMode)return[3,11];if(l=this.proxy&&this.proxy.plugin&&this.proxy.plugin.apiVersion,p.dataViews&&p.dataViews[0]&&V.shouldSerializeDataView(l)){p.dataViews.length;try{null!==(g=null===(v=null==p?void 0:p.dataViews[0])||void 0===v?void 0:v.metadata)&&void 0!==g&&g.columns&&(p.dataViews[0].metadata.columns=_.filter(p.dataViews[0].metadata.columns,(function(e){return e.roles||""!==e.displayName})))}catch(e){}this.shouldUpdateWithCachedData(p)?s=this.dataViewSerializer.serializeDataViewMetadata(p.dataViews[0]):i=this.dataViewSerializer.serializeDataViewForCv(p.dataViews[0],this.proxy.plugin.capabilities,!1,f.gt(l,"3.5.9")),a=this.RestoreCvSelectionIds(this.visualSelections)}if(o=!!(p.dataViews&&0<p.dataViews.length&&p.dataViews[0].categorical&&p.dataViews[0].categorical.categories&&0<p.dataViews[0].categorical.categories.length&&p.dataViews[0].categorical.categories[0]&&p.dataViews[0].categorical.categories[0].values),n=[],r=void 0,o&&(n=p.dataViews[0].categorical.categories[0].values,p.dataViews[0].categorical.categories[0].source&&p.dataViews[0].categorical.categories[0].source.type&&(r=p.dataViews[0].categorical.categories[0].source.type.dateTime)),u=p&&p.dataTransforms&&p.dataTransforms.objects,l=void 0,!(u=u&&S.data.DataViewObjectDefinitions.getValue(u,m.CustomVisualsFilterPropertyIdentifier,null)))return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.host.getJSONFilter(u,this.dataViewSerializer.identitiesArray)];case 2:return l=e.sent(),[3,4];case 3:return e.sent(),l=[],[3,4];case 4:return[3,6];case 5:l=[],e.label=6;case 6:return(this.dataTransforms=p.dataTransforms,c={dataViewSource:p.visualDefinitionData?p.visualDefinitionData.dataViewSource:null,dataTransforms:y.serializeDataViewTransformActions(p.dataTransforms,this.proxy.plugin.capabilities.objects||{}),suppressAnimations:p.suppressAnimations,viewMode:p.viewMode,editMode:p.editMode,viewport:p.viewport,type:p.type,resizeMode:p.resizeMode,isInFocus:p.isInFocus,categoriesValues:o?n:null,isCategoryDate:r,serializedDataView:i,jsonFilters:l,dataViewMetadata:s,selections:a,updateId:p.updateId},this.shouldUpdateWithCachedData(p))?(this.lastDataViewSource=c.dataViewSource,c.dataViewSource=null,[4,h("updateWithCachedData",[c])]):[3,8];case 7:return t=e.sent(),[3,10];case 8:return this.lastDataViewSource=c.dataViewSource,[4,h("update",[c])];case 9:t=e.sent(),e.label=10;case 10:return[3,12];case 11:p.updateCallBack&&p.updateCallBack(),e.label=12;case 12:return window.setTimeout((function(){return d.resize(p.viewport)})),[2,t]}}))}))},V.prototype.enumerateObjectInstancesAsync=function(e){var a=this,o=this.promiseFactory.defer();return this.proxy.postMessageAsync("enumerateObjectInstances",[e]).then((function(e){var t=e;if(!t)return o.resolve(null);var i=a.proxy&&a.proxy.plugin&&a.proxy.plugin.apiVersion;if(t.instances){var s,t={instances:V.shouldSerializeDataView(i)?(s=a.dataViewSerializer.deserializeVisualObjectInstance(t.instances),r.deserialize(s)):r.deserialize(t.instances),containers:t.containers?r.deserializeContainers(t.containers):null};return o.resolve(t)}V.shouldSerializeDataView(i)&&(e=a.dataViewSerializer.deserializeVisualObjectInstance(e));e=r.deserialize(e);o.resolve(e)})).catch((function(e){return o.reject(e)})),o.promise},V.prototype.enumerateObjectRepetitionAsync=function(){var t=this;return this.enumerateObjectRepetitionAsyncPromise=this.promiseFactory.defer(),this.proxy.postMessageAsync("enumerateObjectRepetition",[]).then((function(e){if(!e)return t.enumerateObjectRepetitionAsyncPromise.resolve(null);e=i.deserialize(e);t.enumerateObjectRepetitionAsyncPromise.resolve(e)})).catch((function(e){return t.enumerateObjectRepetitionAsyncPromise.reject(e)})),this.enumerateObjectRepetitionAsyncPromise.promise},V.prototype.onSelect=function(e){var t;e=S.extensibility.legacy.isOldSelectEventArgs(e)?{data:n.deserializeSelectors((t=e).data),data2:n.deserializeSelectorsByColumn(t.data2),selectors:n.deserializeSelectors(e.selectors)}:{visualObjects:n.deserializeVisualObjects(e.visualObjects)},this.host.onSelect(e)},V.prototype.transformCvSelectionIdsAndSelect=function(e){if(this.visualSelections=[],e.selectionIds)for(var t={visualObjects:[]},i=0,s=e.selectionIds;i<s.length;i++){var a=s[i],a=new l(a.dataMap,a.measures),a=this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(a).getSelectorsByColumn();t.visualObjects.push({objectName:"dataPoint",selectorsByColumn:a}),this.visualSelections.push(a)}else t={visualObjects:[]};t.selectionMode=e.multiSelect?3:0,this.host.onSelect(t)},V.prototype.onRestoreCvSelectionIds=function(e){if(e.selection){e=this.RestoreCvSelectionIds(e.selection);return this.proxy.postMessage("onRestoreCvSelectionIds",[e]),!0}},V.prototype.RestoreCvSelectionIds=function(e){var s=this;this.visualSelections=e;for(var t=[],i=0,a=e;i<a.length;i++)!(function(e){var i={};if(!e)return;_.map(e.dataMap,(function(e,t){e.length,i[t]=[{identityIndex:s.dataViewSerializer.getIndexOfIdentity(e[0])}]})),t.push({serializedDataMap:i,measures:e.metadata})})(a[i]);return t},V.prototype.onUpdateResult=function(e){this.element.children("iframe.visual-sandbox").toggleClass("empty-sandbox-visual",!e)},V.prototype.onRelayUIEvent=function(e){var t=this.element.offset();if(null!=t){switch(e.type){case"click":case"mouseup":case"MSPointerUp":case"pointerup":var i=e.clientX?e.clientX+t.left:t.left,s=e.clientY?e.clientY+t.top:t.top,a=new MouseEvent(e.type,{screenX:e.screenX,screenY:e.screenY,clientX:i,clientY:s,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,buttons:e.buttons,relatedTarget:e.relatedTarget,bubbles:e.bubbles});break;case"tap":case"touchend":case"touchcancel":var o=e,n=this.createTouchList(o.touches,t),i=this.createTouchList(o.changedTouches,t),s=this.createTouchList(o.targetTouches,t);a=new TouchEvent(o.type,{touches:n,targetTouches:s,changedTouches:i,view:window,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,altKey:o.altKey,metaKey:o.metaKey});break;default:return}this.element.get(0).dispatchEvent(a)}},V.prototype.createTouchList=function(e,t){var i=[];if(null==e)return i;for(var s=0;s<e.length;s++){var a=e.item(s),a=new Touch({identifier:a.identifier,target:a.target,clientX:a.clientX?a.clientX+t.left:t.left,clientY:a.clientY?a.clientY+t.top:t.top,screenX:a.screenX,screenY:a.screenY,pageX:a.pageX?a.pageX+t.left:t.left,pageY:a.pageY?a.pageY+t.top:t.top,radiusX:a.radiusX,radiusY:a.radiusY,rotationAngle:a.rotationAngle,force:a.force});i.push(a)}return i},V.prototype.persistProperties=function(e){var t=e,e=t.merge||t.remove||t.replace?{merge:t.merge?r.deserialize(t.merge):null,remove:t.remove?r.deserialize(t.remove):null,replace:t.replace?r.deserialize(t.replace):null}:r.deserialize(e);this.host.persistProperties(e)},V.prototype.applyJsonFilter=function(e,t,i,s){e&&0<e.length&&8===e[0].filterType?this.applyIdentityFilter(e,t,i,s):this.host.applyJsonFilter(e,t,i,s)},V.prototype.refreshHostData=function(){this.host.refreshHostData()},V.prototype.onCustomVisualContextMenu=function(e){var t,i,s,a;e&&e.data&&e.position&&e.data[0]&&(s=new l(e.data[0].dataMap,e.data[0].measures),t=this.proxy&&this.proxy.plugin&&this.proxy.plugin.capabilities&&this.proxy.plugin.capabilities,this.proxy&&(this.proxy.isDebugVisual||this.proxy.plugin&&this.proxy.plugin.developerModeVisual)&&t&&(t.expandCollapse||t.drilldown)&&e.dataRoles,t&&t.expandCollapse&&((a=this.getRowsRoles(t))&&_.isEqual(a,e.dataRoles)&&(this.dataViewSerializer.sortSelectionIdDataMapAccordingToRows(s)?(i=this.dataViewSerializer.getNodeIndexOfSelectionId(s),_.isEmpty(i)&&(this.telemetryService.logEvent(S.telemetry.VisualEventAbortContextMenuExpandCollapse,{visualType:this.proxy.plugin.name}),e.dataRoles=i=void 0)):(this.telemetryService.logEvent(S.telemetry.VisualEventAbortContextMenuExpandCollapse,{visualType:this.proxy.plugin.name}),e.dataRoles=void 0))),a=this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(s),s=this.fixCoordinates([e.position.x,e.position.y]),e={data:(a=a.getSelectorsByColumn())?[a]:void 0,nodeIndex:i,position:{x:s[0],y:s[1]},copyArgs:e.copyArgs,dataRoles:e.dataRoles},this.host.onContextMenu(e))},V.prototype.onCustomVisualExpandCollapse=function(e){var t,i=e&&e.data,s=this.proxy&&this.proxy.plugin&&this.proxy.plugin.capabilities&&this.proxy.plugin.capabilities,a=this.getRowsRoles(s);this.proxy&&(this.proxy.isDebugVisual||this.proxy.plugin&&this.proxy.plugin.developerModeVisual);i&&null!=i.nodeIsCollapsed&&s&&s.expandCollapse&&a&&this.dataViewSerializer.sortSelectionIdDataMapAccordingToRows(i)?(t=this.dataViewSerializer.getNodeIndexOfSelectionId(i),_.isEmpty(t)?this.telemetryService.logEvent(S.telemetry.VisualEventAbortExpandCollapse,{visualType:this.proxy.plugin.name}):(s=this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(i).getSelectorsByColumn(),e.entireLevel?this.host.setLevelExpansionState({data:s,dataRoles:a,isCollapse:!i.nodeIsCollapsed,nodeIndex:t}):this.host.setNodeExpansionState({data:s,dataRoles:a,isCollapse:!i.nodeIsCollapsed,nodeIndex:t}))):this.telemetryService.logEvent(S.telemetry.VisualEventAbortExpandCollapse,{visualType:this.proxy.plugin.name})},V.prototype.exportVisualsContent=function(e,t,i,s,a){var o,n=this;this.isExportVisualsContentSupported?(o=new m.SandboxDownloadContentProxy(this.host,this.telemetryService,this.proxy.plugin,this.instanceId),t=this.proxy.plugin.name+"_"+t,o.exportVisualsContent(e,t,i,s,a).then((function(e){n.proxy.postMessage("handleExportVisualsContent",[e])}))):(s=null!==(s=this.visualSandboxOptions)&&void 0!==s&&s.hostEnv?u[this.visualSandboxOptions.hostEnv]:"Undefined",this.telemetryService.logEvent(S.telemetry.VisualEventDownloadContentBlockedDueToCVHostEnvironment,{visualType:this.proxy.plugin.name,cVHostEnvironment:s}),this.proxy.postMessage("handleExportVisualsContent",[{data:!1,promiseId:a}]))},V.prototype.onSwitchFocusModeState=function(e){this.host.onSwitchFocusModeState(e)},V.prototype.onDisplayWarningIcon=function(e,t){var i=S.visualHost.warningCodeForCV,s=S.visualHost.warningTitleLimit,a=S.visualHost.warningDetailsLimit,a=new S.visuals.CustomizedWarning(i,e.substr(0,s),t.substr(0,a));this.host.setWarnings([a]),this.telemetryService.logEvent(S.telemetry.VisualEventDisplayInfoIcon,{visualType:this.proxy.plugin.name,isCustom:this.proxy.plugin.custom})},V.prototype.getRowsRoles=function(e){e=e&&e.dataViewMappings&&e.dataViewMappings[0]&&e.dataViewMappings[0].matrix&&e.dataViewMappings[0].matrix.rows;return e?S.DataViewMapping.RoleNamesCollector.fromMatrixRows(e):void 0},V.prototype.fixCoordinates=function(e){if(/Edge\/\d./i.test(navigator.userAgent)&&0<$("body.fullScreen").length)return e;var t=this.element.offset();return e[0]=e[0]*this.scale+t.left,e[1]=e[1]*this.scale+t.top,e},V.prototype.deserializeIdentities=function(e){var t=this.proxy&&this.proxy.plugin&&this.proxy.plugin.apiVersion;if(e&&V.shouldSerializeDataView(t)){for(var i=[],s=0,a=e;s<a.length;s++){var o=a[s];i.push(this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(o))}return i&&_(i).map((function(e){return e.getSelectorsByColumn()})).compact().value()}return e&&_(e).map((function(e){return n.deserializeSelectorsByColumn(e)})).compact().value()},V.prototype.showTooltip=function(e){var t;this.tooltipService&&this.tooltipService.enabled()&&((t=_.cloneDeep(e)).coordinates=this.fixCoordinates(t.coordinates),t.identities=this.deserializeIdentities(e.identities),this.tooltipService.show(t))},V.prototype.moveTooltip=function(e){var t;this.tooltipService&&this.tooltipService.enabled()&&((t=_.cloneDeep(e)).coordinates=this.fixCoordinates(t.coordinates),t.identities=this.deserializeIdentities(e.identities),this.tooltipService.move(t))},V.prototype.hideTooltip=function(e){this.tooltipService&&this.tooltipService.enabled()&&this.tooltipService.hide(e)},V.prototype.getAvailableServicePlans=function(t){var i=this;this.telemetryService.logEvent(S.telemetry.VisualEventGetAvailableServicePlans,{visualType:this.proxy.plugin.name});var e,s=this.isLicenseUnsupportedEnv();s||!this.useCVLicenses?(s&&this.telemetryService.logEvent(S.telemetry.VisualEventLicenseIsUnsupportedEnv,{visualType:this.proxy.plugin.name}),this.useCVLicenses||this.telemetryService.logEvent(S.telemetry.VisualEventLicenseFeatureDisabled,{visualType:this.proxy.plugin.name}),e={promiseId:t,licenseInfoResult:{plans:void 0,isLicenseUnsupportedEnv:s||!this.useCVLicenses,isLicenseInfoAvailable:!1}},this.proxy.postMessage("handleLicenseResult",[e])):this.licenseService?this.licenseService.getServicePlans(this.proxy.plugin.name).then((function(e){if(!e)throw Error("servicePlansResponse is undefined");e={promiseId:t,licenseInfoResult:{plans:e.servicePlans,isLicenseUnsupportedEnv:s||!i.useCVLicenses,isLicenseInfoAvailable:e.isLicenseInfoAvailable}};i.proxy.postMessage("handleLicenseResult",[e])})).catch((function(){i.telemetryService.logEvent(S.telemetry.VisualEventServicePlansResponseIsUndefined,{visualType:i.proxy.plugin.name}),i.proxy.postMessage("handleLicenseResult",[{promiseId:t,licenseInfoResult:void 0}])})):(this.telemetryService.logEvent(S.telemetry.VisualEventLicenseServiceIsUndefined,{visualType:this.proxy.plugin.name}),this.proxy.postMessage("handleLicenseResult",[e={promiseId:t,licenseInfoResult:void 0}]))},V.prototype.notifyLicenseRequired=function(e,t){t={promiseId:t,licenseNotificationResult:void 0};null==e||!this.useCVLicenses||this.isLicenseUnsupportedEnv()!==(1===e)||0===e&&1!==this.host.getViewMode()?t.licenseNotificationResult=!1:(this.host.onNotifyLicense(e),t.licenseNotificationResult=!0),this.proxy.postMessage("handleLicenseNotificationResult",[t]),this.telemetryService.logEvent(S.telemetry.VisualEventNotifyLicenseRequired,{visualType:this.proxy.plugin.name,notificationType:null==e?"null":m.CustomVisualsNotificationTypeMapping[e],responseValue:t.licenseNotificationResult})},V.prototype.notifyFeatureBlocked=function(e,t){t={promiseId:t,licenseNotificationResult:void 0};!this.useCVLicenses||this.isLicenseUnsupportedEnv()?t.licenseNotificationResult=!1:(this.host.onNotifyFeatureBlocked(e),t.licenseNotificationResult=!0),this.proxy.postMessage("handleLicenseNotificationResult",[t]),this.telemetryService.logEvent(S.telemetry.VisualEventNotifyLicenseFeatureBlocked,{visualType:this.proxy.plugin.name,responseValue:t.licenseNotificationResult})},V.prototype.clearLicenseNotification=function(e){e={promiseId:e,licenseNotificationResult:void 0};this.useCVLicenses?(this.host.onClearLicenseNotification(),e.licenseNotificationResult=!0):e.licenseNotificationResult=!1,this.proxy.postMessage("handleLicenseNotificationResult",[e]),this.telemetryService.logEvent(S.telemetry.VisualEventClearLicenseNotification,{visualType:this.proxy.plugin.name,responseValue:e.licenseNotificationResult})},V.prototype.loadMoreData=function(s){var a=this;this.canHandleLoadMoreData&&(void 0===s&&(s=!0),this.visualAdapterHostServices&&(this.canHandleLoadMoreData=!1,this.visualAdapterHostServices.startProgressBar(),this.visualAdapterHostServices.getNextDataSegment().then((function(e){var t,i;a.proxy&&a.proxy.plugin&&V.shouldSerializeDataView(a.proxy.plugin.apiVersion)&&e&&e.result&&e.result.dataReaderResult&&e.result.dataReaderResult.dataView?(a.dataViewSerializer.identitiesArray,t=a.proxy.plugin,i=e.result.dataReaderResult.dataView,t&&t.apiVersion&&!f.lt(t.apiVersion,"2.0.0")&&(i=o.apply({prototype:i,objectDescriptors:t.capabilities?t.capabilities.objects:null,dataViewMappings:t.capabilities?t.capabilities.dataViewMappings:null,transforms:a.dataTransforms,colorAllocatorFactory:S.visuals.createColorAllocatorFactory(),dataRoles:t.capabilities?t.capabilities.dataRoles:null,drillCapabilities:t.capabilities&&t.capabilities.drilldown,expandCollapseCapabilties:t.capabilities&&t.capabilities.expandCollapse,visualStyle:a.style,keepAllMetadataColumnsCapability:!!t.capabilities&&t.capabilities.keepAllMetadataColumns,featureSwitches:a.featureSwitches}).dataViews[0]),i=a.dataViewSerializer.serializeDataViewForCv(i,a.proxy.plugin.capabilities,!0,!1,e.secondToLastNodesIndex),t.capabilities&&t.capabilities.expandCollapse&&a.visualAdapterHostServices.mergeNewSegmentDataView(e),a.proxy.postMessageAsync("handleLoadMoreDataResult",[i,s]).then((function(){e.performanceActivity&&e.performanceActivity.resolve()}))):a.proxy.postMessageAsync("handleLoadMoreDataResult",[e&&e.result,s]).then((function(){e.performanceActivity&&e.performanceActivity.resolve()})),a.canHandleLoadMoreData=!0})).catch((function(e){a.visualAdapterHostServices.stopProgressBar(),a.canHandleLoadMoreData=!0}))))},V.prototype.getResourceUrl=function(e,t){var i=this;this.host.authenticationService&&this.host.authenticationService().getResourceUrl(e).then((function(e){i.proxy.postMessage("handleGetResourceUrlResult",[{payload:e,isError:!1,promiseId:t}])})).catch((function(e){i.proxy.postMessage("handleGetResourceUrlResult",[{payload:e,isError:!0,promiseId:t}])}))},V.prototype.getAADAuthenticationToken=function(e,t){var i=this;this.host.authenticationService&&this.host.authenticationService().getAADAuthenticationToken(e).then((function(e){e={payload:e.payload,isError:!1,promiseId:t,resourceUrl:e.resourceUrl};i.proxy.postMessage("handleGetAADAuthenticationTokenResult",[e])})).catch((function(e){i.proxy.postMessage("handleGetAADAuthenticationTokenResult",[{payload:e,isError:!0,promiseId:t}])}))},V.prototype.getAADToken=function(e,t){var i=this;this.host.authenticationService&&this.host.authenticationService().getAADToken(e).then((function(e){i.proxy.postMessage("handleGetAADTokenResult",[{payload:e,isError:!1,promiseId:t}])})).catch((function(e){i.proxy.postMessage("handleGetAADTokenResult",[{payload:e,isError:!0,promiseId:t}])}))},V.prototype.getWACToken=function(e,t,i,s){var a=this;this.host.authenticationService&&this.host.authenticationService().getWACToken(e,t,i).then((function(e){e={payload:e.accessToken,wacToken:e,isError:!1,promiseId:s};a.proxy.postMessage("handleGetWACTokenResult",[e])})).catch((function(e){a.proxy.postMessage("handleGetWACTokenResult",[{payload:e,isError:!0,promiseId:s}])}))},V.prototype.launchUrl=function(e){var t;this.visualSandboxOptions&&_.isFunction(this.visualSandboxOptions.urlLauncher)&&(t=this.proxy.plugin.name,this.visualSandboxOptions.urlLauncher(e,t))},V.prototype.openModalDialog=function(e,t,i,s){var a,o,n,r,l,u,c,d=this;_.isFunction(this.visualSandboxOptions.openIFrameDialog)&&null!==(u=null===(o=this.initOptions)||void 0===o?void 0:o.interactivity)&&void 0!==u&&u.allowModalDialog?V.dialogBlockedVisuals[this.proxy.plugin.name]?(c={promiseId:s,isError:!0,data:{error:m.VisualErrorType.BlockedByUser}},this.proxy.postMessage("handleModalDialogResult",[c])):(t.position&&1===t.position.type&&(n=this.fixCoordinates([t.position.left,_.clamp(t.position.top,0,t.position.top)]),t.position.left=n[0],t.position.top=n[1]),a=new m.SandboxDialogProxy(m.createWindowMessageProxy(this.promiseFactory),this.telemetryService,this.proxy.plugin,this.instanceId),o=this.proxy.plugin.displayName,u=this.visualSandboxOptions.dialogSandboxUri,n=this.visualSandboxOptions.sandboxPropertiesString,i=JSON.stringify(i),r=this.generateDialogScript(e,i),l=this.proxy.plugin.content.css,(u=this.visualSandboxOptions.openIFrameDialog({title:o,subTitle:t.title,iconUrl:this.proxy.plugin.iconUrl,size:t.size,position:t.position,actionButtons:t.actionButtons,sandboxProperties:n,iframeSrc:u,onIframeLoad:function(e){e.contentWindow&&(a.iframe=e).contentWindow.postMessage({messageType:"DialogContent",style:l,scriptContent:r},"*")},onBlockRequest:function(e){V.dialogBlockedVisuals[d.proxy.plugin.name]=e},onClose:function(e){a.dialog=null;e={promiseId:s,data:{actionId:e,resultState:a.modalDialogState}};d.proxy.postMessage("handleModalDialogResult",[e]),a.destroy()}}))?a.dialog=u:(c={promiseId:s,isError:!0,data:{error:m.VisualErrorType.AlreadyOpen}},this.proxy.postMessage("handleModalDialogResult",[c]))):(c={promiseId:s,isError:!0,data:{error:m.VisualErrorType.NotAllowed}},this.proxy.postMessage("handleModalDialogResult",[c]))},V.prototype.getStorageData=function(e,t,i){var s,t=S.localVisualStorageService.getData(null===(s=S.session.getUserInfo())||void 0===s?void 0:s.puid,e,t);this.proxy.postMessage("handleGetStorageData",[{promiseId:i,data:t}])},V.prototype.setStorageData=function(e,t,i,s){var a,i=S.localVisualStorageService.setData(null===(a=S.session.getUserInfo())||void 0===a?void 0:a.puid,e,t,i);this.proxy.postMessage("handleSetStorageData",[{promiseId:s,freeSpace:i,isError:i<=0}])},V.prototype.removeStorageData=function(e,t){var i;S.localVisualStorageService.remove(null===(i=S.session.getUserInfo())||void 0===i?void 0:i.puid,e,t)},V.prototype.stopProgressBar=function(){this.visualAdapterHostServices&&this.visualAdapterHostServices.stopProgressBar()},V.prototype.onRestoreSelection=function(e){return this.proxy.postMessage("onRestoreSelection",[e]),!0},V.prototype.onClearSelection=function(){this.visualSelections=[],this.proxy.postMessage("onRestoreSelection",[])},V.prototype.destroy=function(){this.dataViewSerializer&&this.dataViewSerializer.flushIdentitiesArray(),this.enumerateObjectRepetitionAsyncPromise&&this.enumerateObjectRepetitionAsyncPromise.resolve(null),this.destroyed=!0,this.proxy.postMessage("destroy",[]),this.proxy.destroy()},V.prototype.resize=function(e){this.scale=e.scale,this.element&&!this.destroyed&&this.element.children().css({width:e.width,height:e.height})},V.shouldSerializeDataView=function(e){return!(!e||!S.visualSandbox.SandboxDataViewSerializer)&&(f.gt(e,"2.0.0")||f.eq(e,"2.0.0"))},V.prototype.shouldUpdateWithCachedData=function(e){return e.visualDefinitionData&&e.visualDefinitionData.dataViewSource&&this.lastDataViewSource||this.dataViewSerializer.flushIdentitiesArray(),e.visualDefinitionData&&e.visualDefinitionData.dataViewSource&&e.visualDefinitionData.dataViewSource===this.lastDataViewSource},V.prototype.generateDialogScript=function(e,t){return this.proxy.plugin.content.js+'\nconst host = {\n                setResult: (result) => {\n                    const msg = JSON.stringify({ eventName: "onDialogSetState", arguments: [result] });\n                    parent.postMessage(msg, "*");\n                },\n                close: (actionId, result) => {\n                    const msg = JSON.stringify({ eventName: "onDialogClose", arguments: [actionId, result] });\n                    parent.postMessage(msg, "*");\n                }\n            };\n\n            const element = document.body;\n            const dialogConstructionOptions = { host: host, element: element };\n            '+this.proxy.plugin.name+".default.createModalDialog('"+e+"', dialogConstructionOptions, "+t+');\n            \n            const msg = JSON.stringify( {eventName: "onDialogResize", arguments: [document.body.scrollWidth, document.body.scrollHeight] });\n            parent.postMessage(msg, "*");'},V.prototype.applyIdentityFilter=function(e,t,i,s){var a=e[0].target,e=this.proxy&&this.proxy.plugin&&this.proxy.plugin.apiVersion;f.lt(e,"3.9.0")||(s=a&&0<a.length?0:1,a=this.dataViewSerializer.convertOpaqueIdentitiesToScopeIds(a),this.host.applyIdentityFilter(a,t,i,s))},V.prototype.isLicenseUnsupportedEnv=function(){var e=this.visualSandboxOptions&&this.visualSandboxOptions.hostEnv&&!!(18&this.visualSandboxOptions.hostEnv),t=this.visualSandboxOptions&&this.visualSandboxOptions.getEmbedHostType&&this.visualSandboxOptions.getEmbedHostType()&&!!(7&this.visualSandboxOptions.getEmbedHostType());return!(!e&&!t)},V.dialogBlockedVisuals={},e=V;function V(e,t,i,s,a,o,n){this.visualSandboxOptions=a,this.instanceId=o,this.useCVLicenses=n,this.dataTransforms={},this.canHandleLoadMoreData=!0,this.proxy=e,this.promiseFactory=t,this.destroyed=!1,this.dataViewSerializer=new S.visualSandbox.SandboxDataViewSerializer,this.visualSelections=[],this.telemetryService=i,this.licenseService=s}m.SandboxDelegate=e})(S.visualHost||(S.visualHost={}))})(powerbi=powerbi||{}),(function(r){var l;function e(e,t,i){var s=this;this.proxy=e,this.plugin=t,this.telemetryService=i,this.firstUpdateMessageSent=!1,this.isPluginReady=!1,this.pluginReadyDeferred=new r.Deferred,this.proxy.setPluginReadyHandler((function(){s.isPluginReady=!0,s.pluginReadyDeferred.resolve()})),this.updateWithDataDeferred=new r.Deferred,r.Promise.allSettled([this.pluginReadyDeferred.promise,this.updateWithDataDeferred.promise]).then((function(){s.postUpdateMessage()}))}l=r.visualHost||(r.visualHost={}),e.prototype.update=function(e){var t,i,s;if(0<(null===(t=e.dataViews)||void 0===t?void 0:t.length)&&null!==(i=e.visualDefinitionData)&&void 0!==i&&i.dataViewSource){if(e.visualDefinitionData.dataViewSource===this.lastDataViewSource)return r.Promise.resolve(void 0);this.lastDataViewSource=null===(s=e.visualDefinitionData)||void 0===s?void 0:s.dataViewSource}if(this.firstUpdateMessageSent)return this.proxy.update(e);if(this.updateMessage){this.updateMessage.type|=e.type,0<(null===(s=e.dataViews)||void 0===s?void 0:s.length)&&(this.updateMessage.dataViews=e.dataViews);var a,o=e,n=_.clone(this.updateMessage);for(a in o)"type"!==a&&"dataViews"!==a&&void 0!==o[a]&&(n[a]=o[a]);this.updateMessage=n}else this.updateMessage=e,this.updateMessageSentDeferred=new r.Deferred;return l.shouldNotUpdateVisual(e,this.plugin)||this.updateWithDataDeferred.resolve(),this.updateMessageSentDeferred.promise},e.prototype.postUpdateMessage=function(){var e=this;this.updateMessage&&this.proxy.update(this.updateMessage).then((function(){e.updateMessage=void 0,e.firstUpdateMessageSent=!0,e.updateMessageSentDeferred.resolve()}))},e.prototype.destroy=function(){this.isPluginReady&&this.firstUpdateMessageSent||this.telemetryService&&this.telemetryService.logEvent(r.telemetry.VisualEventUpdateTimeOut,{visualType:this.plugin.name,parentId:this.telemetryService.root.id}),this.updateMessage=void 0},l.UpdateMessagesProcessor=e})(powerbi=powerbi||{}),(function(a){var r,l,u;function c(){}r=a.visualHost||(a.visualHost={}),l=a.contracts.ResourcePackageItemType,u=jsCommon.Trace,c.cloneThemeCollection=function(e){return _.clone(e)},c.loadHighContrastTheme=function(e,t,i,s,a){return a&&!i.isThemeLoaded(a)?c.loadTheme(2,e,t,i,s,a):e.resolve()},c.loadThemeAndBaseTheme=function(t,e,i,s,a){try{var o=[],n=a.customTheme,r=a.baseTheme&&a.baseTheme.name;n&&!i.isThemeLoaded(n.name)&&o.push(c.loadTheme(a.customTheme.type,t,e,i,s,n.name,n.version,!0)),r&&!i.isThemeLoaded(r)&&o.push(c.loadTheme(a.baseTheme.type,t,e,i,s,r));var l=t.defer();return t.all(o).finally((function(){var e=!0;n&&!i.isThemeLoaded(n.name)&&u.error("Error loading custom theme",e=!1),r&&!i.isThemeLoaded(r)&&u.error("Error loading base theme",e=!1),l.resolve(e)})),l.promise}catch(e){return u.error("Error loading report theme - "+c.getLoadError(e)),t.resolve(!1)}},c.loadTheme=function(e,t,i,s,a,o,n,r){return 1===e?c.loadRegisteredResourceTheme(t,i,s,a,o,n):2===e?c.loadSharedResourceTheme(o,a,s,i,t,n,r):void 0},c.getLoadError=function(e){return r.ResourcePackageReferenceResolver.getLoadAndResolveErrorReason(e)},c.loadRegisteredResourceTheme=function(e,t,i,s,a,o){return r.ResourcePackageReferenceResolver.loadRegisteredResourceAsDecodedString(e,t,s,a).then((function(e){c.resolveLoadedTheme(a,e,i,o)})).catch((function(e){u.error("Error loading theme - "+c.getLoadError(e))}))},c.loadSharedResourceTheme=function(t,e,i,s,a,o,n){return r.ResourcePackageReferenceResolver.loadAndResolveItemContent(e,{packageType:2,itemName:t},s,a,{itemTypeFromReference:n?l.CustomTheme:l.BaseTheme}).then((function(e){c.resolveLoadedTheme(t,e,i,o)})).catch((function(e){u.error("Error loading base theme "+t+" - "+c.getLoadError(e))}))},c.resolveLoadedTheme=function(e,t,i,s){i.isThemeLoaded(e)||(t=a.common.parseCustomVisualTheme(t))&&i.addCustomTheme(e,t,s)},r.ThemeUtils=c})(powerbi=powerbi||{}),(function(r){var l;(function(s){var o=jsCommon.Utility,a=window;s.getHttpResourceItemProxy=function(e){var t=r.visualSandbox.getResourceLoaderUrl(),i=!0===a.resourceLoaderIncludePackageId;return s.createHttpResourceItemProxy(e,t,i)},s.getSharedResourceItemProxy=function(e){var t=e.getAbsoluteUri("/sharedresources");return s.createHttpResourceItemProxy(e,t,!1)},s.createHttpResourceItemProxy=function(e,t,i){return new n(e,t,i)};var n=(e.prototype.get=function(e,t,i,s){var a=this.uri;this.includePackageIdInUri&&(a=this.uri+e+"/");a=o.urlCombine(a,_.map(i.split("/"),(function(e){return encodeURIComponent(e)})).join("/")),i=this.httpService.powerbiRequestOptions();return i.timeout=l.resourceLoaderHttpTimeout,i.responseType="text",s&&null!=s.retries&&(i.retryCount=s.retries),this.httpService.get(a,i).then((function(e){return e.data}))},e.prototype.getBlob=function(e,t,i,s){var a=this.uri;this.includePackageIdInUri&&(a=this.uri+e+"/");a=o.urlCombine(a,encodeURIComponent(i)),i=this.httpService.powerbiRequestOptions();return i.responseType=jsCommon.HttpConstants.Blob,s&&null!=s.retries&&(i.retryCount=s.retries),this.httpService.get(a,i).then((function(e){return e.data}))},e);function e(e,t,i){this.httpService=e,this.uri=t,this.includePackageIdInUri=i}})((l=r.visualHost||(r.visualHost={})).proxies||(l.proxies={}))})(powerbi=powerbi||{});;
!(function(){var W={762:function(b,n,t){"use strict";t.r(n),t.d(n,{__extends:function(){return S},__assign:function(){return f},__rest:function(){return y},__decorate:function(){return x},__param:function(){return m},__metadata:function(){return p},__awaiter:function(){return h},__generator:function(){return v},__createBinding:function(){return C},__exportStar:function(){return g},__values:function(){return a},__read:function(){return c},__spread:function(){return i},__spreadArrays:function(){return $},__spreadArray:function(){return I},__await:function(){return M},__asyncGenerator:function(){return B},__asyncDelegator:function(){return R},__asyncValues:function(){return j},__makeTemplateObject:function(){return U},__importStar:function(){return A},__importDefault:function(){return V},__classPrivateFieldGet:function(){return N},__classPrivateFieldSet:function(){return K}});var u=function(e,r){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(o[d]=l[d])})(e,r)};function S(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}u(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}var f=function(){return(f=Object.assign||function(r){for(var o,l=1,d=arguments.length;l<d;l++)for(var s in o=arguments[l])Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s]);return r}).apply(this,arguments)};function y(e,r){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&r.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(l=Object.getOwnPropertySymbols(e);d<l.length;d++)r.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(e,l[d])&&(o[l[d]]=e[l[d]])}return o}function x(e,r,o,l){var L,d=arguments.length,s=d<3?r:null===l?l=Object.getOwnPropertyDescriptor(r,o):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,o,l);else for(var _=e.length-1;_>=0;_--)(L=e[_])&&(s=(d<3?L(s):d>3?L(r,o,s):L(r,o))||s);return d>3&&s&&Object.defineProperty(r,o,s),s}function m(e,r){return function(o,l){r(o,l,e)}}function p(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)}function h(e,r,o,l){return new(o||(o=Promise))(function(s,L){function _(E){try{w(l.next(E))}catch(O){L(O)}}function k(E){try{w(l.throw(E))}catch(O){L(O)}}function w(E){E.done?s(E.value):(function(s){return s instanceof o?s:new o(function(L){L(s)})})(E.value).then(_,k)}w((l=l.apply(e,r||[])).next())})}function v(e,r){var l,d,s,L,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return L={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(L[Symbol.iterator]=function(){return this}),L;function _(w){return function(E){return (function(w){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,d&&(s=2&w[0]?d.return:w[0]?d.throw||((s=d.return)&&s.call(d),0):d.next)&&!(s=s.call(d,w[1])).done)return s;switch(d=0,s&&(w=[2&w[0],s.value]),w[0]){case 0:case 1:s=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,d=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===w[0]||2===w[0])){o=0;continue}if(3===w[0]&&(!s||w[1]>s[0]&&w[1]<s[3])){o.label=w[1];break}if(6===w[0]&&o.label<s[1]){o.label=s[1],s=w;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(w);break}s[2]&&o.ops.pop(),o.trys.pop();continue}w=r.call(e,o)}catch(E){w=[6,E],d=0}finally{l=s=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}})([w,E])}}}var C=Object.create?function(e,r,o,l){void 0===l&&(l=o),Object.defineProperty(e,l,{enumerable:!0,get:function(){return r[o]}})}:function(e,r,o,l){void 0===l&&(l=o),e[l]=r[o]};function g(e,r){for(var o in e)"default"!==o&&!Object.prototype.hasOwnProperty.call(r,o)&&C(r,e,o)}function a(e){var r="function"==typeof Symbol&&Symbol.iterator,o=r&&e[r],l=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&l>=e.length&&(e=void 0),{value:e&&e[l++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,r){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var d,L,l=o.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(d=l.next()).done;)s.push(d.value)}catch(_){L={error:_}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(L)throw L.error}}return s}function i(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(c(arguments[r]));return e}function $(){for(var e=0,r=0,o=arguments.length;r<o;r++)e+=arguments[r].length;var l=Array(e),d=0;for(r=0;r<o;r++)for(var s=arguments[r],L=0,_=s.length;L<_;L++,d++)l[d]=s[L];return l}function I(e,r,o){if(o||2===arguments.length)for(var s,l=0,d=r.length;l<d;l++)(s||!(l in r))&&(s||(s=Array.prototype.slice.call(r,0,l)),s[l]=r[l]);return e.concat(s||r)}function M(e){return this instanceof M?(this.v=e,this):new M(e)}function B(e,r,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,l=o.apply(e,r||[]),s=[];return d={},L("next"),L("throw"),L("return"),d[Symbol.asyncIterator]=function(){return this},d;function L(D){l[D]&&(d[D]=function(P){return new Promise(function(G,X){s.push([D,P,G,X])>1||_(D,P)})})}function _(D,P){try{!(function(D){D.value instanceof M?Promise.resolve(D.value.v).then(w,E):O(s[0][2],D)})(l[D](P))}catch(G){O(s[0][3],G)}}function w(D){_("next",D)}function E(D){_("throw",D)}function O(D,P){D(P),s.shift(),s.length&&_(s[0][0],s[0][1])}}function R(e){var r,o;return r={},l("next"),l("throw",(function(d){throw d})),l("return"),r[Symbol.iterator]=function(){return this},r;function l(d,s){r[d]=e[d]?function(L){return(o=!o)?{value:M(e[d](L)),done:"return"===d}:s?s(L):L}:s}}function j(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=e[Symbol.asyncIterator];return r?r.call(e):(e=a(e),o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o);function l(s){o[s]=e[s]&&function(L){return new Promise(function(_,k){!(function(s,L,_,k){Promise.resolve(k).then((function(w){s({value:w,done:_})}),L)})(_,k,(L=e[s](L)).done,L.value)})}}}function U(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}var z=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r};function A(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&C(r,e,o);return z(r,e),r}function V(e){return e&&e.__esModule?e:{default:e}}function N(e,r,o,l){if("a"===o&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof r?e!==r||!l:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?l:"a"===o?l.call(e):l?l.value:r.get(e)}function K(e,r,o,l,d){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!d)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof r?e!==r||!d:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===l?d.call(e,o):d?d.value=o:r.set(e,o),o}},887:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f,y,m,u=t(619),S=t(240);(function(h){var v,a;(a=v=h.AlertKind||(h.AlertKind={}))[a.Info=0]="Info",a[a.Warning=1]="Warning",a[a.Security=2]="Security",a[a.Error=3]="Error",a[a.Hidden=4]="Hidden";var C=(function(){function a(c){this.kindToIcon={info:"info",warning:"warning",security:"blockedsite",error:"error"},this._element=c[0]}return a.prototype.$onInit=function(){if(void 0===this.kind&&(this.kind=v[v.Hidden]),!this.validKindString(this.kind))throw Error("Unknown alert kind: "+this.kind)},a.prototype.alertKind=function(){if(this.kind)return this.setAlertHeight(this._element,this.kind),this.kind.toLowerCase()},a.prototype.iconName=function(){return this.kindToIcon[this.kind]},a.prototype.getInfoMessage=function(){return this.messageInfo},a.prototype.getWarningMessage=function(){return this.messageWarning},a.prototype.getSecurityMessage=function(){return this.messageSecurity},a.prototype.getErrorMessage=function(){return this.messageError},a.stringToKind=function(c){if(void 0!==c){var i=S.ElementUtil.capitalizeString(c.trim());return v[i]}},a.prototype.validKindString=function(c){return void 0!==a.stringToKind(c)},a.prototype.setAlertHeight=function(c,i){var $=c,I=$.querySelector(".alert").scrollHeight;$.setAttribute("style","hidden"!==i?"height: "+I+"px;":"height: 0px;")},a.prototype.isCompact=function(){return!!S.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},a.$inject=["$element"],a})();h.AlertController=C;var g=function(){this.bindings={kind:"<",messageInfo:"@",messageWarning:"@",messageSecurity:"@",messageError:"@"},this.templateUrl="components/alert/alert.html",this.controller=C,this.require={contextCtrlr:"?^^pbiContext"}};h.AlertComponent=g,u.StyleLibrary.application().component("pbiAlert",new g)})((m=(y=f||(f={})).stylelibrary||(y.stylelibrary={})).components||(m.components={}))},947:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var x,m,h,u=t(762),S=t(619),f=t(258),y=t(240);(function(C){var g,i;(i=g=C.ButtonKind||(C.ButtonKind={}))[i.Box=0]="Box",i[i.Text=1]="Text",i[i.Icon=2]="Icon";var a=(function(i){function $(){var I=null!==i&&i.apply(this,arguments)||this;return I.iconSize=f.IconSize[f.IconSize.Small].toLowerCase(),I}return u.__extends($,i),$.prototype.$onInit=function(){if(void 0===this.primary&&(this.primary="false"),void 0===this.kind&&(this.kind=$.kindToString(g.Box)),!this.validKindString(this.kind))throw Error("Unknown button kind: "+this.kind)},$.prototype.buttonKind=function(){return this.kind},$.prototype.iconSizeName=function(){return this.showIcon()&&this.hasLabel()?(void 0!==this.iconSize&&f.IconSize[f.IconSize.Small].toLowerCase(),this.isCompact()?f.IconSize[f.IconSize.Mini].toLowerCase():f.IconSize[f.IconSize.Small].toLowerCase()):this.iconSize},$.prototype.isPrimary=function(){return y.ElementUtil.attributeStringToBoolean(this.primary,$.PRIMARY_VALUES)},$.prototype.showIcon=function(){return $.stringToKind(this.kind)===g.Icon||!!this.iconName},$.prototype.isIcon=function(){return $.stringToKind(this.kind)===g.Icon},$.prototype.isText=function(){return $.stringToKind(this.kind)===g.Text},$.prototype.isBox=function(){return void 0===this.kind||$.stringToKind(this.kind)===g.Box},$.prototype.validKindString=function(I){return void 0!==$.stringToKind(I)},$.stringToKind=function(I){if(void 0!==I){var M=y.ElementUtil.capitalizeString(I.trim());return g[M]}},$.kindToString=function(I){return g[I]},$.prototype.isCompact=function(){return!!y.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},$.PRIMARY_VALUES=["primary","true",""],$})(y.BaseElement);C.ButtonController=a;var c=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",primary:"@",kind:"@",iconName:"@",iconSize:"@",dynamicLabelUpdate:"@"},this.require={contextCtrlr:"?^^pbiContext"},this.templateUrl="components/button/button.html",this.controller=a};C.ButtonComponent=c,S.StyleLibrary.application().component("pbiButton",new c)})((h=(m=x||(x={})).stylelibrary||(m.stylelibrary={})).components||(h.components={}))},693:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(a){function c(){var i=null!==a&&a.apply(this,arguments)||this;return i._context="",i}return u.__extends(c,a),Object.defineProperty(c.prototype,"context",{get:function(){return this._context},set:function($){this._context=$},enumerable:!1,configurable:!0}),c.prototype.$onInit=function(){void 0===this.labelPosition&&(this.labelPosition="right")},c.prototype.proxyChange=function(){this.modelCtrlr.$setViewValue(this.proxyModel)},c.prototype.isChecked=function(){return!!this.proxyModel},c.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},c})(f.BaseElement);v.CheckboxController=C;var g=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",proxyModel:"<ngModel",labelPosition:"@",dynamiclabel:"@dynamicLabel",arialabel:"@ariaLabel",arialabelledby:"@ariaLabelledby",ariadescribedby:"@ariaDescribedby"},this.controller=C,this.templateUrl="components/checkbox/checkbox.html",this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"}};v.CheckboxComponent=g,S.StyleLibrary.application().component("pbiCheckbox",new g)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={}))},240:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ElementUtil=n.BaseElement=n.DisableableElement=n.ContextualUtil=void 0;var u=t(762);n.ContextualUtil=(function(){function m(){}return m.isContext=function(p,h){return void 0!==p&&p.split(" ").filter((function(v){return v===h})).length>0},m})();var f=(function(){function m(){}return m.prototype.isDisabled=function(){return void 0!==this.disabled&&this.disabled},m})();n.DisableableElement=f,n.BaseElement=(function(m){function p(){var h=null!==m&&m.apply(this,arguments)||this;return h.internalId="_pbi",h}return u.__extends(p,m),p.prototype.hasLabel=function(){var h=this.hasNoLabelAttribute(),v=this.hasValidNoLabelAttribute(),C=this.hasSpecifiedNoLabelValue(),g=this.hasLabelAttribute(),a=this.hasValidLabelAttribute(),c=!h,i=v&&!C,I=!g,M=g&&!a;return!(c&&I)&&!(c&&M)&&(!(!c||!a)||!(i&&I)&&!(i&&M)&&(!(!i||!a)||!(C&&I)&&!(C&&M)&&(C&&a?!this.noLabelValue():void 0)))},p.prototype.labelKey=function(){return this.label},p.prototype.createInternalId=function(){return this.id?this.id+this.internalId:this.id},p.prototype.hasLabelAttribute=function(){return void 0!==this.label},p.prototype.hasValidLabelAttribute=function(){return!(!this.hasLabelAttribute()||""===this.label)},p.prototype.hasNoLabelAttribute=function(){return void 0!==this.labelless},p.prototype.hasValidNoLabelAttribute=function(){return!!this.hasNoLabelAttribute()},p.prototype.noLabelValue=function(){return!(!this.hasNoLabelAttribute()||!this.hasValidNoLabelAttribute())&&(!!x.attributeStringToBoolean(this.labelless.toString(),["true","","no-label"])||(x.attributeStringToBoolean(this.labelless.toString(),["false"]),!1))},p.prototype.hasSpecifiedNoLabelValue=function(){return!(!this.hasValidNoLabelAttribute()||""===this.labelless)},p})(f);var x=(function(){function m(){}return m.attributeStringToBoolean=function(p,h){return h.reduce((function(v,C,g,a){return v||C===p}),!1)},m.capitalizeString=function(p){return p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()},m})();n.ElementUtil=x},789:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ContextComponent=n.ContextController=void 0;var u=t(762),S=t(619),f=t(240),y=(function(m){function p(){var h=m.call(this)||this;return h.context="",h}return u.__extends(p,m),p.prototype.$onInit=function(){void 0===this.context&&(this.context="")},p.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},p})(f.BaseElement);n.ContextController=y;var x=(function(){return function(){this.bindings={disabled:"<ngDisabled",context:"@context"},this.transclude=!0,this.controller=y,this.template="<ng-transclude></ng-transclude>",this.require={contextCtrlr:"?^^pbiContext"}}})();n.ContextComponent=x,S.StyleLibrary.application().component("pbiContext",new x)},908:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f,y,m,u=t(619),S=t(240);(function(h){var v=(function(){function g(){}return g.prototype.iconClass=function(){return["glyphicon","pbi-glyph-"+this.name,"glyph-"+this.size.toString()].join(" ")},g.prototype.isCompact=function(){return!!S.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},g})();h.IconController=v;var C=function(){this.bindings={name:"@",size:"@"},this.template='<i ng-class="$ctrl.iconClass()"></i>',this.controller=v,this.require={contextCtrlr:"?^^pbiContext"}};h.IconComponent=C,u.StyleLibrary.application().component("pbiIcon",new C)})((m=(y=f||(f={})).stylelibrary||(y.stylelibrary={})).components||(m.components={}))},258:function(b,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IconSize=void 0,n.IconSize=(function(u){return u[u.Micro=0]="Micro",u[u.Mini=1]="Mini",u[u.Small=2]="Small",u[u.Normal=3]="Normal",u[u.Medium=4]="Medium",u[u.Large=5]="Large",u})(n.IconSize||{})},83:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(c){function i(){return c.call(this)||this}return u.__extends(i,c),i.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},i})(f.BaseElement);v.LinkController=C;var a=(function(c){function i(){var $=null!==c&&c.apply(this,arguments)||this;return $.require={contextCtrlr:"?pbiContext"},$}return u.__extends(i,c),i})((function(){this.bindings={id:"@",disabled:"<ngDisabled",label:"@",guid:"@"},this.controller=C,this.templateUrl="components/link/link.html"}));v.PBILinkComponent=a,S.StyleLibrary.application().component("pbiLink",new a)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={}))},576:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return u.__extends(c,a),c.prototype.proxyChange=function(){this.groupCtrlr.modelCtrlr.$setViewValue(this.value)},c.prototype.isChecked=function(){return this.groupCtrlr.proxyModel===this.value},c.prototype.isCompositeDisabled=function(){return this.isDisabled()||this.groupCtrlr.isDisabled()},c.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},c.prototype.appendInputId=function(i){return i&&i+"Input"},c})(f.BaseElement);v.RadioController=C;var g=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",value:"<ngValue"},this.require={groupCtrlr:"^^pbiRadioGroup",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/radio/radio.html",this.controller=C};v.RadioComponenet=g,S.StyleLibrary.application().component("pbiRadio",new g)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={}))},73:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return u.__extends(c,a),c.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},c})(f.BaseElement);v.RadioGroupController=C;var g=function(){this.bindings={id:"@",name:"@",label:"@",labelless:"@noLabel",disabled:"<ngDisabled",proxyModel:"<ngModel"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.transclude=!0,this.templateUrl="components/radio/radioGroup.html",this.controller=C};v.RadioGroupComponenet=g,S.StyleLibrary.application().component("pbiRadioGroup",new g)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={}))},741:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(a){function c(){return a.call(this)||this}return u.__extends(c,a),c.prototype.$onInit=function(){this.selectCtrlr.addOption(this)},c.prototype.$onDestroy=function(){this.selectCtrlr.removeOption(this)},c.prototype.isSelected=function(){return this.selectCtrlr.isOptionSelected(this)},c.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},c})(f.BaseElement);v.OptionController=C;var g=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"<noLabel",value:"<ngValue"},this.require={selectCtrlr:"^^pbiSelect",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/select/option.html",this.controller=C};v.OptionComponent=g,S.StyleLibrary.application().component("pbiOption",new g)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={}))},514:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(a){function c(){var i=a.call(this)||this;return i.options=[],i}return u.__extends(c,a),c.prototype.addOption=function(i){0===this.options.length&&(this._selectedOption=i),this.options.push(i)},c.prototype.removeOption=function(i){},c.prototype.selectItem=function(i){this._selectedOption=i},c.prototype.isOptionSelected=function(i){return this._selectedOption===i},c.prototype.proxyChange=function(){this.modelCtrlr.$setViewValue(this.proxyModel)},c.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},c})(f.BaseElement);v.SelectController=C;var g=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"<noLabel",proxyModel:"<ngModel",optionsModel:"<optionsModel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.transclude=!0,this.templateUrl="components/select/select.html",this.controller=C};v.SelectComponent=g,S.StyleLibrary.application().component("pbiSelect",new g)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={}))},466:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var x,m,h,u=t(762),S=t(619),f=t(240),y=t(994);(function(C){var g=(function(c){function i(){return c.call(this)||this}return u.__extends(i,c),i.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},i})(y.TextBaseElement);C.TextareaController=g;var a=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",proxyModel:"<ngModel",placeholder:"@",required:"@",maxlength:"@",minlength:"@",invalidMessage:"@"},this.require={modelCtrlr:"ngModel",ontextCtrlr:"?^^pbiContext"},this.templateUrl="components/textarea/textarea.html",this.controller=g};C.TextareaComponent=a,S.StyleLibrary.application().component("pbiTextarea",new a)})((h=(m=x||(x={})).stylelibrary||(m.stylelibrary={})).components||(h.components={}))},994:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TextBaseElement=void 0;var y,x,p,u=t(762),S=t(619),f=t(240);(function(v){var C=(function(c){function i(){var $=c.call(this)||this;return $.$onInit=function(){void 0===$.proxyModel&&$.modelCtrlr.$setViewValue("")},$}return u.__extends(i,c),i.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},i.prototype.proxyChange=function(){this.setCtrlrValidity(),this.modelCtrlr.$setViewValue(this.proxyModel)},i.prototype.setCtrlrValidity=function(){this.modelCtrlr.$setValidity("undefinedProxyModel",void 0!==this.proxyModel)},i.prototype.getPlaceholder=function(){return this.placeholder},i.prototype.isRequired=function(){return f.ElementUtil.attributeStringToBoolean(this.required,i.REQUIRED_VALUES)},i.prototype.maxLength=function(){return parseInt(this.maxlength,i.BASE_10)||i.INF_MAX_LENGTH},i.prototype.minLength=function(){return parseInt(this.minlength,i.BASE_10)||i.INF_MAX_LENGTH},i.prototype.getAlertKind=function(){return this.modelCtrlr.$invalid&&this.invalidMessage&&!this.isDisabled()?"error":"hidden"},i.INF_MAX_LENGTH=void 0,i.BASE_10=10,i.REQUIRED_VALUES=["required","true",""],i})(f.BaseElement);v.TextBaseElement=C;var g=(function(c){function i(){return c.call(this)||this}return u.__extends(i,c),i})(C);v.TextfieldController=g;var a=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",proxyModel:"<ngModel",placeholder:"@",required:"@",maxlength:"@",minlength:"@",invalidMessage:"@"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/textfield/textfield.html",this.controller=g};v.TextfieldComponent=a,S.StyleLibrary.application().component("pbiTextfield",new a)})((p=(x=y||(y={})).stylelibrary||(x.stylelibrary={})).components||(p.components={})),n.TextBaseElement=y.stylelibrary.components.TextBaseElement},104:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ToggleComponenet=n.ToggleController=void 0;var u=t(762),S=t(619),f=t(240),y=(function(m){function p(){var h=m.call(this)||this;return h.labelId="pbiToggle_"+Math.random().toString(36).substr(2,9),h}return u.__extends(p,m),p.prototype.proxyChange=function(){this.modelCtrlr.$setViewValue(this.proxyModel)},p.prototype.isChecked=function(){return!!this.proxyModel},p.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},p.prototype.getLabelId=function(){return this.id?this.createInternalId():this.labelId},p})(f.BaseElement);n.ToggleController=y;var x=(function(){return function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",title:"@",proxyModel:"<ngModel",arialabel:"@",ariahidden:"@",arialabelledby:"@",ariadescribedby:"@",onStateText:"@",offStateText:"@"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/toggle/toggle.html",this.controller=y}})();n.ToggleComponenet=x,S.StyleLibrary.application().component("pbiToggle",new x)},574:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t(834),t(150),t(288),t(802),t(47),t(610),t(338),t(250),t(142),t(713),t(605)},532:function(b,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t(240),t(789),t(887),t(947),t(693),t(908),t(83),t(576),t(73),t(514),t(741),t(466),t(994),t(104)},619:function(b,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StyleLibrary=void 0,n.StyleLibrary=(function(){function u(){}return u.application=function(){return u.slib},u.slib=angular.module("stylelibrary",[]),u})()},834:function(b){var t="components/alert/alert.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement alert" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<div\r\n\t\tclass="alertWrapper {{$ctrl.alertKind()}}"\r\n\t\tng-class="{\r\n\t\t\t\'group4-option1-background group4-option4-color\': ($ctrl.alertKind() === \'info\'),\r\n\t\t\t\'group4-option2-background group4-option4-color\': ($ctrl.alertKind() === \'warning\' || $ctrl.alertKind() === \'security\'),\r\n\t\t\t\'group4-option3-background group4-option5-color\': ($ctrl.alertKind() === \'error\')\r\n\t\t}"\r\n\t\tng-switch="$ctrl.kind">\r\n\r\n\t\t<pbi-icon name="{{$ctrl.iconName()}}" size="{{$ctrl.isCompact()?\'mini\':\'small\'}}"></pbi-icon>\r\n\r\n\t\t\x3c!-- conditional localization --\x3e\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="info" localize="{{$ctrl.getInfoMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="warning" localize="{{$ctrl.getWarningMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="security" localize="{{$ctrl.getSecurityMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="error" localize="{{$ctrl.getErrorMessage()}}"></p>\r\n\r\n\t</div>\r\n\r\n</div>\r\n')}]),b.exports=t},150:function(b){var t="components/button/button.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement button" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t\t<button\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\t\'primary group2-option1-background group2-option2-background-hover group2-option3-background-active\': $ctrl.isPrimary(),\r\n\t\t\t\t\t\'group2-option4-background group2-option5-background-hover group2-option6-background-active\': !$ctrl.isPrimary() && $ctrl.isBox(),\r\n\t\t\t\t\t\'group2-option8-background group2-option8-background-hover group2-option8-background-active\': $ctrl.isDisabled() && $ctrl.isBox(),\r\n\t\t\t\t\t\'group2-option10-color group2-option11-color-hover\': $ctrl.showIcon() && !$ctrl.hasLabel() && !$ctrl.isBox() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\'group2-option10-color\': $ctrl.showIcon() && !$ctrl.hasLabel() && !$ctrl.isBox() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\'group2-option13-color group2-option14-color-hover\': !$ctrl.isDisabled() && $ctrl.isText(),\r\n\t\t\t\t\t\'group2-option15-color group2-option15-color-hover\': $ctrl.isDisabled() && $ctrl.isText(),\r\n\t\t\t\t\t\'labeled-icon\': $ctrl.showIcon() && $ctrl.hasLabel(),\r\n\t\t\t\t\t\'group2-option16-color\': $ctrl.showIcon() && $ctrl.hasLabel() && !$ctrl.isBox(),\r\n\t\t\t\t\t\'box\': $ctrl.isBox(),\r\n\t\t\t\t\t\'text\': $ctrl.isText(),\r\n\t\t\t\t\t\'icon\': $ctrl.isIcon(),\r\n\t\t\t\t\t\'boxed-icon\': $ctrl.showIcon() && $ctrl.isBox()\r\n\t\t\t}"\r\n\t\t\ttype="button"\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}">\r\n\r\n\t\t\t<pbi-icon ng-if="$ctrl.showIcon()" name="{{$ctrl.iconName}}" size="{{$ctrl.iconSizeName()}}"></pbi-icon>\r\n\r\n\t\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}" dynamic-localize-update="{{::$ctrl.dynamicLabelUpdate}}"\r\n\t\t\t\taria-live="assertive"\r\n\t\t\t\tng-class="{\r\n\t\t\t\t\t\'group2-option7-color\': !$ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t\'group2-option9-color\': $ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t\'formLabel\': $ctrl.isBox() || !$ctrl.showIcon() || !$ctrl.hasLabel(),\r\n\t\t\t\t\t\'authoringPaneText\': !$ctrl.isBox() && $ctrl.showIcon() && $ctrl.hasLabel()\r\n\t\t\t\t}"\r\n\t\t\t\tclass="typeRamp"\r\n\t\t\t></label>\r\n\r\n\t\t</button>\r\n</div>\r\n')}]),b.exports=t},288:function(b){var t="components/checkbox/checkbox.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement checkbox" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="checkbox-wrapper">\r\n\t\t<input\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\ttype="checkbox"\r\n\t\t\trole="checkbox"\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}" />\r\n\r\n\t\t<span class="checkboxBox"\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option1-border group1-option6-background\': !$ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option5-border group1-option5-background checked\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option3-border group1-option3-background disabled\': $ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t>\r\n\t\t</span>\r\n\t\t<pbi-icon ng-attr-aria-hidden="true" name="checkmark" size="{{$ctrl.isCompact()?\'micro\':\'mini\'}}" class="checkboxCheck"\r\n\t\t\tng-class="{ \'group1-option7-color\': !$ctrl.isDisabled(), \'group1-option6-color\': $ctrl.isDisabled() }"\r\n\t\t></pbi-icon>\r\n\r\n\t\t<label ng-if="$ctrl.hasLabel() || $ctrl.dynamiclabel" localize="{{$ctrl.labelKey()}}"\r\n\t\t    localize-attr="{\'aria-label\': \'{{$ctrl.label}}\'}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled(), \'labelBottom\': $ctrl.labelPosition === \'bottom\' }"\r\n\t\t\tclass="typeRamp formLabel" for="{{::$ctrl.createInternalId()}}"\r\n\t\t>{{$ctrl.dynamiclabel}}</label>\r\n\t</span>\r\n</div>\r\n')}]),b.exports=t},802:function(b){var t="components/link/link.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary link">\r\n\t<a ng-href="https://go.microsoft.com/fwlink/?LinkId={{$ctrl.guid}}"\r\n\t\ttarget="_blank"\r\n\t\trel="noopener noreferrer"\r\n\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\tng-class="{\r\n\t\t\t\'group2-option13-color group2-option14-color-hover\': !$ctrl.isDisabled(),\r\n\t\t\t\'group2-option15-color group2-option15-color-hover\': $ctrl.isDisabled()\r\n\t\t}"\r\n\t>\r\n\t\t<label\r\n\t\t\tlocalize="{{$ctrl.labelKey()}}"\r\n\t\t></label>\r\n\t</a>\r\n</div>\r\n')}]),b.exports=t},47:function(b){var t="components/radio/radio.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement radio" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="radio-wrapper">\r\n\t\t<input\r\n\t\t\tid="{{$ctrl.appendInputId($ctrl.id)}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\ttype="radio"\r\n\t\t\tng-disabled="$ctrl.isCompositeDisabled()"\r\n\t\t\tng-model="$ctrl.groupCtrlr.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\tng-value="$ctrl.value"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t\t/>\r\n\r\n\t\t<span class="radioBox" ng-class="{ \'group1-option1-border group1-option6-background\': !$ctrl.isCompositeDisabled(), \'group1-option3-border\': $ctrl.isCompositeDisabled() }">\r\n\t\t\t<span class="radioButton"\r\n\t\t\t\tng-class="{ \'group1-option15-background\': $ctrl.isChecked() && !$ctrl.isCompositeDisabled(), \'group1-option9-background\': $ctrl.isChecked() && $ctrl.isCompositeDisabled() }"\r\n\t\t\t></span>\r\n\t\t</span>\r\n\r\n\t\t<label for="{{$ctrl.appendInputId($ctrl.id)}}" ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isCompositeDisabled(), \'group1-option4-color\': $ctrl.isCompositeDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t></label>\r\n\t</span>\r\n</div>\r\n')}]),b.exports=t},610:function(b){var t="components/radio/radioGroup.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement radioGroup" ng-class="{\'compact\': $ctrl.isCompact()}" role="radiogroup">\r\n\t<span class="radio-group-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t></label>\r\n\r\n\t\t<ng-transclude></ng-transclude>\r\n\r\n\t</span>\r\n\r\n</div>\r\n')}]),b.exports=t},250:function(b){var t="components/select/option.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<option \r\n    id="{{::$ctrl.createInternalId()}}"\r\n    name="{{$ctrl.label}}"\r\n    ng-class="selectOption" \r\n    value="{{$ctrl.value}}" \r\n    localize="{{$ctrl.label}}"\r\n    ng-select=$ctrl.proxyChange()>\r\n</option>')}]),b.exports=t},338:function(b){var t="components/select/select.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement select" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\r\n    <span class="select-wrapper">\r\n        <label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n            ng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n            class="typeRamp formLabel"\r\n            for="{{::$ctrl.createInternalId()}}"\r\n        ></label>\r\n\r\n        <select\r\n            id="{{::$ctrl.createInternalId()}}"\r\n            ng-model="$ctrl.proxyModel"\r\n            ng-change="$ctrl.proxyChange()"\r\n            ng-disabled="{{$ctrl.disabled}}"\r\n            ng-class="{\r\n                    \'selectLabel group1-option12-border group1-option6-background group1-option1-border-hover group1-option5-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n                    \'selectLabel group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled()\r\n                }"\r\n            class="typeRamp formLabel"\r\n            ng-attr-aria-label="{{$ctrl.arialabel}}"\r\n            ng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n            ng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n            >\r\n\r\n            <option\r\n                ng-if="$ctrl.options != null"\r\n                ng-repeat="option in $ctrl.options"\r\n                id="{{option.id}}"\r\n                name="{{option.label}}"\r\n                ng-class="selectOption"\r\n                class="typeRamp formLabel"\r\n                value="{{option.value}}"\r\n                localize="{{option.label}}"\r\n                ng-disabled="{{option.disabled}}">\r\n            </option>\r\n\r\n            <option\r\n                ng-repeat="option in $ctrl.optionsModel"\r\n                id="{{option.id}}"\r\n                name="{{option.label}}"\r\n                ng-class="selectOption"\r\n                class="typeRamp formLabel"\r\n                value="{{option.value}}"\r\n                localize="{{option.label}}"\r\n                ng-disabled="{{option.disabled}}">\r\n            </option>\r\n        </select>\r\n\r\n        <ng-transclude ng-hide="true"></ng-transclude>\r\n\r\n        <div class="expander">\r\n            <pbi-icon name="chevrondownmedium"\r\n                size="{{\'mini\'}}"\r\n                ng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n                >\r\n            </pbi-icon>\r\n        </div>\r\n    </span>\r\n\r\n</div>\r\n')}]),b.exports=t},142:function(b){var t="components/textarea/textarea.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement textarea">\r\n\t<span class="textarea-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t\t<span ng-if="$ctrl.isRequired() && !$ctrl.isDisabled()" class="required-asterisk group1-option13-color formLabel">*</span>\r\n\t\t<textarea\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\tplaceholder="{{$ctrl.getPlaceholder()}}"\r\n\t\t\tmaxlength="{{$ctrl.maxLength()}}"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-required="$ctrl.isRequired()"\r\n\t\t\tng-maxlength="$ctrl.maxLength()"\r\n\t\t\tng-minlength="$ctrl.minLength()"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option12-border group1-option6-background group1-option1-border-hover group1-option5-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option13-border group1-option13-border-hover group1-option13-border-focus\': $ctrl.modelCtrlr.$invalid && !$ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t></textarea>\r\n\t\t</textarea>\r\n\r\n\t\t<pbi-alert\r\n\t\t\tkind="$ctrl.getAlertKind()"\r\n\t\t\tmessage-error="{{$ctrl.invalidMessage}}"\r\n\t\t></pbi-alert>\r\n\r\n\t</span>\r\n</div>\r\n')}]),b.exports=t},713:function(b){var t="components/textfield/textfield.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement textfield" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="textfield-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t\t<span ng-if="$ctrl.isRequired() && !$ctrl.isDisabled()" class="required-asterisk group1-option13-color typeRamp formLabel">*</span>\r\n\t\t<input\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\ttype="text"\r\n\r\n\t\t\tlocalize-attr="{placeholder: $ctrl.getPlaceholder()}"\r\n\t\t\tplaceholder="{{$ctrl.getPlaceholder()}}"\r\n\t\t\tmaxlength="{{$ctrl.maxLength()}}"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-required="$ctrl.isRequired()"\r\n\t\t\tng-maxlength="$ctrl.maxLength()"\r\n\t\t\tng-minlength="$ctrl.minLength()"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option12-border group1-option6-background group1-option14-border-hover group1-option14-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option13-border group1-option13-border-hover group1-option13-border-focus\': $ctrl.modelCtrlr.$invalid && !$ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t/>\r\n\t\t</input>\r\n\r\n\t\t<pbi-alert\r\n\t\t\tkind="$ctrl.getAlertKind()"\r\n\t\t\tmessage-error="{{$ctrl.invalidMessage}}"\r\n\t\t></pbi-alert>\r\n\r\n\t</span>\r\n\r\n</div>\r\n')}]),b.exports=t},605:function(b){var t="components/toggle/toggle.html";window.angular.module("stylelibrary").run(["$templateCache",function(u){u.put(t,'<div class="styleLibrary formElement toggle"\r\n ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="toggle-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t></label>\r\n\r\n\t\t<span class="inner-toggle-wrapper">\r\n\t\t\t<input\r\n\t\t\t\tid="{{::$ctrl.getLabelId()}}"\r\n\t\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\t\ttype="checkbox"\r\n\t\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\t\ttitle="{{$ctrl.title}}" \r\n\t\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t\t\trole="button"\r\n\t\t\t\taria-label="{{$ctrl.arialabel}}"\r\n\t\t\t\taria-hidden="{{$ctrl.ariahidden ? \'true\' : \'false\'}}"\r\n\t\t\t\ttabindex="{{$ctrl.ariahidden === \'true\' ? \'-1\' : \'1\'}}"\r\n\t\t\t\taria-pressed="$ctrl.isChecked()"/>\r\n\r\n\t\t\t<span class="toggleBox"\r\n\t\t\t\tng-class="{\r\n\t\t\t\t\t\t\'group1-option1-border group1-option6-background\': !$ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option5-border group1-option5-background\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option3-border\': !$ctrl.isChecked() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option3-border group1-option3-background\': $ctrl.isChecked() && $ctrl.isDisabled()\r\n\t\t\t\t}">\r\n\t\t\t\t<span class="toggleHandle"\r\n\t\t\t\t\tng-class="{\r\n\t\t\t\t\t\t\'group1-option16-background\': !$ctrl.isChecked() && !ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option8-background\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option9-background\': !$ctrl.isChecked() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option11-background\': $ctrl.isChecked() && $ctrl.isDisabled()\r\n\t\t\t\t\t}">\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\r\n\t\t\t<label ng-if="$ctrl.isChecked()" localize="{{::$ctrl.onStateText}}" class="toggleState typeRamp formLabel"\r\n\t\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t\t></label>\r\n\t\t\t<label ng-if="!$ctrl.isChecked()" localize="{{::$ctrl.offStateText}}" class="toggleState typeRamp formLabel"\r\n\t\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t\t></label>\r\n\t\t</span>\r\n\t</span>\r\n</div>')}]),b.exports=t}},H={};function T(b){var n=H[b];if(void 0!==n)return n.exports;var t=H[b]={exports:{}};return W[b](t,t.exports,T),t.exports}T.d=function(b,n){for(var t in n)T.o(n,t)&&!T.o(b,t)&&Object.defineProperty(b,t,{enumerable:!0,get:n[t]})},T.o=function(b,n){return Object.prototype.hasOwnProperty.call(b,n)},T.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var F={};(function(){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),T(619),T(532),T(574)})(),window.stylelibrary=F})();
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] || (this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] = {});
marker.endEval = window.jsCommon && window.jsCommon.performance && window.jsCommon.performance.now ? window.jsCommon.performance.now() : Date.now(); marker.isExternal = false;
